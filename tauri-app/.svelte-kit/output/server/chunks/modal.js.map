{"version":3,"file":"modal.js","sources":["../../../../../node_modules/flowbite-svelte/dist/button-group/ButtonGroup.svelte","../../../../../node_modules/flowbite-svelte/dist/forms/InputAddon.svelte","../../../../../packages/ui-components/dist/components/TanstackAppTable.svelte","../../../../../packages/ui-components/dist/providers/wallet/useAccount.js","../../../../../packages/ui-components/dist/queries/constants.js","../../../../../packages/ui-components/dist/queries/keys.js","../../../../../packages/ui-components/dist/components/input/InputTokenAmount.svelte","../../../../src/lib/services/vault.ts","../../../../src/lib/components/ModalVaultDeposit.svelte","../../../../src/lib/components/ModalVaultWithdraw.svelte","../../../../src/lib/components/modal/ModalOrderRemove.svelte","../../../../src/lib/queries/tradeDebug.ts","../../../../src/lib/components/debug/EvalResultsTable.svelte","../../../../src/lib/components/modal/ModalTradeDebug.svelte","../../../../src/lib/queries/orderQuote.ts","../../../../src/lib/components/modal/ModalQuoteDebug.svelte","../../../../src/lib/services/modal.ts"],"sourcesContent":["<script>import { setContext } from 'svelte';\nimport { twMerge } from 'tailwind-merge';\nexport let size = 'md';\nexport let divClass = 'inline-flex rounded-lg shadow-sm';\nsetContext('group', { size });\n</script>\n\n<div {...$$restProps} class={twMerge(divClass, $$props.class)} role=\"group\">\n  <slot />\n</div>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte.com/)\n## Props\n@prop export let size: SizeType = 'md';\n@prop export let divClass: string = 'inline-flex rounded-lg shadow-sm';\n-->\n","<script>import { twMerge } from 'tailwind-merge';\nimport { getContext } from 'svelte';\nimport { clampSize } from './Input.svelte';\nexport let size = undefined;\n// tinted if put in component having its own background\nlet background = getContext('background');\nlet group = getContext('group');\nconst borderClasses = {\n    base: 'border-gray-300 dark:border-gray-600',\n    tinted: 'border-gray-300 dark:border-gray-500'\n};\nconst darkBgClasses = {\n    base: 'dark:bg-gray-600 dark:text-gray-400',\n    tinted: 'dark:bg-gray-500 dark:text-gray-300'\n};\nconst divider = {\n    base: 'dark:border-e-gray-700 dark:last:border-e-gray-600',\n    tinted: 'dark:border-e-gray-600 dark:last:border-e-gray-500'\n};\nconst textSizes = { sm: 'sm:text-xs', md: 'text-sm', lg: 'sm:text-base' };\nconst prefixPadding = { sm: 'px-2', md: 'px-3', lg: 'px-4' };\n// size: explicit, inherited, default\n$: _size = size || clampSize(group?.size) || 'md';\n$: divClass = twMerge(textSizes[_size], prefixPadding[_size], background ? borderClasses['tinted'] : borderClasses['base'], 'text-gray-500 bg-gray-200', background ? darkBgClasses.tinted : darkBgClasses.base, background ? divider.tinted : divider.base, 'inline-flex items-center border-t border-b first:border-s border-e', 'first:rounded-s-lg last:rounded-e-lg', $$props.class);\n</script>\n\n<div {...$$restProps} class={divClass}>\n  <slot />\n</div>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte.com/)\n## Props\n@prop export let size: 'sm' | 'md' | 'lg' | undefined = undefined;\n-->\n","<script generics=\"DataItem, InputData = DataItem[]\">import { invalidateTanstackQueries } from \"../queries/queryClient\";\nimport Refresh from \"./icon/Refresh.svelte\";\nimport { Button, Table, TableBody, TableBodyRow, TableHead } from \"flowbite-svelte\";\nimport { afterUpdate, createEventDispatcher, onDestroy, onMount } from \"svelte\";\nimport { useQueryClient } from \"@tanstack/svelte-query\";\nimport { createWindowVirtualizer } from \"@tanstack/svelte-virtual\";\nconst queryClient = useQueryClient();\nconst dispatch = createEventDispatcher();\nexport let queryKey;\nexport let query;\nexport let emptyMessage = \"None found\";\nexport let rowHoverable = true;\nexport let dataSelector = (pageData) => Array.isArray(pageData) ? pageData : [];\nexport let virtualization = {};\n$: enableVirtualization = virtualization.enabled ?? true;\n$: estimatedRowHeight = virtualization.estimatedRowHeight ?? 56;\n$: virtualizationOverscan = virtualization.overscan ?? 8;\nlet measuredRowHeight = null;\n$: rowHeight = measuredRowHeight ?? estimatedRowHeight;\nlet transformedPages = [];\nlet lastPagesRef;\nlet lastSelector = dataSelector;\n$: {\n  const currentData = $query.data;\n  const currentPages = currentData?.pages;\n  const selectorChanged = lastSelector !== dataSelector;\n  if (!currentPages) {\n    transformedPages = [];\n    lastPagesRef = void 0;\n    lastSelector = dataSelector;\n  } else if (currentPages !== lastPagesRef || selectorChanged) {\n    transformedPages = currentPages.map((page) => dataSelector(page));\n    lastPagesRef = currentPages;\n    lastSelector = dataSelector;\n  }\n}\n$: flattenedRows = transformedPages.flat();\n$: totalRows = flattenedRows.length;\n$: hasData = totalRows > 0;\nconst hasWindow = typeof window !== \"undefined\";\nlet tableContainerElement = null;\nlet tableOffsetTop = 0;\nlet virtualizerStore = null;\nlet virtualizer = null;\nlet unsubscribeVirtualizer = null;\nlet virtualizationActive = false;\nfunction updateTableOffset() {\n  if (!enableVirtualization || !hasWindow || !tableContainerElement) {\n    tableOffsetTop = 0;\n    return;\n  }\n  const rect = tableContainerElement.getBoundingClientRect();\n  tableOffsetTop = rect.top + window.scrollY;\n}\nonMount(() => {\n  if (!hasWindow) {\n    return;\n  }\n  virtualizerStore = createWindowVirtualizer({\n    count: totalRows,\n    estimateSize: () => rowHeight,\n    overscan: virtualizationOverscan,\n    scrollMargin: tableOffsetTop,\n    getItemKey: (index) => index,\n    enabled: enableVirtualization && totalRows > 0\n  });\n  unsubscribeVirtualizer = virtualizerStore.subscribe((instance) => {\n    virtualizer = instance;\n  });\n  updateTableOffset();\n  return () => {\n    unsubscribeVirtualizer?.();\n  };\n});\nafterUpdate(() => {\n  if (enableVirtualization) {\n    updateTableOffset();\n  }\n});\n$: if (virtualizer) {\n  virtualizer.setOptions({\n    count: totalRows,\n    estimateSize: () => rowHeight,\n    overscan: virtualizationOverscan,\n    scrollMargin: tableOffsetTop,\n    getItemKey: (index) => index,\n    enabled: enableVirtualization && totalRows > 0\n  });\n}\n$: virtualizationActive = enableVirtualization && Boolean(virtualizer);\nlet virtualItems = [];\nlet totalSize = 0;\nlet topPadding = 0;\nlet bottomPadding = 0;\nlet scrollMargin = 0;\n$: {\n  const hasRows = totalRows > 0;\n  scrollMargin = virtualizationActive ? tableOffsetTop : 0;\n  if (virtualizationActive && virtualizer && hasRows) {\n    virtualItems = virtualizer.getVirtualItems();\n    totalSize = virtualizer.getTotalSize();\n    const firstItem = virtualItems[0];\n    const lastItem = virtualItems[virtualItems.length - 1];\n    topPadding = firstItem ? Math.max(0, firstItem.start - scrollMargin) : 0;\n    bottomPadding = lastItem ? Math.max(0, totalSize - (lastItem.end - scrollMargin)) : Math.max(0, totalSize);\n  } else {\n    virtualItems = [];\n    totalSize = 0;\n    topPadding = 0;\n    bottomPadding = 0;\n  }\n}\nonDestroy(() => {\n  unsubscribeVirtualizer?.();\n});\nafterUpdate(() => {\n  if (!virtualizationActive || !virtualizer || !tableContainerElement) {\n    return;\n  }\n  const rows = Array.from(\n    tableContainerElement.querySelectorAll('tbody tr[data-virtual-row=\"true\"]')\n  );\n  if (!rows.length) {\n    return;\n  }\n  for (const row of rows) {\n    virtualizer.measureElement(row);\n  }\n  if (measuredRowHeight === null) {\n    const sampleHeight = rows[0].getBoundingClientRect().height;\n    if (sampleHeight > 0) {\n      measuredRowHeight = sampleHeight;\n    }\n  }\n});\n</script>\n\n<div data-testid=\"title\" class=\"flex h-16 w-full items-center justify-end\">\n\t<slot name=\"info\" />\n\t<slot name=\"timeFilter\" />\n\t<slot name=\"title\" />\n\t<Refresh\n\t\tclass=\"ml-2 h-8 w-5 cursor-pointer text-gray-400 dark:text-gray-400\"\n\t\tdata-testid=\"refreshButton\"\n\t\tspin={$query.isLoading || $query.isFetching}\n\t\ton:click={async () => {\n\t\t\tif (queryKey) {\n\t\t\t\tinvalidateTanstackQueries(queryClient, [queryKey]);\n\t\t\t}\n\t\t}}\n\t/>\n</div>\n{#if totalRows === 0}\n\t<div data-testid=\"emptyMessage\" class=\"text-center text-gray-900 dark:text-white\">\n\t\t{emptyMessage}\n\t</div>\n{:else if hasData}\n\t<div\n\t\tclass=\"cursor-pointer overflow-x-auto rounded-lg border dark:border-none\"\n\t\tdata-testid=\"tanstackTableContainer\"\n\t\tbind:this={tableContainerElement}\n\t>\n\t\t<Table divClass=\"min-w-full\" hoverable={rowHoverable}>\n\t\t\t<TableHead data-testid=\"head\">\n\t\t\t\t<slot name=\"head\" />\n\t\t\t</TableHead>\n\t\t\t<TableBody>\n\t\t\t\t{#if virtualizationActive && topPadding > 0}\n\t\t\t\t\t<tr aria-hidden=\"true\">\n\t\t\t\t\t\t<td colspan=\"1000\" class=\"border-0 p-0\" style={`height:${topPadding}px;`} />\n\t\t\t\t\t</tr>\n\t\t\t\t{/if}\n\t\t\t\t{#if virtualizationActive}\n\t\t\t\t\t{#each virtualItems as virtualItem (virtualItem.key)}\n\t\t\t\t\t\t<TableBodyRow\n\t\t\t\t\t\t\tclass=\"whitespace-nowrap\"\n\t\t\t\t\t\t\tdata-testid=\"bodyRow\"\n\t\t\t\t\t\t\tdata-virtual-row=\"true\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tdispatch('clickRow', { item: flattenedRows[virtualItem.index] });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<slot name=\"bodyRow\" item={flattenedRows[virtualItem.index]} />\n\t\t\t\t\t\t</TableBodyRow>\n\t\t\t\t\t{/each}\n\t\t\t\t{:else}\n\t\t\t\t\t{#each transformedPages as page}\n\t\t\t\t\t\t{#each page as item}\n\t\t\t\t\t\t\t<TableBodyRow\n\t\t\t\t\t\t\t\tclass=\"whitespace-nowrap\"\n\t\t\t\t\t\t\t\tdata-testid=\"bodyRow\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tdispatch('clickRow', { item });\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<slot name=\"bodyRow\" {item} />\n\t\t\t\t\t\t\t</TableBodyRow>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t{/each}\n\t\t\t\t{/if}\n\t\t\t\t{#if virtualizationActive && bottomPadding > 0}\n\t\t\t\t\t<tr aria-hidden=\"true\">\n\t\t\t\t\t\t<td colspan=\"1000\" class=\"border-0 p-0\" style={`height:${bottomPadding}px;`} />\n\t\t\t\t\t</tr>\n\t\t\t\t{/if}\n\t\t\t</TableBody>\n\t\t</Table>\n\t</div>\n\t<div class=\"mt-2 flex justify-center\">\n\t\t<Button\n\t\t\tdata-testid=\"loadMoreButton\"\n\t\t\tsize=\"xs\"\n\t\t\tcolor=\"dark\"\n\t\t\ton:click={() => $query.fetchNextPage()}\n\t\t\tdisabled={!$query.hasNextPage || $query.isFetchingNextPage}\n\t\t>\n\t\t\t{#if $query.isFetchingNextPage}\n\t\t\t\tLoading more...\n\t\t\t{:else if $query.hasNextPage}\n\t\t\t\tLoad More\n\t\t\t{:else}Nothing more to load{/if}\n\t\t</Button>\n\t</div>\n{/if}\n","import { get } from 'svelte/store';\nimport { isAddress, isAddressEqual } from 'viem';\nimport { getAccountContext } from './context';\nimport { readable } from 'svelte/store';\n/**\n * Hook to access wallet account information from context\n * Must be used within a component that is a child of WalletProvider\n */\nexport function useAccount() {\n    /**\n     * The account store containing the current wallet address (as a Hex string) or null if not connected.\n     * This is a readable Svelte store that can be subscribed to for reactive updates.\n     * @type {import('svelte/store').Readable<Hex | null>}\n     */\n    const account = getAccountContext();\n    /**\n     * Checks if the provided address matches the currently connected account.\n     * Returns false if no account is connected or if the provided address is invalid.\n     */\n    const matchesAccount = (otherAddress) => {\n        if (!otherAddress)\n            return false;\n        const currentAccount = get(account);\n        if (!currentAccount) {\n            return false;\n        }\n        if (isAddress(currentAccount) &&\n            isAddress(otherAddress) &&\n            isAddressEqual(currentAccount, otherAddress)) {\n            return true;\n        }\n        return false;\n    };\n    return {\n        account,\n        matchesAccount\n    };\n}\nif (import.meta.vitest) {\n    const { describe, it, expect, vi, beforeEach } = import.meta.vitest;\n    vi.mock('viem', async () => {\n        const actual = await vi.importActual('viem');\n        return {\n            ...actual,\n            isAddress: vi.fn(),\n            isAddressEqual: vi.fn()\n        };\n    });\n    vi.mock('./context', () => ({\n        getAccountContext: vi.fn()\n    }));\n    vi.mock('svelte/store', async () => {\n        const actual = await vi.importActual('svelte/store');\n        return {\n            ...actual,\n            get: vi.fn()\n        };\n    });\n    describe('useAccount', () => {\n        const mockGetAccountContext = vi.mocked(getAccountContext);\n        const mockGet = vi.mocked(get);\n        const mockIsAddress = vi.mocked(isAddress);\n        const mockIsAddressEqual = vi.mocked(isAddressEqual);\n        beforeEach(() => {\n            vi.clearAllMocks();\n        });\n        it('should return account wrapped in an object', () => {\n            const mockAccountStore = readable('0x123');\n            mockGetAccountContext.mockReturnValue(mockAccountStore);\n            const result = useAccount();\n            expect(mockGetAccountContext).toHaveBeenCalled();\n            expect(result.account).toBe(mockAccountStore);\n            expect(result.matchesAccount).toBeInstanceOf(Function);\n        });\n        describe('matchesAccount', () => {\n            const mockAccountStore = readable('0x123');\n            const currentAccount = '0x123';\n            const testAddress1 = '0x123';\n            const testAddress2 = '0xdef';\n            const invalidAddress = 'invalid';\n            beforeEach(() => {\n                mockGetAccountContext.mockReturnValue(mockAccountStore);\n            });\n            it('should return true if addresses are valid and equal', () => {\n                // Setup mocks\n                mockGet.mockReturnValue(currentAccount);\n                mockIsAddress.mockReturnValue(true);\n                mockIsAddressEqual.mockReturnValue(true);\n                const { matchesAccount } = useAccount();\n                const result = matchesAccount(testAddress1);\n                expect(mockGet).toHaveBeenCalledWith(mockAccountStore);\n                expect(mockIsAddress).toHaveBeenCalledWith(currentAccount);\n                expect(mockIsAddress).toHaveBeenCalledWith(testAddress1);\n                expect(mockIsAddressEqual).toHaveBeenCalledWith(currentAccount, testAddress1);\n                expect(result).toBe(true);\n            });\n            it('should return false if addresses are valid but not equal', () => {\n                // Setup mocks\n                mockGet.mockReturnValue(currentAccount);\n                mockIsAddress.mockReturnValue(true);\n                mockIsAddressEqual.mockReturnValue(false);\n                const { matchesAccount } = useAccount();\n                const result = matchesAccount(testAddress2);\n                expect(mockGet).toHaveBeenCalledWith(mockAccountStore);\n                expect(mockIsAddress).toHaveBeenCalledWith(currentAccount);\n                expect(mockIsAddress).toHaveBeenCalledWith(testAddress2);\n                expect(mockIsAddressEqual).toHaveBeenCalledWith(currentAccount, testAddress2);\n                expect(result).toBe(false);\n            });\n            it('should return false if current account is not set', () => {\n                // Setup mocks\n                mockGet.mockReturnValue(null);\n                const { matchesAccount } = useAccount();\n                const result = matchesAccount(testAddress1);\n                expect(mockGet).toHaveBeenCalledWith(mockAccountStore);\n                expect(mockIsAddress).not.toHaveBeenCalled();\n                expect(mockIsAddressEqual).not.toHaveBeenCalled();\n                expect(result).toBe(false);\n            });\n            it('should return false if provided address is invalid', () => {\n                // Setup mocks\n                mockGet.mockReturnValue(currentAccount);\n                // This is crucial: we need to ensure short-circuit evaluation works correctly\n                mockIsAddress.mockImplementation((address) => {\n                    return address !== invalidAddress; // Only the invalid address returns false\n                });\n                // This should never be called due to short-circuit evaluation\n                mockIsAddressEqual.mockReturnValue(false);\n                const { matchesAccount } = useAccount();\n                const result = matchesAccount(invalidAddress);\n                expect(mockGet).toHaveBeenCalledWith(mockAccountStore);\n                expect(mockIsAddress).toHaveBeenCalledWith(currentAccount);\n                expect(mockIsAddress).toHaveBeenCalledWith(invalidAddress);\n                expect(mockIsAddressEqual).not.toHaveBeenCalled(); // This should now pass\n                expect(result).toBe(false);\n            });\n            it('should return false if provided address is null', () => {\n                // Setup mocks\n                mockGet.mockReturnValue(currentAccount);\n                const { matchesAccount } = useAccount();\n                const result = matchesAccount(null);\n                expect(mockIsAddress).not.toHaveBeenCalled();\n                expect(mockIsAddressEqual).not.toHaveBeenCalled();\n                expect(result).toBe(false);\n            });\n        });\n    });\n}\n","export const DEFAULT_PAGE_SIZE = 50;\nexport const DEFAULT_REFRESH_INTERVAL = 10000;\n","export const QKEY_VAULTS = 'vaults';\nexport const QKEY_VAULT = 'vault';\nexport const QKEY_VAULT_CHANGES = 'vaultBalanceChanges';\nexport const QKEY_ORDERS = 'orders';\nexport const QKEY_ORDER = 'order';\nexport const QKEY_ORDER_TRADES_LIST = 'orderTradesList';\nexport const QKEY_ORDER_QUOTE = 'orderQuote';\nexport const QKEY_VAULTS_VOL_LIST = 'orderVaultsVolumeList';\nexport const QKEY_ORDER_APY = 'orderApy';\nexport const QKEY_TOKENS = 'tokens';\n","<script>import { InputAddon, Button } from \"flowbite-svelte\";\nimport { Float } from \"@rainlanguage/orderbook\";\nexport let symbol = void 0;\nexport let maxValue = void 0;\nexport let value = Float.parse(\"0\").value;\nlet inputValue = \"\";\nfunction handleInput(event) {\n  const input = event.target;\n  inputValue = input.value;\n  if (inputValue === \"\") {\n    value = Float.parse(\"0\").value;\n  } else {\n    let parsedValue = Float.parse(inputValue);\n    if (parsedValue.error) {\n      value = Float.parse(\"0\").value;\n      return;\n    }\n    value = parsedValue.value;\n  }\n}\nfunction fillMaxValue() {\n  if (!maxValue) return;\n  value = maxValue;\n  let formattedValue = value.format().value;\n  if (!formattedValue) {\n    inputValue = \"\";\n    return;\n  }\n  inputValue = formattedValue;\n}\n</script>\n\n<div class=\"w-full\">\n\t<div class=\"flex w-full\">\n\t\t<div class=\"relative flex w-full\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass={`focus:border-primary-500 focus:ring-primary-500 dark:focus:border-primary-500 dark:focus:ring-primary-500 block w-full rounded-lg border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 disabled:cursor-not-allowed disabled:opacity-50 rtl:text-right dark:border-gray-500 dark:bg-gray-600 dark:text-white dark:placeholder-gray-400 ${symbol && '!rounded-none !rounded-l-lg'}`}\n\t\t\t\tbind:value={inputValue}\n\t\t\t\ton:input={handleInput}\n\t\t\t/>\n\n\t\t\t{#if maxValue}\n\t\t\t\t<div class=\"absolute right-2 flex h-10 flex-col justify-center\">\n\t\t\t\t\t<Button color=\"blue\" class=\"px-2 py-1\" size=\"xs\" pill on:click={fillMaxValue}>MAX</Button>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t{#if symbol}\n\t\t\t<InputAddon>\n\t\t\t\t<span class=\"whitespace-nowrap\">\n\t\t\t\t\t{symbol}\n\t\t\t\t</span>\n\t\t\t</InputAddon>\n\t\t{/if}\n\t</div>\n</div>\n","import { get } from 'svelte/store';\nimport { invoke } from '@tauri-apps/api';\nimport { ledgerWalletDerivationIndex } from '$lib/stores/wallets';\nimport { walletConnectNetwork } from '$lib/stores/walletconnect';\nimport type { Float, RaindexClient, RaindexVault } from '@rainlanguage/orderbook';\n\nexport async function vaultDeposit(\n  raindexClient: RaindexClient,\n  vault: RaindexVault,\n  amount: Float,\n) {\n  const chainId = get(walletConnectNetwork);\n  const network = raindexClient.getNetworkByChainId(chainId);\n  if (network.error) {\n    throw new Error(network.error.readableMsg);\n  }\n\n  await invoke('vault_deposit', {\n    depositArgs: {\n      vault_id: vault.vaultId.toString(),\n      token: vault.token.address,\n      amount: amount.toString(),\n    },\n    transactionArgs: {\n      rpcs: network.value.rpcs,\n      orderbook_address: vault.orderbook,\n      derivation_index: get(ledgerWalletDerivationIndex),\n      chain_id: chainId,\n    },\n  });\n}\n\nexport async function vaultWithdraw(\n  raindexClient: RaindexClient,\n  vault: RaindexVault,\n  targetAmount: Float,\n) {\n  const chainId = get(walletConnectNetwork);\n  const network = raindexClient.getNetworkByChainId(chainId);\n  if (network.error) {\n    throw new Error(network.error.readableMsg);\n  }\n\n  await invoke('vault_withdraw', {\n    chainId,\n    withdrawArgs: {\n      vault_id: vault.vaultId.toString(),\n      token: vault.token.address,\n      target_amount: targetAmount.toString(),\n    },\n    transactionArgs: {\n      rpcs: network.value.rpcs,\n      orderbook_address: vault.orderbook,\n      derivation_index: get(ledgerWalletDerivationIndex),\n      chain_id: chainId,\n    },\n  });\n}\n\nexport async function vaultDepositCalldata(vaultId: bigint, token: string, amount: Float) {\n  return await invoke('vault_deposit_calldata', {\n    depositArgs: {\n      vault_id: vaultId.toString(),\n      token,\n      amount,\n    },\n  });\n}\n","<script lang=\"ts\">\n  import { Button, Modal, Label, ButtonGroup } from 'flowbite-svelte';\n  import { Float, type AccountBalance, type RaindexVault } from '@rainlanguage/orderbook';\n  import { vaultDeposit } from '$lib/services/vault';\n  import { InputTokenAmount, useRaindexClient } from '@rainlanguage/ui-components';\n  import { ethersExecute } from '$lib/services/ethersTx';\n  import { toasts } from '$lib/stores/toasts';\n  import ModalExecute from './ModalExecute.svelte';\n  import { formatEthersTransactionError } from '$lib/utils/transaction';\n  import { reportErrorToSentry } from '$lib/services/sentry';\n  import { hexToBytes, toHex } from 'viem';\n  import { onMount } from 'svelte';\n\n  const raindexClient = useRaindexClient();\n\n  export let open = false;\n  export let vault: RaindexVault;\n  export let onDeposit: () => void;\n\n  let amount: Float;\n  let isSubmitting = false;\n  let selectWallet = false;\n  let userBalance: AccountBalance = {\n    balance: Float.parse('0').value,\n    formattedBalance: '0',\n  } as unknown as AccountBalance;\n\n  function reset() {\n    open = false;\n    if (!isSubmitting) {\n      amount = Float.parse('0').value as Float;\n      selectWallet = false;\n    }\n  }\n\n  async function executeLedger() {\n    isSubmitting = true;\n    try {\n      await vaultDeposit(raindexClient, vault, amount);\n      onDeposit();\n    } catch (e) {\n      reportErrorToSentry(e);\n    }\n    isSubmitting = false;\n    reset();\n  }\n\n  async function executeWalletconnect() {\n    isSubmitting = true;\n    try {\n      const allowance = await vault.getAllowance();\n      if (allowance.error) {\n        throw new Error(allowance.error.readableMsg);\n      }\n      let allowanceFloat = Float.parse(allowance.value);\n      if (allowanceFloat.error) {\n        throw new Error(allowanceFloat.error.readableMsg);\n      }\n\n      if (allowanceFloat.value.lt(amount).value) {\n        const calldata = await vault.getApprovalCalldata(amount);\n        if (calldata.error) {\n          throw new Error(calldata.error.readableMsg);\n        }\n        const approveTx = await ethersExecute(hexToBytes(calldata.value), vault.token.address);\n        toasts.success('Approve Transaction sent successfully!');\n        await approveTx.wait(1);\n      }\n\n      const calldata = await vault.getDepositCalldata(amount);\n      if (calldata.error) {\n        throw new Error(calldata.error.readableMsg);\n      }\n      const depositTx = await ethersExecute(hexToBytes(calldata.value), vault.orderbook);\n      toasts.success('Transaction sent successfully!');\n      await depositTx.wait(1);\n      onDeposit();\n    } catch (e) {\n      reportErrorToSentry(e);\n      toasts.error(formatEthersTransactionError(e));\n    }\n    isSubmitting = false;\n    reset();\n  }\n\n  async function fetchUserBalance() {\n    const balance = await vault.getOwnerBalance();\n    if (balance.error) {\n      throw new Error(balance.error.readableMsg);\n    }\n    userBalance = balance.value;\n  }\n\n  onMount(() => {\n    fetchUserBalance();\n  });\n</script>\n\n{#if !selectWallet}\n  <Modal title=\"Deposit to Vault\" bind:open outsideclose size=\"sm\" on:close={reset}>\n    <div>\n      <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n        Vault ID\n      </h5>\n      <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n        {toHex(vault.vaultId)}\n      </p>\n    </div>\n\n    <div>\n      <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n        Token\n      </h5>\n      <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n        {vault.token.name}\n      </p>\n    </div>\n\n    <div>\n      <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n        Owner\n      </h5>\n      <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n        {vault.owner}\n      </p>\n    </div>\n\n    <div class=\"flex justify-between\">\n      <div class=\"w-1/2\">\n        <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n          Your Balance\n        </h5>\n        <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n          {userBalance.formattedBalance}\n        </p>\n      </div>\n      <div class=\"w-1/2\">\n        <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n          Vault Balance\n        </h5>\n        <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n          {vault.formattedBalance}\n        </p>\n      </div>\n    </div>\n\n    <div class=\"mb-6\">\n      <Label\n        for=\"amount\"\n        class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\"\n      >\n        Amount\n      </Label>\n      <ButtonGroup class=\"w-full\">\n        <InputTokenAmount\n          bind:value={amount}\n          symbol={vault.token.symbol}\n          maxValue={userBalance.balance}\n        />\n      </ButtonGroup>\n    </div>\n    <div class=\"flex w-full justify-end space-x-4\">\n      <Button color=\"alternative\" on:click={reset} disabled={isSubmitting}>Cancel</Button>\n      <Button\n        on:click={() => {\n          selectWallet = true;\n          open = false;\n        }}\n        disabled={!amount || amount.isZero().value || isSubmitting}\n      >\n        Proceed\n      </Button>\n    </div>\n  </Modal>\n{/if}\n\n<ModalExecute\n  chainId={vault.chainId}\n  bind:open={selectWallet}\n  onBack={() => (open = true)}\n  title=\"Deposit to Vault\"\n  execButtonLabel=\"Deposit\"\n  {executeLedger}\n  {executeWalletconnect}\n  bind:isSubmitting\n/>\n","<script lang=\"ts\">\n  import { Button, Modal, Label, Helper } from 'flowbite-svelte';\n  import { Float, type RaindexVault } from '@rainlanguage/orderbook';\n  import { vaultWithdraw } from '$lib/services/vault';\n  import { InputTokenAmount, useRaindexClient } from '@rainlanguage/ui-components';\n  import { ethersExecute } from '$lib/services/ethersTx';\n  import { toasts } from '$lib/stores/toasts';\n  import ModalExecute from './ModalExecute.svelte';\n  import { reportErrorToSentry } from '$lib/services/sentry';\n  import { formatEthersTransactionError } from '$lib/utils/transaction';\n  import { hexToBytes, toHex } from 'viem';\n\n  const raindexClient = useRaindexClient();\n\n  export let open = false;\n  export let vault: RaindexVault;\n  export let onWithdraw: () => void;\n\n  let amount: Float = Float.parse('0').value as Float;\n  let amountGTBalance: boolean;\n  let isSubmitting = false;\n  let selectWallet = false;\n\n  $: amountGTBalance = amount ? !!amount.gt(vault.balance).value : false;\n\n  function reset() {\n    open = false;\n    if (!isSubmitting) {\n      amount = Float.parse('0').value as Float;\n      selectWallet = false;\n    }\n  }\n\n  async function executeLedger() {\n    isSubmitting = true;\n    try {\n      await vaultWithdraw(raindexClient, vault, amount);\n      onWithdraw();\n    } catch (e) {\n      reportErrorToSentry(e);\n    }\n    isSubmitting = false;\n    reset();\n  }\n\n  async function executeWalletconnect() {\n    isSubmitting = true;\n    try {\n      const calldata = await vault.getWithdrawCalldata(amount);\n      if (calldata.error) {\n        throw new Error(calldata.error.readableMsg);\n      }\n      const tx = await ethersExecute(hexToBytes(calldata.value), vault.orderbook);\n      toasts.success('Transaction sent successfully!');\n      await tx.wait(1);\n      onWithdraw();\n    } catch (e) {\n      reportErrorToSentry(e);\n      toasts.error(formatEthersTransactionError(e));\n    }\n    isSubmitting = false;\n    reset();\n  }\n</script>\n\n{#if !selectWallet}\n  <Modal\n    title=\"Withdraw from Vault\"\n    bind:open\n    outsideclose={!isSubmitting}\n    size=\"sm\"\n    on:close={reset}\n  >\n    <div>\n      <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n        Vault ID\n      </h5>\n      <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n        {toHex(vault.vaultId)}\n      </p>\n    </div>\n\n    <div>\n      <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n        Token\n      </h5>\n      <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n        {vault.token.name}\n      </p>\n    </div>\n\n    <div>\n      <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n        Owner\n      </h5>\n      <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n        {vault.owner}\n      </p>\n    </div>\n\n    <div>\n      <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n        Vault Balance\n      </h5>\n      <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n        {vault.formattedBalance}\n      </p>\n    </div>\n\n    <div class=\"mb-6 w-full\">\n      <Label\n        for=\"amount\"\n        class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\"\n      >\n        Target Amount\n      </Label>\n      <InputTokenAmount bind:value={amount} symbol={vault.token.symbol} maxValue={vault.balance} />\n\n      <Helper color=\"red\" class=\"h-6 text-sm\">\n        {#if amountGTBalance}\n          Target amount cannot exceed available balance.\n        {/if}\n      </Helper>\n    </div>\n    <div class=\"flex w-full justify-end space-x-4\">\n      <Button color=\"alternative\" on:click={reset}>Cancel</Button>\n\n      <Button\n        on:click={() => {\n          selectWallet = true;\n          open = false;\n        }}\n        disabled={!amount || amount.isZero().value || amountGTBalance || isSubmitting}\n      >\n        Proceed\n      </Button>\n    </div>\n  </Modal>\n{/if}\n\n<ModalExecute\n  chainId={vault.chainId}\n  bind:open={selectWallet}\n  onBack={() => (open = true)}\n  title=\"Withdraw from Vault\"\n  execButtonLabel=\"Withdraw\"\n  {executeLedger}\n  {executeWalletconnect}\n  bind:isSubmitting\n/>\n","<script lang=\"ts\">\n  import ModalExecute from '$lib/components/ModalExecute.svelte';\n  import { orderRemove } from '$lib/services/order';\n  import { ethersExecute } from '$lib/services/ethersTx';\n  import { toasts } from '$lib/stores/toasts';\n  import { reportErrorToSentry } from '$lib/services/sentry';\n  import { formatEthersTransactionError } from '$lib/utils/transaction';\n  import type { RaindexOrder } from '@rainlanguage/orderbook';\n  import { hexToBytes } from 'viem';\n  import { useRaindexClient } from '@rainlanguage/ui-components';\n\n  const raindexClient = useRaindexClient();\n\n  export let order: RaindexOrder;\n  export let onOrderRemoved: () => void;\n\n  let isSubmitting = false;\n  let openOrderRemoveModal = true;\n\n  async function executeLedger() {\n    isSubmitting = true;\n    try {\n      await orderRemove(raindexClient, order);\n      onOrderRemoved();\n    } catch (e) {\n      reportErrorToSentry(e);\n    }\n    isSubmitting = false;\n  }\n  async function executeWalletconnect() {\n    isSubmitting = true;\n    try {\n      const calldata = order.getRemoveCalldata();\n      if (calldata.error) {\n        throw new Error(calldata.error.readableMsg);\n      }\n      const tx = await ethersExecute(hexToBytes(calldata.value), order.orderbook);\n      toasts.success('Transaction sent successfully!');\n      await tx.wait(1);\n      onOrderRemoved();\n    } catch (e) {\n      reportErrorToSentry(e);\n      toasts.error(formatEthersTransactionError(e));\n    }\n    isSubmitting = false;\n  }\n</script>\n\n<ModalExecute\n  chainId={order.chainId}\n  bind:open={openOrderRemoveModal}\n  title=\"Remove Order\"\n  execButtonLabel=\"Remove Order\"\n  {executeLedger}\n  {executeWalletconnect}\n  bind:isSubmitting\n/>\n","import type { RainEvalResultsTable } from '@rainlanguage/orderbook';\nimport { invoke } from '@tauri-apps/api';\nimport { mockIPC } from '@tauri-apps/api/mocks';\n\nexport const tradeDebug = async (txHash: string, rpcUrls: string[]) => {\n  return await invoke<RainEvalResultsTable>('debug_trade', {\n    txHash,\n    rpcs: rpcUrls,\n  });\n};\n\nexport const mockTradeDebug: RainEvalResultsTable = {\n  columnNames: ['1', '2', '3'],\n  rows: [['0x01', '0x02', '0x03']],\n};\n\nif (import.meta.vitest) {\n  const { it, expect } = import.meta.vitest;\n\n  it('uses the trade_debug command correctly', async () => {\n    mockIPC((cmd) => {\n      if (cmd === 'debug_trade') {\n        return mockTradeDebug;\n      }\n    });\n\n    const result = await tradeDebug('0x123', ['https://rpc-url.com']);\n    expect(result).toEqual(mockTradeDebug);\n  });\n}\n","<script lang=\"ts\">\n  import type { RainEvalResultsTable } from '@rainlanguage/orderbook';\n  import {\n    Table,\n    TableBody,\n    TableBodyCell,\n    TableBodyRow,\n    TableHead,\n    TableHeadCell,\n  } from 'flowbite-svelte';\n  import { formatEther, hexToBigInt, isHex } from 'viem';\n\n  export let table: RainEvalResultsTable;\n</script>\n\n<Table\n  divClass=\"cursor-pointer rounded-lg overflow-hidden dark:border-none border overflow-x-scroll\"\n>\n  <TableHead>\n    <TableHeadCell>Stack item</TableHeadCell>\n    <TableHeadCell>Value</TableHeadCell>\n    <TableHeadCell>Hex</TableHeadCell>\n  </TableHead>\n  <TableBody>\n    {#each table.rows[0] as value, i}\n      <TableBodyRow>\n        <TableBodyCell data-testid=\"debug-stack\">{table.columnNames[i]}</TableBodyCell>\n        <TableBodyCell data-testid=\"debug-value\"\n          >{isHex(value) ? formatEther(hexToBigInt(value)) : ''}</TableBodyCell\n        >\n        <TableBodyCell data-testid=\"debug-value-hex\">{value}</TableBodyCell>\n      </TableBodyRow>\n    {/each}\n  </TableBody>\n</Table>\n","<script lang=\"ts\">\n  import { queryClient } from '$lib/queries/queryClient';\n  import { tradeDebug } from '$lib/queries/tradeDebug';\n  import { createQuery } from '@tanstack/svelte-query';\n  import { Alert, Modal, Spinner } from 'flowbite-svelte';\n  import EvalResultsTable from '../debug/EvalResultsTable.svelte';\n\n  export let open: boolean;\n  export let txHash: string;\n  export let rpcUrls: string[];\n\n  $: debugQuery = createQuery(\n    {\n      queryKey: [txHash + rpcUrls.join(',')],\n      queryFn: () => {\n        return tradeDebug(txHash, rpcUrls);\n      },\n      retry: 0,\n    },\n    queryClient,\n  );\n</script>\n\n<Modal title=\"Debug trade\" bind:open outsideclose size=\"lg\">\n  <div class=\"flex flex-col gap-y-2 text-sm\">\n    <span data-testid=\"modal-trade-debug-tx-hash\">Trade transaction: {txHash}</span>\n    <span data-testid=\"modal-trade-debug-rpc-url\">RPCs: {rpcUrls.join(', ')}</span>\n  </div>\n  {#if $debugQuery.isLoading}\n    <div data-testid=\"modal-trade-debug-loading-message\" class=\"flex items-center gap-x-2\">\n      <Spinner size=\"4\" />\n      <span>Replaying trade... this can take a while.</span>\n    </div>\n  {/if}\n  {#if $debugQuery.isError}\n    <Alert data-testid=\"modal-trade-debug-error\" color=\"red\">{$debugQuery.error}</Alert>\n  {/if}\n  {#if $debugQuery.data}\n    <EvalResultsTable table={$debugQuery.data} />\n  {/if}\n</Modal>\n","import { invoke } from '@tauri-apps/api';\nimport type { RainEvalResultsTable, SgOrder } from '@rainlanguage/orderbook';\nimport { mockIPC } from '@tauri-apps/api/mocks';\n\nexport async function debugOrderQuote(\n  order: SgOrder,\n  rpcs: string[],\n  inputIOIndex: number,\n  outputIOIndex: number,\n  blockNumber?: number,\n) {\n  return await invoke<[RainEvalResultsTable, string | undefined]>('debug_order_quote', {\n    order,\n    inputIoIndex: inputIOIndex,\n    outputIoIndex: outputIOIndex,\n    blockNumber,\n    rpcs,\n  });\n}\n\nexport const mockQuoteDebug: [RainEvalResultsTable, string | undefined] = [\n  {\n    columnNames: ['1', '2', '3'],\n    rows: [['0x01', '0x02', '0x03']],\n  },\n  'some error msg',\n];\n\nif (import.meta.vitest) {\n  const { it, expect } = import.meta.vitest;\n\n  it('uses the trade_debug command correctly', async () => {\n    mockIPC((cmd) => {\n      if (cmd === 'debug_order_quote') {\n        return mockQuoteDebug;\n      }\n    });\n\n    const result = await debugOrderQuote(\n      {\n        id: '1',\n        orderbook: { id: '0x00' },\n        orderBytes: '0x123',\n        orderHash: '0x123',\n        owner: '0x123',\n        outputs: [],\n        inputs: [],\n        active: true,\n        timestampAdded: BigInt(123),\n        tradesCount: 0,\n      } as unknown as SgOrder,\n      ['http://localhost:8545'],\n      0,\n      0,\n      123,\n    );\n    expect(result).toEqual(mockQuoteDebug);\n  });\n}\n","<script lang=\"ts\">\n  import { debugOrderQuote } from '$lib/queries/orderQuote';\n  import { queryClient } from '$lib/queries/queryClient';\n  import type { RaindexOrder } from '@rainlanguage/orderbook';\n  import { createQuery } from '@tanstack/svelte-query';\n  import { Alert, Modal } from 'flowbite-svelte';\n  import { Refresh, useRaindexClient } from '@rainlanguage/ui-components';\n  import EvalResultsTable from '../debug/EvalResultsTable.svelte';\n  import { fade } from 'svelte/transition';\n\n  const raindexClient = useRaindexClient();\n\n  export let open: boolean;\n  export let order: RaindexOrder;\n  export let inputIOIndex: number;\n  export let outputIOIndex: number;\n  export let pair: string;\n  export let blockNumber: bigint | undefined;\n\n  $: debugQuery = createQuery(\n    {\n      queryKey: [order + pair + blockNumber],\n      queryFn: async () => {\n        const network = raindexClient.getNetworkByChainId(order.chainId);\n        if (network.error) {\n          throw new Error(network.error.readableMsg);\n        }\n\n        const sgOrder = order.convertToSgOrder();\n        if (sgOrder.error) {\n          throw new Error(sgOrder.error.readableMsg);\n        }\n\n        const result = await debugOrderQuote(\n          sgOrder.value,\n          network.value.rpcs,\n          inputIOIndex,\n          outputIOIndex,\n          blockNumber ? Number(blockNumber) : undefined,\n        );\n        return result;\n      },\n      retry: 0,\n      refetchOnWindowFocus: false,\n      refetchInterval: false,\n      refetchOnMount: true,\n    },\n    queryClient,\n  );\n</script>\n\n<Modal title={`Debugging quote for pair ${pair}`} bind:open outsideclose size=\"lg\">\n  <div class=\"flex items-center\">\n    {#if $debugQuery.data}\n      <div class=\"flex flex-col text-sm\">\n        <span class=\"whitespace-nowrap\" data-testid=\"modal-quote-debug-block-number\"\n          >Block: {blockNumber}</span\n        >\n      </div>\n    {/if}\n    <div class=\"flex w-full items-center justify-end\">\n      {#if $debugQuery.isLoading || $debugQuery.isFetching}\n        <span class=\"text-sm\" transition:fade data-testid=\"modal-quote-debug-loading-message\"\n          >Getting quote stack...</span\n        >\n      {/if}\n      <Refresh\n        data-testid=\"refreshButton\"\n        class=\"ml-2 h-8 w-5 cursor-pointer text-gray-400 dark:text-gray-400\"\n        on:click={() => $debugQuery.refetch()}\n        spin={$debugQuery.isLoading || $debugQuery.isFetching}\n      />\n    </div>\n  </div>\n  {#if $debugQuery.data}\n    {#if !!$debugQuery.data[1]}\n      <Alert data-testid=\"modal-quote-debug-error-partial\" color=\"red\">{$debugQuery.data[1]}</Alert>\n    {/if}\n    <EvalResultsTable table={$debugQuery.data[0]} />\n  {/if}\n  <div class=\"flex flex-col gap-y-2 text-sm\"></div>\n</Modal>\n","import ModalVaultDeposit from '$lib/components/ModalVaultDeposit.svelte';\nimport ModalVaultWithdraw from '$lib/components/ModalVaultWithdraw.svelte';\nimport type { RainEvalResultsTable, RaindexVault, RaindexOrder } from '@rainlanguage/orderbook';\nimport ModalOrderRemove from '$lib/components/modal/ModalOrderRemove.svelte';\nimport ModalTradeDebug from '$lib/components/modal/ModalTradeDebug.svelte';\nimport ModalQuoteDebug from '$lib/components/modal/ModalQuoteDebug.svelte';\nimport ModalScenarioDebug from '$lib/components/modal/ModalScenarioDebug.svelte';\nimport type { getAllContexts } from 'svelte';\n\nexport const handleDepositModal = (\n  vault: RaindexVault,\n  onDeposit: () => void,\n  context: ReturnType<typeof getAllContexts>,\n) => {\n  new ModalVaultDeposit({\n    target: document.body,\n    props: { open: true, vault, onDeposit },\n    context,\n  });\n};\n\nexport const handleWithdrawModal = (\n  vault: RaindexVault,\n  onWithdraw: () => void,\n  context: ReturnType<typeof getAllContexts>,\n) => {\n  new ModalVaultWithdraw({\n    target: document.body,\n    props: { open: true, vault, onWithdraw },\n    context,\n  });\n};\n\nexport const handleOrderRemoveModal = (\n  order: RaindexOrder,\n  onOrderRemoved: () => void,\n  context: ReturnType<typeof getAllContexts>,\n) => {\n  new ModalOrderRemove({\n    target: document.body,\n    props: { order, onOrderRemoved },\n    context,\n  });\n};\n\nexport const handleDebugTradeModal = (txHash: string, rpcUrls: string[]) => {\n  new ModalTradeDebug({ target: document.body, props: { open: true, txHash, rpcUrls } });\n};\n\nexport const handleQuoteDebugModal = (\n  order: RaindexOrder,\n  inputIOIndex: number,\n  outputIOIndex: number,\n  pair: string,\n  blockNumber?: bigint,\n) => {\n  new ModalQuoteDebug({\n    target: document.body,\n    props: {\n      open: true,\n      order,\n      inputIOIndex,\n      outputIOIndex,\n      pair,\n      blockNumber,\n    },\n  });\n};\n\nexport const handleScenarioDebugModal = (pair: string, data: RainEvalResultsTable) => {\n  new ModalScenarioDebug({ target: document.body, props: { open: true, pair, data } });\n};\n"],"names":["get","calldata"],"mappings":"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","x_google_ignoreList":[0,1]}