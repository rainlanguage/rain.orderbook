{"version":3,"file":"OrderOrVaultHash.js","sources":["../../../../../packages/ui-components/dist/utils/constructHashLink.js","../../../../../packages/ui-components/dist/components/OrderOrVaultHash.svelte"],"sourcesContent":["import fc from 'fast-check';\nimport { test } from '@fast-check/vitest';\nfunction isOrder(obj) {\n    return obj && 'orderHash' in obj;\n}\n/**\n * Constructs a link path for an order or vault based on its type and network\n * @param orderOrVault - The order or vault object\n * @param type - The type of resource ('orders' or 'vaults')\n * @param chainId - The chain id\n * @param orderbookAddress - The orderbook address\n * @returns The constructed link path\n */\nexport function constructHashLink(orderOrVault, type, chainId, orderbookAddress) {\n    if (!orderOrVault) {\n        return `/${type}`;\n    }\n    const slug = isOrder(orderOrVault) ? orderOrVault.orderHash : orderOrVault.id;\n    return `/${type}/${chainId}-${orderbookAddress}-${slug}`;\n}\n/**\n * Determines if an order or vault is active\n * @param orderOrVault - The order or vault object\n * @returns True if the order is active, false otherwise\n */\nexport function isOrderOrVaultActive(orderOrVault) {\n    const _isOrder = isOrder(orderOrVault);\n    return _isOrder ? orderOrVault.active : false;\n}\n/**\n * Extracts the hash value from an order or vault\n * @param orderOrVault - The order or vault object\n * @returns The hash value\n */\nexport function extractHash(orderOrVault) {\n    const _isOrder = isOrder(orderOrVault);\n    return _isOrder\n        ? orderOrVault.orderHash\n        : orderOrVault?.id || '';\n}\nif (import.meta.vitest) {\n    const { expect, it, describe } = import.meta.vitest;\n    describe('constructHashLink', () => {\n        test.prop([\n            fc.record({\n                orderHash: fc.string(),\n                active: fc.boolean()\n            }),\n            fc.oneof(fc.constant('orders'), fc.constant('vaults')),\n            fc.integer(),\n            fc.string()\n        ])('constructs correct link for orders', (order, type, chainId, orderbookAddress) => {\n            const result = constructHashLink(order, type, chainId, orderbookAddress);\n            expect(result).toBe(`/${type}/${chainId}-${orderbookAddress}-${order.orderHash}`);\n        });\n        test.prop([\n            fc.record({\n                id: fc.string(),\n                owner: fc.string()\n            }),\n            fc.oneof(fc.constant('orders'), fc.constant('vaults')),\n            fc.integer(),\n            fc.string()\n        ])('constructs correct link for vaults', (vault, type, chainId, orderbookAddress) => {\n            const result = constructHashLink(vault, type, chainId, orderbookAddress);\n            expect(result).toBe(`/${type}/${chainId}-${orderbookAddress}-${vault.id}`);\n        });\n    });\n    describe('isOrderOrVaultActive', () => {\n        test.prop([\n            fc.record({\n                orderHash: fc.string(),\n                active: fc.boolean()\n            })\n        ])('returns correct active status for orders', (order) => {\n            const result = isOrderOrVaultActive(order);\n            expect(result).toBe(order.active);\n        });\n        test.prop([\n            fc.record({\n                id: fc.string(),\n                owner: fc.string()\n            })\n        ])('returns false for vaults', (vault) => {\n            const result = isOrderOrVaultActive(vault);\n            expect(result).toBe(false);\n        });\n    });\n    describe('extractHash', () => {\n        test.prop([\n            fc.record({\n                orderHash: fc.string(),\n                active: fc.boolean()\n            })\n        ])('extracts hash from orders', (order) => {\n            const result = extractHash(order);\n            expect(result).toBe(order.orderHash);\n        });\n        test.prop([\n            fc.record({\n                id: fc.string(),\n                owner: fc.string()\n            })\n        ])('extracts hash from vaults', (vault) => {\n            const result = extractHash(vault);\n            expect(result).toBe(vault.id);\n        });\n        it('handles undefined vault id', () => {\n            // Create a partial vault object with undefined id\n            const vault = { id: undefined };\n            const result = extractHash(vault);\n            expect(result).toBe('');\n        });\n    });\n}\n","<script>import { Button } from \"flowbite-svelte\";\nimport Hash, { HashType } from \"./Hash.svelte\";\nimport {\n  constructHashLink,\n  isOrderOrVaultActive,\n  extractHash\n} from \"../utils/constructHashLink\";\nexport let orderOrVault;\nexport let type;\nexport let chainId;\nexport let orderbookAddress;\n$: hash = extractHash(orderOrVault);\n$: isActive = isOrderOrVaultActive(orderOrVault);\n$: linkPath = constructHashLink(orderOrVault, type, chainId, orderbookAddress);\n</script>\n\n<a data-testid=\"order-or-vault-hash\" href={linkPath}>\n\t<Button\n\t\tclass=\"mr-1 mt-1 px-2 py-1 text-sm\"\n\t\tcolor={isActive ? 'green' : 'yellow'}\n\t\tdata-testid=\"vault-order-input\"\n\t\tdata-id={hash}><Hash type={HashType.Identifier} value={hash} copyOnClick={false} /></Button\n\t>\n</a>\n"],"names":[],"mappings":";;;;AAEA,SAAS,QAAQ,KAAK;AAClB,SAAO,OAAO,eAAe;AACjC;AASO,SAAS,kBAAkB,cAAc,MAAM,SAAS,kBAAkB;AAC7E,MAAI,CAAC,cAAc;AACf,WAAO,IAAI,IAAI;AAAA,EAAA;AAEnB,QAAM,OAAO,QAAQ,YAAY,IAAI,aAAa,YAAY,aAAa;AAC3E,SAAO,IAAI,IAAI,IAAI,OAAO,IAAI,gBAAgB,IAAI,IAAI;AAC1D;AAMO,SAAS,qBAAqB,cAAc;AACzC,QAAA,WAAW,QAAQ,YAAY;AAC9B,SAAA,WAAW,aAAa,SAAS;AAC5C;AAMO,SAAS,YAAY,cAAc;AAChC,QAAA,WAAW,QAAQ,YAAY;AACrC,SAAO,WACD,aAAa,YACb,cAAc,MAAM;AAC9B;;;;;QChCW,aAAY,IAAA;QACZ,KAAI,IAAA;QACJ,QAAO,IAAA;QACP,iBAAgB,IAAA;;;;;AACxB,SAAO,YAAY,YAAY;AAC/B,aAAW,qBAAqB,YAAY;AAC5C,aAAW,kBAAkB,cAAc,MAAM,SAAS,gBAAgB;sEAGlC,UAAQ,CAAA,CAAA,IAAA,mBAAA,QAAA,QAAA,EAAA;AAAA;;;aAG1C,WAAW,UAAU;AAAA;iBAEnB;AAAA;;;;;;;YAAkB,MAAA,SAAS;AAAA,mBAAmB;AAAA,yBAAmB;AAAA;;;;;;;;"}