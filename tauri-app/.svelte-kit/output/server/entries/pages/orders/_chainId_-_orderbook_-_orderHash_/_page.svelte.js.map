{"version":3,"file":"_page.svelte.js","sources":["../../../../../../../../node_modules/flowbite-svelte-icons/dist/PauseSolid.svelte","../../../../../../../../node_modules/flowbite-svelte-icons/dist/PenSolid.svelte","../../../../../../../../packages/ui-components/dist/components/BadgeActive.svelte","../../../../../../../../packages/ui-components/dist/components/ButtonVaultLink.svelte","../../../../../../../../packages/ui-components/dist/components/ButtonTab.svelte","../../../../../../../../packages/ui-components/dist/components/charts/ChartTimeFilters.svelte","../../../../../../../../packages/ui-components/dist/components/charts/LightweightChart.svelte","../../../../../../../../packages/ui-components/dist/components/charts/transformAndSortData.js","../../../../../../../../packages/ui-components/dist/components/charts/TanstackLightweightChartLine.svelte","../../../../../../../../packages/ui-components/dist/services/historicalOrderCharts.js","../../../../../../../../packages/ui-components/dist/components/charts/OrderTradesChart.svelte","../../../../../../../../packages/ui-components/dist/components/charts/TableTimeFilters.svelte","../../../../../../../../packages/ui-components/dist/components/tables/OrderTradesListTable.svelte","../../../../../../../../packages/ui-components/dist/components/EditableSpan.svelte","../../../../../../../../packages/ui-components/dist/components/detail/TanstackOrderQuote.svelte","../../../../../../../../packages/ui-components/dist/components/detail/OrderDetail.svelte","../../../../../../../src/routes/orders/[chainId]-[orderbook]-[orderHash]/+page.svelte"],"sourcesContent":["<script>import { getContext } from \"svelte\";\nimport { twMerge } from \"tailwind-merge\";\nconst ctx = getContext(\"iconCtx\") ?? {};\nconst sizes = {\n    xs: \"w-3 h-3\",\n    sm: \"w-4 h-4\",\n    md: \"w-5 h-5\",\n    lg: \"w-6 h-6\",\n    xl: \"w-8 h-8\"\n};\nexport let size = ctx.size || \"md\";\nexport let role = ctx.role || \"img\";\nexport let ariaLabel = \"pause solid\";\n</script>\n\n<svg\n  xmlns=\"http://www.w3.org/2000/svg\"\n  fill=\"currentColor\"\n  {...$$restProps}\n  class={twMerge('shrink-0', sizes[size], $$props.class)}\n  {role}\n  aria-label={ariaLabel}\n  viewBox=\"0 0 12 16\"\n  on:click\n  on:keydown\n  on:keyup\n  on:focus\n  on:blur\n  on:mouseenter\n  on:mouseleave\n  on:mouseover\n  on:mouseout\n>\n  <path\n    fill=\"currentColor\"\n    d=\"M3 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm7 0H9a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Z\"\n  />\n</svg>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte-icons.vercel.app/)\n## Props\n@prop export let size: 'xs' | 'sm' | 'md' | 'lg' | 'xl' = ctx.size || 'md';\n@prop export let role = ctx.role || 'img';\n@prop export let ariaLabel = 'pause solid';\n-->\n","<script>import { getContext } from \"svelte\";\nimport { twMerge } from \"tailwind-merge\";\nconst ctx = getContext(\"iconCtx\") ?? {};\nconst sizes = {\n    xs: \"w-3 h-3\",\n    sm: \"w-4 h-4\",\n    md: \"w-5 h-5\",\n    lg: \"w-6 h-6\",\n    xl: \"w-8 h-8\"\n};\nexport let size = ctx.size || \"md\";\nexport let role = ctx.role || \"img\";\nexport let ariaLabel = \"pen solid\";\n</script>\n\n<svg\n  xmlns=\"http://www.w3.org/2000/svg\"\n  fill=\"currentColor\"\n  {...$$restProps}\n  class={twMerge('shrink-0', sizes[size], $$props.class)}\n  {role}\n  aria-label={ariaLabel}\n  viewBox=\"0 0 20 20\"\n  on:click\n  on:keydown\n  on:keyup\n  on:focus\n  on:blur\n  on:mouseenter\n  on:mouseleave\n  on:mouseover\n  on:mouseout\n>\n  <path\n    fill=\"currentColor\"\n    d=\"m13.835 7.578-.005.007-7.137 7.137 2.139 2.138 7.143-7.142-2.14-2.14Zm-10.696 3.59 2.139 2.14 7.138-7.137.007-.005-2.141-2.141-7.143 7.143Zm1.433 4.261L2 12.852.051 18.684a1 1 0 0 0 1.265 1.264L7.147 18l-2.575-2.571Zm14.249-14.25a4.03 4.03 0 0 0-5.693 0L11.7 2.611 17.389 8.3l1.432-1.432a4.029 4.029 0 0 0 0-5.689Z\"\n  />\n</svg>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte-icons.vercel.app/)\n## Props\n@prop export let size: 'xs' | 'sm' | 'md' | 'lg' | 'xl' = ctx.size || 'md';\n@prop export let role = ctx.role || 'img';\n@prop export let ariaLabel = 'pen solid';\n-->\n","<script>import { Badge } from \"flowbite-svelte\";\nexport let active;\n</script>\n\n{#if active}\n\t<Badge color=\"green\" {...$$props}>Active</Badge>\n{:else}\n\t<Badge color=\"yellow\" {...$$props}>Inactive</Badge>\n{/if}\n","<script>import { toHex } from \"viem\";\nimport Tooltip from \"./Tooltip.svelte\";\nexport let tokenVault;\nexport let chainId;\nexport let orderbookAddress;\n</script>\n\n<div\n\tclass=\"flex cursor-pointer items-center justify-between space-y-2 rounded-lg border border-gray-100 p-2\"\n\tdata-testid=\"vault-link\"\n>\n\t<div class=\"flex flex-col items-start gap-y-2\">\n\t\t<Tooltip triggeredBy={`#token-info-${tokenVault.vaultId}`}>\n\t\t\tID: <span class=\"font-mono\">{toHex(tokenVault.vaultId)}</span>\n\t\t</Tooltip>\n\t\t<a\n\t\t\thref={`/vaults/${chainId}-${orderbookAddress}-${tokenVault.id}`}\n\t\t\tid={`token-info-${tokenVault.vaultId}`}\n\t\t>\n\t\t\t{tokenVault.token.name} ({tokenVault.token.symbol})\n\t\t</a>\n\t\t<span class=\"text-sm text-gray-500 dark:text-gray-400\">\n\t\t\tBalance: {tokenVault.formattedBalance}\n\t\t</span>\n\t</div>\n\t<div>\n\t\t<slot name=\"buttons\" />\n\t</div>\n</div>\n","<script>import { Button } from \"flowbite-svelte\";\nexport let active = false;\n</script>\n\n<Button on:click disabled={active} {...$$props}>\n\t<slot />\n</Button>\n","<script>import ButtonTab from \"../ButtonTab.svelte\";\nimport { ButtonGroup } from \"flowbite-svelte\";\nconst TIME_DELTA_24_HOURS = 60 * 60 * 24;\nconst TIME_DELTA_7_DAYS = TIME_DELTA_24_HOURS * 7;\nconst TIME_DELTA_30_DAYS = TIME_DELTA_24_HOURS * 30;\nconst TIME_DELTA_1_YEAR = TIME_DELTA_24_HOURS * 365;\nexport let timeDelta = TIME_DELTA_1_YEAR;\n</script>\n\n<ButtonGroup class=\"bg-gray-800\" data-testid=\"lightweightChartYearButtons\">\n\t<ButtonTab\n\t\ton:click={() => (timeDelta = TIME_DELTA_1_YEAR)}\n\t\tactive={timeDelta === TIME_DELTA_1_YEAR}\n\t\tsize=\"xs\"\n\t\tclass=\"px-2 py-1\">1 Year</ButtonTab\n\t>\n\t<ButtonTab\n\t\ton:click={() => (timeDelta = TIME_DELTA_30_DAYS)}\n\t\tactive={timeDelta === TIME_DELTA_30_DAYS}\n\t\tsize=\"xs\"\n\t\tclass=\"px-2 py-1\">30 Days</ButtonTab\n\t>\n\t<ButtonTab\n\t\ton:click={() => (timeDelta = TIME_DELTA_7_DAYS)}\n\t\tactive={timeDelta === TIME_DELTA_7_DAYS}\n\t\tsize=\"xs\"\n\t\tclass=\"px-2 py-1\">7 Days</ButtonTab\n\t>\n\t<ButtonTab\n\t\ton:click={() => (timeDelta = TIME_DELTA_24_HOURS)}\n\t\tactive={timeDelta === TIME_DELTA_24_HOURS}\n\t\tsize=\"xs\"\n\t\tclass=\"px-2 py-1\">24 Hours</ButtonTab\n\t>\n</ButtonGroup>\n","<script generics=\"T extends keyof SeriesOptionsMap, O\">import { Spinner } from \"flowbite-svelte\";\nimport {\n  createChart\n} from \"lightweight-charts\";\nimport { onDestroy, onMount } from \"svelte\";\nimport ChartTimeFilters from \"./ChartTimeFilters.svelte\";\nexport let data = [];\nexport let loading = false;\nexport let emptyMessage = \"None found\";\nexport let title = void 0;\nexport let priceSymbol = void 0;\nexport let createSeries;\nexport let lightweightChartsTheme;\nlet chartElement = void 0;\nlet chart;\nlet series;\nlet timeDelta;\nlet timeFrom;\nlet timeTo;\nlet previousDataLength = 0;\nfunction setTimeScale() {\n  if (chart === void 0) return;\n  timeTo = Math.floor((/* @__PURE__ */ new Date()).getTime() / 1e3);\n  timeFrom = timeTo - timeDelta;\n  chart.timeScale().setVisibleRange({\n    from: timeFrom,\n    to: timeTo\n  });\n}\nfunction setOptions() {\n  if (chart === void 0) return;\n  chart.applyOptions({\n    ...$lightweightChartsTheme,\n    autoSize: true,\n    localization: {\n      priceFormatter: (p) => priceSymbol ? `${p.toFixed(4)} ${priceSymbol}` : p.toFixed(4)\n    }\n  });\n}\nfunction updateNewDataPoints() {\n  if (series === void 0 || data.length === 0) return;\n  if (previousDataLength === 0) {\n    series.setData(data);\n  } else if (data.length > previousDataLength) {\n    const newPoints = data.slice(previousDataLength);\n    newPoints.forEach((point) => {\n      series?.update(point);\n    });\n  }\n  previousDataLength = data.length;\n  setTimeScale();\n}\nfunction destroyChart() {\n  if (chart == void 0) return;\n  chart.remove();\n  chart = void 0;\n}\nfunction setupChart() {\n  if (chartElement === void 0) return;\n  chart = createChart(chartElement);\n  series = createSeries(chart);\n  setOptions();\n  updateNewDataPoints();\n}\n$: if (data || series) updateNewDataPoints();\n$: if (timeDelta) setTimeScale();\n$: if ($lightweightChartsTheme) setOptions();\n$: if (chartElement && data.length > 0 && !chart) setupChart();\nonMount(() => {\n  setupChart();\n});\nonDestroy(() => {\n  destroyChart();\n});\n</script>\n\n<div\n\tclass=\"flex h-full flex-col overflow-hidden rounded-lg border bg-gray-50 dark:border-none dark:bg-gray-700\"\n>\n\t<div class=\"flex w-full justify-between border-b p-3 pb-0 dark:border-gray-700\">\n\t\t<div class=\"text-gray-900 dark:text-white\">\n\t\t\t{#if title !== undefined}\n\t\t\t\t<div data-testid=\"lightweightChartTitle\" class=\"mb-2 text-xl\">{title}</div>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div>\n\t\t\t{#if loading}\n\t\t\t\t<Spinner data-testid=\"lightweightChartSpinner\" class=\"mr-2 h-4 w-4\" color=\"white\" />\n\t\t\t{/if}\n\t\t\t{#if data.length > 0}\n\t\t\t\t<ChartTimeFilters bind:timeDelta />\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n\t<div class=\"relative flex w-full grow items-center justify-center bg-white dark:bg-gray-800\">\n\t\t{#if data.length === 0 && !loading}\n\t\t\t<div class=\"text-gray-800 dark:text-gray-400\" data-testid=\"lightweightChartEmptyMessage\">\n\t\t\t\t{emptyMessage}\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div\n\t\t\t\tbind:this={chartElement}\n\t\t\t\tclass=\"h-full w-full overflow-hidden\"\n\t\t\t\t{...$$props}\n\t\t\t\tdata-testid=\"lightweightChartElement\"\n\t\t\t></div>\n\t\t{/if}\n\t</div>\n</div>\n","import { sortBy } from 'lodash';\n/**\n * Filters out data points with duplicate timestamps, keeping only the first occurrence.\n *\n * @param data Array of data points with time and value properties\n * @returns A new array with only unique timestamps\n */\nexport const deduplicateByTime = (data) => {\n    const uniqueData = [];\n    const seenTimes = new Set();\n    for (const dataPoint of data) {\n        if (!seenTimes.has(dataPoint.time)) {\n            uniqueData.push(dataPoint);\n            seenTimes.add(dataPoint.time);\n        }\n    }\n    return uniqueData;\n};\n/**\n * Transforms and sorts data, ensuring unique timestamps.\n *\n * @param data The source data to transform\n * @param options Configuration object with transform functions\n * @returns Transformed, sorted, and deduplicated data\n */\nexport const transformAndSortData = (data, options) => {\n    const { valueTransform, timeTransform } = options;\n    const transformedData = data.map((d) => ({\n        value: valueTransform(d),\n        time: timeTransform(d)\n    }));\n    const sortedData = sortBy(transformedData, (d) => d.time);\n    return deduplicateByTime(sortedData);\n};\nif (import.meta.vitest) {\n    const { it, expect, describe } = import.meta.vitest;\n    describe('deduplicateByTime', () => {\n        it('should remove entries with duplicate timestamps', () => {\n            const data = [\n                { time: 100, value: 10 },\n                { time: 200, value: 20 },\n                { time: 200, value: 25 }, // Duplicate timestamp\n                { time: 300, value: 30 }\n            ];\n            const result = deduplicateByTime(data);\n            const expected = [\n                { time: 100, value: 10 },\n                { time: 200, value: 20 }, // First occurrence kept\n                { time: 300, value: 30 }\n            ];\n            expect(result).toEqual(expected);\n        });\n        it('should handle multiple duplicate timestamps', () => {\n            const data = [\n                { time: 100, value: 10 },\n                { time: 100, value: 15 }, // Duplicate\n                { time: 100, value: 18 }, // Duplicate\n                { time: 200, value: 20 }\n            ];\n            const result = deduplicateByTime(data);\n            const expected = [\n                { time: 100, value: 10 }, // Only first one kept\n                { time: 200, value: 20 }\n            ];\n            expect(result).toEqual(expected);\n        });\n        it('should return original array if no duplicates', () => {\n            const data = [\n                { time: 100, value: 10 },\n                { time: 200, value: 20 },\n                { time: 300, value: 30 }\n            ];\n            const result = deduplicateByTime(data);\n            expect(result).toEqual(data);\n            expect(result).not.toBe(data);\n        });\n        it('should handle empty array', () => {\n            const data = [];\n            const result = deduplicateByTime(data);\n            expect(result).toEqual([]);\n        });\n    });\n    describe('transformAndSortData', () => {\n        it('should transform, sort, and deduplicate data', () => {\n            const rawData = [\n                { timestamp: 3000, price: 300 },\n                { timestamp: 1000, price: 100 },\n                { timestamp: 2000, price: 200 },\n                { timestamp: 2000, price: 250 } // Duplicate timestamp\n            ];\n            const result = transformAndSortData(rawData, {\n                valueTransform: (item) => item.price,\n                timeTransform: (item) => item.timestamp\n            });\n            const expected = [\n                { time: 1000, value: 100 },\n                { time: 2000, value: 200 }, // First occurrence kept after sorting\n                { time: 3000, value: 300 }\n            ];\n            expect(result).toEqual(expected);\n        });\n        it('should handle empty data array', () => {\n            const rawData = [];\n            const result = transformAndSortData(rawData, {\n                valueTransform: (item) => item.price,\n                timeTransform: (item) => item.timestamp\n            });\n            expect(result).toEqual([]);\n        });\n    });\n}\n","<script generics=\"T\">import LightweightChart from \"./LightweightChart.svelte\";\nimport { transformAndSortData } from \"./transformAndSortData\";\nexport let query;\nexport let timeTransform;\nexport let valueTransform;\nexport let lightweightChartsTheme;\n$: data = transformAndSortData($query.data ?? [], {\n  valueTransform,\n  timeTransform\n});\nconst createSeries = (chart) => chart.addLineSeries({ lineWidth: 1 });\n</script>\n\n<LightweightChart\n\t{createSeries}\n\t{data}\n\tloading={$query.isLoading}\n\t{...$$props}\n\t{lightweightChartsTheme}\n/>\n","import { timestampSecondsToUTCTimestamp } from '../services/time';\nimport { sortBy } from 'lodash';\nexport function prepareHistoricalOrderChartData(takeOrderEntities, colorTheme) {\n    const transformedData = takeOrderEntities.map((d) => ({\n        value: Math.abs(Number(d.inputVaultBalanceChange.formattedAmount) /\n            Number(d.outputVaultBalanceChange.formattedAmount)),\n        time: timestampSecondsToUTCTimestamp(BigInt(d.timestamp)),\n        color: colorTheme == 'dark' ? '#5178FF' : '#4E4AF6',\n        outputAmount: Number(d.outputVaultBalanceChange.amount)\n    }));\n    // if we have multiple object in the array with the same timestamp, we need to merge them\n    // we do this by taking the weighted average of the ioratio values for objects that share the same timestamp.\n    const uniqueTimestamps = Array.from(new Set(transformedData.map((d) => d.time)));\n    const finalData = [];\n    uniqueTimestamps.forEach((timestamp) => {\n        const objectsWithSameTimestamp = transformedData.filter((d) => d.time === timestamp);\n        if (objectsWithSameTimestamp.length > 1) {\n            // calculate a weighted average of the ioratio values using the amount of the output token as the weight\n            const ioratioSum = objectsWithSameTimestamp.reduce((acc, d) => acc + d.value * d.outputAmount, 0);\n            const outputAmountSum = objectsWithSameTimestamp.reduce((acc, d) => acc + d.outputAmount, 0);\n            const ioratioAverage = ioratioSum / outputAmountSum;\n            finalData.push({\n                value: ioratioAverage,\n                time: timestamp,\n                color: objectsWithSameTimestamp[0].color\n            });\n        }\n        else {\n            finalData.push(objectsWithSameTimestamp[0]);\n        }\n    });\n    return sortBy(finalData, (d) => d.time);\n}\nif (import.meta.vitest) {\n    const { it, expect } = import.meta.vitest;\n    it('transforms and sorts data as expected', () => {\n        const takeOrderEntities = [\n            {\n                id: '1',\n                timestamp: BigInt(1632000000),\n                transaction: {\n                    id: 'transaction_id',\n                    from: '0xsender_address',\n                    timestamp: BigInt(1632000000),\n                    blockNumber: BigInt(0)\n                },\n                outputVaultBalanceChange: {\n                    amount: BigInt(100),\n                    formattedAmount: '100',\n                    vaultId: BigInt(1),\n                    __typename: 'Withdraw',\n                    token: {\n                        id: 'output_token',\n                        address: '0xoutput_token',\n                        name: 'output_token',\n                        symbol: 'output_token',\n                        decimals: BigInt(1)\n                    },\n                    newBalance: BigInt(0),\n                    formattedNewBalance: '0',\n                    oldBalance: BigInt(0),\n                    formattedOldBalance: '0',\n                    timestamp: BigInt(0),\n                    transaction: {\n                        id: 'transaction_id',\n                        from: 'sender_address',\n                        timestamp: BigInt(1632000000),\n                        blockNumber: BigInt(0)\n                    },\n                    orderbook: '0x1'\n                },\n                orderHash: 'orderHash',\n                inputVaultBalanceChange: {\n                    vaultId: BigInt(1),\n                    token: {\n                        id: 'output_token',\n                        address: '0xoutput_token',\n                        name: 'output_token',\n                        symbol: 'output_token',\n                        decimals: BigInt(1)\n                    },\n                    amount: BigInt(50),\n                    formattedAmount: '50',\n                    __typename: 'Withdraw',\n                    newBalance: BigInt(0),\n                    formattedNewBalance: '0',\n                    oldBalance: BigInt(0),\n                    formattedOldBalance: '0',\n                    timestamp: BigInt(0),\n                    transaction: {\n                        id: 'transaction_id',\n                        from: '0xsender_address',\n                        timestamp: BigInt(1632000000),\n                        blockNumber: BigInt(0)\n                    },\n                    orderbook: '0x1'\n                },\n                orderbook: '0x00'\n            },\n            {\n                id: '2',\n                timestamp: BigInt(1631000000),\n                transaction: {\n                    id: 'transaction_id',\n                    from: '0xsender_address',\n                    timestamp: BigInt(1631000000),\n                    blockNumber: BigInt(0)\n                },\n                outputVaultBalanceChange: {\n                    amount: BigInt(100),\n                    formattedAmount: '100',\n                    vaultId: BigInt(1),\n                    token: {\n                        id: 'output_token',\n                        address: '0xoutput_token',\n                        name: 'output_token',\n                        symbol: 'output_token',\n                        decimals: BigInt(1)\n                    },\n                    newBalance: BigInt(0),\n                    formattedNewBalance: '0',\n                    oldBalance: BigInt(0),\n                    formattedOldBalance: '0',\n                    __typename: 'Withdraw',\n                    timestamp: BigInt(0),\n                    transaction: {\n                        id: 'transaction_id',\n                        from: '0xsender_address',\n                        timestamp: BigInt(1632000000),\n                        blockNumber: BigInt(0)\n                    },\n                    orderbook: '0x1'\n                },\n                orderHash: 'orderHash',\n                inputVaultBalanceChange: {\n                    vaultId: BigInt(1),\n                    token: {\n                        id: 'output_token',\n                        address: '0xoutput_token',\n                        name: 'output_token',\n                        symbol: 'output_token',\n                        decimals: BigInt(1)\n                    },\n                    amount: BigInt(50),\n                    formattedAmount: '50',\n                    __typename: 'Withdraw',\n                    newBalance: BigInt(0),\n                    formattedNewBalance: '0',\n                    oldBalance: BigInt(0),\n                    formattedOldBalance: '0',\n                    timestamp: BigInt(0),\n                    transaction: {\n                        id: 'transaction_id',\n                        from: '0xsender_address',\n                        timestamp: BigInt(1632000000),\n                        blockNumber: BigInt(0)\n                    },\n                    orderbook: '0x1'\n                },\n                orderbook: '0x00'\n            },\n            {\n                id: '3',\n                timestamp: BigInt(1630000000),\n                transaction: {\n                    id: 'transaction_id',\n                    from: '0xsender_address',\n                    timestamp: BigInt(1630000000),\n                    blockNumber: BigInt(0)\n                },\n                outputVaultBalanceChange: {\n                    amount: BigInt(100),\n                    formattedAmount: '100',\n                    vaultId: BigInt(1),\n                    token: {\n                        id: 'output_token',\n                        address: '0xoutput_token',\n                        name: 'output_token',\n                        symbol: 'output_token',\n                        decimals: BigInt(1)\n                    },\n                    newBalance: BigInt(0),\n                    formattedNewBalance: '0',\n                    oldBalance: BigInt(0),\n                    formattedOldBalance: '0',\n                    __typename: 'Withdraw',\n                    timestamp: BigInt(0),\n                    transaction: {\n                        id: 'transaction_id',\n                        from: 'sender_address',\n                        timestamp: BigInt(1632000000),\n                        blockNumber: BigInt(0)\n                    },\n                    orderbook: '0x1'\n                },\n                orderHash: 'orderHash',\n                inputVaultBalanceChange: {\n                    vaultId: BigInt(1),\n                    token: {\n                        id: 'output_token',\n                        address: '0xoutput_token',\n                        name: 'output_token',\n                        symbol: 'output_token',\n                        decimals: BigInt(1)\n                    },\n                    newBalance: BigInt(0),\n                    formattedNewBalance: '0',\n                    oldBalance: BigInt(0),\n                    formattedOldBalance: '0',\n                    amount: BigInt(50),\n                    formattedAmount: '50',\n                    __typename: 'Withdraw',\n                    timestamp: BigInt(0),\n                    transaction: {\n                        id: 'transaction_id',\n                        from: 'sender_address',\n                        timestamp: BigInt(1632000000),\n                        blockNumber: BigInt(0)\n                    },\n                    orderbook: '0x1'\n                },\n                orderbook: '0x00'\n            }\n        ];\n        const result = prepareHistoricalOrderChartData(takeOrderEntities, 'dark');\n        expect(result.length).toEqual(3);\n        expect(result[0].value).toEqual(0.5);\n        expect(result[0].time).toEqual(1630000000);\n        expect(result[1].value).toEqual(0.5);\n        expect(result[1].time).toEqual(1631000000);\n        expect(result[2].value).toEqual(0.5);\n        expect(result[2].time).toEqual(1632000000);\n        // check the color\n        expect(result[0].color).toEqual('#5178FF');\n        expect(result[1].color).toEqual('#5178FF');\n        expect(result[2].color).toEqual('#5178FF');\n    });\n    it('handles the case where multiple trades have the same timestamp', () => {\n        const takeOrderEntities = [\n            {\n                id: '1',\n                timestamp: BigInt(1632000000),\n                transaction: {\n                    id: 'transaction_id',\n                    from: '0xsender_address',\n                    timestamp: BigInt(1632000000),\n                    blockNumber: BigInt(0)\n                },\n                outputVaultBalanceChange: {\n                    amount: BigInt(100),\n                    formattedAmount: '100',\n                    vaultId: BigInt(1),\n                    token: {\n                        id: 'output_token',\n                        address: '0xoutput_token',\n                        name: 'output_token',\n                        symbol: 'output_token',\n                        decimals: BigInt(1)\n                    },\n                    newBalance: BigInt(0),\n                    formattedNewBalance: '0',\n                    oldBalance: BigInt(0),\n                    formattedOldBalance: '0',\n                    timestamp: BigInt(0),\n                    transaction: {\n                        id: 'transaction_id',\n                        from: '0xsender_address',\n                        timestamp: BigInt(1632000000),\n                        blockNumber: BigInt(0)\n                    },\n                    __typename: 'Withdraw',\n                    orderbook: '0x1'\n                },\n                orderHash: 'orderHash',\n                inputVaultBalanceChange: {\n                    vaultId: BigInt(1),\n                    token: {\n                        id: 'output_token',\n                        address: '0xoutput_token',\n                        name: 'output_token',\n                        symbol: 'output_token',\n                        decimals: BigInt(1)\n                    },\n                    amount: BigInt(50),\n                    formattedAmount: '50',\n                    newBalance: BigInt(0),\n                    formattedNewBalance: '0',\n                    oldBalance: BigInt(0),\n                    formattedOldBalance: '0',\n                    timestamp: BigInt(0),\n                    transaction: {\n                        id: 'transaction_id',\n                        from: '0xsender_address',\n                        timestamp: BigInt(1632000000),\n                        blockNumber: BigInt(0)\n                    },\n                    orderbook: '0x1'\n                },\n                orderbook: '0x00'\n            },\n            {\n                id: '2',\n                timestamp: BigInt(1632000000),\n                transaction: {\n                    id: 'transaction_id',\n                    from: '0xsender_address',\n                    timestamp: BigInt(1632000000),\n                    blockNumber: BigInt(0)\n                },\n                outputVaultBalanceChange: {\n                    amount: BigInt(200),\n                    formattedAmount: '200',\n                    vaultId: BigInt(1),\n                    token: {\n                        id: 'output_token',\n                        address: '0xoutput_token',\n                        name: 'output_token',\n                        symbol: 'output_token',\n                        decimals: BigInt(1)\n                    },\n                    newBalance: BigInt(0),\n                    formattedNewBalance: '0',\n                    oldBalance: BigInt(0),\n                    formattedOldBalance: '0',\n                    timestamp: BigInt(0),\n                    transaction: {\n                        id: 'transaction_id',\n                        from: '0xsender_address',\n                        timestamp: BigInt(1632000000),\n                        blockNumber: BigInt(0)\n                    },\n                    orderbook: '0x1'\n                },\n                orderHash: 'orderHash',\n                inputVaultBalanceChange: {\n                    vaultId: BigInt(1),\n                    token: {\n                        id: 'output_token',\n                        address: '0xoutput_token',\n                        name: 'output_token',\n                        symbol: 'output_token',\n                        decimals: BigInt(1)\n                    },\n                    amount: BigInt(50),\n                    formattedAmount: '50',\n                    newBalance: BigInt(0),\n                    formattedNewBalance: '0',\n                    oldBalance: BigInt(0),\n                    formattedOldBalance: '0',\n                    timestamp: BigInt(0),\n                    transaction: {\n                        id: 'transaction_id',\n                        from: '0xsender_address',\n                        timestamp: BigInt(1632000000),\n                        blockNumber: BigInt(0)\n                    },\n                    orderbook: '0x1'\n                },\n                orderbook: '0x00'\n            },\n            {\n                id: '3',\n                timestamp: BigInt(1632000000),\n                transaction: {\n                    id: 'transaction_id',\n                    from: '0xsender_address',\n                    timestamp: BigInt(1632000000),\n                    blockNumber: BigInt(0)\n                },\n                outputVaultBalanceChange: {\n                    amount: BigInt(400),\n                    formattedAmount: '400',\n                    vaultId: BigInt(1),\n                    token: {\n                        id: 'output_token',\n                        address: '0xoutput_token',\n                        name: 'output_token',\n                        symbol: 'output_token',\n                        decimals: BigInt(1)\n                    },\n                    newBalance: BigInt(0),\n                    formattedNewBalance: '0',\n                    oldBalance: BigInt(0),\n                    formattedOldBalance: '0',\n                    timestamp: BigInt(0),\n                    transaction: {\n                        id: 'transaction_id',\n                        from: '0xsender_address',\n                        timestamp: BigInt(1632000000),\n                        blockNumber: BigInt(0)\n                    },\n                    orderbook: '0x1'\n                },\n                orderHash: 'orderHash',\n                inputVaultBalanceChange: {\n                    vaultId: BigInt(1),\n                    token: {\n                        id: 'output_token_id',\n                        address: '0xoutput_token',\n                        name: 'output_token',\n                        symbol: 'output_token',\n                        decimals: BigInt(1)\n                    },\n                    amount: BigInt(50),\n                    formattedAmount: '50',\n                    newBalance: BigInt(0),\n                    formattedNewBalance: '0',\n                    oldBalance: BigInt(0),\n                    formattedOldBalance: '0',\n                    timestamp: BigInt(0),\n                    transaction: {\n                        id: 'transaction_id',\n                        from: '0xsender_address',\n                        timestamp: BigInt(1632000000),\n                        blockNumber: BigInt(0)\n                    },\n                    orderbook: '0x1'\n                },\n                orderbook: '0x00'\n            }\n        ];\n        const result = prepareHistoricalOrderChartData(takeOrderEntities, 'dark');\n        // calculate the weighted average of the ioratio values\n        const ioratioSum = 0.5 * 100 + 0.25 * 200 + 0.125 * 400;\n        const outputAmountSum = 100 + 200 + 400;\n        const ioratioAverage = ioratioSum / outputAmountSum;\n        expect(result.length).toEqual(1);\n        expect(result[0].value).toEqual(ioratioAverage);\n    });\n}\n","<script>import {} from \"@rainlanguage/orderbook\";\nimport { prepareHistoricalOrderChartData } from \"../../services/historicalOrderCharts\";\nimport TanstackLightweightChartLine from \"./TanstackLightweightChartLine.svelte\";\nimport { createQuery } from \"@tanstack/svelte-query\";\nimport { QKEY_ORDER_TRADES_LIST } from \"../../queries/keys\";\nexport let order;\nexport let colorTheme;\nexport let lightweightChartsTheme;\n$: query = createQuery({\n  queryKey: [QKEY_ORDER_TRADES_LIST, order.id],\n  queryFn: async () => {\n    const data = await order.getTradesList(BigInt(1e3), void 0, 1);\n    if (data.error) throw new Error(data.error.readableMsg);\n    return prepareHistoricalOrderChartData(data.value, $colorTheme);\n  }\n});\n</script>\n\n<TanstackLightweightChartLine\n\ttitle=\"Trades\"\n\t{query}\n\ttimeTransform={(d) => d.time}\n\tvalueTransform={(d) => d.value}\n\temptyMessage=\"No trades found\"\n\t{lightweightChartsTheme}\n/>\n","<script>import ButtonTab from \"../ButtonTab.svelte\";\nimport { ButtonGroup } from \"flowbite-svelte\";\nconst TIME_DELTA_24_HOURS = 60 * 60 * 24;\nconst TIME_DELTA_48_HOURS = TIME_DELTA_24_HOURS * 2;\nlet now = Math.floor((/* @__PURE__ */ new Date()).getTime() / 1e3);\nlet timeDelta;\nfunction setNow() {\n  now = Math.floor((/* @__PURE__ */ new Date()).getTime() / 1e3);\n}\nexport let startTimestamp;\nexport let endTimestamp;\n</script>\n\n<ButtonGroup class=\"bg-gray-800\" data-testid=\"lightweightChartYearButtons\">\n\t<ButtonTab\n\t\ton:click={() => {\n\t\t\tsetNow();\n\t\t\ttimeDelta = undefined;\n\t\t\tstartTimestamp = undefined;\n\t\t\tendTimestamp = undefined;\n\t\t}}\n\t\tactive={timeDelta === undefined}\n\t\tsize=\"xs\"\n\t\tclass=\"px-2 py-1\">All Time</ButtonTab\n\t>\n\t<ButtonTab\n\t\ton:click={() => {\n\t\t\tsetNow();\n\t\t\ttimeDelta = TIME_DELTA_48_HOURS;\n\t\t\tstartTimestamp = now - TIME_DELTA_48_HOURS;\n\t\t\tendTimestamp = now;\n\t\t}}\n\t\tactive={timeDelta === TIME_DELTA_48_HOURS}\n\t\tsize=\"xs\"\n\t\tclass=\"px-2 py-1\">48 Hours</ButtonTab\n\t>\n\t<ButtonTab\n\t\ton:click={() => {\n\t\t\tsetNow();\n\t\t\ttimeDelta = TIME_DELTA_24_HOURS;\n\t\t\tstartTimestamp = now - TIME_DELTA_24_HOURS;\n\t\t\tendTimestamp = now;\n\t\t}}\n\t\tactive={timeDelta === TIME_DELTA_24_HOURS}\n\t\tsize=\"xs\"\n\t\tclass=\"px-2 py-1\">24 Hours</ButtonTab\n\t>\n</ButtonGroup>\n","<script>import { createInfiniteQuery } from \"@tanstack/svelte-query\";\nimport TanstackAppTable from \"../TanstackAppTable.svelte\";\nimport { QKEY_ORDER_TRADES_LIST } from \"../../queries/keys\";\nimport { DEFAULT_PAGE_SIZE } from \"../../queries/constants\";\nimport { TableBodyCell, TableHeadCell } from \"flowbite-svelte\";\nimport { formatTimestampSecondsAsLocal } from \"../../services/time\";\nimport Hash, { HashType } from \"../Hash.svelte\";\nimport { BugOutline } from \"flowbite-svelte-icons\";\nimport TableTimeFilters from \"../charts/TableTimeFilters.svelte\";\nexport let order;\nexport let rpcs = void 0;\nexport let handleDebugTradeModal = void 0;\nlet startTimestamp;\nlet endTimestamp;\nlet tradesCount;\n$: orderTradesQuery = createInfiniteQuery({\n  queryKey: [order.id, QKEY_ORDER_TRADES_LIST + order.id],\n  queryFn: async ({ pageParam }) => {\n    tradesCount = void 0;\n    const [countResult, tradesResult] = await Promise.all([\n      order.getTradeCount(\n        startTimestamp ? BigInt(startTimestamp) : void 0,\n        endTimestamp ? BigInt(endTimestamp) : void 0\n      ),\n      order.getTradesList(\n        startTimestamp ? BigInt(startTimestamp) : void 0,\n        endTimestamp ? BigInt(endTimestamp) : void 0,\n        pageParam + 1\n      )\n    ]);\n    if (countResult.error) throw new Error(countResult.error.readableMsg);\n    if (tradesResult.error) throw new Error(tradesResult.error.readableMsg);\n    const count = countResult.value;\n    const trades = tradesResult.value;\n    if (typeof count === \"number\") {\n      tradesCount = count;\n    }\n    return trades;\n  },\n  initialPageParam: 0,\n  getNextPageParam: (lastPage, _allPages, lastPageParam) => {\n    return lastPage.length === DEFAULT_PAGE_SIZE ? lastPageParam + 1 : void 0;\n  }\n});\nconst AppTable = TanstackAppTable;\n</script>\n\n<AppTable\n\tquery={orderTradesQuery}\n\temptyMessage=\"No trades found\"\n\trowHoverable={false}\n\tqueryKey={order.id}\n>\n\t<svelte:fragment slot=\"info\">\n\t\t{#if tradesCount !== undefined}\n\t\t\t<div class=\"px-2\">{tradesCount} Trades</div>\n\t\t{/if}\n\t</svelte:fragment>\n\t<svelte:fragment slot=\"timeFilter\">\n\t\t<TableTimeFilters bind:startTimestamp bind:endTimestamp />\n\t</svelte:fragment>\n\t<svelte:fragment slot=\"head\">\n\t\t<TableHeadCell padding=\"p-4\">Date</TableHeadCell>\n\t\t<TableHeadCell padding=\"p-0\">Sender</TableHeadCell>\n\t\t<TableHeadCell padding=\"p-0\">Transaction Hash</TableHeadCell>\n\t\t<TableHeadCell padding=\"p-0\">Input</TableHeadCell>\n\t\t<TableHeadCell padding=\"p-0\">Output</TableHeadCell>\n\t\t<TableHeadCell padding=\"p-0\">IO Ratio</TableHeadCell>\n\t\t<TableHeadCell padding=\"p-0\"></TableHeadCell>\n\t</svelte:fragment>\n\n\t<svelte:fragment slot=\"bodyRow\" let:item>\n\t\t<TableBodyCell tdClass=\"px-4 py-2\">\n\t\t\t{formatTimestampSecondsAsLocal(BigInt(item.timestamp))}\n\t\t</TableBodyCell>\n\t\t<TableBodyCell tdClass=\"break-all py-2 min-w-32\">\n\t\t\t<Hash type={HashType.Wallet} value={item.transaction.from} />\n\t\t</TableBodyCell>\n\t\t<TableBodyCell tdClass=\"break-all py-2 min-w-32\">\n\t\t\t<Hash type={HashType.Transaction} value={item.transaction.id} />\n\t\t</TableBodyCell>\n\t\t<TableBodyCell tdClass=\"break-all py-2\">\n\t\t\t{item.inputVaultBalanceChange.formattedAmount}\n\t\t\t{item.inputVaultBalanceChange.token.symbol}\n\t\t</TableBodyCell>\n\t\t<TableBodyCell tdClass=\"break-all py-2\">\n\t\t\t{item.outputVaultBalanceChange.formattedAmount}\n\t\t\t{item.outputVaultBalanceChange.token.symbol}\n\t\t</TableBodyCell>\n\t\t<TableBodyCell tdClass=\"break-all py-2\" data-testid=\"io-ratio\">\n\t\t\t{Math.abs(\n\t\t\t\tNumber(item.inputVaultBalanceChange.formattedAmount) /\n\t\t\t\t\tNumber(item.outputVaultBalanceChange.formattedAmount)\n\t\t\t)}\n\t\t\t<span class=\"text-gray-400\">\n\t\t\t\t({Math.abs(\n\t\t\t\t\tNumber(item.outputVaultBalanceChange.formattedAmount) /\n\t\t\t\t\t\tNumber(item.inputVaultBalanceChange.formattedAmount)\n\t\t\t\t)})\n\t\t\t</span>\n\t\t</TableBodyCell>\n\t\t{#if rpcs && handleDebugTradeModal}\n\t\t\t<TableBodyCell tdClass=\"py-2\">\n\t\t\t\t<button\n\t\t\t\t\tdata-testid=\"debug-trade-button\"\n\t\t\t\t\tclass=\"text-gray-500 hover:text-gray-700\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tif (rpcs) handleDebugTradeModal(item.transaction.id, rpcs);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<BugOutline size=\"xs\" />\n\t\t\t\t</button>\n\t\t\t</TableBodyCell>\n\t\t{/if}\n\t</svelte:fragment>\n</AppTable>\n","<script>import { createEventDispatcher } from \"svelte\";\nimport { PenSolid } from \"flowbite-svelte-icons\";\nexport let displayValue;\nlet textContent;\nlet editableSpan;\nlet dispatch = createEventDispatcher();\nconst inputBlurred = () => {\n  displayValue = textContent;\n  dispatch(\"blur\", { value: textContent });\n};\nconst handleKeyDown = (event) => {\n  if (event.key === \"Enter\") {\n    editableSpan.blur();\n  }\n};\n</script>\n\n<!-- svelte-ignore a11y-no-static-element-interactions -->\n<div\n\tdata-testid=\"editableSpanWrapper\"\n\tclass=\"flex items-center gap-x-1 border-b-2 border-dotted text-sm text-gray-400 dark:text-gray-400\"\n>\n\t<PenSolid class=\"h-3 w-3 cursor-pointer\" />\n\t<span>Block:</span>\n\t<div class=\"relative\">\n\t\t<span\n\t\t\tdata-testid=\"editableSpan\"\n\t\t\tbind:this={editableSpan}\n\t\t\tbind:textContent\n\t\t\tcontenteditable=\"true\"\n\t\t\ton:keydown={handleKeyDown}\n\t\t\ton:blur={inputBlurred}>{displayValue}</span\n\t\t>\n\t</div>\n</div>\n","<script>import { useToasts } from \"../../providers/toasts/useToasts\";\nimport { invalidateTanstackQueries } from \"../../queries/queryClient\";\nimport Refresh from \"../icon/Refresh.svelte\";\nimport EditableSpan from \"../EditableSpan.svelte\";\nimport { QKEY_ORDER_QUOTE } from \"../../queries/keys\";\nimport { hexToNumber, isHex } from \"viem\";\nimport { createQuery, useQueryClient } from \"@tanstack/svelte-query\";\nimport {\n  Table,\n  TableBody,\n  TableBodyCell,\n  TableBodyRow,\n  TableHead,\n  TableHeadCell\n} from \"flowbite-svelte\";\nimport { BugOutline, ClipboardOutline, PauseSolid, PlaySolid } from \"flowbite-svelte-icons\";\nimport Tooltip from \"../Tooltip.svelte\";\nexport let order;\nexport let handleQuoteDebugModal = void 0;\nlet enabled = true;\nconst queryClient = useQueryClient();\nconst { errToast, addToast } = useToasts();\nconst refreshQuotes = async () => {\n  try {\n    await invalidateTanstackQueries(queryClient, [order.id, QKEY_ORDER_QUOTE + order.id]);\n  } catch {\n    errToast(\"Failed to refresh\");\n  }\n};\nconst copyQuoteError = async (error) => {\n  if (!error) {\n    errToast(\"No quote error to copy\");\n    return;\n  }\n  try {\n    if (typeof navigator === \"undefined\" || !navigator.clipboard?.writeText) {\n      throw new Error(\"Clipboard API unavailable\");\n    }\n    await navigator.clipboard.writeText(error);\n    addToast({\n      message: \"Copied quote error\",\n      type: \"success\",\n      color: \"green\"\n    });\n  } catch (copyError) {\n    errToast(\n      \"Failed to copy quote error\",\n      copyError instanceof Error ? copyError.message : void 0\n    );\n  }\n};\n$: orderQuoteQuery = createQuery({\n  queryKey: [order.id, QKEY_ORDER_QUOTE + order.id],\n  queryFn: async () => {\n    const result = await order.getQuotes(blockNumber);\n    if (result.error) throw new Error(result.error.msg);\n    return result.value;\n  },\n  enabled: !!order.id && enabled\n});\nlet blockNumber;\n$: orderModalArg = order;\n</script>\n\n<div class=\"mt-4\">\n\t<div class=\"mb-4 flex items-center justify-between\">\n\t\t<h2 class=\"text-lg font-semibold\">Order quotes</h2>\n\t\t<div class=\"flex items-center gap-x-1\">\n\t\t\t{#if $orderQuoteQuery.data && $orderQuoteQuery.data.length > 0 && isHex($orderQuoteQuery.data[0].blockNumber)}\n\t\t\t\t<EditableSpan\n\t\t\t\t\tdisplayValue={blockNumber?.toString() ||\n\t\t\t\t\t\thexToNumber($orderQuoteQuery.data[0].blockNumber).toString()}\n\t\t\t\t\ton:focus={() => {\n\t\t\t\t\t\tenabled = false;\n\t\t\t\t\t}}\n\t\t\t\t\ton:blur={({ detail: { value } }) => {\n\t\t\t\t\t\tblockNumber = BigInt(value);\n\t\t\t\t\t\trefreshQuotes();\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t{/if}\n\t\t\t<span></span>\n\t\t\t<Refresh\n\t\t\t\tdata-testid=\"refresh-button\"\n\t\t\t\tclass=\"h-8 w-5 cursor-pointer text-gray-400 dark:text-gray-400\"\n\t\t\t\ton:click={refreshQuotes}\n\t\t\t\tspin={$orderQuoteQuery.isLoading || $orderQuoteQuery.isFetching}\n\t\t\t/>\n\t\t\t<PauseSolid\n\t\t\t\tclass={`ml-2 h-8 w-3 cursor-pointer text-gray-400 dark:text-gray-400 ${!enabled ? 'hidden' : ''}`}\n\t\t\t\ton:click={() => {\n\t\t\t\t\tenabled = false;\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<PlaySolid\n\t\t\t\ton:click={() => {\n\t\t\t\t\tenabled = true;\n\t\t\t\t\tblockNumber = undefined;\n\t\t\t\t\trefreshQuotes();\n\t\t\t\t}}\n\t\t\t\tclass={`ml-2 h-8 w-3 cursor-pointer text-gray-400 dark:text-gray-400 ${enabled ? 'hidden' : ''}`}\n\t\t\t/>\n\t\t</div>\n\t</div>\n\n\t<Table divClass=\"rounded-lg lg:overflow-hidden overflow-auto dark:border-none border\">\n\t\t<TableHead data-testid=\"head\">\n\t\t\t<TableHeadCell class=\"w-[80px]\" data-testid=\"orderQuotesPair\">Pair</TableHeadCell>\n\t\t\t<TableHeadCell class=\"w-1/4\" data-testid=\"orderQuotesMaxOutput\">Maximum Output</TableHeadCell>\n\t\t\t<TableHeadCell class=\"w-1/4\" data-testid=\"orderQuotesPrice\">Price</TableHeadCell>\n\t\t\t<TableHeadCell data-testid=\"orderQuotesPrice\">Maximum Input</TableHeadCell>\n\t\t\t<TableHeadCell class=\"w-[50px]\" />\n\t\t</TableHead>\n\n\t\t<TableBody>\n\t\t\t{#if $orderQuoteQuery.data && $orderQuoteQuery.data.length > 0}\n\t\t\t\t{#each $orderQuoteQuery.data as item, index}\n\t\t\t\t\t{#if item.success && item.data}\n\t\t\t\t\t\t<TableBodyRow data-testid=\"bodyRow\">\n\t\t\t\t\t\t\t<TableBodyCell>{item.pair.pairName}</TableBodyCell>\n\t\t\t\t\t\t\t<TableBodyCell>{item.data.formattedMaxOutput}</TableBodyCell>\n\t\t\t\t\t\t\t<TableBodyCell\n\t\t\t\t\t\t\t\t>{item.data.formattedRatio}\n\t\t\t\t\t\t\t\t<span class=\"text-gray-400\">({item.data.formattedInverseRatio})</span\n\t\t\t\t\t\t\t\t></TableBodyCell\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<TableBodyCell>{item.data.formattedMaxInput}</TableBodyCell>\n\t\t\t\t\t\t\t<TableBodyCell>\n\t\t\t\t\t\t\t\t{#if handleQuoteDebugModal}\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ton:click={() =>\n\t\t\t\t\t\t\t\t\t\t\thandleQuoteDebugModal(\n\t\t\t\t\t\t\t\t\t\t\t\torderModalArg,\n\t\t\t\t\t\t\t\t\t\t\t\titem.pair.inputIndex,\n\t\t\t\t\t\t\t\t\t\t\t\titem.pair.outputIndex,\n\t\t\t\t\t\t\t\t\t\t\t\titem.pair.pairName,\n\t\t\t\t\t\t\t\t\t\t\t\tBigInt($orderQuoteQuery.data[0].blockNumber)\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<BugOutline size=\"sm\" color=\"grey\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</TableBodyCell>\n\t\t\t\t\t\t</TableBodyRow>\n\t\t\t\t\t{:else if !item.success && item.error}\n\t\t\t\t\t\t<TableBodyRow>\n\t\t\t\t\t\t\t<TableBodyCell>{item.pair.pairName}</TableBodyCell>\n\t\t\t\t\t\t\t<TableBodyCell colspan=\"3\" class=\"text-sm text-red-500 dark:text-red-400\">\n\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\ttriggeredBy={`#quote-error-${index}`}\n\t\t\t\t\t\t\t\t\tcustomClass=\"max-w-sm whitespace-pre-wrap break-words\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{item.error}\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t<div class=\"flex items-start gap-2\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclass=\"mt-0.5 rounded border border-transparent p-1 text-gray-400 transition hover:bg-gray-100 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-gray-100\"\n\t\t\t\t\t\t\t\t\t\taria-label=\"Copy quote error\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => copyQuoteError(item.error)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<ClipboardOutline size=\"sm\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tid={`quote-error-${index}`}\n\t\t\t\t\t\t\t\t\t\tclass=\"max-w-xl cursor-pointer self-start truncate border-dotted border-red-500 pr-2\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{item.error}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</TableBodyCell>\n\t\t\t\t\t\t\t<TableBodyCell>\n\t\t\t\t\t\t\t\t{#if handleQuoteDebugModal}\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ton:click={() =>\n\t\t\t\t\t\t\t\t\t\t\thandleQuoteDebugModal(\n\t\t\t\t\t\t\t\t\t\t\t\torder,\n\t\t\t\t\t\t\t\t\t\t\t\titem.pair.inputIndex,\n\t\t\t\t\t\t\t\t\t\t\t\titem.pair.outputIndex,\n\t\t\t\t\t\t\t\t\t\t\t\titem.pair.pairName,\n\t\t\t\t\t\t\t\t\t\t\t\tBigInt($orderQuoteQuery.data[0].blockNumber)\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<BugOutline size=\"sm\" color=\"grey\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</TableBodyCell>\n\t\t\t\t\t\t</TableBodyRow>\n\t\t\t\t\t{/if}\n\t\t\t\t{/each}\n\t\t\t{:else if $orderQuoteQuery.isError}\n\t\t\t\t<TableBodyRow>\n\t\t\t\t\t<TableBodyCell colspan=\"3\" class=\"text-center text-red-500 dark:text-red-400\">\n\t\t\t\t\t\t{'Error fetching quotes:'} <br />\n\t\t\t\t\t\t{$orderQuoteQuery.error}\n\t\t\t\t\t</TableBodyCell>\n\t\t\t\t</TableBodyRow>\n\t\t\t{/if}\n\t\t</TableBody>\n\t</Table>\n</div>\n","<script>import Hash, { HashType } from \"../Hash.svelte\";\nimport BadgeActive from \"../BadgeActive.svelte\";\nimport OrderTradesChart from \"../charts/OrderTradesChart.svelte\";\nimport OrderTradesListTable from \"../tables/OrderTradesListTable.svelte\";\nimport TanstackOrderQuote from \"./TanstackOrderQuote.svelte\";\nimport TanstackPageContentDetail from \"./TanstackPageContentDetail.svelte\";\nimport CardProperty from \"../CardProperty.svelte\";\nimport { formatTimestampSecondsAsLocal } from \"../../services/time\";\nimport ButtonVaultLink from \"../ButtonVaultLink.svelte\";\nimport { QKEY_ORDER } from \"../../queries/keys\";\nimport CodeMirrorRainlang from \"../CodeMirrorRainlang.svelte\";\nimport { createQuery, useQueryClient } from \"@tanstack/svelte-query\";\nimport { Button, TabItem, Tabs, Tooltip } from \"flowbite-svelte\";\nimport { onDestroy } from \"svelte\";\nimport Refresh from \"../icon/Refresh.svelte\";\nimport { invalidateTanstackQueries } from \"../../queries/queryClient\";\nimport {\n  ArrowDownToBracketOutline,\n  ArrowUpFromBracketOutline,\n  InfoCircleOutline,\n  WalletOutline\n} from \"flowbite-svelte-icons\";\nimport { getExplorerLink } from \"../../services/getExplorerLink\";\nimport { useAccount } from \"../../providers/wallet/useAccount\";\nimport {\n  RaindexClient,\n  RaindexOrder,\n  RaindexVault,\n  RaindexVaultsList\n} from \"@rainlanguage/orderbook\";\nimport { useToasts } from \"../../providers/toasts/useToasts\";\nimport { useRaindexClient } from \"../../hooks/useRaindexClient\";\nexport let handleQuoteDebugModal = void 0;\nexport let handleDebugTradeModal = void 0;\nexport let colorTheme;\nexport let codeMirrorTheme;\nexport let lightweightChartsTheme;\nexport let orderbookAddress;\nexport let orderHash;\nexport let chainId;\nexport let rpcs = void 0;\nexport let onRemove;\nexport let onDeposit;\nexport let onWithdraw;\nexport let onWithdrawAll = void 0;\nlet codeMirrorDisabled = true;\nlet codeMirrorStyles = {};\nconst queryClient = useQueryClient();\nconst { matchesAccount } = useAccount();\nconst { errToast } = useToasts();\nconst raindexClient = useRaindexClient();\n$: orderDetailQuery = createQuery({\n  queryKey: [orderHash, QKEY_ORDER + orderHash],\n  queryFn: async () => {\n    const result = await raindexClient.getOrderByHash(chainId, orderbookAddress, orderHash);\n    if (result.error) throw new Error(result.error.readableMsg);\n    return result.value;\n  }\n});\nconst interval = setInterval(async () => {\n  await invalidateTanstackQueries(queryClient, [orderHash]);\n}, 1e4);\nonDestroy(() => {\n  clearInterval(interval);\n});\nconst handleRefresh = async () => {\n  try {\n    await invalidateTanstackQueries(queryClient, [orderHash]);\n  } catch {\n    errToast(\"Failed to refresh\");\n  }\n};\nconst vaultTypesMap = [\n  { key: \"Output vaults\", type: \"output\", getter: \"outputsList\" },\n  { key: \"Input vaults\", type: \"input\", getter: \"inputsList\" },\n  {\n    key: \"Input & output vaults\",\n    type: \"inputOutput\",\n    getter: \"inputsOutputsList\"\n  }\n];\n</script>\n\n<TanstackPageContentDetail query={orderDetailQuery} emptyMessage=\"Order not found\">\n\t<svelte:fragment slot=\"top\" let:data>\n\t\t<div\n\t\t\tclass=\"flex w-full flex-wrap items-center justify-between gap-4 text-3xl font-medium lg:justify-between dark:text-white\"\n\t\t>\n\t\t\t<div class=\"flex items-center gap-x-2\">\n\t\t\t\t<div class=\"flex gap-x-2\">\n\t\t\t\t\t<span class=\"font-light\">Order</span>\n\t\t\t\t\t<Hash shorten value={data.orderHash} />\n\t\t\t\t</div>\n\t\t\t\t<BadgeActive active={data.active} large />\n\t\t\t</div>\n\n\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t{#if matchesAccount(data.owner)}\n\t\t\t\t\t{#if data.active}\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ton:click={() => onRemove(raindexClient, data)}\n\t\t\t\t\t\t\tdata-testid=\"remove-button\"\n\t\t\t\t\t\t\taria-label=\"Remove order\">Remove</Button\n\t\t\t\t\t\t>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\n\t\t\t\t<Refresh\n\t\t\t\t\ttestId=\"top-refresh\"\n\t\t\t\t\ton:click={handleRefresh}\n\t\t\t\t\tspin={$orderDetailQuery.isLoading || $orderDetailQuery.isFetching}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t</svelte:fragment>\n\t<svelte:fragment slot=\"card\" let:data>\n\t\t<div class=\"flex flex-col gap-y-6\">\n\t\t\t<CardProperty>\n\t\t\t\t<svelte:fragment slot=\"key\">Orderbook</svelte:fragment>\n\t\t\t\t<svelte:fragment slot=\"value\">\n\t\t\t\t\t<Hash type={HashType.Identifier} shorten={false} value={data.orderbook} />\n\t\t\t\t</svelte:fragment>\n\t\t\t</CardProperty>\n\n\t\t\t<CardProperty>\n\t\t\t\t<svelte:fragment slot=\"key\">Owner</svelte:fragment>\n\t\t\t\t<svelte:fragment slot=\"value\">\n\t\t\t\t\t{@const explorerLink = getExplorerLink(data.owner, chainId, 'address')}\n\t\t\t\t\t{#if explorerLink}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={explorerLink}\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\tclass=\"flex items-center justify-start space-x-2 text-left text-blue-500 hover:underline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<WalletOutline size=\"sm\" />\n\t\t\t\t\t\t\t<span>{data.owner}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<Hash type={HashType.Wallet} shorten={false} value={data.owner} />\n\t\t\t\t\t{/if}\n\t\t\t\t</svelte:fragment>\n\t\t\t</CardProperty>\n\n\t\t\t<CardProperty>\n\t\t\t\t<svelte:fragment slot=\"key\">Created</svelte:fragment>\n\t\t\t\t<svelte:fragment slot=\"value\">\n\t\t\t\t\t{formatTimestampSecondsAsLocal(data.timestampAdded)}\n\t\t\t\t</svelte:fragment>\n\t\t\t</CardProperty>\n\n\t\t\t{#each vaultTypesMap as { key, type, getter }}\n\t\t\t\t{@const filteredVaults = data.vaultsList.items.filter((vault) => vault.vaultType === type)}\n\t\t\t\t{@const vaultsListByType = data[getter]}\n\t\t\t\t{#if filteredVaults.length !== 0}\n\t\t\t\t\t<CardProperty>\n\t\t\t\t\t\t<svelte:fragment slot=\"key\">\n\t\t\t\t\t\t\t<div class=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t<div class=\"flex items-center gap-x-2\">\n\t\t\t\t\t\t\t\t\t{key}\n\t\t\t\t\t\t\t\t\t{#if type === 'inputOutput'}\n\t\t\t\t\t\t\t\t\t\t<InfoCircleOutline class=\"h-4 w-4\" /><Tooltip\n\t\t\t\t\t\t\t\t\t\t\t>{'These vaults can be an input or an output for this order'}</Tooltip\n\t\t\t\t\t\t\t\t\t\t>{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{#if onWithdrawAll}\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tcolor=\"light\"\n\t\t\t\t\t\t\t\t\t\tsize=\"xs\"\n\t\t\t\t\t\t\t\t\t\ton:click={() =>\n\t\t\t\t\t\t\t\t\t\t\tvaultsListByType && onWithdrawAll(raindexClient, vaultsListByType)}\n\t\t\t\t\t\t\t\t\t\tdisabled={!vaultsListByType ||\n\t\t\t\t\t\t\t\t\t\t\tvaultsListByType.getWithdrawableVaults()?.value?.length === 0}\n\t\t\t\t\t\t\t\t\t\tdata-testid=\"withdraw-all-button\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<ArrowUpFromBracketOutline size=\"xs\" class=\"mr-2\" />\n\t\t\t\t\t\t\t\t\t\tWithdraw all\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</svelte:fragment>\n\t\t\t\t\t\t<svelte:fragment slot=\"value\">\n\t\t\t\t\t\t\t<div class=\"mt-2 space-y-2\">\n\t\t\t\t\t\t\t\t{#each filteredVaults as vault}\n\t\t\t\t\t\t\t\t\t<ButtonVaultLink tokenVault={vault} {chainId} {orderbookAddress}>\n\t\t\t\t\t\t\t\t\t\t<svelte:fragment slot=\"buttons\">\n\t\t\t\t\t\t\t\t\t\t\t{#if matchesAccount(vault.owner)}\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"light\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"xs\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-testid=\"deposit-button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => onDeposit(raindexClient, vault)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ArrowDownToBracketOutline size=\"xs\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"light\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"xs\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-testid=\"withdraw-button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => onWithdraw(raindexClient, vault)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ArrowUpFromBracketOutline size=\"xs\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</svelte:fragment>\n\t\t\t\t\t\t\t\t\t</ButtonVaultLink>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</svelte:fragment>\n\t\t\t\t\t</CardProperty>\n\t\t\t\t{/if}\n\t\t\t{/each}\n\t\t\t{#if onWithdrawAll}\n\t\t\t\t<Button\n\t\t\t\t\tsize=\"xs\"\n\t\t\t\t\ton:click={() =>\n\t\t\t\t\t\t$orderDetailQuery.data?.vaultsList &&\n\t\t\t\t\t\tonWithdrawAll(raindexClient, $orderDetailQuery.data.vaultsList)}\n\t\t\t\t\tdisabled={!$orderDetailQuery.data?.vaultsList ||\n\t\t\t\t\t\t$orderDetailQuery.data?.vaultsList?.getWithdrawableVaults()?.value?.length === 0}\n\t\t\t\t\tdata-testid=\"withdraw-all-button\"\n\t\t\t\t>\n\t\t\t\t\t<ArrowUpFromBracketOutline size=\"xs\" class=\"mr-2\" />\n\t\t\t\t\tWithdraw all vaults\n\t\t\t\t</Button>\n\t\t\t{/if}\n\t\t</div>\n\t</svelte:fragment>\n\t<svelte:fragment slot=\"chart\" let:data>\n\t\t<OrderTradesChart order={data} {lightweightChartsTheme} {colorTheme} />\n\t</svelte:fragment>\n\t<svelte:fragment slot=\"below\" let:data>\n\t\t<TanstackOrderQuote order={data} {handleQuoteDebugModal} />\n\t\t<Tabs\n\t\t\tstyle=\"underline\"\n\t\t\tcontentClass=\"mt-4\"\n\t\t\tdefaultClass=\"flex flex-wrap space-x-2 rtl:space-x-reverse mt-4 list-none\"\n\t\t>\n\t\t\t<TabItem title=\"Rainlang source\">\n\t\t\t\t<div class=\"mb-8 overflow-hidden rounded-lg border dark:border-none\">\n\t\t\t\t\t<CodeMirrorRainlang\n\t\t\t\t\t\torder={data}\n\t\t\t\t\t\tcodeMirrorTheme={$codeMirrorTheme}\n\t\t\t\t\t\t{codeMirrorDisabled}\n\t\t\t\t\t\t{codeMirrorStyles}\n\t\t\t\t\t></CodeMirrorRainlang>\n\t\t\t\t</div>\n\t\t\t</TabItem>\n\t\t\t<TabItem open title=\"Trades\">\n\t\t\t\t<OrderTradesListTable order={data} {handleDebugTradeModal} {rpcs} />\n\t\t\t</TabItem>\n\t\t\t<TabItem title=\"Volume\">\n\t\t\t\t<div>TODO: Issue #1989</div>\n\t\t\t\t<!-- <OrderVaultsVolTable order={data} /> -->\n\t\t\t</TabItem>\n\t\t\t<TabItem title=\"APY\">\n\t\t\t\t<div>TODO: Issue #1989</div>\n\t\t\t\t<!-- <OrderApy order={data} /> -->\n\t\t\t</TabItem>\n\t\t</Tabs>\n\t</svelte:fragment>\n</TanstackPageContentDetail>\n","<script lang=\"ts\">\n  import {\n    invalidateTanstackQueries,\n    PageHeader,\n    useRaindexClient,\n  } from '@rainlanguage/ui-components';\n  import { page } from '$app/stores';\n  import { OrderDetail } from '@rainlanguage/ui-components';\n  import { codeMirrorTheme, lightweightChartsTheme, colorTheme } from '$lib/stores/darkMode';\n  import {\n    handleQuoteDebugModal,\n    handleDepositModal,\n    handleWithdrawModal,\n    handleOrderRemoveModal,\n    handleDebugTradeModal,\n  } from '$lib/services/modal';\n  import type {\n    Address,\n    Hex,\n    RaindexClient,\n    RaindexOrder,\n    RaindexVault,\n  } from '@rainlanguage/orderbook';\n  import { useQueryClient } from '@tanstack/svelte-query';\n  import { getAllContexts } from 'svelte';\n\n  const context = getAllContexts();\n\n  const raindexClient = useRaindexClient();\n  const queryClient = useQueryClient();\n\n  const { chainId, orderbook, orderHash } = $page.params;\n  const parsedOrderHash = orderHash as Hex;\n  const parsedChainId = Number(chainId);\n  const orderbookAddress = orderbook as Address;\n\n  let rpcs: string[] = [];\n\n  $: if (raindexClient) {\n    const networks = raindexClient.getNetworkByChainId(parsedChainId);\n    if (networks.error) throw new Error(networks.error.readableMsg);\n    rpcs = networks.value.rpcs;\n  }\n\n  function onRemove(_raindexClient: RaindexClient, order: RaindexOrder) {\n    handleOrderRemoveModal(\n      order,\n      () => {\n        invalidateTanstackQueries(queryClient, [parsedOrderHash]);\n      },\n      context,\n    );\n  }\n\n  function onDeposit(_raindexClient: RaindexClient, vault: RaindexVault) {\n    handleDepositModal(\n      vault,\n      () => {\n        invalidateTanstackQueries(queryClient, [parsedOrderHash]);\n      },\n      context,\n    );\n  }\n\n  function onWithdraw(_raindexClient: RaindexClient, vault: RaindexVault) {\n    handleWithdrawModal(\n      vault,\n      () => {\n        invalidateTanstackQueries(queryClient, [parsedOrderHash]);\n      },\n      context,\n    );\n  }\n</script>\n\n<PageHeader title=\"Order\" pathname={$page.url.pathname} />\n\n<div data-testid=\"order-detail\">\n  <OrderDetail\n    chainId={parsedChainId}\n    {orderbookAddress}\n    orderHash={parsedOrderHash}\n    {colorTheme}\n    {codeMirrorTheme}\n    {lightweightChartsTheme}\n    {handleQuoteDebugModal}\n    {handleDebugTradeModal}\n    {onRemove}\n    {onDeposit}\n    {onWithdraw}\n    {rpcs}\n  />\n</div>\n"],"names":["lightweightChartsTheme","colorTheme","handleDebugTradeModal","handleQuoteDebugModal","codeMirrorTheme"],"mappings":";;;;;;;;;;;;;;;;;;;;;QAEM,MAAM,WAAW,SAAS,KAAA,CAAA;QAC1B,QAAK;AAAA,IACP,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA;AAEG,MAAA,EAAA,OAAO,IAAI,QAAQ,KAAI,IAAA;AACvB,MAAA,EAAA,OAAO,IAAI,QAAQ,MAAK,IAAA;AACxB,MAAA,EAAA,YAAY,cAAa,IAAA;;;;;;;;oBAM9B,WAAW;AAAA;sCACR,QAAQ,YAAY,MAAM,IAAI,GAAG,QAAQ,KAAK,CAAA;AAAA;;;6CAEzC,SAAS;AAAA;;;;;;;;QCnBjB,MAAM,WAAW,SAAS,KAAA,CAAA;QAC1B,QAAK;AAAA,IACP,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA,IACJ,IAAI;AAAA;AAEG,MAAA,EAAA,OAAO,IAAI,QAAQ,KAAI,IAAA;AACvB,MAAA,EAAA,OAAO,IAAI,QAAQ,MAAK,IAAA;AACxB,MAAA,EAAA,YAAY,YAAW,IAAA;;;;;;;;oBAM5B,WAAW;AAAA;sCACR,QAAQ,YAAY,MAAM,IAAI,GAAG,QAAQ,KAAK,CAAA;AAAA;;;6CAEzC,SAAS;AAAA;;;;;;;QCpBZ,OAAM,IAAA;;YAGZ,wGACqB,OAAO,GAAA,IAAA;AAAA;;;yGAEN,OAAO,GAAA,IAAA;AAAA;;;;;;QCLvB,WAAU,IAAA;QACV,QAAO,IAAA;QACP,iBAAgB,IAAA;;;;;;;MAQY,aAAA,eAAA,WAAW,OAAO;AAAA;;;;qDACzB,MAAM,WAAW,OAAO,CAAA,CAAA;AAAA;;0CAGpC,OAAO,IAAI,gBAAgB,IAAI,WAAW,EAAE,IAC3C,CAAA,CAAA,GAAA,cAAA,MAAA,cAAA,WAAW,OAAO,IAEnC,CAAA,CAAA,IAAA,OAAA,WAAW,MAAM,IAAI,CAAA,KAAA,OAAI,WAAW,MAAM,MAAM,CAAA,yEAAA,OAGvC,WAAW,gBAAgB,CAAA,sBAAA,MAAA,UAAA,MAAA,QAAA,EAAA,IAAA,EAAA;;;ACrB7B,MAAA,EAAA,SAAS,MAAK,IAAA;;AAGE,SAAA,GAAA,mBAAA,QAAA,QAAA,EAAA,SAAA,UAAA,OAAA,OAAA,CAAA,GAAA,EAAA,UAAA,OAAM,GAAM,OAAO,GAAA,IAAA;AAAA;;;;;;ACFxC,QAAA,sBAAsB,KAAK,KAAK;QAChC,oBAAoB,sBAAsB;QAC1C,qBAAqB,sBAAsB;QAC3C,oBAAoB,sBAAsB;AACrC,MAAA,EAAA,YAAY,kBAAiB,IAAA;;;;;;;;;;;;;;YAM9B,QAAA,cAAc;AAAA;;;;;;;;;;;;YAMd,QAAA,cAAc;AAAA;;;;;;;;;;;;YAMd,QAAA,cAAc;AAAA;;;;;;;;;;;;YAMd,QAAA,cAAc;AAAA;;;;;;;;;;;;;;;;QCxBb,OAAI,CAAA,EAAA,IAAA;AACJ,MAAA,EAAA,UAAU,MAAK,IAAA;AACf,MAAA,EAAA,eAAe,aAAY,IAAA;AAC3B,MAAA,EAAA,eAAc,IAAA;AACd,MAAA,EAAA,qBAAoB,IAAA;QACpB,aAAY,IAAA;QACZ,wBAAAA,wBAAsB,IAAA;;AAC7B,MAAA;MAGA;AAuDJ,YAAS,MAAA;AAAA;;;;;;;;;;;;;;AAUD,iBAAA,+OAAA,UAAU,iFACiD,KAAK,CAAA,4BAKhE;;;;;;;;;gBAGA,KAAK,SAAS;;;;;;;;;;UAMf,EAAA,6GAAA,KAAK,WAAW,MAAM,6GAExB,YAAY,CAAA;;;sBAMT,OAAO;AAAA;;;8BAFA,cAAY,CAAA,CAAA,SAAA;AAAA;;;;AC/Fd,MAAA,oBAAoB,CAAC,SAAS;AACvC,QAAM,aAAa,CAAC;AACd,QAAA,gCAAgB,IAAI;AAC1B,aAAW,aAAa,MAAM;AAC1B,QAAI,CAAC,UAAU,IAAI,UAAU,IAAI,GAAG;AAChC,iBAAW,KAAK,SAAS;AACf,gBAAA,IAAI,UAAU,IAAI;AAAA,IAAA;AAAA,EAChC;AAEG,SAAA;AACX;AAQa,MAAA,uBAAuB,CAAC,MAAM,YAAY;AAC7C,QAAA,EAAE,gBAAgB,cAAA,IAAkB;AAC1C,QAAM,kBAAkB,KAAK,IAAI,CAAC,OAAO;AAAA,IACrC,OAAO,eAAe,CAAC;AAAA,IACvB,MAAM,cAAc,CAAC;AAAA,EAAA,EACvB;AACF,QAAM,aAAa,OAAO,iBAAiB,CAAC,MAAM,EAAE,IAAI;AACxD,SAAO,kBAAkB,UAAU;AACvC;;;;QC/BW,MAAK,IAAA;;QACL,cAAa,IAAA;QACb,eAAc,IAAA;QACd,wBAAAA,wBAAsB,IAAA;QAK3B,eAAgB,WAAU,MAAM,cAAa,EAAG,WAAW,GAAC;;;;;AAJ/D,SAAO,qBAAqB,OAAO,QAAI,CAAA,GAAA,EACxC,gBACA,eAAA;;iJAQQ,OAAO,UAAS,GACrB,SAAO,EAAA,wBAAAA,yBAAA,GAAA,IAAA,CAAA,CAAA,CAAA;;ACfI,SAAA,gCAAgC,mBAAmBC,aAAY;AAC3E,QAAM,kBAAkB,kBAAkB,IAAI,CAAC,OAAO;AAAA,IAClD,OAAO,KAAK,IAAI,OAAO,EAAE,wBAAwB,eAAe,IAC5D,OAAO,EAAE,yBAAyB,eAAe,CAAC;AAAA,IACtD,MAAM,+BAA+B,OAAO,EAAE,SAAS,CAAC;AAAA,IACxD,OAAOA,eAAc,SAAS,YAAY;AAAA,IAC1C,cAAc,OAAO,EAAE,yBAAyB,MAAM;AAAA,EAAA,EACxD;AAGF,QAAM,mBAAmB,MAAM,KAAK,IAAI,IAAI,gBAAgB,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AAC/E,QAAM,YAAY,CAAC;AACF,mBAAA,QAAQ,CAAC,cAAc;AACpC,UAAM,2BAA2B,gBAAgB,OAAO,CAAC,MAAM,EAAE,SAAS,SAAS;AAC/E,QAAA,yBAAyB,SAAS,GAAG;AAE/B,YAAA,aAAa,yBAAyB,OAAO,CAAC,KAAK,MAAM,MAAM,EAAE,QAAQ,EAAE,cAAc,CAAC;AAC1F,YAAA,kBAAkB,yBAAyB,OAAO,CAAC,KAAK,MAAM,MAAM,EAAE,cAAc,CAAC;AAC3F,YAAM,iBAAiB,aAAa;AACpC,gBAAU,KAAK;AAAA,QACX,OAAO;AAAA,QACP,MAAM;AAAA,QACN,OAAO,yBAAyB,CAAC,EAAE;AAAA,MAAA,CACtC;AAAA,IAAA,OAEA;AACS,gBAAA,KAAK,yBAAyB,CAAC,CAAC;AAAA,IAAA;AAAA,EAC9C,CACH;AACD,SAAO,OAAO,WAAW,CAAC,MAAM,EAAE,IAAI;AAC1C;;;;QC3BW,MAAK,IAAA;QACL,YAAAA,YAAU,IAAA;;QACV,wBAAAD,wBAAsB,IAAA;;;;AAC9B,UAAQ,YAAW;AAAA,IACpB,UAAW,CAAA,wBAAwB,MAAM,EAAE;AAAA,IAC3C,SAAO,YAAA;YACC,OAAI,MAAS,MAAM,cAAc,OAAO,GAAG,GAAA,QAAW,CAAC;UACzD,KAAK,MAAiB,OAAA,IAAA,MAAM,KAAK,MAAM,WAAW;AAC/C,aAAA,gCAAgC,KAAK,OAAO,WAAW;AAAA;;;;;;;;qBAQjD,OAAM,EAAE;AAAA,sBACP,OAAM,EAAE;AAAA;;;;;;;;ACpBpB,QAAA,sBAAsB,KAAK,KAAK;QAChC,sBAAsB,sBAAsB;MAE9C;QAIO,eAAc,IAAA;QACd,aAAY,IAAA;;;;;;;;;;;;;;;YAWb,QAAA,cAAc;AAAA;;;;;;;;;;;;YAWd,QAAA,cAAc;AAAA;;;;;;;;;;;;YAWd,QAAA,cAAc;AAAA;;;;;;;;;;;;;;;;QClCb,MAAK,IAAA;AACL,MAAA,EAAA,cAAa,IAAA;AACb,MAAA,EAAA,uBAAAE,gCAA8B,IAAA;MACrC;MACA;MACA;AA8BE,QAAA,WAAW;;;;;;;;;;AA7Bd,uBAAmB,oBAAmB;AAAA,MACvC,UAAQ,CAAG,MAAM,IAAI,yBAAyB,MAAM,EAAE;AAAA,MACtD,kBAAkB,gBAAS;AACzB;AACO,cAAA,CAAA,aAAa,YAAY,IAAU,MAAA,QAAQ,IAAG;AAAA,UACnD,MAAM,cACJ,iBAAiB,OAAO,cAAc,IAAS,QAC/C,eAAe,OAAO,YAAY,IAAS,MAAA;AAAA,UAE7C,MAAM,cACJ,iBAAiB,OAAO,cAAc,IAAS,QAC/C,eAAe,OAAO,YAAY,YAClC,YAAY,CAAA;AAAA;YAGZ,YAAY,MAAiB,OAAA,IAAA,MAAM,YAAY,MAAM,WAAW;YAChE,aAAa,MAAiB,OAAA,IAAA,MAAM,aAAa,MAAM,WAAW;cAChE,QAAQ,YAAY;cACpB,SAAS,aAAa;AACjB,YAAA,OAAA,UAAU,UAAQ;AAC3B,wBAAc;AAAA;eAET;AAAA;MAET,kBAAkB;AAAA,MAClB,kBAAmB,CAAA,UAAU,WAAW,kBAAa;eAC5C,SAAS,WAAW,oBAAoB,gBAAgB;;;;;;eAO3D;AAAA;sBAEO;AAAA,QACJ,UAAA,MAAM;AAAA;;;;;;AAsBb,qBAAA,GAAA,OAAA,8BAA8B,OAAO,KAAK,SAAS,CAAA,CAAA,CAAA;AAAA;;;;;;kBAGxC,MAAA,SAAS;AAAA,yBAAe,KAAK,YAAY;AAAA;;;;;;;;;;kBAGzC,MAAA,SAAS;AAAA,yBAAoB,KAAK,YAAY;AAAA;;;;;;;+BAGzD,KAAK,wBAAwB,eAAe,CAAA,IAAA,OAC5C,KAAK,wBAAwB,MAAM,MAAM,CAAA;AAAA;;;+BAGzC,KAAK,yBAAyB,eAAe,CAAA,IAAA,OAC7C,KAAK,yBAAyB,MAAM,MAAM,CAAA;AAAA;;;;;;;;;;AAG1C,uBAAA,GAAA,OAAA,KAAK,IACL,OAAO,KAAK,wBAAwB,eAAe,IAClD,OAAO,KAAK,yBAAyB,eAAe,CAGnD,CAAA,CAAA,iCAAA,OAAA,KAAK,IACN,OAAO,KAAK,yBAAyB,eAAe,IACnD,OAAO,KAAK,wBAAwB,eAAe,CAAA,CAAA,CAAA;AAAA;;UAIlD,CAAA,IAAA,QAAQA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA/CR,iBAAA,GAAA,gBAAgB,qCACD,WAAW,CAAA;;;;;;;;QCrDtB,aAAY,IAAA;MACnB;MACA;AACW,wBAAqB;;AAsBtB,SAAA,+IAAA,mBAAA,UAAA,UAAA,EAAA,SAAA,UAAA,EAAA,OAAA,yBAAA,GAAA,CAAA,GAAA,CAAA,CAAA,CAAA,oIAAA,cAAA,QAAA,iEAIa,YAAY,CAAA,KAAA,SAAA,WAAA,CAAA;;;;;QCd5B,MAAK,IAAA;AACL,MAAA,EAAA,uBAAAC,gCAA8B,IAAA;AACrC,MAAA,UAAU;AACM,iBAAc;AACH,YAAS;MAuCpC;;;AATD,8BAAA,kBAAkB,YAAW;AAAA,IAC9B,UAAQ,CAAG,MAAM,IAAI,mBAAmB,MAAM,EAAE;AAAA,IAChD,SAAO,YAAA;AACC,YAAA,SAAe,MAAA,MAAM,UAAU,WAAW;UAC5C,OAAO,MAAiB,OAAA,IAAA,MAAM,OAAO,MAAM,GAAG;AAC3C,aAAA,OAAO;AAAA;IAEhB,SAAW,CAAA,CAAA,MAAM,MAAM;AAAA;;AAUjB,SAAA,kMAAA,iBAAiB,QAAQ,iBAAiB,KAAK,SAAS,KAAK,MAAM,iBAAiB,KAAK,CAAC,EAAE,WAAW;;;MAE5F,cACb,YAAY,iBAAiB,KAAK,CAAC,EAAE,WAAW,EAAE,SAAQ;AAAA;;;;;;;;MAetD,MAAA,iBAAiB,aAAa,iBAAiB;AAAA;;;;;;6EAGwC,EAAE;AAAA;;;;;;6EAWd,QAAa;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sBAe1F,iBAAiB,QAAQ,iBAAiB,KAAK,SAAS,IACrD,GAAA,KAAA,iBAAiB,MAAI,CAAA,MAAA,UAAA;AACtB,qBAAA,GAAA,KAAK,WAAW,KAAK;;;;uCAER,KAAK,KAAK,QAAQ,CAAA;AAAA;;;uCAClB,KAAK,KAAK,kBAAkB,CAAA;AAAA;;;uCAEzC,KAAK,KAAK,cAAc,yCACI,KAAK,KAAK,qBAAqB,CAAA;AAAA;;;uCAG9C,KAAK,KAAK,iBAAiB,CAAA;AAAA;;;gCAErCA;;;;qBAgBG,GAAA,CAAA,KAAK,WAAW,KAAK;;;;uCAEd,KAAK,KAAK,QAAQ,CAAA;AAAA;;;;;;;;;;;;;yDAGH,KAAK;AAAA;;;;;AAGjC,qCAAA,GAAA,OAAA,KAAK,KAAK,CAAA;AAAA;;ufAYS,KAAK,IAAA,CAAA,CAAA,0FAAA,OAGvB,KAAK,KAAK,CAAA;AAAA;;;;gCAKRA;;;;;mBAkBA,GAAA,iBAAiB;;;;;;;;;;;uCAGvB,wBAAwB,CAAA,SAAA,OACxB,iBAAiB,KAAK,CAAA;AAAA;;;;;;;;;;;ACrJzB,IAAA,qBAAqB;;;;;AAbd,MAAA,EAAA,uBAAAA,gCAA8B,IAAA;AAC9B,MAAA,EAAA,uBAAAD,gCAA8B,IAAA;QAC9B,YAAAD,YAAU,IAAA;QACV,iBAAAG,iBAAe,IAAA;;QACf,wBAAAJ,wBAAsB,IAAA;QACtB,iBAAgB,IAAA;QAChB,UAAS,IAAA;QACT,QAAO,IAAA;AACP,MAAA,EAAA,cAAa,IAAA;QACb,SAAQ,IAAA;QACR,UAAS,IAAA;QACT,WAAU,IAAA;AACV,MAAA,EAAA,uBAAsB,IAAA;MAE7B,mBAAgB,CAAA;AACd,QAAA,cAAc,eAAc;AAC1B,QAAA,EAAA,mBAAmB,WAAU;AAChB,YAAS;AACxB,QAAA,gBAAgB,iBAAgB;AAShC,QAAA,WAAW;AAAA;YACT,0BAA0B,aAAW,CAAG,SAAS,CAAA;AAAA;IACtD;AAAA;AACH,YAAS,MAAA;AACP,kBAAc,QAAQ;AAAA;QASlB,gBAAa;AAAA;MACf,KAAK;AAAA,MAAiB,MAAM;AAAA,MAAU,QAAQ;AAAA;;MAC9C,KAAK;AAAA,MAAgB,MAAM;AAAA,MAAS,QAAQ;AAAA;;MAE5C,KAAK;AAAA,MACL,MAAM;AAAA,MACN,QAAQ;AAAA;;;;;;;;;;;;;;;AA3BT,+BAAA,mBAAmB,YAAW;AAAA,IAC/B,UAAW,CAAA,WAAW,aAAa,SAAS;AAAA,IAC5C,SAAO,YAAA;YACC,SAAM,MAAS,cAAc,eAAe,SAAS,kBAAkB,SAAS;UAClF,OAAO,MAAiB,OAAA,IAAA,MAAM,OAAO,MAAM,WAAW;AACnD,aAAA,OAAO;AAAA;;;;;;;aA2BgB;AAAA;;;;;2GAuJL,MAAI,uBAAAG,0BAAA,CAAA,GAAA,CAAA,CAAA,CAAA,IAAA,mBAAA,MAAA,MAAA,EAAA;AAAA;;;;;;;;;;;;;;6BASpB;AAAA,uCACU;AAAA;;;;;;;;;yHAOU,MAAI,uBAAAD,wBAAA,KAAA,GAAA,CAAA,GAAA,CAAA,CAAA,CAAA;AAAA;;;;;;;;;;;;;;;;;;mBApBV;AAAA;;;;;;;;;;;;;gBA/GV,MAAA,SAAS;AAAA,yBAAqB;AAAA,gBAAc,OAAA,KAAK;AAAA;;;;;;;;;;gBAOrD,eAAe,gBAAgB,KAAK,OAAO,SAAS,SAAS;sBAChE,0CAEG,cAAY,CAAA,CAAA,wIAAA,mBAAA,eAAA,eAAA,EAAA,SAAA,UAAA,EAAA,MAAA,KAAA,GAAA,IAAA,CAAA,CAAA,CAAA,UAAA,OAMX,KAAK,KAAK,CAAA;;;gBAGN,MAAA,SAAS;AAAA,yBAAiB;AAAA,gBAAc,OAAA,KAAK;AAAA;;;;;;;;;;6BAQzD,8BAA8B,KAAK,cAAc,CAAA,CAAA;AAAA;;;;QAI7C,CAAA,CAAA,IAAA,KAAA,eAAmB,CAAA,EAAA,KAAK,MAAM,aAAO;AACnC,cAAA,iBAAiB,KAAK,WAAW,MAAM,OAAQ,WAAU,MAAM,cAAc,IAAI,GACjF,mBAAmB,KAAK,MAAM;sBACjC,eAAe,WAAW;;yDA6BpB,gBAAc,WAAA;;;;gCACS;AAAA;;;;;;gCAEtB,eAAe,MAAM,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qHA3BhC,GAAG,CAAA,IACC,SAAS;;mCAEV,0DAA0D,CAAA;AAAA;iCAG1D;;;;;6BAMQ,oBACV,iBAAiB,sBAAqB,GAAI,OAAO,WAAW;AAAA;;;;;;;;;;;;;cA0C/D;;;;YAMQ,UAAA,CAAA,kBAAkB,MAAM,cAClC,kBAAkB,MAAM,YAAY,sBAAqB,GAAI,OAAO,WAAW;AAAA;;;;;;;;;;;;kWAlI3D,KAAK,UAAS,GAAA,CAAA,GAAA,CAAA,CAAA,CAAA,UAAA,mBAAA,aAAA,aAAA,EAAA,SAAA,UAAA,EAAA,QAEf,KAAK,QAAM,OAAA,KAAA,GAAA,CAAA,GAAA,CAAA,CAAA,CAAA,+CAI3B,eAAe,KAAK,KAAK,IACxB,GAAA,KAAK;;;;;;;;;;;;;;;;YAYJ,MAAA,kBAAkB,aAAa,kBAAkB;AAAA;;;;;;;;;;;QCpFpD,UAAU,eAAA;QAEV,gBAAgB,iBAAA;QAChB,cAAc,eAAA;UAEZ,SAAS,WAAW,cAAc,MAAM;QAC1C,kBAAkB;AAClB,QAAA,gBAAgB,OAAO,OAAO;QAC9B,mBAAmB;AAErB,MAAA,OAAA,CAAA;AAQK,WAAA,SAAS,gBAA+B,OAAA;AAC/C;AAAA,MACE;AAAA;AAEE,kCAA0B,cAAc,eAAe,CAAA;AAAA;MAEzD;AAAA;;AAIK,WAAA,UAAU,gBAA+B,OAAA;AAChD;AAAA,MACE;AAAA;AAEE,kCAA0B,cAAc,eAAe,CAAA;AAAA;MAEzD;AAAA;;AAIK,WAAA,WAAW,gBAA+B,OAAA;AACjD;AAAA,MACE;AAAA;AAEE,kCAA0B,cAAc,eAAe,CAAA;AAAA;MAEzD;AAAA;;;AAhCG,QAAA,eAAA;YACC,WAAW,cAAc,oBAAoB,aAAa;AAC5D,UAAA,SAAS,MAAiB,OAAA,IAAA,MAAM,SAAS,MAAM,WAAW;AAC9D,aAAO,SAAS,MAAM;AAAA;;;;;;;gBAkCU,MAAM,IAAI;AAAA;;;;;;eAIjC;AAAA;iBAEE;AAAA;;;;;;;;;;;;;;","x_google_ignoreList":[0,1]}