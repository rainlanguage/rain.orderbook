{"version":3,"file":"_page.svelte.js","sources":["../../../../../../../../node_modules/flowbite-svelte/dist/typography/P.svelte","../../../../../../../../node_modules/flowbite-svelte-icons/dist/EditOutline.svelte","../../../../../../../../packages/ui-components/dist/components/dropdown/DropdownRadio.svelte","../../../../../../../../packages/ui-components/dist/components/CodeMirrorDotrain.svelte","../../../../../../../src/lib/services/chain.ts","../../../../../../../src/lib/storesGeneric/fetchableStore.ts","../../../../../../../src/lib/stores/forkBlockNumber.ts","../../../../../../../src/lib/services/langServices.ts","../../../../../../../src/lib/services/chart.ts","../../../../../../../src/lib/components/ObservableChart.svelte","../../../../../../../src/lib/utils/chartData.ts","../../../../../../../src/lib/components/MetricChart.svelte","../../../../../../../src/lib/components/Charts.svelte","../../../../../../../src/lib/services/pickConfig.ts","../../../../../../../src/lib/components/modal/ModalDebugContext.svelte","../../../../../../../src/lib/components/ScenarioDebugTable.svelte","../../../../../../../src/lib/components/WordTable.svelte","../../../../../../../src/lib/components/Words.svelte","../../../../../../../src/lib/services/authoringMeta.ts","../../../../../../../src/lib/components/SpecVersionValidator.svelte","../../../../../../../src/lib/services/executeWalletConnectOrder.ts","../../../../../../../src/lib/services/executeLedgerOrder.ts","../../../../../../../src/lib/services/generateRainlangStrings.ts","../../../../../../../src/lib/utils/getDeploymentNetworks.ts","../../../../../../../src/routes/orders/add/+page.svelte"],"sourcesContent":["<script>import { twMerge } from 'tailwind-merge';\nexport let color = 'text-gray-900 dark:text-white';\nexport let height = 'normal';\nexport let align = 'left';\nexport let justify = false;\nexport let italic = false;\nexport let firstupper = false;\nexport let upperClass = 'first-line:uppercase first-line:tracking-widest first-letter:text-7xl first-letter:font-bold first-letter:text-gray-900 dark:first-letter:text-gray-100 first-letter:me-3 first-letter:float-left';\nexport let opacity = undefined;\nexport let whitespace = 'normal';\nexport let size = 'base';\nexport let space = undefined;\nexport let weight = 'normal';\nconst sizes = {\n    xs: 'text-xs',\n    sm: 'text-sm',\n    base: 'text-base',\n    lg: 'text-lg',\n    xl: 'text-xl',\n    '2xl': 'text-2xl',\n    '3xl': 'text-3xl',\n    '4xl': 'text-4xl',\n    '5xl': 'text-5xl',\n    '6xl': 'text-6xl',\n    '7xl': 'text-7xl',\n    '8xl': 'text-8xl',\n    '9xl': 'text-9xl'\n};\nconst weights = {\n    thin: 'font-thin',\n    extralight: 'font-extralight',\n    light: 'font-light',\n    normal: 'font-normal',\n    medium: 'font-medium',\n    semibold: 'font-semibold',\n    bold: 'font-bold',\n    extrabold: 'font-extrabold',\n    black: 'font-black'\n};\nconst spaces = {\n    tighter: 'tracking-tighter',\n    tight: 'tracking-tight',\n    normal: 'tracking-normal',\n    wide: 'tracking-wide',\n    wider: 'tracking-wider',\n    widest: 'tracking-widest'\n};\nconst heights = {\n    normal: 'leading-normal',\n    relaxed: 'leading-relaxed',\n    loose: 'leading-loose'\n};\nconst aligns = {\n    left: 'text-left',\n    center: 'text-center',\n    right: 'text-right'\n};\nconst whitespaces = {\n    normal: 'whitespace-normal',\n    nowrap: 'whitespace-nowrap',\n    pre: 'whitespace-pre',\n    preline: 'whitespace-pre-line',\n    prewrap: 'whitespace-pre-wrap'\n};\n$: colorAndopacity = color\n    .split(' ')\n    .map((element) => element.trim())\n    .map((element) => element + '/' + String(opacity))\n    .join(' ');\n$: classP = twMerge(size && sizes[size], (opacity && colorAndopacity) || (color && color), height && heights[height], weight && weights[weight], space && spaces[space], align && aligns[align], justify && 'text-justify', italic && 'italic', firstupper && upperClass, whitespace && whitespaces[whitespace], $$props.class);\n</script>\n\n<p {...$$restProps} class={classP}>\n  <slot />\n</p>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte.com/)\n## Props\n@prop export let color: string = 'text-gray-900 dark:text-white';\n@prop export let height: 'normal' | 'relaxed' | 'loose' = 'normal';\n@prop export let align: 'left' | 'center' | 'right' = 'left';\n@prop export let justify: boolean = false;\n@prop export let italic: boolean = false;\n@prop export let firstupper: boolean = false;\n@prop export let upperClass: string = 'first-line:uppercase first-line:tracking-widest first-letter:text-7xl first-letter:font-bold first-letter:text-gray-900 dark:first-letter:text-gray-100 first-letter:me-3 first-letter:float-left';\n@prop export let opacity: number | undefined = undefined;\n@prop export let whitespace: 'normal' | 'nowrap' | 'pre' | 'preline' | 'prewrap' = 'normal';\n@prop export let size: PsizeType = 'base';\n@prop export let space: 'tighter' | 'tight' | 'normal' | 'wide' | 'wider' | 'widest' | undefined = undefined;\n@prop export let weight: PweightType = 'normal';\n-->\n","<script>import { getContext } from \"svelte\";\nimport { twMerge } from \"tailwind-merge\";\nconst ctx = getContext(\"iconCtx\") ?? {};\nconst sizes = {\n    xs: \"w-3 h-3\",\n    sm: \"w-4 h-4\",\n    md: \"w-5 h-5\",\n    lg: \"w-6 h-6\",\n    xl: \"w-8 h-8\"\n};\nexport let size = ctx.size || \"md\";\nexport let role = ctx.role || \"img\";\nexport let strokeLinecap = ctx.strokeLinecap || \"round\";\nexport let strokeLinejoin = ctx.strokeLinejoin || \"round\";\nexport let strokeWidth = ctx.strokeWidth || \"2\";\nexport let ariaLabel = \"edit outline\";\n</script>\n\n<svg\n  xmlns=\"http://www.w3.org/2000/svg\"\n  fill=\"none\"\n  {...$$restProps}\n  class={twMerge('shrink-0', sizes[size], $$props.class)}\n  {role}\n  aria-label={ariaLabel}\n  viewBox=\"0 0 20 18\"\n  on:click\n  on:keydown\n  on:keyup\n  on:focus\n  on:blur\n  on:mouseenter\n  on:mouseleave\n  on:mouseover\n  on:mouseout\n>\n  <path\n    stroke=\"currentColor\"\n    stroke-linecap={strokeLinecap}\n    stroke-linejoin={strokeLinejoin}\n    stroke-width={strokeWidth}\n    d=\"M15 13v2.833A1.166 1.166 0 0 1 13.833 17H2.167A1.167 1.167 0 0 1 1 15.833V4.167A1.166 1.166 0 0 1 2.167 3h6.616m5.521-.156 2.852 2.852m1.253-4.105a2.017 2.017 0 0 1 0 2.852l-7.844 7.844L7 13l.713-3.565 7.844-7.844a2.016 2.016 0 0 1 2.852 0Z\"\n  />\n</svg>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte-icons.vercel.app/)\n## Props\n@prop export let size: 'xs' | 'sm' | 'md' | 'lg' | 'xl' = ctx.size || 'md';\n@prop export let role = ctx.role || 'img';\n@prop export let strokeLinecap: 'round' | 'inherit' | 'butt' | 'square' | null | undefined =\n    ctx.strokeLinecap || 'round';\n@prop export let strokeLinejoin: 'round' | 'inherit' | 'miter' | 'bevel' | null | undefined =\n    ctx.strokeLinejoin || 'round';\n@prop export let strokeWidth = ctx.strokeWidth || '2';\n@prop export let ariaLabel = 'edit outline';\n-->\n","<script generics=\"T\">import { Button, Dropdown, Radio } from \"flowbite-svelte\";\nimport { ChevronDownSolid } from \"flowbite-svelte-icons\";\nimport { sortBy } from \"lodash\";\nimport { createEventDispatcher } from \"svelte\";\nconst dispatch = createEventDispatcher();\nexport let options = {};\nexport let value = void 0;\nlet open = false;\n$: {\n  dispatch(\"change\", { value });\n  if (value) {\n    open = false;\n  }\n}\n$: optionsSorted = sortBy(Object.entries(options), (o) => o[0]);\n</script>\n\n<Button\n\tcolor=\"alternative\"\n\tclass=\"flex w-full justify-between overflow-hidden overflow-ellipsis pl-2 pr-0 text-left\"\n\tdata-testid=\"dropdown-button\"\n>\n\t<div class=\"flex-grow overflow-hidden\">\n\t\t<slot\n\t\t\tname=\"content\"\n\t\t\tselectedRef={value}\n\t\t\tselectedOption={value !== undefined ? options[value] : undefined}\n\t\t/>\n\t</div>\n\t<ChevronDownSolid class=\"mx-2 h-3 w-3 text-black dark:text-white\" />\n</Button>\n\n<Dropdown bind:open data-testid=\"dropdown\">\n\t{#each optionsSorted as [ref, option]}\n\t\t<Radio\n\t\t\tbind:group={value}\n\t\t\tvalue={ref}\n\t\t\tclass=\"w-full rounded-lg p-3 hover:bg-gray-100 dark:hover:bg-gray-600\"\n\t\t>\n\t\t\t<div class=\"ml-2\">\n\t\t\t\t<slot name=\"option\" {option} {ref} />\n\t\t\t</div>\n\t\t</Radio>\n\t{/each}\n</Dropdown>\n","<script>import CodeMirror from \"svelte-codemirror-editor\";\nimport { RawRainlangExtension } from \"codemirror-rainlang\";\nimport { openLintPanel } from \"@codemirror/lint\";\nexport let rainlangText = void 0;\nexport let disabled = false;\nexport let styles = {};\nexport let rainlangExtension;\nexport let codeMirrorTheme;\nexport let onTextChange;\n</script>\n\n<div data-testid=\"codemirror-dotrain\">\n\t<CodeMirror\n\t\tvalue={rainlangText || ''}\n\t\textensions={[rainlangExtension]}\n\t\ttheme={codeMirrorTheme}\n\t\treadonly={disabled}\n\t\tuseTab={true}\n\t\ttabSize={2}\n\t\tstyles={{\n\t\t\t'&': {\n\t\t\t\twidth: '100%'\n\t\t\t},\n\t\t\t...styles\n\t\t}}\n\t\ton:change={(e) => {\n\t\t\tonTextChange(e.detail);\n\t\t}}\n\t\ton:ready={(e) => {\n\t\t\topenLintPanel(e.detail);\n\t\t}}\n\t/>\n</div>\n\n<style global>\n\t:global(.Í¼1 .cm-panel.cm-panel-lint ul [aria-selected]) {\n\t\tbackground-color: inherit;\n\t}\n</style>\n","import { invoke } from '@tauri-apps/api';\n\nexport const getChainIdFromRpc = async (rpcs: string[]): Promise<number> =>\n  invoke('get_chainid', { rpcs });\n\nexport const getBlockNumberFromRpc = async (rpcs: string[]): Promise<number> =>\n  invoke('get_block_number', { rpcs });\n","import { derived, writable } from 'svelte/store';\nimport { cachedWritableStore } from '@rainlanguage/ui-components';\nimport { toasts } from '$lib/stores/toasts';\nimport { reportErrorToSentry } from '$lib/services/sentry';\n\ninterface FetchableStoreData<T> {\n  value: T;\n  isFetching: boolean;\n}\n\nexport function fetchableStore<T>(\n  key: string,\n  defaultValue: T,\n  handleFetch: (data: unknown) => Promise<T>,\n  serialize: (value: T) => string,\n  deserialize: (s: string) => T,\n) {\n  const value = cachedWritableStore<T>(key, defaultValue, serialize, deserialize);\n  const isFetching = writable(false);\n\n  const { subscribe } = derived([value, isFetching], ([$value, $isFetching]) => ({\n    value: $value,\n    isFetching: $isFetching,\n  }));\n\n  async function fetch(data: unknown) {\n    isFetching.set(true);\n    try {\n      const res: T = await handleFetch(data);\n      value.set(res);\n    } catch (e) {\n      reportErrorToSentry(e);\n      toasts.error(e as string);\n    }\n    isFetching.set(false);\n  }\n\n  return {\n    subscribe,\n    set: (v: FetchableStoreData<T>) => value.set(v.value),\n    fetch,\n  };\n}\n\nexport const fetchableIntStore = (key: string, handleFetch: (data: unknown) => Promise<number>) =>\n  fetchableStore<number>(\n    key,\n    0,\n    handleFetch,\n    (v) => v.toString(),\n    (s) => parseInt(s),\n  );\n","import { getBlockNumberFromRpc } from '$lib/services/chain';\nimport { fetchableIntStore } from '$lib/storesGeneric/fetchableStore';\n\nexport const forkBlockNumber = fetchableIntStore('forkBlockNumber', async (rpcs) => {\n  return getBlockNumberFromRpc(rpcs as string[]);\n});\n","import { invoke } from '@tauri-apps/api';\nimport {\n  ErrorCode,\n  type Problem,\n  TextDocumentItem,\n  Position,\n  Hover,\n  CompletionItem,\n} from 'codemirror-rainlang';\nimport { get } from 'svelte/store';\nimport { forkBlockNumber } from '$lib/stores/forkBlockNumber';\nimport { reportErrorToSentry, SentrySeverityLevel } from '$lib/services/sentry';\n\n/**\n * Provides problems callback by invoking related tauri command\n */\nexport async function problemsCallback(\n  rpcs: string[],\n  textDocument: TextDocumentItem,\n  bindings: Record<string, string>,\n  deployerAddress: string | undefined,\n): Promise<Problem[]> {\n  try {\n    await forkBlockNumber.fetch(rpcs);\n\n    return await invoke('call_lsp_problems', {\n      textDocument,\n      rpcs,\n      blockNumber: get(forkBlockNumber).value,\n      bindings,\n      deployer: deployerAddress,\n    });\n  } catch (err) {\n    reportErrorToSentry(err, SentrySeverityLevel.Info);\n    return [\n      {\n        msg:\n          typeof err === 'string'\n            ? err\n            : err instanceof Error\n              ? err.message\n              : 'something went wrong!',\n        position: [0, 0],\n        code: ErrorCode.NativeParserError,\n      },\n    ];\n  }\n}\n\n/**\n * Provides hover callback by invoking related tauri command\n */\nexport const hoverCallback = (\n  textDocument: TextDocumentItem,\n  position: Position,\n  bindings: Record<string, string>,\n): Promise<Hover | null> => invoke('call_lsp_hover', { textDocument, position, bindings });\n\n/**\n * Provides completion callback by invoking related tauri command\n */\nexport const completionCallback = async (\n  textDocument: TextDocumentItem,\n  position: Position,\n  bindings: Record<string, string>,\n): Promise<CompletionItem[] | null> =>\n  invoke('call_lsp_completion', { textDocument, position, bindings });\n","import type { ChartData, DeploymentsDebugDataMap } from '@rainlanguage/orderbook';\nimport { invoke } from '@tauri-apps/api';\n\nexport const makeChartData = async (dotrain: string, settings?: string): Promise<ChartData> =>\n  invoke('make_charts', { dotrain, settings });\n\nexport const makeDeploymentsDebugDataMap = async (\n  dotrain: string,\n  settings: string,\n  blockNumbers?: Record<number, number>,\n): Promise<DeploymentsDebugDataMap> =>\n  invoke('make_deployment_debug', { dotrain, settings, blockNumbers });\n","<script lang=\"ts\">\n  import type { MarkCfg, PlotCfg as PlotT, TransformCfg } from '@rainlanguage/orderbook';\n  import * as Plot from '@observablehq/plot';\n  import camelcaseKeys from 'camelcase-keys';\n  import type { TransformedPlotData } from '$lib/utils/chartData';\n\n  export let plot: PlotT;\n  export let data: TransformedPlotData[];\n\n  let div: HTMLDivElement;\n  let error: string;\n  let plotData: Record<string, number>[] = [];\n\n  $: plotData =\n    data?.map((row) =>\n      Object.fromEntries(Object.entries(row).map(([key, value]) => [key, value.value])),\n    ) ?? [];\n\n  $: if (div && plotData) {\n    try {\n      div?.firstChild?.remove(); // remove old chart, if any\n      div.append(\n        Plot.plot({\n          ...getPlotOptions(plot),\n          marks: plot.marks.map((mark) => buildMark(plotData, mark)),\n        }),\n      );\n    } catch (e) {\n      if (e instanceof Error) {\n        error = e.message;\n      } else {\n        error = String(e);\n      }\n    }\n  }\n\n  // Get the plot options from the plot object - removing the marks\n  const getPlotOptions = (plot: PlotT) => {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const { marks, ...plotOptions } = plot;\n    return fixKeys(plotOptions);\n  };\n\n  // Map the mark object to the plot library function\n  const buildMark = (data: Record<string, number>[], markConfig: MarkCfg) => {\n    const options = fixKeys(markConfig.options);\n    switch (markConfig.type) {\n      case 'line':\n        return Plot.line(\n          data,\n          options.transform ? buildTransform(options.transform) : { sort: options.x, ...options },\n        );\n      case 'dot':\n        return Plot.dot(data, options.transform ? buildTransform(options.transform) : options);\n      case 'recty':\n        return Plot.rectY(data, options.transform ? buildTransform(options.transform) : options);\n    }\n  };\n\n  // Map the transform object to the plot library function\n  const buildTransform = (transform: TransformCfg) => {\n    switch (transform.type) {\n      case 'binx':\n        return Plot.binX(transform.content.outputs, transform.content.options);\n      case 'hexbin':\n        return Plot.hexbin(\n          transform.content.outputs as Plot.ChannelReducers<Plot.GroupReducer>,\n          transform.content.options,\n        );\n    }\n  };\n\n  // Delete keys with null values from an object and renaming all keys to camelCase\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const fixKeys = (obj: Record<string, any>): Record<string, any> => {\n    Object.keys(obj).forEach((key) => {\n      if (obj[key] && typeof obj[key] === 'object') fixKeys(obj[key]);\n      else if (obj[key] == null) delete obj[key];\n    });\n    return camelcaseKeys(obj, { deep: true });\n  };\n</script>\n\n{#if error}\n  <div class=\"w-full border p-4 text-red-500\">{error}</div>\n{:else}\n  <div\n    bind:this={div}\n    role=\"img\"\n    class=\"w-full border p-4 [&_h2]:text-lg [&_h2]:font-semibold [&_h3]:text-sm\"\n    data-testid=\"chart\"\n  ></div>\n{/if}\n","import { Float, type FuzzResultFlat } from '@rainlanguage/orderbook';\nimport { hexToBigInt, type Hex, formatUnits } from 'viem';\n\nexport type TransformedHexAndFormattedData = { [key: string]: [number, Hex] };\n\n// Transform the data from the backend to the format required by the plot library\nexport const transformData = (fuzzResult: FuzzResultFlat): TransformedHexAndFormattedData[] => {\n  if (fuzzResult.data.rows.some((row) => row.length !== fuzzResult.data.columnNames.length)) {\n    throw new Error('Number of column names does not match data length');\n  }\n  return fuzzResult.data.rows.map((row) => {\n    const rowObject: TransformedHexAndFormattedData = {};\n    fuzzResult.data.columnNames.forEach((columnName, index) => {\n      rowObject[columnName] = [+formatUnits(hexToBigInt(row[index] as Hex), 18), row[index] as Hex];\n    });\n    return rowObject;\n  });\n};\n\nexport type PlotDataValue = {\n  float: Float;\n  formatted: string;\n  value: number;\n};\nexport type TransformedPlotData = { [key: string]: PlotDataValue };\n\nexport const transformDataForPlot = (fuzzResult: FuzzResultFlat): TransformedPlotData[] => {\n  if (fuzzResult.data.rows.some((row) => row.length !== fuzzResult.data.columnNames.length)) {\n    throw new Error('Number of column names does not match data length');\n  }\n  return fuzzResult.data.rows.map((row) => {\n    const rowObject: TransformedPlotData = {};\n    fuzzResult.data.columnNames.forEach((columnName, index) => {\n      rowObject[columnName] = decodeRainFloat(row[index] as Hex, columnName);\n    });\n    return rowObject;\n  });\n};\n\nconst decodeRainFloat = (value: Hex, columnName: string): PlotDataValue => {\n  const floatResult = Float.tryFromBigint(hexToBigInt(value));\n  if (floatResult?.error || !floatResult?.value) {\n    const message = floatResult?.error?.readableMsg ?? floatResult?.error?.msg ?? 'Unknown error';\n    throw new Error(`Failed to parse ${columnName} value: ${message}`);\n  }\n\n  const formattedResult = floatResult.value.formatWithScientific(false);\n  if (formattedResult.error || !formattedResult.value) {\n    const message =\n      formattedResult.error?.readableMsg ?? formattedResult.error?.msg ?? 'Unknown error';\n    throw new Error(`Failed to format ${columnName} value: ${message}`);\n  }\n\n  const numericValue = Number(formattedResult.value);\n  if (!Number.isFinite(numericValue)) {\n    throw new Error(`Value for ${columnName} is not a finite number: ${formattedResult.value}`);\n  }\n\n  return {\n    float: floatResult.value,\n    formatted: formattedResult.value as string,\n    value: numericValue,\n  };\n};\n\nif (import.meta.vitest) {\n  const { it, expect } = import.meta.vitest;\n\n  it('data transforms correctly and errors are caught', () => {\n    const fuzzResult = {\n      data: {\n        block_number: '0x1234',\n        rows: [\n          ['0xDE0B6B3A7640000', '0x29A2241AF62C0000'],\n          ['0x1BC16D674EC80000', '0x3782DACE9D900000'],\n          ['0x29A2241AF62C0000', '0x5678'],\n          ['0x1234', '0x5678'],\n        ],\n        columnNames: ['col1', 'col2'],\n      },\n      scenario: 'test',\n    };\n\n    const transformedData = transformData(fuzzResult);\n\n    expect(transformedData.length).toEqual(4);\n    expect(transformedData[0].col1[0]).toEqual(1);\n    expect(transformedData[0].col2[0]).toEqual(3);\n    expect(transformedData[1].col1[0]).toEqual(2);\n    expect(transformedData[1].col2[0]).toEqual(4);\n\n    expect(transformedData[0].col1[1]).toEqual('0xDE0B6B3A7640000');\n    expect(transformedData[0].col2[1]).toEqual('0x29A2241AF62C0000');\n    expect(transformedData[1].col1[1]).toEqual('0x1BC16D674EC80000');\n    expect(transformedData[1].col2[1]).toEqual('0x3782DACE9D900000');\n\n    const fuzzResult3 = {\n      data: {\n        block_number: '0x1234',\n        rows: [\n          ['0x1234', '0x5678'],\n          ['0x1234', '0x5678'],\n          ['0x1234', '0x5678'],\n          ['0x1234', '0x5678'],\n        ],\n        columnNames: ['col1'],\n      },\n      scenario: 'test',\n    };\n\n    expect(() => transformData(fuzzResult3)).toThrowError(\n      'Number of column names does not match data length',\n    );\n  });\n}\n","<script lang=\"ts\">\n  import { onDestroy } from 'svelte';\n  import { writeText } from '@tauri-apps/api/clipboard';\n  import ClipboardOutline from 'flowbite-svelte-icons/ClipboardOutline.svelte';\n  import type { MetricCfg } from '@rainlanguage/orderbook';\n  import type { TransformedPlotData } from '$lib/utils/chartData';\n  export let metric: MetricCfg;\n  export let data: TransformedPlotData[];\n\n  let tooltipVisible = false;\n  let copied = false;\n  let copyTimeout: ReturnType<typeof setTimeout> | undefined;\n\n  $: metricDatum = data?.[0]?.[metric.value];\n  $: metricFormattedValue = metricDatum?.formatted ?? '';\n  $: metricValueWithUnits =\n    metricFormattedValue === ''\n      ? ''\n      : `${metric?.['unit-prefix'] ?? ''}${metricFormattedValue}${metric?.['unit-suffix'] ?? ''}`;\n  $: tooltipMessage = copied ? 'Copied!' : 'Click to copy value';\n\n  function showTooltip() {\n    tooltipVisible = true;\n  }\n\n  function hideTooltip() {\n    tooltipVisible = false;\n    if (copyTimeout) {\n      clearTimeout(copyTimeout);\n      copyTimeout = undefined;\n    }\n    copied = false;\n  }\n\n  async function copyMetricValue() {\n    if (!metricValueWithUnits) {\n      return;\n    }\n\n    try {\n      await writeText(metricValueWithUnits);\n    } catch {\n      if (navigator?.clipboard?.writeText) {\n        await navigator.clipboard.writeText(metricValueWithUnits);\n      } else {\n        return;\n      }\n    }\n\n    copied = true;\n    showTooltip();\n    if (copyTimeout) {\n      clearTimeout(copyTimeout);\n    }\n    copyTimeout = setTimeout(() => {\n      copied = false;\n      copyTimeout = undefined;\n    }, 1500);\n  }\n\n  onDestroy(() => {\n    if (copyTimeout) {\n      clearTimeout(copyTimeout);\n    }\n  });\n</script>\n\n<div class=\"flex h-full w-full flex-col items-center justify-between border p-4\">\n  <span>{metric.label}</span>\n  <div class=\"relative w-full\">\n    <button\n      type=\"button\"\n      class=\"relative flex w-full items-center justify-center gap-2 rounded bg-transparent px-2 py-1 text-2xl transition hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-500 dark:hover:bg-slate-800\"\n      aria-label={`Copy ${metric.label} value`}\n      title={metricValueWithUnits || ''}\n      on:click={copyMetricValue}\n      on:mouseenter={showTooltip}\n      on:mouseleave={hideTooltip}\n      on:focus={showTooltip}\n      on:blur={hideTooltip}\n    >\n      <span class=\"block w-full truncate pr-6 text-center\">{metricValueWithUnits ?? ''}</span>\n      <ClipboardOutline\n        class=\"absolute right-2 top-1/2 h-5 w-5 -translate-y-1/2 text-slate-500 dark:text-slate-300\"\n        aria-hidden=\"true\"\n      />\n    </button>\n\n    {#if tooltipVisible}\n      <div\n        class=\"absolute bottom-full left-1/2 mb-2 -translate-x-1/2 whitespace-nowrap rounded bg-slate-900 px-2 py-1 text-xs text-white shadow-lg\"\n        role=\"status\"\n      >\n        {tooltipMessage}\n      </div>\n    {/if}\n  </div>\n\n  {#if metric?.description}\n    <span class=\"text-sm\">{metric.description}</span>\n  {/if}\n</div>\n","<script lang=\"ts\">\n  import ObservableChart from '$lib/components/ObservableChart.svelte';\n  import type { ChartData } from '@rainlanguage/orderbook';\n  import { transformDataForPlot } from '$lib/utils/chartData';\n  import { sortBy } from 'lodash';\n  import MetricChart from './MetricChart.svelte';\n  export let chartData: ChartData;\n</script>\n\n{#if chartData}\n  <div class=\"mt-8 flex flex-col items-center gap-y-6\">\n    {#each sortBy(Object.entries(chartData.charts), ['0']) as chart}\n      {@const data = transformDataForPlot(chartData.scenariosData[chart[1].scenario.key])}\n      <div class=\"w-full\">\n        <div class=\"flex flex-col justify-center gap-y-4\">\n          <h2 class=\"text-2xl font-bold\">{chart[0]}</h2>\n          <div class=\"grid w-full grid-cols-2 gap-4\">\n            {#each chart[1]?.metrics || [] as metric}\n              <div class=\"col-span-1 flex flex-col gap-y-4\">\n                <MetricChart {metric} {data} />\n              </div>\n            {/each}\n            {#each chart[1]?.plots || [] as plot}\n              <div class=\"col-span-1 flex flex-col gap-y-4\">\n                <ObservableChart {plot} {data} />\n              </div>\n            {/each}\n          </div>\n        </div>\n      </div>\n    {/each}\n  </div>\n{:else}\n  No scenario data\n{/if}\n","import { pickBy } from 'lodash';\nimport type { DeploymentCfg, ScenarioCfg } from '@rainlanguage/orderbook';\n\nexport function pickDeployments(\n  deployments: Record<string, DeploymentCfg>,\n  scenarios: Record<string, ScenarioCfg>,\n  chainId: number,\n) {\n  const filtered = pickBy(\n    deployments,\n    (d) => scenarios[d.scenario.key].deployer.network.chainId === chainId,\n  );\n  const result: Record<string, { scenario: string; order: string }> = {};\n\n  for (const [key, deployment] of Object.entries(filtered)) {\n    result[key] = {\n      scenario: deployment.scenario.key,\n      order: deployment.order.key,\n    };\n  }\n\n  return result;\n}\n\nexport function pickScenarios(scenarios: Record<string, ScenarioCfg>, chainId: number) {\n  return pickBy(scenarios, (d) => d.deployer.network.chainId === chainId);\n}\n","<script lang=\"ts\">\n  import {\n    Input,\n    Modal,\n    Table,\n    TableBody,\n    TableBodyCell,\n    TableBodyRow,\n    TableHead,\n    TableHeadCell,\n  } from 'flowbite-svelte';\n\n  export let open = false;\n  export let networks: Record<number, string> | undefined = undefined;\n  export let blockNumbers: Record<number, number | undefined> = {};\n  export let onClose: () => void;\n</script>\n\n<Modal\n  title=\"Debug Block Height\"\n  bind:open\n  outsideclose\n  size=\"sm\"\n  on:close={() => {\n    onClose();\n    open = false;\n  }}\n  backdropClass=\"fixed inset-0 z-40 bg-gray-900 bg-opacity-50 dark:bg-opacity-80 z-[1000] backdrop-class-id\"\n  dialogClass=\"fixed top-0 start-0 end-0 h-modal md:inset-0 md:h-full z-50 w-full p-4 flex z-[1000]\"\n>\n  {#if networks}\n    <Table divClass=\"rounded-lg overflow-hidden dark:border-none border overflow-x-scroll\">\n      <TableHead>\n        <TableHeadCell>Network</TableHeadCell>\n        <TableHeadCell>Block Height</TableHeadCell>\n      </TableHead>\n\n      <TableBody>\n        {#each Object.entries(networks ?? {}).sort( (a, b) => (Number(a[0]) > Number(b[0]) ? 1 : -1), ) as [chainId, networkName]}\n          <TableBodyRow>\n            <TableBodyCell data-testid={`network-name-${chainId}`}>{networkName}</TableBodyCell>\n            <TableBodyCell>\n              <Input\n                type=\"number\"\n                size=\"sm\"\n                class=\"self-center\"\n                placeholder=\"Enter Block Height\"\n                value={blockNumbers[Number(chainId)]}\n                on:input={(e) => {\n                  if (e.currentTarget instanceof HTMLInputElement) {\n                    const v = parseInt(e.currentTarget.value, 10);\n                    blockNumbers[Number(chainId)] = Number.isNaN(v) ? undefined : v;\n                  }\n                }}\n                data-testid={`chain-block-${chainId}`}\n              ></Input>\n            </TableBodyCell>\n          </TableBodyRow>\n        {/each}\n      </TableBody>\n    </Table>\n  {:else}\n    Found no deployment, please add deployments to your order's configurations to debug it\n  {/if}\n</Modal>\n","<script lang=\"ts\">\n  import { formatUnits } from 'viem';\n  import type { DeploymentsDebugDataMap } from '@rainlanguage/orderbook';\n  import { transformData } from '$lib/utils/chartData';\n  import { BugOutline, EditOutline, PauseSolid, PlaySolid } from 'flowbite-svelte-icons';\n  import { handleScenarioDebugModal } from '$lib/services/modal';\n  import { DEFAULT_REFRESH_INTERVAL, Refresh } from '@rainlanguage/ui-components';\n  import { makeDeploymentsDebugDataMap } from '$lib/services/chart';\n  import { globalDotrainFile } from '$lib/storesGeneric/textFileStore';\n  import { settingsText } from '$lib/stores/settings';\n  import { createQuery } from '@tanstack/svelte-query';\n  import { useDebouncedFn } from '$lib/utils/asyncDebounce';\n  import { writable } from 'svelte/store';\n  import ModalDebugContext from './modal/ModalDebugContext.svelte';\n  import {\n    Table,\n    TableBody,\n    TableBodyCell,\n    TableBodyRow,\n    TableHead,\n    TableHeadCell,\n  } from 'flowbite-svelte';\n\n  let enabled = false;\n  let openDebugBlockNumberModal = false;\n  let blockNumbers: Record<number, number> = {};\n  export let networks: Record<number, string> | undefined;\n\n  $: queryKey = writable([$globalDotrainFile.text, $settingsText]);\n  let displayData: DeploymentsDebugDataMap['dataMap'] | undefined = undefined;\n\n  const fetchData = async () => {\n    const res = await makeDeploymentsDebugDataMap(\n      $queryKey[0],\n      $settingsText,\n      enabled ? undefined : blockNumbers,\n    );\n    // build a map of chain ids against block numbers for unified debug on same\n    // block number per chain id, this is because we dont want to run the debug\n    // on different blocks for different deployments if those deployments happen\n    // to be on the same network but for example with different rpc, so we keep\n    // a map of chain ids against block number rather than map of deployment keys\n    // against block numbers\n    for (const deploymentKey in res.dataMap) {\n      blockNumbers[res.dataMap[deploymentKey].chainId] = res.dataMap[deploymentKey].blockNumber;\n    }\n    return res;\n  };\n\n  const fileUpdate = async (dotrain: string, settings: string): Promise<void> => {\n    queryKey.set([dotrain, settings]);\n  };\n  const { debouncedFn: debounceFileUpdate } = useDebouncedFn(fileUpdate, 500);\n  $: debounceFileUpdate($globalDotrainFile.text, $settingsText);\n\n  $: scenarioDebugQuery = createQuery<DeploymentsDebugDataMap>({\n    queryKey: $queryKey,\n    queryFn: fetchData,\n    refetchOnWindowFocus: false,\n    enabled: $globalDotrainFile.text !== '' && $settingsText !== '',\n    refetchInterval: enabled ? DEFAULT_REFRESH_INTERVAL : false,\n  });\n\n  $: {\n    if (!$scenarioDebugQuery.isError && $scenarioDebugQuery.data) {\n      displayData = $scenarioDebugQuery.data.dataMap;\n    } else if ($globalDotrainFile.text === '' || $settingsText === '') {\n      displayData = undefined;\n    }\n  }\n\n  const handleRefresh = () => {\n    $scenarioDebugQuery.refetch();\n  };\n\n  const togglePlayback = () => {\n    enabled = !enabled;\n    if (enabled) {\n      blockNumbers = {};\n      handleRefresh();\n    }\n  };\n</script>\n\n<div class=\"flex items-center justify-end\">\n  <div class=\"flex items-center gap-x-1\">\n    {#if $scenarioDebugQuery.isError}\n      <div class=\"text-red-500\">{$scenarioDebugQuery.error}</div>\n    {/if}\n    <span></span>\n    <button\n      type=\"button\"\n      class=\"mr-2 flex items-center text-sm text-gray-500 hover:text-gray-700 focus:outline-none\"\n      on:click={() => (openDebugBlockNumberModal = true)}\n    >\n      <span class=\"mr-1\">Change block heights</span>\n      <EditOutline />\n    </button>\n    <Refresh\n      data-testid=\"refreshButton\"\n      class=\"h-8 w-5 cursor-pointer text-gray-400 dark:text-gray-400\"\n      on:click={handleRefresh}\n      spin={$scenarioDebugQuery.isFetching}\n    />\n    <button\n      class=\"ml-2 h-8 w-3 cursor-pointer text-gray-400 dark:text-gray-400\"\n      on:click={togglePlayback}\n    >\n      {#if enabled}\n        <PauseSolid />\n      {:else}\n        <PlaySolid />\n      {/if}\n    </button>\n  </div>\n</div>\n\n{#if !$scenarioDebugQuery.error && displayData}\n  {#each Object.entries(displayData).sort( (a, b) => (a[1].chainId > b[1].chainId ? 1 : -1), ) as [deploymentName, results]}\n    <h2 class=\"text-md my-4\">Deployment: <strong>{deploymentName}</strong></h2>\n    <Table divClass=\"rounded-lg overflow-hidden dark:border-none border overflow-x-scroll\">\n      <TableHead>\n        <TableHeadCell>Order</TableHeadCell>\n        <TableHeadCell>Scenario</TableHeadCell>\n        <TableHeadCell>Pair</TableHeadCell>\n        <TableHeadCell>Maximum Output</TableHeadCell>\n        <TableHeadCell>Ratio</TableHeadCell>\n        <TableHeadCell>Block Height</TableHeadCell>\n        <TableHeadCell class=\"w-[50px]\" />\n      </TableHead>\n\n      <TableBody>\n        {#each results.pairsData as item}\n          <TableBodyRow>\n            <TableBodyCell>{item.order}</TableBodyCell>\n            <TableBodyCell>{item.scenario}</TableBodyCell>\n            <TableBodyCell>{item.pair}</TableBodyCell>\n            {#if item.result}\n              {@const fuzzResult = item.result}\n              {@const data = transformData(fuzzResult)[0]}\n              {@const dataEntries = Object.entries(data)}\n              {@const keyRegex = /^\\d+\\.\\d+$/}\n              {@const mainEntries = dataEntries.filter(([key]) => keyRegex.test(key))}\n\n              {#if mainEntries.length < 2}\n                <TableBodyCell colspan=\"2\" class=\"text-red-500\"\n                  >Missing stack data for max output and ratio</TableBodyCell\n                >\n              {:else}\n                {@const maxOutput = mainEntries[mainEntries.length - 2]}\n                {@const ioRatio = mainEntries[mainEntries.length - 1]}\n                {@const denominator = BigInt(ioRatio?.[1]?.[1] ?? 0n)}\n                <TableBodyCell>\n                  {maxOutput[1][0]}\n                </TableBodyCell>\n                <TableBodyCell>\n                  {ioRatio[1][0]}\n                  <span class=\"text-gray-400\">\n                    ({denominator === 0n ? '0' : formatUnits(10n ** 36n / denominator, 18)})\n                  </span>\n                </TableBodyCell>\n              {/if}\n              <TableBodyCell>{results.blockNumber}</TableBodyCell>\n              <TableBodyCell>\n                <button on:click={() => handleScenarioDebugModal(item.pair, fuzzResult.data)}>\n                  <BugOutline size=\"sm\" color=\"grey\" />\n                </button>\n              </TableBodyCell>\n            {:else}\n              <TableBodyCell colspan=\"5\" class=\"text-red-500\">{item.error}</TableBodyCell>\n            {/if}\n          </TableBodyRow>\n        {/each}\n      </TableBody>\n    </Table>\n  {/each}\n{/if}\n\n<ModalDebugContext\n  bind:open={openDebugBlockNumberModal}\n  bind:blockNumbers\n  bind:networks\n  onClose={handleRefresh}\n/>\n","<script lang=\"ts\">\n  import type { AuthoringMetaV2 } from '@rainlanguage/orderbook';\n  import {\n    Input,\n    Table,\n    TableBody,\n    TableBodyCell,\n    TableBodyRow,\n    TableHead,\n    TableHeadCell,\n  } from 'flowbite-svelte';\n  import Fuse from 'fuse.js';\n\n  export let authoringMeta: AuthoringMetaV2;\n  export let pragma: string;\n\n  let search: string;\n\n  const fuse = new Fuse(authoringMeta.words, {\n    keys: ['word', 'description'],\n    ignoreLocation: true,\n    threshold: 0.0,\n  });\n\n  $: filteredWords = search ? fuse.search(search).map((res) => res.item) : authoringMeta.words;\n</script>\n\n<Table\n  divClass=\"cursor-pointer rounded-lg dark:border-none border h-[500px] overflow-y-scroll relative w-[450px] bg-white dark:bg-gray-800\"\n  data-testid={`word-table-${pragma}`}\n>\n  <TableHead theadClass=\"sticky top-0\">\n    <TableHeadCell>\n      <div class=\"flex flex-col text-xs font-normal\">\n        <div data-testid=\"pragma\" class=\"mb-3 mt-1\">\n          From {pragma}\n        </div>\n        <Input data-testid=\"search-input\" placeholder=\"Search words\" bind:value={search} />\n      </div>\n    </TableHeadCell>\n  </TableHead>\n  <TableBody tableBodyClass=\"w-full\">\n    {#if filteredWords.length === 0}\n      <TableBodyRow>\n        <TableBodyCell>\n          <div data-testid=\"no-results-msg\" class=\"text-center text-gray-500\">No words found</div>\n        </TableBodyCell>\n      </TableBodyRow>\n    {:else}\n      {#each filteredWords as word}\n        <TableBodyRow>\n          <TableBodyCell>\n            <div class=\"flex flex-col gap-y-2\">\n              <div data-testid=\"word\">{word.word}</div>\n              <div data-testid=\"description\" class=\"whitespace-normal text-gray-500\">\n                {word.description}\n              </div>\n            </div>\n          </TableBodyCell>\n        </TableBodyRow>\n      {/each}\n    {/if}\n  </TableBody>\n</Table>\n","<script lang=\"ts\">\n  import { P, TabItem, Tabs } from 'flowbite-svelte';\n  import WordTable from '$lib/components/WordTable.svelte';\n  import type { ScenarioWords } from '@rainlanguage/orderbook';\n\n  export let authoringMetas: ScenarioWords[] | undefined;\n  export let error: unknown | undefined;\n</script>\n\n{#if authoringMetas}\n  <Tabs\n    style=\"underline\"\n    contentClass=\"mt-4\"\n    defaultClass=\"flex flex-wrap space-x-2 rtl:space-x-reverse mt-4\"\n  >\n    {#each authoringMetas as scenario}\n      <TabItem title={scenario.scenario}>\n        <div class=\"flex gap-x-2 text-sm\">\n          {#if scenario.deployerWords.words.type === 'Success'}\n            <WordTable\n              authoringMeta={scenario.deployerWords.words.data}\n              pragma={scenario.deployerWords.address}\n            />\n          {:else if scenario.deployerWords.words.type === 'Error'}\n            <div\n              data-testid=\"deployer-error-msg\"\n              class=\"relative h-[500px] w-[450px] overflow-y-scroll rounded-lg border bg-white p-4 dark:border-none dark:bg-gray-800\"\n            >\n              <p>Error getting words for this deployer:</p>\n              <p>{scenario.deployerWords.words.data}</p>\n            </div>\n          {/if}\n          {#each scenario.pragmaWords as pragma}\n            {#if pragma.words.type === 'Success'}\n              <WordTable authoringMeta={pragma.words.data} pragma={pragma.address} />\n            {:else if pragma.words.type === 'Error'}\n              <div\n                class=\"relative h-[500px] w-[450px] overflow-y-scroll rounded-lg border bg-white p-4 dark:border-none dark:bg-gray-800\"\n                data-testid=\"pragma-error-msg\"\n              >\n                <p>Error getting words for the pragma {pragma.address}:</p>\n                <p>{pragma.words.data}</p>\n              </div>\n            {/if}\n          {/each}\n        </div>\n      </TabItem>\n    {/each}\n  </Tabs>\n{:else if error}\n  <div data-testid=\"error-msg\">\n    <P>Error getting words for this order</P>\n    <P>{error?.toString() || ''}</P>\n  </div>\n{/if}\n","import type { ScenarioWords } from '@rainlanguage/orderbook';\nimport { invoke } from '@tauri-apps/api';\n\nexport const getAuthoringMetaV2ForScenarios = async (\n  dotrain: string,\n  settings?: string[],\n): Promise<ScenarioWords[]> => invoke('get_authoring_meta_v2_for_scenarios', { dotrain, settings });\n","<script lang=\"ts\">\n  import { Alert } from 'flowbite-svelte';\n  import { InfoCircleOutline } from 'flowbite-svelte-icons';\n\n  export let error: unknown;\n</script>\n\n{#if error && typeof error == 'string' && error.startsWith('Spec version')}\n  <Alert color=\"red\">\n    <InfoCircleOutline slot=\"icon\" class=\"h-5 w-5\" />\n    <div class=\"flex flex-col\">\n      <span>{error}</span>\n      <span\n        >This order may not be compatible with this version of Raindex. Head to\n        <a class=\"underline\" href=\"https://github.com/rainlanguage/rain.orderbook/releases\"\n          >Github</a\n        > to find a compatible release.</span\n      >\n    </div>\n  </Alert>\n{/if}\n","import type { DeploymentCfg } from '@rainlanguage/orderbook';\nimport { isEmpty } from 'lodash';\nimport type { SentrySeverityLevel } from './sentry';\nimport { ethers } from 'ethers';\n\ninterface EthersTransactionResponse {\n  wait: (confirmations: number) => Promise<ethers.providers.TransactionReceipt>;\n}\n\nexport interface ExecuteOrderDependencies {\n  orderAddCalldataFn: (dotrain: string, deployment: DeploymentCfg) => Promise<Uint8Array>;\n  ethersExecuteFn: (calldata: Uint8Array, toAddress: string) => Promise<EthersTransactionResponse>;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  reportErrorToSentryFn: (error: any, level?: SentrySeverityLevel) => void;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  formatEthersTransactionErrorFn: (error: any) => string;\n  successToastFn: (message: string) => void;\n  errorToastFn: (message: string) => void;\n}\n\n/**\n * Executes the WalletConnect order add process.\n *\n * @param dotrainText - The dotrain script text.\n * @param deployment - The selected deployment configuration.\n * @param dependencies - Object containing all dependencies for execution and feedback.\n * @throws Error if deployment or orderbook details are missing.\n */\nexport async function executeWalletConnectOrder(\n  dotrainText: string,\n  deployment: DeploymentCfg,\n  dependencies: ExecuteOrderDependencies,\n): Promise<void> {\n  const {\n    orderAddCalldataFn,\n    ethersExecuteFn,\n    reportErrorToSentryFn,\n    formatEthersTransactionErrorFn,\n    successToastFn,\n    errorToastFn,\n  } = dependencies;\n  if (isEmpty(deployment.order.orderbook)) throw Error('No orderbook associated with scenario');\n  try {\n    const calldata = await orderAddCalldataFn(dotrainText, deployment);\n    const tx = await ethersExecuteFn(calldata, deployment.order.orderbook.address);\n    await tx.wait(1);\n    successToastFn('Transaction sent successfully!');\n  } catch (e) {\n    reportErrorToSentryFn(e);\n    errorToastFn(formatEthersTransactionErrorFn(e));\n    throw e;\n  }\n}\n","import type { DeploymentCfg } from '@rainlanguage/orderbook';\nimport { isEmpty } from 'lodash';\nimport type { SentrySeverityLevel } from './sentry';\n\n/**\n * Executes the ledger order add process.\n *\n * @param dotrainText - The dotrain script text.\n * @param deployment - The selected deployment configuration.\n * @param orderAddFn - The function to call for adding the order (e.g., from order.ts service).\n * @param reportErrorToSentryFn - Function to report errors to Sentry.\n * @throws Error if deployment or orderbook details are missing.\n */\nexport async function executeLedgerOrder(\n  dotrainText: string,\n  deployment: DeploymentCfg,\n  orderAddFn: (dotrain: string, deployment: DeploymentCfg) => Promise<void>,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  reportErrorToSentryFn: (error: any, level?: SentrySeverityLevel) => void,\n): Promise<void> {\n  if (isEmpty(deployment.order?.orderbook)) throw Error('No orderbook associated with scenario');\n\n  try {\n    await orderAddFn(dotrainText, deployment);\n  } catch (e) {\n    reportErrorToSentryFn(e);\n    // Re-throw the error if the caller needs to handle it further or update UI state based on it\n    // For now, just reporting, as the original component managed isSubmitting separately\n    throw e;\n  }\n}\n","import type { ScenarioCfg } from '@rainlanguage/orderbook';\nimport { isEmpty } from 'lodash';\nimport { orderAddComposeRainlang } from '$lib/services/order';\nimport { SentrySeverityLevel, reportErrorToSentry } from '$lib/services/sentry';\n\n/**\n * Composes Rainlang strings for a given set of scenarios based on dotrain text and settings.\n *\n * @param dotrainText - The base dotrain text.\n * @param settingsStrings - An array of strings representing the settings configuration.\n * @param scenarios - An optional record of scenarios to generate Rainlang for.\n * @returns A Promise that resolves to a Map where keys are ScenarioCfg objects and\n *          values are the composed Rainlang strings or error messages.\n *          Returns undefined if no scenarios are provided or an unexpected error occurs.\n */\nexport async function generateRainlangStrings(\n  dotrainText: string,\n  settingsStrings: string[],\n  scenarios?: Record<string, ScenarioCfg>,\n): Promise<Map<ScenarioCfg, string> | undefined> {\n  try {\n    if (isEmpty(scenarios)) return undefined;\n\n    const composedRainlangForScenarios: Map<ScenarioCfg, string> = new Map();\n\n    for (const scenario of Object.values(scenarios)) {\n      try {\n        const composedRainlang = await orderAddComposeRainlang(\n          dotrainText,\n          settingsStrings,\n          scenario,\n        );\n        composedRainlangForScenarios.set(scenario, composedRainlang);\n      } catch (e) {\n        composedRainlangForScenarios.set(\n          scenario,\n          e?.toString() || `Error composing rainlang for scenario: ${scenario.key}`,\n        );\n      }\n    }\n    return composedRainlangForScenarios;\n  } catch (e) {\n    reportErrorToSentry(e, SentrySeverityLevel.Error);\n    return undefined;\n  }\n}\n","import type { DeploymentCfg } from '@rainlanguage/orderbook';\nimport * as chains from 'viem/chains';\n\n/**\n * Gathers key/value pairs of deployments chain ids\n * against their network name to be used for debug modal.\n * @param deployments - Record of deployments.\n * @returns Record of chainIds to network names, or undefined if no deployments.\n */\nexport function getDeploymentsNetworks(\n  deployments: Record<string, DeploymentCfg> | undefined,\n): Record<number, string> | undefined {\n  if (deployments) {\n    const networks: Record<number, string> = {};\n    for (const key in deployments) {\n      const chainId = deployments[key].scenario.deployer.network.chainId;\n      if (!networks[chainId]) {\n        const networkKey =\n          Object.values(chains).find((v) => v.id === chainId)?.name ??\n          deployments[key].scenario.deployer.network.key;\n        networks[chainId] = networkKey;\n      }\n    }\n    if (!Object.keys(networks).length) return undefined;\n    else return networks;\n  }\n  return undefined;\n}\n","<script lang=\"ts\">\n  import {\n    PageHeader,\n    CodeMirrorDotrain,\n    ButtonLoading,\n    useRaindexClient,\n  } from '@rainlanguage/ui-components';\n  import FileTextarea from '$lib/components/FileTextarea.svelte';\n  import { Label, Button, Spinner, Tabs, TabItem } from 'flowbite-svelte';\n  import { RawRainlangExtension, type Problem } from 'codemirror-rainlang';\n  import { problemsCallback } from '$lib/services/langServices';\n  import { makeChartData } from '$lib/services/chart';\n  import { type ChartData, type DeploymentCfg, type ScenarioCfg } from '@rainlanguage/orderbook';\n  import { settingsText } from '$lib/stores/settings';\n  import Charts from '$lib/components/Charts.svelte';\n  import { globalDotrainFile } from '$lib/storesGeneric/textFileStore';\n  import { isEmpty, isNil } from 'lodash';\n  import { DropdownRadio } from '@rainlanguage/ui-components';\n  import { toasts } from '$lib/stores/toasts';\n  import ModalExecute from '$lib/components/ModalExecute.svelte';\n  import { orderAdd, orderAddCalldata, validateSpecVersion } from '$lib/services/order';\n  import { ethersExecute } from '$lib/services/ethersTx';\n  import { formatEthersTransactionError } from '$lib/utils/transaction';\n  import { promiseTimeout, CodeMirrorRainlang } from '@rainlanguage/ui-components';\n  import { reportErrorToSentry } from '$lib/services/sentry';\n  import { pickScenarios } from '$lib/services/pickConfig';\n  import { checkDotrainErrors } from '$lib/services/configCodemirrorProblems';\n  import ScenarioDebugTable from '$lib/components/ScenarioDebugTable.svelte';\n  import { useDebouncedFn } from '$lib/utils/asyncDebounce';\n  import Words from '$lib/components/Words.svelte';\n  import { getAuthoringMetaV2ForScenarios } from '$lib/services/authoringMeta';\n  import SpecVersionValidator from '$lib/components/SpecVersionValidator.svelte';\n  import { page } from '$app/stores';\n  import { codeMirrorTheme } from '$lib/stores/darkMode';\n  import { executeWalletConnectOrder } from '$lib/services/executeWalletConnectOrder';\n  import { executeLedgerOrder } from '$lib/services/executeLedgerOrder';\n  import { generateRainlangStrings } from '$lib/services/generateRainlangStrings';\n  import { getDeploymentsNetworks } from '$lib/utils/getDeploymentNetworks';\n  import { walletConnectNetwork } from '$lib/stores/walletconnect';\n  import { getDeployments, getScenarios } from '$lib/services/config';\n\n  const raindexClient = useRaindexClient();\n\n  let isSubmitting = false;\n  let isCharting = false;\n  let chartData: ChartData;\n  let deploymentRef: string | undefined = undefined;\n  let scenarioRef: string | undefined = undefined;\n  let openAddOrderModal = false;\n  let allDeployments: Record<string, DeploymentCfg> = {};\n  let allScenarios: Record<string, ScenarioCfg> = {};\n\n  $: if ($globalDotrainFile) {\n    getDeployments().then((deployments) => (allDeployments = deployments));\n    getScenarios().then((scenarios) => (allScenarios = scenarios));\n  }\n\n  $: deployment = deploymentRef ? allDeployments[deploymentRef] : undefined;\n  $: scenarios = pickScenarios(allScenarios, $walletConnectNetwork);\n\n  // Resetting the selected deployment to undefined if it is not in the current\n  // strats deployment list anymore\n  $: if (deploymentRef && allDeployments && !Object.keys(allDeployments).includes(deploymentRef)) {\n    deploymentRef = undefined;\n  }\n\n  $: bindings = deployment ? deployment.scenario.bindings : {};\n\n  let openTab: Record<string, boolean> = {};\n\n  const {\n    debouncedFn: debounceGetAuthoringMetas,\n    result: authoringMetasResult,\n    error: authoringMetasError,\n  } = useDebouncedFn(getAuthoringMetaV2ForScenarios, 500);\n\n  $: debounceGetAuthoringMetas($globalDotrainFile.text, [$settingsText]);\n\n  const {\n    debouncedFn: debouncedGenerateRainlangStrings,\n    result: generatedRainlang,\n    error,\n  } = useDebouncedFn(generateRainlangStrings, 500);\n\n  $: debouncedGenerateRainlangStrings($globalDotrainFile.text, [$settingsText], allScenarios);\n\n  $: rainlangExtension = new RawRainlangExtension({\n    diagnostics: async (text) => {\n      let configProblems = [];\n      let problems = [];\n      try {\n        // get problems with merging settings config with frontmatter\n        configProblems = await checkDotrainErrors(text.text, [$settingsText]);\n      } catch (e) {\n        configProblems = [\n          {\n            msg: e as string,\n            position: [0, 0],\n            code: 9,\n          },\n        ];\n      }\n      try {\n        const network = raindexClient.getNetworkByChainId($walletConnectNetwork);\n        if (network.error) {\n          throw new Error(network.error.readableMsg);\n        }\n\n        // get problems with dotrain\n        problems = await promiseTimeout(\n          problemsCallback(\n            network.value.rpcs,\n            text,\n            bindings,\n            deployment?.scenario.deployer.address,\n          ),\n          5000,\n          'failed to parse on native parser',\n        );\n      } catch (e) {\n        problems = [\n          {\n            msg: e as string,\n            position: [0, 0],\n            code: 9,\n          },\n        ];\n      }\n      return [...configProblems, ...problems] as Problem[];\n    },\n  });\n\n  $: {\n    if (isNil(scenarioRef) && !isEmpty(scenarios)) {\n      scenarioRef = Object.keys(scenarios)[0];\n    }\n  }\n\n  async function chart() {\n    isCharting = true;\n    try {\n      chartData = await makeChartData($globalDotrainFile.text, $settingsText);\n    } catch (e) {\n      reportErrorToSentry(e);\n      toasts.error(e as string);\n    }\n    isCharting = false;\n  }\n\n  async function handleExecuteLedger() {\n    isSubmitting = true;\n    try {\n      if (!deployment) throw Error('Select a deployment to add order');\n      await executeLedgerOrder($globalDotrainFile.text, deployment, orderAdd, reportErrorToSentry);\n    } catch (e: unknown) {\n      toasts.error((e as Error).message || 'Ledger execution failed');\n    }\n    isSubmitting = false;\n  }\n\n  async function handleExecuteWalletConnect() {\n    isSubmitting = true;\n    try {\n      if (!deployment) throw Error('Select a deployment to add order');\n      await executeWalletConnectOrder($globalDotrainFile.text, deployment, {\n        orderAddCalldataFn: async (dotrain, deploy) =>\n          (await orderAddCalldata(dotrain, deploy)) as Uint8Array,\n        ethersExecuteFn: ethersExecute,\n        reportErrorToSentryFn: reportErrorToSentry,\n        formatEthersTransactionErrorFn: formatEthersTransactionError,\n        successToastFn: toasts.success,\n        errorToastFn: toasts.error,\n      });\n    } catch {\n      // error already reported by service or toast shown\n    }\n    isSubmitting = false;\n  }\n\n  const { debouncedFn: debounceValidateSpecVersion, error: specVersionError } = useDebouncedFn(\n    validateSpecVersion,\n    500,\n  );\n\n  $: debounceValidateSpecVersion($globalDotrainFile.text, [$settingsText]);\n\n  $: deploymentNetworks = getDeploymentsNetworks(allDeployments);\n</script>\n\n<PageHeader title=\"Add Order\" pathname={$page.url.pathname} />\n\n<FileTextarea textFile={globalDotrainFile}>\n  <svelte:fragment slot=\"alert\">\n    <SpecVersionValidator error={$specVersionError} />\n  </svelte:fragment>\n\n  <svelte:fragment slot=\"textarea\">\n    <CodeMirrorDotrain\n      codeMirrorTheme={$codeMirrorTheme}\n      rainlangText={$globalDotrainFile.text}\n      disabled={isSubmitting}\n      styles={{ '&': { minHeight: '400px' } }}\n      {rainlangExtension}\n      onTextChange={(text) => globalDotrainFile.set({ ...$globalDotrainFile, text })}\n    />\n  </svelte:fragment>\n\n  <svelte:fragment slot=\"additionalFields\">\n    <div class=\"flex items-center justify-end gap-x-4\">\n      {#if isEmpty(allDeployments)}\n        <span class=\"text-gray-500 dark:text-gray-400\">No valid deployments found</span>\n      {:else}\n        <Label class=\"whitespace-nowrap\">Select deployment</Label>\n        <DropdownRadio options={allDeployments} bind:value={deploymentRef}>\n          <svelte:fragment slot=\"content\" let:selectedRef>\n            <span>{!isNil(selectedRef) ? selectedRef : 'Select a deployment'}</span>\n          </svelte:fragment>\n\n          <svelte:fragment slot=\"option\" let:ref>\n            <div class=\"w-full overflow-hidden overflow-ellipsis\">\n              <div class=\"text-md break-word mb-2\">{ref}</div>\n            </div>\n          </svelte:fragment>\n        </DropdownRadio>\n      {/if}\n      <ButtonLoading\n        class=\"min-w-fit\"\n        color=\"green\"\n        loading={isSubmitting}\n        disabled={$globalDotrainFile.isEmpty || isNil(deploymentRef) || !!$specVersionError}\n        on:click={() => (openAddOrderModal = true)}>Add Order</ButtonLoading\n      >\n    </div>\n  </svelte:fragment>\n</FileTextarea>\n\n<Button disabled={isCharting} on:click={chart} size=\"sm\" class=\"self-center\"\n  ><span class=\"mr-2\">Generate charts</span>{#if isCharting}<Spinner size=\"5\" />{/if}</Button\n>\n\n<Tabs\n  style=\"underline\"\n  contentClass=\"mt-4\"\n  defaultClass=\"flex flex-wrap space-x-2 rtl:space-x-reverse mt-4\"\n>\n  <TabItem open title=\"Rainlang\">\n    {#if $generatedRainlang && !$error}\n      <Tabs\n        style=\"underline\"\n        contentClass=\"mt-4\"\n        defaultClass=\"flex flex-wrap space-x-2 rtl:space-x-reverse mt-4\"\n      >\n        {#each Array.from($generatedRainlang.entries()) as [scenario, rainlangText]}\n          <TabItem bind:open={openTab[scenario.key]} title={scenario.key}>\n            <CodeMirrorRainlang\n              {rainlangText}\n              codeMirrorDisabled={true}\n              codeMirrorTheme={$codeMirrorTheme}\n            />\n          </TabItem>\n        {/each}\n      </Tabs>\n    {/if}\n  </TabItem>\n  <TabItem title=\"Debug\"><ScenarioDebugTable bind:networks={deploymentNetworks} /></TabItem>\n  <TabItem title=\"Charts\">\n    <Charts {chartData} />\n  </TabItem>\n  <TabItem title=\"Words\">\n    <Words authoringMetas={$authoringMetasResult} error={$authoringMetasError} />\n  </TabItem>\n</Tabs>\n\n<ModalExecute\n  chainId={deployment?.order.network.chainId}\n  bind:open={openAddOrderModal}\n  title=\"Add Order\"\n  execButtonLabel=\"Add Order\"\n  executeWalletconnect={handleExecuteWalletConnect}\n  executeLedger={handleExecuteLedger}\n  bind:isSubmitting\n/>\n"],"names":["codeMirrorTheme","subscribe","get","scenarios"],"mappings":"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","x_google_ignoreList":[0,1]}