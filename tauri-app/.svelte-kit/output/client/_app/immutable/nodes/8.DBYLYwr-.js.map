{"version":3,"file":"8.DBYLYwr-.js","sources":["../../../../../../../packages/ui-components/dist/components/tables/VaultsListTable.svelte","../../../../../../src/routes/vaults/+page.svelte"],"sourcesContent":["<script>import { toHex } from \"viem\";\nimport { useRaindexClient } from \"../../hooks/useRaindexClient\";\nimport {\n  Button,\n  Checkbox,\n  Dropdown,\n  DropdownItem,\n  TableBodyCell,\n  TableHeadCell\n} from \"flowbite-svelte\";\nimport { goto } from \"$app/navigation\";\nimport { ArrowUpFromBracketOutline, DotsVerticalOutline } from \"flowbite-svelte-icons\";\nimport { createInfiniteQuery, createQuery } from \"@tanstack/svelte-query\";\nimport TanstackAppTable from \"../TanstackAppTable.svelte\";\nimport ListViewOrderbookFilters from \"../ListViewOrderbookFilters.svelte\";\nimport OrderOrVaultHash from \"../OrderOrVaultHash.svelte\";\nimport Hash, { HashType } from \"../Hash.svelte\";\nimport { DEFAULT_PAGE_SIZE, DEFAULT_REFRESH_INTERVAL } from \"../../queries/constants\";\nimport {\n  Float,\n  RaindexClient,\n  RaindexVault,\n  RaindexVaultsList\n} from \"@rainlanguage/orderbook\";\nimport { QKEY_TOKENS, QKEY_VAULTS } from \"../../queries/keys\";\nimport { useAccount } from \"../../providers/wallet/useAccount\";\nimport { getNetworkName } from \"../../utils/getNetworkName\";\nimport { getAllContexts } from \"svelte\";\nimport Tooltip from \"../Tooltip.svelte\";\nimport { useToasts } from \"../../providers/toasts/useToasts\";\nconst context = getAllContexts();\nconst { errToast } = useToasts();\nexport let activeAccountsItems;\nexport let orderHash;\nexport let showInactiveOrders;\nexport let hideZeroBalanceVaults;\nexport let hideInactiveOrdersVaults;\nexport let activeTokens;\nexport let selectedChainIds;\nexport let showMyItemsOnly;\nexport let activeOrderbookAddresses;\nexport let handleDepositModal = void 0;\nexport let handleWithdrawModal = void 0;\nexport let onWithdrawAll = void 0;\nconst { account } = useAccount();\nconst raindexClient = useRaindexClient();\n$: owners = $activeAccountsItems && Object.values($activeAccountsItems).length > 0 ? Object.values($activeAccountsItems) : $showMyItemsOnly && $account ? [$account] : [];\n$: tokensQuery = createQuery({\n  queryKey: [QKEY_TOKENS, $selectedChainIds],\n  queryFn: async () => {\n    const result = await raindexClient.getAllVaultTokens($selectedChainIds);\n    if (result.error) throw new Error(result.error.readableMsg);\n    return result.value;\n  },\n  enabled: true\n});\n$: selectedTokens = $activeTokens?.filter(\n  (address) => !$tokensQuery.data || $tokensQuery.data.some((t) => t.address === address)\n) ?? [];\n$: orderbooksMap = raindexClient.getAllOrderbooks()?.value ?? /* @__PURE__ */ new Map();\n$: availableOrderbookAddresses = (() => {\n  const addrs = [];\n  orderbooksMap.forEach((cfg) => {\n    if ($selectedChainIds.length === 0 || $selectedChainIds.includes(cfg.network.chainId)) {\n      addrs.push(cfg.address.toLowerCase());\n    }\n  });\n  return addrs;\n})();\n$: selectedOrderbookAddresses = $activeOrderbookAddresses?.filter(\n  (address) => availableOrderbookAddresses.includes(address.toLowerCase())\n) ?? [];\n$: query = createInfiniteQuery({\n  queryKey: [\n    QKEY_VAULTS,\n    $hideZeroBalanceVaults,\n    $hideInactiveOrdersVaults,\n    $selectedChainIds,\n    owners,\n    selectedTokens,\n    selectedOrderbookAddresses\n  ],\n  queryFn: async ({ pageParam }) => {\n    const result = await raindexClient.getVaults(\n      $selectedChainIds,\n      {\n        owners,\n        hideZeroBalance: $hideZeroBalanceVaults,\n        tokens: selectedTokens,\n        orderbookAddresses: selectedOrderbookAddresses.length > 0 ? selectedOrderbookAddresses : void 0,\n        onlyActiveOrders: $hideInactiveOrdersVaults\n      },\n      pageParam + 1\n    );\n    if (result.error) throw new Error(result.error.readableMsg);\n    return result.value;\n  },\n  initialPageParam: 0,\n  getNextPageParam(lastPage, _allPages, lastPageParam) {\n    return lastPage.items.length === DEFAULT_PAGE_SIZE ? lastPageParam + 1 : void 0;\n  },\n  refetchInterval: DEFAULT_REFRESH_INTERVAL,\n  enabled: true\n});\n$: if (selectedVaults.size > 0 && !$account) {\n  selectedVaults = /* @__PURE__ */ new Set();\n  selectedVaultsOnChainId = null;\n}\nlet selectedVaults = /* @__PURE__ */ new Set();\nlet selectedVaultsOnChainId = null;\nconst getToggleSelectVaultHandler = (vaultId, chainId) => (e) => {\n  e.stopPropagation();\n  if (selectedVaults.has(vaultId)) {\n    selectedVaults.delete(vaultId);\n    if (selectedVaults.size === 0) {\n      selectedVaultsOnChainId = null;\n    }\n  } else {\n    selectedVaults.add(vaultId);\n    if (selectedVaultsOnChainId === null) {\n      selectedVaultsOnChainId = chainId;\n    }\n  }\n  selectedVaults = new Set(selectedVaults);\n};\nconst stopPropagation = (e) => e.stopPropagation();\nconst handleWithdrawAll = () => {\n  const pages = $query.data?.pages ?? [];\n  if (!onWithdrawAll || pages.length === 0) {\n    return;\n  }\n  const selectedIds = Array.from(selectedVaults);\n  try {\n    const filteredVaultListResults = pages.reduce(\n      (prev, cur) => {\n        const result = cur.pickByIds(selectedIds);\n        if (result.error) {\n          throw new Error(result.error.readableMsg);\n        }\n        return [...prev, result.value];\n      },\n      []\n    );\n    if (filteredVaultListResults.length === 0) {\n      errToast(\"No selected vaults found in the loaded pages. Please refresh and try again.\");\n      return;\n    }\n    const [first, ...rest] = filteredVaultListResults;\n    const combinedVaultsList = rest.reduce((prev, cur) => {\n      const result = prev.concat(cur);\n      if (result.error) {\n        throw new Error(result.error.readableMsg);\n      }\n      return result.value;\n    }, first);\n    return onWithdrawAll(raindexClient, combinedVaultsList);\n  } catch (err) {\n    if (err instanceof Error) {\n      errToast(err.message);\n    }\n  }\n};\nconst ZERO_FLOAT = Float.parse(\"0\").value;\nconst isZeroBalance = (item) => {\n  if (!ZERO_FLOAT) return true;\n  return item.balance.eq(ZERO_FLOAT).value;\n};\nconst isSameChainId = (item, chainId) => {\n  return chainId === null || chainId === item.chainId;\n};\nconst isDisabled = (item, chainId) => {\n  return !isSameChainId(item, chainId) || isZeroBalance(item);\n};\nconst AppTable = TanstackAppTable;\n</script>\n\n{#if $query}\n\t<ListViewOrderbookFilters\n\t\t{selectedChainIds}\n\t\t{activeAccountsItems}\n\t\t{showMyItemsOnly}\n\t\t{showInactiveOrders}\n\t\t{orderHash}\n\t\t{hideZeroBalanceVaults}\n\t\t{hideInactiveOrdersVaults}\n\t\t{activeTokens}\n\t\t{tokensQuery}\n\t\t{selectedTokens}\n\t\t{activeOrderbookAddresses}\n\t\t{selectedOrderbookAddresses}\n\t/>\n\t<AppTable\n\t\t{query}\n\t\tdataSelector={(page) => page.items}\n\t\tqueryKey={QKEY_VAULTS}\n\t\temptyMessage=\"No Vaults Found\"\n\t\ton:clickRow={(e) => {\n\t\t\tgoto(`/vaults/${e.detail.item.chainId}-${e.detail.item.orderbook}-${e.detail.item.id}`);\n\t\t}}\n\t>\n\t\t<svelte:fragment slot=\"title\">\n\t\t\t<div class=\"mt-2 flex w-full justify-between\">\n\t\t\t\t<div class=\"flex items-center gap-x-6\">\n\t\t\t\t\t<div class=\"text-3xl font-medium dark:text-white\">Vaults</div>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"xs\"\n\t\t\t\t\t\ton:click={handleWithdrawAll}\n\t\t\t\t\t\tdisabled={!onWithdrawAll || selectedVaults.size === 0}\n\t\t\t\t\t\tdata-testid=\"withdraw-all-button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ArrowUpFromBracketOutline size=\"xs\" class=\"mr-2\" />\n\t\t\t\t\t\t{selectedVaults.size > 0\n\t\t\t\t\t\t\t? `Withdraw selected (${selectedVaults.size})`\n\t\t\t\t\t\t\t: 'Withdraw vaults'}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</svelte:fragment>\n\t\t<svelte:fragment slot=\"head\">\n\t\t\t<TableHeadCell padding=\"p-0\"><span class=\"sr-only\">Select</span></TableHeadCell>\n\t\t\t<TableHeadCell padding=\"p-4\">Network</TableHeadCell>\n\t\t\t<TableHeadCell padding=\"px-4 py-4\">Vault ID</TableHeadCell>\n\t\t\t<TableHeadCell padding=\"px-4 py-4\">Orderbook</TableHeadCell>\n\t\t\t<TableHeadCell padding=\"px-4 py-4\">Owner</TableHeadCell>\n\t\t\t<TableHeadCell padding=\"px-2 py-4\">Token</TableHeadCell>\n\t\t\t<TableHeadCell padding=\"px-2 py-4\">Balance</TableHeadCell>\n\t\t\t<TableHeadCell padding=\"px-3 py-4\">Input For</TableHeadCell>\n\t\t\t<TableHeadCell padding=\"px-3 py-4\">Output For</TableHeadCell>\n\t\t</svelte:fragment>\n\n\t\t<svelte:fragment slot=\"bodyRow\" let:item>\n\t\t\t<TableBodyCell tdClass=\"px-0\" on:click={stopPropagation}>\n\t\t\t\t<Checkbox\n\t\t\t\t\tdata-testid=\"vault-checkbox\"\n\t\t\t\t\tclass={`block px-2 py-4 ${$account?.toLowerCase() !== item.owner.toLowerCase() ? 'invisible' : ''}`}\n\t\t\t\t\tchecked={selectedVaults.has(item.id)}\n\t\t\t\t\tdisabled={isDisabled(item, selectedVaultsOnChainId)}\n\t\t\t\t\ton:change={getToggleSelectVaultHandler(item.id, item.chainId)}\n\t\t\t\t\ton:click={stopPropagation}\n\t\t\t\t\taria-label={`Select vault ${item.id}`}\n\t\t\t\t/>\n\t\t\t\t{#if $account?.toLowerCase() === item.owner.toLowerCase() && isDisabled(item, selectedVaultsOnChainId)}\n\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t{isZeroBalance(item)\n\t\t\t\t\t\t\t? 'This vault has a zero balance'\n\t\t\t\t\t\t\t: 'This vault is on a different network'}\n\t\t\t\t\t</Tooltip>\n\t\t\t\t{/if}\n\t\t\t</TableBodyCell>\n\n\t\t\t<TableBodyCell tdClass=\"px-4 py-2\" data-testid=\"vault-network\">\n\t\t\t\t{getNetworkName(Number(item.chainId))}\n\t\t\t</TableBodyCell>\n\n\t\t\t<TableBodyCell tdClass=\"break-all px-4 py-4\" data-testid=\"vault-id\">\n\t\t\t\t<Hash type={HashType.Identifier} value={toHex(item.vaultId)} />\n\t\t\t</TableBodyCell>\n\t\t\t<TableBodyCell tdClass=\"break-all px-4 py-2 min-w-48\" data-testid=\"vault-orderbook\">\n\t\t\t\t<Hash type={HashType.Identifier} value={item.orderbook} />\n\t\t\t</TableBodyCell>\n\t\t\t<TableBodyCell tdClass=\"break-all px-4 py-2 min-w-48\" data-testid=\"vault-owner\">\n\t\t\t\t<Hash type={HashType.Wallet} value={item.owner} />\n\t\t\t</TableBodyCell>\n\t\t\t<TableBodyCell tdClass=\"break-word p-2 min-w-48\" data-testid=\"vault-token\"\n\t\t\t\t>{item.token.name}</TableBodyCell\n\t\t\t>\n\t\t\t<TableBodyCell tdClass=\"break-all p-2 min-w-48\" data-testid=\"vault-balance\">\n\t\t\t\t{`${item.formattedBalance} ${item.token.symbol}`}\n\t\t\t</TableBodyCell>\n\t\t\t<TableBodyCell tdClass=\"break-all p-2 min-w-48\">\n\t\t\t\t{#if item.ordersAsInput.length > 0}\n\t\t\t\t\t<div data-testid=\"vault-order-inputs\" class=\"flex flex-wrap items-end justify-start\">\n\t\t\t\t\t\t{#each item.ordersAsInput.slice(0, 3) as order}\n\t\t\t\t\t\t\t<OrderOrVaultHash\n\t\t\t\t\t\t\t\ttype=\"orders\"\n\t\t\t\t\t\t\t\torderOrVault={order}\n\t\t\t\t\t\t\t\tchainId={item.chainId}\n\t\t\t\t\t\t\t\torderbookAddress={item.orderbook}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t{#if item.ordersAsInput.length > 3}...{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</TableBodyCell>\n\t\t\t<TableBodyCell tdClass=\"break-all p-2 min-w-48\">\n\t\t\t\t{#if item.ordersAsOutput.length > 0}\n\t\t\t\t\t<div data-testid=\"vault-order-outputs\" class=\"flex flex-wrap items-end justify-start\">\n\t\t\t\t\t\t{#each item.ordersAsOutput.slice(0, 3) as order}\n\t\t\t\t\t\t\t<OrderOrVaultHash\n\t\t\t\t\t\t\t\ttype=\"orders\"\n\t\t\t\t\t\t\t\torderOrVault={order}\n\t\t\t\t\t\t\t\tchainId={item.chainId}\n\t\t\t\t\t\t\t\torderbookAddress={item.orderbook}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t{#if item.ordersAsOutput.length > 3}...{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</TableBodyCell>\n\t\t\t{#if handleDepositModal && handleWithdrawModal && item.owner.toLowerCase() === $account?.toLowerCase()}\n\t\t\t\t<TableBodyCell tdClass=\"px-0 text-right\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tcolor=\"alternative\"\n\t\t\t\t\t\toutline={false}\n\t\t\t\t\t\tdata-testid=\"vault-menu\"\n\t\t\t\t\t\tid={`vault-menu-${item.id}`}\n\t\t\t\t\t\tclass=\"mr-2 border-none px-2\"\n\t\t\t\t\t\ton:click={(e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DotsVerticalOutline class=\"dark:text-white\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</TableBodyCell>\n\n\t\t\t\t<Dropdown\n\t\t\t\t\tdata-testid=\"dropdown\"\n\t\t\t\t\tplacement=\"bottom-end\"\n\t\t\t\t\ttriggeredBy={`#vault-menu-${item.id}`}\n\t\t\t\t>\n\t\t\t\t\t<DropdownItem\n\t\t\t\t\t\tdata-testid=\"deposit-button\"\n\t\t\t\t\t\ton:click={(e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\thandleDepositModal(item, $query.refetch, context);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t>Deposit\n\t\t\t\t\t</DropdownItem>\n\t\t\t\t\t<DropdownItem\n\t\t\t\t\t\tdata-testid=\"withdraw-button\"\n\t\t\t\t\t\ton:click={(e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\thandleWithdrawModal(item, $query.refetch, context);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t>Withdraw\n\t\t\t\t\t</DropdownItem>\n\t\t\t\t</Dropdown>\n\t\t\t{/if}\n\t\t</svelte:fragment>\n\t</AppTable>\n{/if}\n","<script lang=\"ts\">\n  import { PageHeader, VaultsListTable } from '@rainlanguage/ui-components';\n  import { page } from '$app/stores';\n\n  import {\n    orderHash,\n    activeAccountsItems,\n    selectedChainIds,\n    showInactiveOrders,\n    hideZeroBalanceVaults,\n    hideInactiveOrdersVaults,\n    activeTokens,\n    activeOrderbookAddresses,\n  } from '$lib/stores/settings';\n\n  import { handleDepositModal, handleWithdrawModal } from '$lib/services/modal';\n  import { writable } from 'svelte/store';\n</script>\n\n<PageHeader title=\"Vaults\" pathname={$page.url.pathname} />\n\n<VaultsListTable\n  {orderHash}\n  {activeAccountsItems}\n  {selectedChainIds}\n  {showInactiveOrders}\n  {hideZeroBalanceVaults}\n  {hideInactiveOrdersVaults}\n  {handleDepositModal}\n  {handleWithdrawModal}\n  {activeTokens}\n  {activeOrderbookAddresses}\n  showMyItemsOnly={writable(false)}\n/>\n"],"names":["QKEY_VAULTS","ctx","set_data","t1","t1_value","insert_hydration","target","div2","anchor","append_hydration","div1","div0","dirty","button_changes","span","t_value","t","show_if","is_function","checkbox_changes","getNetworkName","HashType","toHex","hash_changes","each_value_1","ensure_array_like","i","if_block","create_if_block_5","div","each_blocks","orderorvaulthash_changes","create_if_block_4","each_value","create_if_block_3","create_if_block_2","dropdown_changes","create_if_block","e","page","context","getAllContexts","errToast","useToasts","activeAccountsItems","$$props","orderHash","showInactiveOrders","hideZeroBalanceVaults","hideInactiveOrdersVaults","activeTokens","selectedChainIds","showMyItemsOnly","activeOrderbookAddresses","handleDepositModal","handleWithdrawModal","onWithdrawAll","account","useAccount","raindexClient","useRaindexClient","selectedVaults","selectedVaultsOnChainId","getToggleSelectVaultHandler","vaultId","chainId","$$invalidate","stopPropagation","handleWithdrawAll","pages","$query","selectedIds","filteredVaultListResults","prev","cur","result","first","rest","combinedVaultsList","err","ZERO_FLOAT","Float","isZeroBalance","item","isSameChainId","isDisabled","AppTable","TanstackAppTable","goto","owners","$activeAccountsItems","$showMyItemsOnly","$account","$$subscribe_tokensQuery","tokensQuery","createQuery","QKEY_TOKENS","$selectedChainIds","selectedTokens","$activeTokens","address","$tokensQuery","availableOrderbookAddresses","addrs","orderbooksMap","cfg","selectedOrderbookAddresses","$activeOrderbookAddresses","$$subscribe_query","query","createInfiniteQuery","$hideZeroBalanceVaults","$hideInactiveOrdersVaults","pageParam","lastPage","_allPages","lastPageParam","DEFAULT_PAGE_SIZE","DEFAULT_REFRESH_INTERVAL","writable"],"mappings":"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"}