{"version":3,"file":"modal.B6hU_23M.js","sources":["../../../../../../../node_modules/flowbite-svelte/dist/button-group/ButtonGroup.svelte","../../../../../../../node_modules/flowbite-svelte/dist/utils/Wrapper.svelte","../../../../../../../node_modules/flowbite-svelte/dist/forms/Label.svelte","../../../../../../../node_modules/flowbite-svelte/dist/forms/Input.svelte","../../../../../../../node_modules/flowbite-svelte/dist/forms/InputAddon.svelte","../../../../../../../node_modules/flowbite-svelte/dist/table/Table.svelte","../../../../../../../node_modules/flowbite-svelte/dist/table/TableBody.svelte","../../../../../../../node_modules/flowbite-svelte/dist/table/TableBodyCell.svelte","../../../../../../../node_modules/flowbite-svelte/dist/table/TableBodyRow.svelte","../../../../../../../node_modules/flowbite-svelte/dist/table/TableHead.svelte","../../../../../../../node_modules/flowbite-svelte/dist/table/TableHeadCell.svelte","../../../../../../../node_modules/@tanstack/query-core/build/modern/queryObserver.js","../../../../../../../node_modules/@tanstack/svelte-query/dist/useIsRestoring.js","../../../../../../../node_modules/@tanstack/svelte-query/dist/useQueryClient.js","../../../../../../../node_modules/@tanstack/svelte-query/dist/utils.js","../../../../../../../node_modules/@tanstack/svelte-query/dist/createBaseQuery.js","../../../../../../../node_modules/@tanstack/svelte-query/dist/createQuery.js","../../../../../../../packages/ui-components/dist/components/icon/Refresh.svelte","../../../../../../../packages/ui-components/dist/utils/getNetworkName.js","../../../../../../../packages/ui-components/dist/queries/constants.js","../../../../../../../packages/ui-components/dist/components/input/InputTokenAmount.svelte","../../../../../../../node_modules/@ethersproject/constants/lib.esm/addresses.js","../../../../../../../node_modules/@ethersproject/constants/lib.esm/hashes.js","../../../../../../../node_modules/@ethersproject/hash/lib.esm/id.js","../../../../../../../node_modules/@ethersproject/hash/lib.esm/_version.js","../../../../../../../node_modules/@ethersproject/base64/lib.esm/base64.js","../../../../../../../node_modules/@ethersproject/hash/lib.esm/ens-normalize/decoder.js","../../../../../../../node_modules/@ethersproject/hash/lib.esm/ens-normalize/include.js","../../../../../../../node_modules/@ethersproject/hash/lib.esm/ens-normalize/lib.js","../../../../../../../node_modules/@ethersproject/hash/lib.esm/namehash.js","../../../../../../../node_modules/@ethersproject/hash/lib.esm/typed-data.js","../../../../../../src/lib/services/vault.ts","../../../../../../../node_modules/@ethersproject/abstract-provider/lib.esm/_version.js","../../../../../../../node_modules/@ethersproject/abstract-provider/lib.esm/index.js","../../../../../../../node_modules/@ethersproject/abstract-signer/lib.esm/_version.js","../../../../../../../node_modules/@ethersproject/abstract-signer/lib.esm/index.js","../../../../../../../node_modules/@ethersproject/basex/lib.esm/index.js","../../../../../../../node_modules/@ethersproject/sha2/lib.esm/sha2.js","../../../../../../../node_modules/@ethersproject/networks/lib.esm/_version.js","../../../../../../../node_modules/@ethersproject/networks/lib.esm/index.js","../../../../../../../node_modules/@ethersproject/web/lib.esm/_version.js","../../../../../../../node_modules/@ethersproject/web/lib.esm/geturl.js","../../../../../../../node_modules/@ethersproject/web/lib.esm/index.js","../../../../../../../node_modules/bech32/index.js","../../../../../../../node_modules/@ethersproject/providers/lib.esm/_version.js","../../../../../../../node_modules/@ethersproject/providers/lib.esm/formatter.js","../../../../../../../node_modules/@ethersproject/providers/lib.esm/base-provider.js","../../../../../../../node_modules/@ethersproject/providers/lib.esm/json-rpc-provider.js","../../../../../../../node_modules/@ethersproject/providers/lib.esm/web3-provider.js","../../../../../../src/lib/services/ethersTx.ts","../../../../../../src/lib/components/ModalExecute.svelte","../../../../../../src/lib/components/ModalVaultDeposit.svelte","../../../../../../src/lib/components/ModalVaultWithdraw.svelte","../../../../../../src/lib/services/order.ts","../../../../../../src/lib/components/modal/ModalOrderRemove.svelte","../../../../../../src/lib/queries/tradeDebug.ts","../../../../../../src/lib/components/debug/EvalResultsTable.svelte","../../../../../../src/lib/components/modal/ModalTradeDebug.svelte","../../../../../../src/lib/queries/orderQuote.ts","../../../../../../src/lib/components/modal/ModalQuoteDebug.svelte","../../../../../../src/lib/components/modal/ModalScenarioDebug.svelte","../../../../../../src/lib/services/modal.ts"],"sourcesContent":["<script>import { setContext } from 'svelte';\nimport { twMerge } from 'tailwind-merge';\nexport let size = 'md';\nexport let divClass = 'inline-flex rounded-lg shadow-sm';\nsetContext('group', { size });\n</script>\n\n<div {...$$restProps} class={twMerge(divClass, $$props.class)} role=\"group\">\n  <slot />\n</div>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte.com/)\n## Props\n@prop export let size: SizeType = 'md';\n@prop export let divClass: string = 'inline-flex rounded-lg shadow-sm';\n-->\n","<script>export let tag = 'div';\nexport let show;\nexport let use = () => { };\n</script>\n\n{#if show}\n  <svelte:element this={tag} use:use {...$$restProps}><slot /></svelte:element>\n{:else}\n  <slot />\n{/if}\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte.com/)\n## Props\n@prop export let tag: string = 'div';\n@prop export let show: boolean;\n@prop export let use: Action<HTMLElement, any> = () => {};\n-->\n","<script>import { twMerge } from 'tailwind-merge';\nexport let color = 'gray';\nexport let defaultClass = 'text-sm rtl:text-right font-medium block';\nexport let show = true;\nlet node;\nconst colorClasses = {\n    gray: 'text-gray-900 dark:text-gray-300',\n    green: 'text-green-700 dark:text-green-500',\n    red: 'text-red-700 dark:text-red-500',\n    disabled: 'text-gray-400 dark:text-gray-500'\n};\n// function checkDisabled(node: HTMLLabelElement) {\n$: {\n    const control = node?.control;\n    color = control?.disabled ? 'disabled' : color;\n}\n$: labelClass = twMerge(defaultClass, colorClasses[color], $$props.class);\n</script>\n\n{#if show}\n  <!-- svelte-ignore a11y-label-has-associated-control -->\n  <label bind:this={node} {...$$restProps} class={labelClass}><slot /></label>\n{:else}\n  <slot />\n{/if}\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte.com/)\n## Props\n@prop export let color: 'gray' | 'green' | 'red' | 'disabled' = 'gray';\n@prop export let defaultClass: string = 'text-sm rtl:text-right font-medium block';\n@prop export let show: boolean = true;\n-->\n","<script context=\"module\">export function clampSize(s) {\n    return s && s === 'xs' ? 'sm' : s === 'xl' ? 'lg' : s;\n}\n</script>\n\n<script>import Wrapper from '../utils/Wrapper.svelte';\nimport { twMerge } from 'tailwind-merge';\nimport { getContext } from 'svelte';\nexport let type = 'text';\nexport let value = undefined;\nexport let size = undefined;\nexport let defaultClass = 'block w-full disabled:cursor-not-allowed disabled:opacity-50 rtl:text-right';\nexport let color = 'base';\nexport let floatClass = 'flex absolute inset-y-0 items-center text-gray-500 dark:text-gray-400';\nconst borderClasses = {\n    base: 'border-gray-300 dark:border-gray-600',\n    tinted: 'border-gray-300 dark:border-gray-500',\n    green: 'border-green-500 dark:border-green-400',\n    red: 'border-red-500 dark:border-red-400'\n};\nconst ringClasses = {\n    base: 'focus:border-primary-500 focus:ring-primary-500 dark:focus:border-primary-500 dark:focus:ring-primary-500',\n    green: 'focus:ring-green-500 focus:border-green-500 dark:focus:border-green-500 dark:focus:ring-green-500',\n    red: 'focus:ring-red-500 focus:border-red-500 dark:focus:ring-red-500 dark:focus:border-red-500'\n};\nconst colorClasses = {\n    base: 'bg-gray-50 text-gray-900 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400',\n    tinted: 'bg-gray-50 text-gray-900 dark:bg-gray-600 dark:text-white dark:placeholder-gray-400',\n    green: 'bg-green-50 text-green-900 placeholder-green-700 dark:text-green-400 dark:placeholder-green-500 dark:bg-gray-700',\n    red: 'bg-red-50 text-red-900 placeholder-red-700 dark:text-red-500 dark:placeholder-red-500 dark:bg-gray-700'\n};\n// tinted if put in component having its own background\nlet background = getContext('background');\nlet group = getContext('group');\nconst textSizes = { sm: 'sm:text-xs', md: 'text-sm', lg: 'sm:text-base' };\nconst leftPadding = { sm: 'ps-9', md: 'ps-10', lg: 'ps-11' };\nconst rightPadding = { sm: 'pe-9', md: 'pe-10', lg: 'pe-11' };\nconst inputPadding = { sm: 'p-2', md: 'p-2.5', lg: 'p-3' };\n$: _size = size || clampSize(group?.size) || 'md';\nlet inputClass;\n$: {\n    const _color = color === 'base' && background ? 'tinted' : color;\n    inputClass = twMerge([defaultClass, inputPadding[_size], ($$slots.left && leftPadding[_size]) || ($$slots.right && rightPadding[_size]), ringClasses[color], colorClasses[_color], borderClasses[_color], textSizes[_size], group || 'rounded-lg', group && 'first:rounded-s-lg last:rounded-e-lg', group && 'border-s-0 first:border-s last:border-e', $$props.class]);\n}\n</script>\n\n<Wrapper class=\"relative w-full\" show={$$slots.left || $$slots.right}>\n  {#if $$slots.left}\n    <div class=\"{twMerge(floatClass, $$props.classLeft)} start-0 ps-2.5 pointer-events-none\">\n      <slot name=\"left\" />\n    </div>\n  {/if}\n  <slot props={{ ...$$restProps, class: inputClass }}>\n    <input {...$$restProps} bind:value on:blur on:change on:click on:contextmenu on:focus on:keydown on:keypress on:keyup on:mouseover on:mouseenter on:mouseleave on:paste on:input {...{ type }} class={inputClass} />\n  </slot>\n  {#if $$slots.right}\n    <div class=\"{twMerge(floatClass, $$props.classRight)} end-0 pe-2.5\"><slot name=\"right\" /></div>\n  {/if}\n</Wrapper>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte.com/)\n## Props\n@prop export let type: InputType = 'text';\n@prop export let value: any = undefined;\n@prop export let size: FormSizeType | undefined = undefined;\n@prop export let defaultClass: string = 'block w-full disabled:cursor-not-allowed disabled:opacity-50 rtl:text-right';\n@prop export let color: 'base' | 'green' | 'red' = 'base';\n@prop export let floatClass: string = 'flex absolute inset-y-0 items-center text-gray-500 dark:text-gray-400';\n-->\n","<script>import { twMerge } from 'tailwind-merge';\nimport { getContext } from 'svelte';\nimport { clampSize } from './Input.svelte';\nexport let size = undefined;\n// tinted if put in component having its own background\nlet background = getContext('background');\nlet group = getContext('group');\nconst borderClasses = {\n    base: 'border-gray-300 dark:border-gray-600',\n    tinted: 'border-gray-300 dark:border-gray-500'\n};\nconst darkBgClasses = {\n    base: 'dark:bg-gray-600 dark:text-gray-400',\n    tinted: 'dark:bg-gray-500 dark:text-gray-300'\n};\nconst divider = {\n    base: 'dark:border-e-gray-700 dark:last:border-e-gray-600',\n    tinted: 'dark:border-e-gray-600 dark:last:border-e-gray-500'\n};\nconst textSizes = { sm: 'sm:text-xs', md: 'text-sm', lg: 'sm:text-base' };\nconst prefixPadding = { sm: 'px-2', md: 'px-3', lg: 'px-4' };\n// size: explicit, inherited, default\n$: _size = size || clampSize(group?.size) || 'md';\n$: divClass = twMerge(textSizes[_size], prefixPadding[_size], background ? borderClasses['tinted'] : borderClasses['base'], 'text-gray-500 bg-gray-200', background ? darkBgClasses.tinted : darkBgClasses.base, background ? divider.tinted : divider.base, 'inline-flex items-center border-t border-b first:border-s border-e', 'first:rounded-s-lg last:rounded-e-lg', $$props.class);\n</script>\n\n<div {...$$restProps} class={divClass}>\n  <slot />\n</div>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte.com/)\n## Props\n@prop export let size: 'sm' | 'md' | 'lg' | undefined = undefined;\n-->\n","<script>import { twMerge, twJoin } from 'tailwind-merge';\nimport { setContext } from 'svelte';\nexport let divClass = 'relative overflow-x-auto';\nexport let striped = false;\nexport let hoverable = false;\nexport let noborder = false;\nexport let shadow = false;\nexport let color = 'default';\nexport let customeColor = '';\nconst colors = {\n    default: 'text-gray-500 dark:text-gray-400',\n    blue: 'text-blue-100 dark:text-blue-100',\n    green: 'text-green-100 dark:text-green-100',\n    red: 'text-red-100 dark:text-red-100',\n    yellow: 'text-yellow-100 dark:text-yellow-100',\n    purple: 'text-purple-100 dark:text-purple-100',\n    indigo: 'text-indigo-100 dark:text-indigo-100',\n    pink: 'text-pink-100 dark:text-pink-100',\n    custom: customeColor\n};\n$: setContext('striped', striped);\n$: setContext('hoverable', hoverable);\n$: setContext('noborder', noborder);\n$: setContext('color', color);\n</script>\n\n<div class={twJoin(divClass, shadow && 'shadow-md sm:rounded-lg')}>\n  <table {...$$restProps} class={twMerge('w-full text-left text-sm', colors[color], $$props.class)}>\n    <slot />\n  </table>\n</div>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte.com/)\n## Props\n@prop export let divClass: string = 'relative overflow-x-auto';\n@prop export let striped: boolean = false;\n@prop export let hoverable: boolean = false;\n@prop export let noborder: boolean = false;\n@prop export let shadow: boolean = false;\n@prop export let color: TableColorType = 'default';\n@prop export let customeColor: string = '';\n-->\n","<script>export let tableBodyClass = undefined;\n</script>\n\n<tbody class={tableBodyClass}>\n  <slot />\n</tbody>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte.com/)\n## Props\n@prop export let tableBodyClass: string | undefined = undefined;\n-->\n","<script>import { twMerge } from 'tailwind-merge';\nimport { getContext } from 'svelte';\nexport let tdClass = 'px-6 py-4 whitespace-nowrap font-medium ';\nlet color = 'default';\ncolor = getContext('color');\nlet tdClassfinal;\n$: tdClassfinal = twMerge(tdClass, color === 'default' ? 'text-gray-900 dark:text-white' : 'text-blue-50 whitespace-nowrap dark:text-blue-100', $$props.class);\n</script>\n\n<svelte:element this={$$props.onclick ? 'button' : 'td'} {...$$restProps} class={tdClassfinal} on:click role={$$props.onclick ? 'button' : undefined}>\n  <slot />\n</svelte:element>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte.com/)\n## Props\n@prop export let tdClass: string = 'px-6 py-4 whitespace-nowrap font-medium ';\n-->\n","<script>import { twMerge } from 'tailwind-merge';\nimport { getContext } from 'svelte';\nexport let color = getContext('color');\nconst colors = {\n    default: 'bg-white dark:bg-gray-800 dark:border-gray-700',\n    blue: 'bg-blue-500 border-blue-400',\n    green: 'bg-green-500 border-green-400',\n    red: 'bg-red-500 border-red-400',\n    yellow: 'bg-yellow-500 border-yellow-400',\n    purple: 'bg-purple-500 border-purple-400',\n    custom: ''\n};\nconst hoverColors = {\n    default: 'hover:bg-gray-50 dark:hover:bg-gray-600',\n    blue: 'hover:bg-blue-400',\n    green: 'hover:bg-green-400',\n    red: 'hover:bg-red-400',\n    yellow: 'hover:bg-yellow-400',\n    purple: 'hover:bg-purple-400',\n    custom: ''\n};\nconst stripColors = {\n    default: 'odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700',\n    blue: 'odd:bg-blue-800 even:bg-blue-700 odd:dark:bg-blue-800 even:dark:bg-blue-700',\n    green: 'odd:bg-green-800 even:bg-green-700 odd:dark:bg-green-800 even:dark:bg-green-700',\n    red: 'odd:bg-red-800 even:bg-red-700 odd:dark:bg-red-800 even:dark:bg-red-700',\n    yellow: 'odd:bg-yellow-800 even:bg-yellow-700 odd:dark:bg-yellow-800 even:dark:bg-yellow-700',\n    purple: 'odd:bg-purple-800 even:bg-purple-700 odd:dark:bg-purple-800 even:dark:bg-purple-700',\n    custom: ''\n};\nlet trClass;\n$: trClass = twMerge([!getContext('noborder') && 'border-b last:border-b-0', colors[color], getContext('hoverable') && hoverColors[color], getContext('striped') && stripColors[color], $$props.class]);\n</script>\n\n<tr {...$$restProps} class={trClass} on:click on:contextmenu on:dblclick>\n  <slot />\n</tr>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte.com/)\n## Props\n@prop export let color: 'blue' | 'green' | 'red' | 'yellow' | 'purple' | 'default' | 'custom' = getContext('color');\n-->\n","<script>import { twMerge } from 'tailwind-merge';\nimport { getContext } from 'svelte';\nexport let theadClass = 'text-xs uppercase';\nexport let defaultRow = true;\nlet color;\ncolor = getContext('color');\nlet noborder = getContext('noborder');\nlet striped = getContext('striped');\nlet defaultBgColor = noborder || striped ? '' : 'bg-gray-50 dark:bg-gray-700';\nconst bgColors = {\n    default: defaultBgColor,\n    blue: 'bg-blue-600',\n    green: 'bg-green-600',\n    red: 'bg-red-600',\n    yellow: 'bg-yellow-600',\n    purple: 'bg-purple-600',\n    custom: ''\n};\nlet textColor = color === 'default' ? 'text-gray-700 dark:text-gray-400' : color === 'custom' ? '' : 'text-white  dark:text-white';\nlet borderColors = striped ? '' : color === 'default' ? 'border-gray-700' : color === 'custom' ? '' : `border-${color}-400`;\n$: theadClassfinal = twMerge(theadClass, textColor, striped && borderColors, bgColors[color], $$props.class);\n</script>\n\n<thead {...$$restProps} class={theadClassfinal}>\n  {#if defaultRow}\n    <tr>\n      <slot />\n    </tr>\n  {:else}\n    <slot />\n  {/if}\n</thead>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte.com/)\n## Props\n@prop export let theadClass: string = 'text-xs uppercase';\n@prop export let defaultRow: boolean = true;\n-->\n","<script>import { twMerge } from 'tailwind-merge';\nexport let padding = 'px-6 py-3';\n</script>\n\n<th {...$$restProps} class={twMerge(padding, $$props.class)} on:click on:focus on:keydown on:keypress on:keyup on:mouseenter on:mouseleave on:mouseover>\n  <slot />\n</th>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte.com/)\n## Props\n@prop export let padding: string = 'px-6 py-3';\n-->\n","// src/queryObserver.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { fetchState } from \"./query.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport {\n  isServer,\n  isValidTimeout,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  timeUntilStale\n} from \"./utils.js\";\nvar QueryObserver = class extends Subscribable {\n  constructor(client, options) {\n    super();\n    this.options = options;\n    this.#client = client;\n    this.#selectError = null;\n    this.#currentThenable = pendingThenable();\n    if (!this.options.experimental_prefetchInRender) {\n      this.#currentThenable.reject(\n        new Error(\"experimental_prefetchInRender feature flag is not enabled\")\n      );\n    }\n    this.bindMethods();\n    this.setOptions(options);\n  }\n  #client;\n  #currentQuery = void 0;\n  #currentQueryInitialState = void 0;\n  #currentResult = void 0;\n  #currentResultState;\n  #currentResultOptions;\n  #currentThenable;\n  #selectError;\n  #selectFn;\n  #selectResult;\n  // This property keeps track of the last query with defined data.\n  // It will be used to pass the previous data and query to the placeholder function between renders.\n  #lastQueryWithDefinedData;\n  #staleTimeoutId;\n  #refetchIntervalId;\n  #currentRefetchInterval;\n  #trackedProps = /* @__PURE__ */ new Set();\n  bindMethods() {\n    this.refetch = this.refetch.bind(this);\n  }\n  onSubscribe() {\n    if (this.listeners.size === 1) {\n      this.#currentQuery.addObserver(this);\n      if (shouldFetchOnMount(this.#currentQuery, this.options)) {\n        this.#executeFetch();\n      } else {\n        this.updateResult();\n      }\n      this.#updateTimers();\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.destroy();\n    }\n  }\n  shouldFetchOnReconnect() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnReconnect\n    );\n  }\n  shouldFetchOnWindowFocus() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnWindowFocus\n    );\n  }\n  destroy() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.#clearStaleTimeout();\n    this.#clearRefetchInterval();\n    this.#currentQuery.removeObserver(this);\n  }\n  setOptions(options, notifyOptions) {\n    const prevOptions = this.options;\n    const prevQuery = this.#currentQuery;\n    this.options = this.#client.defaultQueryOptions(options);\n    if (this.options.enabled !== void 0 && typeof this.options.enabled !== \"boolean\" && typeof this.options.enabled !== \"function\" && typeof resolveEnabled(this.options.enabled, this.#currentQuery) !== \"boolean\") {\n      throw new Error(\n        \"Expected enabled to be a boolean or a callback that returns a boolean\"\n      );\n    }\n    this.#updateQuery();\n    this.#currentQuery.setOptions(this.options);\n    if (prevOptions._defaulted && !shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getQueryCache().notify({\n        type: \"observerOptionsUpdated\",\n        query: this.#currentQuery,\n        observer: this\n      });\n    }\n    const mounted = this.hasListeners();\n    if (mounted && shouldFetchOptionally(\n      this.#currentQuery,\n      prevQuery,\n      this.options,\n      prevOptions\n    )) {\n      this.#executeFetch();\n    }\n    this.updateResult(notifyOptions);\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || resolveStaleTime(this.options.staleTime, this.#currentQuery) !== resolveStaleTime(prevOptions.staleTime, this.#currentQuery))) {\n      this.#updateStaleTimeout();\n    }\n    const nextRefetchInterval = this.#computeRefetchInterval();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || nextRefetchInterval !== this.#currentRefetchInterval)) {\n      this.#updateRefetchInterval(nextRefetchInterval);\n    }\n  }\n  getOptimisticResult(options) {\n    const query = this.#client.getQueryCache().build(this.#client, options);\n    const result = this.createResult(query, options);\n    if (shouldAssignObserverCurrentProperties(this, result)) {\n      this.#currentResult = result;\n      this.#currentResultOptions = this.options;\n      this.#currentResultState = this.#currentQuery.state;\n    }\n    return result;\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  trackResult(result, onPropTracked) {\n    const trackedResult = {};\n    Object.keys(result).forEach((key) => {\n      Object.defineProperty(trackedResult, key, {\n        configurable: false,\n        enumerable: true,\n        get: () => {\n          this.trackProp(key);\n          onPropTracked?.(key);\n          return result[key];\n        }\n      });\n    });\n    return trackedResult;\n  }\n  trackProp(key) {\n    this.#trackedProps.add(key);\n  }\n  getCurrentQuery() {\n    return this.#currentQuery;\n  }\n  refetch({ ...options } = {}) {\n    return this.fetch({\n      ...options\n    });\n  }\n  fetchOptimistic(options) {\n    const defaultedOptions = this.#client.defaultQueryOptions(options);\n    const query = this.#client.getQueryCache().build(this.#client, defaultedOptions);\n    return query.fetch().then(() => this.createResult(query, defaultedOptions));\n  }\n  fetch(fetchOptions) {\n    return this.#executeFetch({\n      ...fetchOptions,\n      cancelRefetch: fetchOptions.cancelRefetch ?? true\n    }).then(() => {\n      this.updateResult();\n      return this.#currentResult;\n    });\n  }\n  #executeFetch(fetchOptions) {\n    this.#updateQuery();\n    let promise = this.#currentQuery.fetch(\n      this.options,\n      fetchOptions\n    );\n    if (!fetchOptions?.throwOnError) {\n      promise = promise.catch(noop);\n    }\n    return promise;\n  }\n  #updateStaleTimeout() {\n    this.#clearStaleTimeout();\n    const staleTime = resolveStaleTime(\n      this.options.staleTime,\n      this.#currentQuery\n    );\n    if (isServer || this.#currentResult.isStale || !isValidTimeout(staleTime)) {\n      return;\n    }\n    const time = timeUntilStale(this.#currentResult.dataUpdatedAt, staleTime);\n    const timeout = time + 1;\n    this.#staleTimeoutId = setTimeout(() => {\n      if (!this.#currentResult.isStale) {\n        this.updateResult();\n      }\n    }, timeout);\n  }\n  #computeRefetchInterval() {\n    return (typeof this.options.refetchInterval === \"function\" ? this.options.refetchInterval(this.#currentQuery) : this.options.refetchInterval) ?? false;\n  }\n  #updateRefetchInterval(nextInterval) {\n    this.#clearRefetchInterval();\n    this.#currentRefetchInterval = nextInterval;\n    if (isServer || resolveEnabled(this.options.enabled, this.#currentQuery) === false || !isValidTimeout(this.#currentRefetchInterval) || this.#currentRefetchInterval === 0) {\n      return;\n    }\n    this.#refetchIntervalId = setInterval(() => {\n      if (this.options.refetchIntervalInBackground || focusManager.isFocused()) {\n        this.#executeFetch();\n      }\n    }, this.#currentRefetchInterval);\n  }\n  #updateTimers() {\n    this.#updateStaleTimeout();\n    this.#updateRefetchInterval(this.#computeRefetchInterval());\n  }\n  #clearStaleTimeout() {\n    if (this.#staleTimeoutId) {\n      clearTimeout(this.#staleTimeoutId);\n      this.#staleTimeoutId = void 0;\n    }\n  }\n  #clearRefetchInterval() {\n    if (this.#refetchIntervalId) {\n      clearInterval(this.#refetchIntervalId);\n      this.#refetchIntervalId = void 0;\n    }\n  }\n  createResult(query, options) {\n    const prevQuery = this.#currentQuery;\n    const prevOptions = this.options;\n    const prevResult = this.#currentResult;\n    const prevResultState = this.#currentResultState;\n    const prevResultOptions = this.#currentResultOptions;\n    const queryChange = query !== prevQuery;\n    const queryInitialState = queryChange ? query.state : this.#currentQueryInitialState;\n    const { state } = query;\n    let newState = { ...state };\n    let isPlaceholderData = false;\n    let data;\n    if (options._optimisticResults) {\n      const mounted = this.hasListeners();\n      const fetchOnMount = !mounted && shouldFetchOnMount(query, options);\n      const fetchOptionally = mounted && shouldFetchOptionally(query, prevQuery, options, prevOptions);\n      if (fetchOnMount || fetchOptionally) {\n        newState = {\n          ...newState,\n          ...fetchState(state.data, query.options)\n        };\n      }\n      if (options._optimisticResults === \"isRestoring\") {\n        newState.fetchStatus = \"idle\";\n      }\n    }\n    let { error, errorUpdatedAt, status } = newState;\n    if (options.select && newState.data !== void 0) {\n      if (prevResult && newState.data === prevResultState?.data && options.select === this.#selectFn) {\n        data = this.#selectResult;\n      } else {\n        try {\n          this.#selectFn = options.select;\n          data = options.select(newState.data);\n          data = replaceData(prevResult?.data, data, options);\n          this.#selectResult = data;\n          this.#selectError = null;\n        } catch (selectError) {\n          this.#selectError = selectError;\n        }\n      }\n    } else {\n      data = newState.data;\n    }\n    if (options.placeholderData !== void 0 && data === void 0 && status === \"pending\") {\n      let placeholderData;\n      if (prevResult?.isPlaceholderData && options.placeholderData === prevResultOptions?.placeholderData) {\n        placeholderData = prevResult.data;\n      } else {\n        placeholderData = typeof options.placeholderData === \"function\" ? options.placeholderData(\n          this.#lastQueryWithDefinedData?.state.data,\n          this.#lastQueryWithDefinedData\n        ) : options.placeholderData;\n        if (options.select && placeholderData !== void 0) {\n          try {\n            placeholderData = options.select(placeholderData);\n            this.#selectError = null;\n          } catch (selectError) {\n            this.#selectError = selectError;\n          }\n        }\n      }\n      if (placeholderData !== void 0) {\n        status = \"success\";\n        data = replaceData(\n          prevResult?.data,\n          placeholderData,\n          options\n        );\n        isPlaceholderData = true;\n      }\n    }\n    if (this.#selectError) {\n      error = this.#selectError;\n      data = this.#selectResult;\n      errorUpdatedAt = Date.now();\n      status = \"error\";\n    }\n    const isFetching = newState.fetchStatus === \"fetching\";\n    const isPending = status === \"pending\";\n    const isError = status === \"error\";\n    const isLoading = isPending && isFetching;\n    const hasData = data !== void 0;\n    const result = {\n      status,\n      fetchStatus: newState.fetchStatus,\n      isPending,\n      isSuccess: status === \"success\",\n      isError,\n      isInitialLoading: isLoading,\n      isLoading,\n      data,\n      dataUpdatedAt: newState.dataUpdatedAt,\n      error,\n      errorUpdatedAt,\n      failureCount: newState.fetchFailureCount,\n      failureReason: newState.fetchFailureReason,\n      errorUpdateCount: newState.errorUpdateCount,\n      isFetched: newState.dataUpdateCount > 0 || newState.errorUpdateCount > 0,\n      isFetchedAfterMount: newState.dataUpdateCount > queryInitialState.dataUpdateCount || newState.errorUpdateCount > queryInitialState.errorUpdateCount,\n      isFetching,\n      isRefetching: isFetching && !isPending,\n      isLoadingError: isError && !hasData,\n      isPaused: newState.fetchStatus === \"paused\",\n      isPlaceholderData,\n      isRefetchError: isError && hasData,\n      isStale: isStale(query, options),\n      refetch: this.refetch,\n      promise: this.#currentThenable\n    };\n    const nextResult = result;\n    if (this.options.experimental_prefetchInRender) {\n      const finalizeThenableIfPossible = (thenable) => {\n        if (nextResult.status === \"error\") {\n          thenable.reject(nextResult.error);\n        } else if (nextResult.data !== void 0) {\n          thenable.resolve(nextResult.data);\n        }\n      };\n      const recreateThenable = () => {\n        const pending = this.#currentThenable = nextResult.promise = pendingThenable();\n        finalizeThenableIfPossible(pending);\n      };\n      const prevThenable = this.#currentThenable;\n      switch (prevThenable.status) {\n        case \"pending\":\n          if (query.queryHash === prevQuery.queryHash) {\n            finalizeThenableIfPossible(prevThenable);\n          }\n          break;\n        case \"fulfilled\":\n          if (nextResult.status === \"error\" || nextResult.data !== prevThenable.value) {\n            recreateThenable();\n          }\n          break;\n        case \"rejected\":\n          if (nextResult.status !== \"error\" || nextResult.error !== prevThenable.reason) {\n            recreateThenable();\n          }\n          break;\n      }\n    }\n    return nextResult;\n  }\n  updateResult(notifyOptions) {\n    const prevResult = this.#currentResult;\n    const nextResult = this.createResult(this.#currentQuery, this.options);\n    this.#currentResultState = this.#currentQuery.state;\n    this.#currentResultOptions = this.options;\n    if (this.#currentResultState.data !== void 0) {\n      this.#lastQueryWithDefinedData = this.#currentQuery;\n    }\n    if (shallowEqualObjects(nextResult, prevResult)) {\n      return;\n    }\n    this.#currentResult = nextResult;\n    const defaultNotifyOptions = {};\n    const shouldNotifyListeners = () => {\n      if (!prevResult) {\n        return true;\n      }\n      const { notifyOnChangeProps } = this.options;\n      const notifyOnChangePropsValue = typeof notifyOnChangeProps === \"function\" ? notifyOnChangeProps() : notifyOnChangeProps;\n      if (notifyOnChangePropsValue === \"all\" || !notifyOnChangePropsValue && !this.#trackedProps.size) {\n        return true;\n      }\n      const includedProps = new Set(\n        notifyOnChangePropsValue ?? this.#trackedProps\n      );\n      if (this.options.throwOnError) {\n        includedProps.add(\"error\");\n      }\n      return Object.keys(this.#currentResult).some((key) => {\n        const typedKey = key;\n        const changed = this.#currentResult[typedKey] !== prevResult[typedKey];\n        return changed && includedProps.has(typedKey);\n      });\n    };\n    if (notifyOptions?.listeners !== false && shouldNotifyListeners()) {\n      defaultNotifyOptions.listeners = true;\n    }\n    this.#notify({ ...defaultNotifyOptions, ...notifyOptions });\n  }\n  #updateQuery() {\n    const query = this.#client.getQueryCache().build(this.#client, this.options);\n    if (query === this.#currentQuery) {\n      return;\n    }\n    const prevQuery = this.#currentQuery;\n    this.#currentQuery = query;\n    this.#currentQueryInitialState = query.state;\n    if (this.hasListeners()) {\n      prevQuery?.removeObserver(this);\n      query.addObserver(this);\n    }\n  }\n  onQueryUpdate() {\n    this.updateResult();\n    if (this.hasListeners()) {\n      this.#updateTimers();\n    }\n  }\n  #notify(notifyOptions) {\n    notifyManager.batch(() => {\n      if (notifyOptions.listeners) {\n        this.listeners.forEach((listener) => {\n          listener(this.#currentResult);\n        });\n      }\n      this.#client.getQueryCache().notify({\n        query: this.#currentQuery,\n        type: \"observerResultsUpdated\"\n      });\n    });\n  }\n};\nfunction shouldLoadOnMount(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.state.data === void 0 && !(query.state.status === \"error\" && options.retryOnMount === false);\n}\nfunction shouldFetchOnMount(query, options) {\n  return shouldLoadOnMount(query, options) || query.state.data !== void 0 && shouldFetchOn(query, options, options.refetchOnMount);\n}\nfunction shouldFetchOn(query, options, field) {\n  if (resolveEnabled(options.enabled, query) !== false) {\n    const value = typeof field === \"function\" ? field(query) : field;\n    return value === \"always\" || value !== false && isStale(query, options);\n  }\n  return false;\n}\nfunction shouldFetchOptionally(query, prevQuery, options, prevOptions) {\n  return (query !== prevQuery || resolveEnabled(prevOptions.enabled, query) === false) && (!options.suspense || query.state.status !== \"error\") && isStale(query, options);\n}\nfunction isStale(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.isStaleByTime(resolveStaleTime(options.staleTime, query));\n}\nfunction shouldAssignObserverCurrentProperties(observer, optimisticResult) {\n  if (!shallowEqualObjects(observer.getCurrentResult(), optimisticResult)) {\n    return true;\n  }\n  return false;\n}\nexport {\n  QueryObserver\n};\n//# sourceMappingURL=queryObserver.js.map","import { getIsRestoringContext } from './context.js';\nexport function useIsRestoring() {\n    return getIsRestoringContext();\n}\n","import { getQueryClientContext } from './context.js';\nexport function useQueryClient(queryClient) {\n    if (queryClient)\n        return queryClient;\n    return getQueryClientContext();\n}\n","export function isSvelteStore(obj) {\n    return 'subscribe' in obj && typeof obj.subscribe === 'function';\n}\nexport function noop() { }\n","import { derived, get, readable } from 'svelte/store';\nimport { notifyManager } from '@tanstack/query-core';\nimport { useIsRestoring } from './useIsRestoring.js';\nimport { useQueryClient } from './useQueryClient.js';\nimport { isSvelteStore } from './utils.js';\nexport function createBaseQuery(options, Observer, queryClient) {\n    /** Load query client */\n    const client = useQueryClient(queryClient);\n    const isRestoring = useIsRestoring();\n    /** Converts options to a svelte store if not already a store object */\n    const optionsStore = isSvelteStore(options) ? options : readable(options);\n    /** Creates a store that has the default options applied */\n    const defaultedOptionsStore = derived([optionsStore, isRestoring], ([$optionsStore, $isRestoring]) => {\n        const defaultedOptions = client.defaultQueryOptions($optionsStore);\n        defaultedOptions._optimisticResults = $isRestoring\n            ? 'isRestoring'\n            : 'optimistic';\n        return defaultedOptions;\n    });\n    /** Creates the observer */\n    const observer = new Observer(client, get(defaultedOptionsStore));\n    defaultedOptionsStore.subscribe(($defaultedOptions) => {\n        // Do not notify on updates because of changes in the options because\n        // these changes should already be reflected in the optimistic result.\n        observer.setOptions($defaultedOptions, { listeners: false });\n    });\n    const result = derived(isRestoring, ($isRestoring, set) => {\n        const unsubscribe = $isRestoring\n            ? () => undefined\n            : observer.subscribe(notifyManager.batchCalls(set));\n        observer.updateResult();\n        return unsubscribe;\n    });\n    /** Subscribe to changes in result and defaultedOptionsStore */\n    const { subscribe } = derived([result, defaultedOptionsStore], ([$result, $defaultedOptionsStore]) => {\n        $result = observer.getOptimisticResult($defaultedOptionsStore);\n        return !$defaultedOptionsStore.notifyOnChangeProps\n            ? observer.trackResult($result)\n            : $result;\n    });\n    return { subscribe };\n}\n","import { QueryObserver } from '@tanstack/query-core';\nimport { createBaseQuery } from './createBaseQuery.js';\nexport function createQuery(options, queryClient) {\n    return createBaseQuery(options, QueryObserver, queryClient);\n}\n","<script>import { getContext } from \"svelte\";\nimport { twMerge } from \"tailwind-merge\";\nconst ctx = getContext(\"iconCtx\") ?? {};\nconst sizes = {\n  xs: \"w-3 h-3\",\n  sm: \"w-4 h-4\",\n  md: \"w-5 h-5\",\n  lg: \"w-6 h-6\",\n  xl: \"w-8 h-8\"\n};\nexport let size = ctx.size || \"md\";\nexport let role = ctx.role || \"img\";\nexport let ariaLabel = \"refresh\";\nexport let spin = false;\nexport let testId = \"refresh-button\";\n</script>\n\n<svg\n\tdata-testid={testId}\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\t{...$$restProps}\n\tclass={twMerge(\n\t\t'shrink-0 cursor-pointer outline-none',\n\t\tsizes[size],\n\t\t$$props.class,\n\t\tspin ? 'animate-spin ease-out' : ''\n\t)}\n\t{role}\n\taria-label={ariaLabel}\n\tviewBox=\"0 0 24 24\"\n\ton:click\n\ton:keydown\n\ton:keyup\n\ton:focus\n\ton:blur\n\ton:mouseenter\n\ton:mouseleave\n\ton:mouseover\n\ton:mouseout\n>\n\t<path\n\t\tstroke=\"currentColor\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\tstroke-width=\"2\"\n\t\td=\"M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4\"\n\t/>\n</svg>\n\n<!--\n    @component\n    [Go to docs](https://flowbite-svelte-icons.vercel.app/)\n    ## Props\n    @prop export let size: 'xs' | 'sm' | 'md' | 'lg' | 'xl' = ctx.size || 'md';\n    @prop export let role = ctx.role || 'img';\n    @prop export let ariaLabel = 'refresh';\n    -->\n","import * as chains from 'viem/chains';\nexport function getNetworkName(chainId) {\n    const chain = Object.values(chains).find((chain) => chain.id === chainId);\n    return chain?.name;\n}\nif (import.meta.vitest) {\n    describe('getNetworkName', () => {\n        it('should return the network name for a given chain id', () => {\n            expect(getNetworkName(1)).toBe('Ethereum');\n            expect(getNetworkName(137)).toBe('Polygon');\n        });\n    });\n}\n","export const DEFAULT_PAGE_SIZE = 50;\nexport const DEFAULT_REFRESH_INTERVAL = 10000;\n","<script>import { InputAddon, Button } from \"flowbite-svelte\";\nimport { Float } from \"@rainlanguage/orderbook\";\nexport let symbol = void 0;\nexport let maxValue = void 0;\nexport let value = Float.parse(\"0\").value;\nlet inputValue = \"\";\nfunction handleInput(event) {\n  const input = event.target;\n  inputValue = input.value;\n  if (inputValue === \"\") {\n    value = Float.parse(\"0\").value;\n  } else {\n    let parsedValue = Float.parse(inputValue);\n    if (parsedValue.error) {\n      value = Float.parse(\"0\").value;\n      return;\n    }\n    value = parsedValue.value;\n  }\n}\nfunction fillMaxValue() {\n  if (!maxValue) return;\n  value = maxValue;\n  let formattedValue = value.format().value;\n  if (!formattedValue) {\n    inputValue = \"\";\n    return;\n  }\n  inputValue = formattedValue;\n}\n</script>\n\n<div class=\"w-full\">\n\t<div class=\"flex w-full\">\n\t\t<div class=\"relative flex w-full\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass={`focus:border-primary-500 focus:ring-primary-500 dark:focus:border-primary-500 dark:focus:ring-primary-500 block w-full rounded-lg border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 disabled:cursor-not-allowed disabled:opacity-50 rtl:text-right dark:border-gray-500 dark:bg-gray-600 dark:text-white dark:placeholder-gray-400 ${symbol && '!rounded-none !rounded-l-lg'}`}\n\t\t\t\tbind:value={inputValue}\n\t\t\t\ton:input={handleInput}\n\t\t\t/>\n\n\t\t\t{#if maxValue}\n\t\t\t\t<div class=\"absolute right-2 flex h-10 flex-col justify-center\">\n\t\t\t\t\t<Button color=\"blue\" class=\"px-2 py-1\" size=\"xs\" pill on:click={fillMaxValue}>MAX</Button>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t{#if symbol}\n\t\t\t<InputAddon>\n\t\t\t\t<span class=\"whitespace-nowrap\">\n\t\t\t\t\t{symbol}\n\t\t\t\t</span>\n\t\t\t</InputAddon>\n\t\t{/if}\n\t</div>\n</div>\n","export const AddressZero = \"0x0000000000000000000000000000000000000000\";\n//# sourceMappingURL=addresses.js.map","export const HashZero = \"0x0000000000000000000000000000000000000000000000000000000000000000\";\n//# sourceMappingURL=hashes.js.map","import { keccak256 } from \"@ethersproject/keccak256\";\nimport { toUtf8Bytes } from \"@ethersproject/strings\";\nexport function id(text) {\n    return keccak256(toUtf8Bytes(text));\n}\n//# sourceMappingURL=id.js.map","export const version = \"hash/5.7.0\";\n//# sourceMappingURL=_version.js.map","\"use strict\";\nimport { arrayify } from \"@ethersproject/bytes\";\nexport function decode(textData) {\n    textData = atob(textData);\n    const data = [];\n    for (let i = 0; i < textData.length; i++) {\n        data.push(textData.charCodeAt(i));\n    }\n    return arrayify(data);\n}\nexport function encode(data) {\n    data = arrayify(data);\n    let textData = \"\";\n    for (let i = 0; i < data.length; i++) {\n        textData += String.fromCharCode(data[i]);\n    }\n    return btoa(textData);\n}\n//# sourceMappingURL=base64.js.map","/**\n * MIT License\n *\n * Copyright (c) 2021 Andrew Raffensperger\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n * This is a near carbon-copy of the original source (link below) with the\n * TypeScript typings added and a few tweaks to make it ES3-compatible.\n *\n * See: https://github.com/adraffy/ens-normalize.js\n */\n// https://github.com/behnammodi/polyfill/blob/master/array.polyfill.js\nfunction flat(array, depth) {\n    if (depth == null) {\n        depth = 1;\n    }\n    const result = [];\n    const forEach = result.forEach;\n    const flatDeep = function (arr, depth) {\n        forEach.call(arr, function (val) {\n            if (depth > 0 && Array.isArray(val)) {\n                flatDeep(val, depth - 1);\n            }\n            else {\n                result.push(val);\n            }\n        });\n    };\n    flatDeep(array, depth);\n    return result;\n}\nfunction fromEntries(array) {\n    const result = {};\n    for (let i = 0; i < array.length; i++) {\n        const value = array[i];\n        result[value[0]] = value[1];\n    }\n    return result;\n}\nexport function decode_arithmetic(bytes) {\n    let pos = 0;\n    function u16() { return (bytes[pos++] << 8) | bytes[pos++]; }\n    // decode the frequency table\n    let symbol_count = u16();\n    let total = 1;\n    let acc = [0, 1]; // first symbol has frequency 1\n    for (let i = 1; i < symbol_count; i++) {\n        acc.push(total += u16());\n    }\n    // skip the sized-payload that the last 3 symbols index into\n    let skip = u16();\n    let pos_payload = pos;\n    pos += skip;\n    let read_width = 0;\n    let read_buffer = 0;\n    function read_bit() {\n        if (read_width == 0) {\n            // this will read beyond end of buffer\n            // but (undefined|0) => zero pad\n            read_buffer = (read_buffer << 8) | bytes[pos++];\n            read_width = 8;\n        }\n        return (read_buffer >> --read_width) & 1;\n    }\n    const N = 31;\n    const FULL = Math.pow(2, N);\n    const HALF = FULL >>> 1;\n    const QRTR = HALF >> 1;\n    const MASK = FULL - 1;\n    // fill register\n    let register = 0;\n    for (let i = 0; i < N; i++)\n        register = (register << 1) | read_bit();\n    let symbols = [];\n    let low = 0;\n    let range = FULL; // treat like a float\n    while (true) {\n        let value = Math.floor((((register - low + 1) * total) - 1) / range);\n        let start = 0;\n        let end = symbol_count;\n        while (end - start > 1) { // binary search\n            let mid = (start + end) >>> 1;\n            if (value < acc[mid]) {\n                end = mid;\n            }\n            else {\n                start = mid;\n            }\n        }\n        if (start == 0)\n            break; // first symbol is end mark\n        symbols.push(start);\n        let a = low + Math.floor(range * acc[start] / total);\n        let b = low + Math.floor(range * acc[start + 1] / total) - 1;\n        while (((a ^ b) & HALF) == 0) {\n            register = (register << 1) & MASK | read_bit();\n            a = (a << 1) & MASK;\n            b = (b << 1) & MASK | 1;\n        }\n        while (a & ~b & QRTR) {\n            register = (register & HALF) | ((register << 1) & (MASK >>> 1)) | read_bit();\n            a = (a << 1) ^ HALF;\n            b = ((b ^ HALF) << 1) | HALF | 1;\n        }\n        low = a;\n        range = 1 + b - a;\n    }\n    let offset = symbol_count - 4;\n    return symbols.map(x => {\n        switch (x - offset) {\n            case 3: return offset + 0x10100 + ((bytes[pos_payload++] << 16) | (bytes[pos_payload++] << 8) | bytes[pos_payload++]);\n            case 2: return offset + 0x100 + ((bytes[pos_payload++] << 8) | bytes[pos_payload++]);\n            case 1: return offset + bytes[pos_payload++];\n            default: return x - 1;\n        }\n    });\n}\n// returns an iterator which returns the next symbol\nexport function read_payload(v) {\n    let pos = 0;\n    return () => v[pos++];\n}\nexport function read_compressed_payload(bytes) {\n    return read_payload(decode_arithmetic(bytes));\n}\n// eg. [0,1,2,3...] => [0,-1,1,-2,...]\nexport function signed(i) {\n    return (i & 1) ? (~i >> 1) : (i >> 1);\n}\nfunction read_counts(n, next) {\n    let v = Array(n);\n    for (let i = 0; i < n; i++)\n        v[i] = 1 + next();\n    return v;\n}\nfunction read_ascending(n, next) {\n    let v = Array(n);\n    for (let i = 0, x = -1; i < n; i++)\n        v[i] = x += 1 + next();\n    return v;\n}\nfunction read_deltas(n, next) {\n    let v = Array(n);\n    for (let i = 0, x = 0; i < n; i++)\n        v[i] = x += signed(next());\n    return v;\n}\nexport function read_member_array(next, lookup) {\n    let v = read_ascending(next(), next);\n    let n = next();\n    let vX = read_ascending(n, next);\n    let vN = read_counts(n, next);\n    for (let i = 0; i < n; i++) {\n        for (let j = 0; j < vN[i]; j++) {\n            v.push(vX[i] + j);\n        }\n    }\n    return lookup ? v.map(x => lookup[x]) : v;\n}\n// returns array of \n// [x, ys] => single replacement rule\n// [x, ys, n, dx, dx] => linear map\nexport function read_mapped_map(next) {\n    let ret = [];\n    while (true) {\n        let w = next();\n        if (w == 0)\n            break;\n        ret.push(read_linear_table(w, next));\n    }\n    while (true) {\n        let w = next() - 1;\n        if (w < 0)\n            break;\n        ret.push(read_replacement_table(w, next));\n    }\n    return fromEntries(flat(ret));\n}\nexport function read_zero_terminated_array(next) {\n    let v = [];\n    while (true) {\n        let i = next();\n        if (i == 0)\n            break;\n        v.push(i);\n    }\n    return v;\n}\nfunction read_transposed(n, w, next) {\n    let m = Array(n).fill(undefined).map(() => []);\n    for (let i = 0; i < w; i++) {\n        read_deltas(n, next).forEach((x, j) => m[j].push(x));\n    }\n    return m;\n}\nfunction read_linear_table(w, next) {\n    let dx = 1 + next();\n    let dy = next();\n    let vN = read_zero_terminated_array(next);\n    let m = read_transposed(vN.length, 1 + w, next);\n    return flat(m.map((v, i) => {\n        const x = v[0], ys = v.slice(1);\n        //let [x, ...ys] = v;\n        //return Array(vN[i]).fill().map((_, j) => {\n        return Array(vN[i]).fill(undefined).map((_, j) => {\n            let j_dy = j * dy;\n            return [x + j * dx, ys.map(y => y + j_dy)];\n        });\n    }));\n}\nfunction read_replacement_table(w, next) {\n    let n = 1 + next();\n    let m = read_transposed(n, 1 + w, next);\n    return m.map(v => [v[0], v.slice(1)]);\n}\nexport function read_emoji_trie(next) {\n    let sorted = read_member_array(next).sort((a, b) => a - b);\n    return read();\n    function read() {\n        let branches = [];\n        while (true) {\n            let keys = read_member_array(next, sorted);\n            if (keys.length == 0)\n                break;\n            branches.push({ set: new Set(keys), node: read() });\n        }\n        branches.sort((a, b) => b.set.size - a.set.size); // sort by likelihood\n        let temp = next();\n        let valid = temp % 3;\n        temp = (temp / 3) | 0;\n        let fe0f = !!(temp & 1);\n        temp >>= 1;\n        let save = temp == 1;\n        let check = temp == 2;\n        return { branches, valid, fe0f, save, check };\n    }\n}\n//# sourceMappingURL=decoder.js.map","/**\n * MIT License\n *\n * Copyright (c) 2021 Andrew Raffensperger\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n * This is a near carbon-copy of the original source (link below) with the\n * TypeScript typings added and a few tweaks to make it ES3-compatible.\n *\n * See: https://github.com/adraffy/ens-normalize.js\n */\nimport { decode } from \"@ethersproject/base64\";\nimport { read_compressed_payload } from './decoder.js';\nexport function getData() {\n    return read_compressed_payload(decode('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'));\n}\n//# sourceMappingURL=include.js.map","/**\n * MIT License\n *\n * Copyright (c) 2021 Andrew Raffensperger\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n * This is a near carbon-copy of the original source (link below) with the\n * TypeScript typings added and a few tweaks to make it ES3-compatible.\n *\n * See: https://github.com/adraffy/ens-normalize.js\n */\nimport { toUtf8CodePoints } from \"@ethersproject/strings\";\nimport { getData } from './include.js';\nconst r = getData();\nimport { read_member_array, read_mapped_map, read_emoji_trie } from './decoder.js';\n// @TODO: This should be lazily loaded\nconst VALID = new Set(read_member_array(r));\nconst IGNORED = new Set(read_member_array(r));\nconst MAPPED = read_mapped_map(r);\nconst EMOJI_ROOT = read_emoji_trie(r);\n//const NFC_CHECK = new Set(read_member_array(r, Array.from(VALID.values()).sort((a, b) => a - b)));\n//const STOP = 0x2E;\nconst HYPHEN = 0x2D;\nconst UNDERSCORE = 0x5F;\nfunction explode_cp(name) {\n    return toUtf8CodePoints(name);\n}\nfunction filter_fe0f(cps) {\n    return cps.filter(cp => cp != 0xFE0F);\n}\nexport function ens_normalize_post_check(name) {\n    for (let label of name.split('.')) {\n        let cps = explode_cp(label);\n        try {\n            for (let i = cps.lastIndexOf(UNDERSCORE) - 1; i >= 0; i--) {\n                if (cps[i] !== UNDERSCORE) {\n                    throw new Error(`underscore only allowed at start`);\n                }\n            }\n            if (cps.length >= 4 && cps.every(cp => cp < 0x80) && cps[2] === HYPHEN && cps[3] === HYPHEN) {\n                throw new Error(`invalid label extension`);\n            }\n        }\n        catch (err) {\n            throw new Error(`Invalid label \"${label}\": ${err.message}`);\n        }\n    }\n    return name;\n}\nexport function ens_normalize(name) {\n    return ens_normalize_post_check(normalize(name, filter_fe0f));\n}\nfunction normalize(name, emoji_filter) {\n    let input = explode_cp(name).reverse(); // flip for pop\n    let output = [];\n    while (input.length) {\n        let emoji = consume_emoji_reversed(input);\n        if (emoji) {\n            output.push(...emoji_filter(emoji));\n            continue;\n        }\n        let cp = input.pop();\n        if (VALID.has(cp)) {\n            output.push(cp);\n            continue;\n        }\n        if (IGNORED.has(cp)) {\n            continue;\n        }\n        let cps = MAPPED[cp];\n        if (cps) {\n            output.push(...cps);\n            continue;\n        }\n        throw new Error(`Disallowed codepoint: 0x${cp.toString(16).toUpperCase()}`);\n    }\n    return ens_normalize_post_check(nfc(String.fromCodePoint(...output)));\n}\nfunction nfc(s) {\n    return s.normalize('NFC');\n}\nfunction consume_emoji_reversed(cps, eaten) {\n    var _a;\n    let node = EMOJI_ROOT;\n    let emoji;\n    let saved;\n    let stack = [];\n    let pos = cps.length;\n    if (eaten)\n        eaten.length = 0; // clear input buffer (if needed)\n    while (pos) {\n        let cp = cps[--pos];\n        node = (_a = node.branches.find(x => x.set.has(cp))) === null || _a === void 0 ? void 0 : _a.node;\n        if (!node)\n            break;\n        if (node.save) { // remember\n            saved = cp;\n        }\n        else if (node.check) { // check exclusion\n            if (cp === saved)\n                break;\n        }\n        stack.push(cp);\n        if (node.fe0f) {\n            stack.push(0xFE0F);\n            if (pos > 0 && cps[pos - 1] == 0xFE0F)\n                pos--; // consume optional FE0F\n        }\n        if (node.valid) { // this is a valid emoji (so far)\n            emoji = stack.slice(); // copy stack\n            if (node.valid == 2)\n                emoji.splice(1, 1); // delete FE0F at position 1 (RGI ZWJ don't follow spec!)\n            if (eaten)\n                eaten.push(...cps.slice(pos).reverse()); // copy input (if needed)\n            cps.length = pos; // truncate\n        }\n    }\n    return emoji;\n}\n//# sourceMappingURL=lib.js.map","import { concat, hexlify } from \"@ethersproject/bytes\";\nimport { toUtf8Bytes, toUtf8String } from \"@ethersproject/strings\";\nimport { keccak256 } from \"@ethersproject/keccak256\";\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nconst logger = new Logger(version);\nimport { ens_normalize } from \"./ens-normalize/lib\";\nconst Zeros = new Uint8Array(32);\nZeros.fill(0);\nfunction checkComponent(comp) {\n    if (comp.length === 0) {\n        throw new Error(\"invalid ENS name; empty component\");\n    }\n    return comp;\n}\nfunction ensNameSplit(name) {\n    const bytes = toUtf8Bytes(ens_normalize(name));\n    const comps = [];\n    if (name.length === 0) {\n        return comps;\n    }\n    let last = 0;\n    for (let i = 0; i < bytes.length; i++) {\n        const d = bytes[i];\n        // A separator (i.e. \".\"); copy this component\n        if (d === 0x2e) {\n            comps.push(checkComponent(bytes.slice(last, i)));\n            last = i + 1;\n        }\n    }\n    // There was a stray separator at the end of the name\n    if (last >= bytes.length) {\n        throw new Error(\"invalid ENS name; empty component\");\n    }\n    comps.push(checkComponent(bytes.slice(last)));\n    return comps;\n}\nexport function ensNormalize(name) {\n    return ensNameSplit(name).map((comp) => toUtf8String(comp)).join(\".\");\n}\nexport function isValidName(name) {\n    try {\n        return (ensNameSplit(name).length !== 0);\n    }\n    catch (error) { }\n    return false;\n}\nexport function namehash(name) {\n    /* istanbul ignore if */\n    if (typeof (name) !== \"string\") {\n        logger.throwArgumentError(\"invalid ENS name; not a string\", \"name\", name);\n    }\n    let result = Zeros;\n    const comps = ensNameSplit(name);\n    while (comps.length) {\n        result = keccak256(concat([result, keccak256(comps.pop())]));\n    }\n    return hexlify(result);\n}\nexport function dnsEncode(name) {\n    return hexlify(concat(ensNameSplit(name).map((comp) => {\n        // DNS does not allow components over 63 bytes in length\n        if (comp.length > 63) {\n            throw new Error(\"invalid DNS encoded entry; length exceeds 63 bytes\");\n        }\n        const bytes = new Uint8Array(comp.length + 1);\n        bytes.set(comp, 1);\n        bytes[0] = bytes.length - 1;\n        return bytes;\n    }))) + \"00\";\n}\n//# sourceMappingURL=namehash.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { getAddress } from \"@ethersproject/address\";\nimport { BigNumber } from \"@ethersproject/bignumber\";\nimport { arrayify, hexConcat, hexlify, hexZeroPad, isHexString } from \"@ethersproject/bytes\";\nimport { keccak256 } from \"@ethersproject/keccak256\";\nimport { deepCopy, defineReadOnly, shallowCopy } from \"@ethersproject/properties\";\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nconst logger = new Logger(version);\nimport { id } from \"./id\";\nconst padding = new Uint8Array(32);\npadding.fill(0);\nconst NegativeOne = BigNumber.from(-1);\nconst Zero = BigNumber.from(0);\nconst One = BigNumber.from(1);\nconst MaxUint256 = BigNumber.from(\"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\");\nfunction hexPadRight(value) {\n    const bytes = arrayify(value);\n    const padOffset = bytes.length % 32;\n    if (padOffset) {\n        return hexConcat([bytes, padding.slice(padOffset)]);\n    }\n    return hexlify(bytes);\n}\nconst hexTrue = hexZeroPad(One.toHexString(), 32);\nconst hexFalse = hexZeroPad(Zero.toHexString(), 32);\nconst domainFieldTypes = {\n    name: \"string\",\n    version: \"string\",\n    chainId: \"uint256\",\n    verifyingContract: \"address\",\n    salt: \"bytes32\"\n};\nconst domainFieldNames = [\n    \"name\", \"version\", \"chainId\", \"verifyingContract\", \"salt\"\n];\nfunction checkString(key) {\n    return function (value) {\n        if (typeof (value) !== \"string\") {\n            logger.throwArgumentError(`invalid domain value for ${JSON.stringify(key)}`, `domain.${key}`, value);\n        }\n        return value;\n    };\n}\nconst domainChecks = {\n    name: checkString(\"name\"),\n    version: checkString(\"version\"),\n    chainId: function (value) {\n        try {\n            return BigNumber.from(value).toString();\n        }\n        catch (error) { }\n        return logger.throwArgumentError(`invalid domain value for \"chainId\"`, \"domain.chainId\", value);\n    },\n    verifyingContract: function (value) {\n        try {\n            return getAddress(value).toLowerCase();\n        }\n        catch (error) { }\n        return logger.throwArgumentError(`invalid domain value \"verifyingContract\"`, \"domain.verifyingContract\", value);\n    },\n    salt: function (value) {\n        try {\n            const bytes = arrayify(value);\n            if (bytes.length !== 32) {\n                throw new Error(\"bad length\");\n            }\n            return hexlify(bytes);\n        }\n        catch (error) { }\n        return logger.throwArgumentError(`invalid domain value \"salt\"`, \"domain.salt\", value);\n    }\n};\nfunction getBaseEncoder(type) {\n    // intXX and uintXX\n    {\n        const match = type.match(/^(u?)int(\\d*)$/);\n        if (match) {\n            const signed = (match[1] === \"\");\n            const width = parseInt(match[2] || \"256\");\n            if (width % 8 !== 0 || width > 256 || (match[2] && match[2] !== String(width))) {\n                logger.throwArgumentError(\"invalid numeric width\", \"type\", type);\n            }\n            const boundsUpper = MaxUint256.mask(signed ? (width - 1) : width);\n            const boundsLower = signed ? boundsUpper.add(One).mul(NegativeOne) : Zero;\n            return function (value) {\n                const v = BigNumber.from(value);\n                if (v.lt(boundsLower) || v.gt(boundsUpper)) {\n                    logger.throwArgumentError(`value out-of-bounds for ${type}`, \"value\", value);\n                }\n                return hexZeroPad(v.toTwos(256).toHexString(), 32);\n            };\n        }\n    }\n    // bytesXX\n    {\n        const match = type.match(/^bytes(\\d+)$/);\n        if (match) {\n            const width = parseInt(match[1]);\n            if (width === 0 || width > 32 || match[1] !== String(width)) {\n                logger.throwArgumentError(\"invalid bytes width\", \"type\", type);\n            }\n            return function (value) {\n                const bytes = arrayify(value);\n                if (bytes.length !== width) {\n                    logger.throwArgumentError(`invalid length for ${type}`, \"value\", value);\n                }\n                return hexPadRight(value);\n            };\n        }\n    }\n    switch (type) {\n        case \"address\": return function (value) {\n            return hexZeroPad(getAddress(value), 32);\n        };\n        case \"bool\": return function (value) {\n            return ((!value) ? hexFalse : hexTrue);\n        };\n        case \"bytes\": return function (value) {\n            return keccak256(value);\n        };\n        case \"string\": return function (value) {\n            return id(value);\n        };\n    }\n    return null;\n}\nfunction encodeType(name, fields) {\n    return `${name}(${fields.map(({ name, type }) => (type + \" \" + name)).join(\",\")})`;\n}\nexport class TypedDataEncoder {\n    constructor(types) {\n        defineReadOnly(this, \"types\", Object.freeze(deepCopy(types)));\n        defineReadOnly(this, \"_encoderCache\", {});\n        defineReadOnly(this, \"_types\", {});\n        // Link struct types to their direct child structs\n        const links = {};\n        // Link structs to structs which contain them as a child\n        const parents = {};\n        // Link all subtypes within a given struct\n        const subtypes = {};\n        Object.keys(types).forEach((type) => {\n            links[type] = {};\n            parents[type] = [];\n            subtypes[type] = {};\n        });\n        for (const name in types) {\n            const uniqueNames = {};\n            types[name].forEach((field) => {\n                // Check each field has a unique name\n                if (uniqueNames[field.name]) {\n                    logger.throwArgumentError(`duplicate variable name ${JSON.stringify(field.name)} in ${JSON.stringify(name)}`, \"types\", types);\n                }\n                uniqueNames[field.name] = true;\n                // Get the base type (drop any array specifiers)\n                const baseType = field.type.match(/^([^\\x5b]*)(\\x5b|$)/)[1];\n                if (baseType === name) {\n                    logger.throwArgumentError(`circular type reference to ${JSON.stringify(baseType)}`, \"types\", types);\n                }\n                // Is this a base encoding type?\n                const encoder = getBaseEncoder(baseType);\n                if (encoder) {\n                    return;\n                }\n                if (!parents[baseType]) {\n                    logger.throwArgumentError(`unknown type ${JSON.stringify(baseType)}`, \"types\", types);\n                }\n                // Add linkage\n                parents[baseType].push(name);\n                links[name][baseType] = true;\n            });\n        }\n        // Deduce the primary type\n        const primaryTypes = Object.keys(parents).filter((n) => (parents[n].length === 0));\n        if (primaryTypes.length === 0) {\n            logger.throwArgumentError(\"missing primary type\", \"types\", types);\n        }\n        else if (primaryTypes.length > 1) {\n            logger.throwArgumentError(`ambiguous primary types or unused types: ${primaryTypes.map((t) => (JSON.stringify(t))).join(\", \")}`, \"types\", types);\n        }\n        defineReadOnly(this, \"primaryType\", primaryTypes[0]);\n        // Check for circular type references\n        function checkCircular(type, found) {\n            if (found[type]) {\n                logger.throwArgumentError(`circular type reference to ${JSON.stringify(type)}`, \"types\", types);\n            }\n            found[type] = true;\n            Object.keys(links[type]).forEach((child) => {\n                if (!parents[child]) {\n                    return;\n                }\n                // Recursively check children\n                checkCircular(child, found);\n                // Mark all ancestors as having this decendant\n                Object.keys(found).forEach((subtype) => {\n                    subtypes[subtype][child] = true;\n                });\n            });\n            delete found[type];\n        }\n        checkCircular(this.primaryType, {});\n        // Compute each fully describe type\n        for (const name in subtypes) {\n            const st = Object.keys(subtypes[name]);\n            st.sort();\n            this._types[name] = encodeType(name, types[name]) + st.map((t) => encodeType(t, types[t])).join(\"\");\n        }\n    }\n    getEncoder(type) {\n        let encoder = this._encoderCache[type];\n        if (!encoder) {\n            encoder = this._encoderCache[type] = this._getEncoder(type);\n        }\n        return encoder;\n    }\n    _getEncoder(type) {\n        // Basic encoder type (address, bool, uint256, etc)\n        {\n            const encoder = getBaseEncoder(type);\n            if (encoder) {\n                return encoder;\n            }\n        }\n        // Array\n        const match = type.match(/^(.*)(\\x5b(\\d*)\\x5d)$/);\n        if (match) {\n            const subtype = match[1];\n            const subEncoder = this.getEncoder(subtype);\n            const length = parseInt(match[3]);\n            return (value) => {\n                if (length >= 0 && value.length !== length) {\n                    logger.throwArgumentError(\"array length mismatch; expected length ${ arrayLength }\", \"value\", value);\n                }\n                let result = value.map(subEncoder);\n                if (this._types[subtype]) {\n                    result = result.map(keccak256);\n                }\n                return keccak256(hexConcat(result));\n            };\n        }\n        // Struct\n        const fields = this.types[type];\n        if (fields) {\n            const encodedType = id(this._types[type]);\n            return (value) => {\n                const values = fields.map(({ name, type }) => {\n                    const result = this.getEncoder(type)(value[name]);\n                    if (this._types[type]) {\n                        return keccak256(result);\n                    }\n                    return result;\n                });\n                values.unshift(encodedType);\n                return hexConcat(values);\n            };\n        }\n        return logger.throwArgumentError(`unknown type: ${type}`, \"type\", type);\n    }\n    encodeType(name) {\n        const result = this._types[name];\n        if (!result) {\n            logger.throwArgumentError(`unknown type: ${JSON.stringify(name)}`, \"name\", name);\n        }\n        return result;\n    }\n    encodeData(type, value) {\n        return this.getEncoder(type)(value);\n    }\n    hashStruct(name, value) {\n        return keccak256(this.encodeData(name, value));\n    }\n    encode(value) {\n        return this.encodeData(this.primaryType, value);\n    }\n    hash(value) {\n        return this.hashStruct(this.primaryType, value);\n    }\n    _visit(type, value, callback) {\n        // Basic encoder type (address, bool, uint256, etc)\n        {\n            const encoder = getBaseEncoder(type);\n            if (encoder) {\n                return callback(type, value);\n            }\n        }\n        // Array\n        const match = type.match(/^(.*)(\\x5b(\\d*)\\x5d)$/);\n        if (match) {\n            const subtype = match[1];\n            const length = parseInt(match[3]);\n            if (length >= 0 && value.length !== length) {\n                logger.throwArgumentError(\"array length mismatch; expected length ${ arrayLength }\", \"value\", value);\n            }\n            return value.map((v) => this._visit(subtype, v, callback));\n        }\n        // Struct\n        const fields = this.types[type];\n        if (fields) {\n            return fields.reduce((accum, { name, type }) => {\n                accum[name] = this._visit(type, value[name], callback);\n                return accum;\n            }, {});\n        }\n        return logger.throwArgumentError(`unknown type: ${type}`, \"type\", type);\n    }\n    visit(value, callback) {\n        return this._visit(this.primaryType, value, callback);\n    }\n    static from(types) {\n        return new TypedDataEncoder(types);\n    }\n    static getPrimaryType(types) {\n        return TypedDataEncoder.from(types).primaryType;\n    }\n    static hashStruct(name, types, value) {\n        return TypedDataEncoder.from(types).hashStruct(name, value);\n    }\n    static hashDomain(domain) {\n        const domainFields = [];\n        for (const name in domain) {\n            const type = domainFieldTypes[name];\n            if (!type) {\n                logger.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(name)}`, \"domain\", domain);\n            }\n            domainFields.push({ name, type });\n        }\n        domainFields.sort((a, b) => {\n            return domainFieldNames.indexOf(a.name) - domainFieldNames.indexOf(b.name);\n        });\n        return TypedDataEncoder.hashStruct(\"EIP712Domain\", { EIP712Domain: domainFields }, domain);\n    }\n    static encode(domain, types, value) {\n        return hexConcat([\n            \"0x1901\",\n            TypedDataEncoder.hashDomain(domain),\n            TypedDataEncoder.from(types).hash(value)\n        ]);\n    }\n    static hash(domain, types, value) {\n        return keccak256(TypedDataEncoder.encode(domain, types, value));\n    }\n    // Replaces all address types with ENS names with their looked up address\n    static resolveNames(domain, types, value, resolveName) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Make a copy to isolate it from the object passed in\n            domain = shallowCopy(domain);\n            // Look up all ENS names\n            const ensCache = {};\n            // Do we need to look up the domain's verifyingContract?\n            if (domain.verifyingContract && !isHexString(domain.verifyingContract, 20)) {\n                ensCache[domain.verifyingContract] = \"0x\";\n            }\n            // We are going to use the encoder to visit all the base values\n            const encoder = TypedDataEncoder.from(types);\n            // Get a list of all the addresses\n            encoder.visit(value, (type, value) => {\n                if (type === \"address\" && !isHexString(value, 20)) {\n                    ensCache[value] = \"0x\";\n                }\n                return value;\n            });\n            // Lookup each name\n            for (const name in ensCache) {\n                ensCache[name] = yield resolveName(name);\n            }\n            // Replace the domain verifyingContract if needed\n            if (domain.verifyingContract && ensCache[domain.verifyingContract]) {\n                domain.verifyingContract = ensCache[domain.verifyingContract];\n            }\n            // Replace all ENS names with their address\n            value = encoder.visit(value, (type, value) => {\n                if (type === \"address\" && ensCache[value]) {\n                    return ensCache[value];\n                }\n                return value;\n            });\n            return { domain, value };\n        });\n    }\n    static getPayload(domain, types, value) {\n        // Validate the domain fields\n        TypedDataEncoder.hashDomain(domain);\n        // Derive the EIP712Domain Struct reference type\n        const domainValues = {};\n        const domainTypes = [];\n        domainFieldNames.forEach((name) => {\n            const value = domain[name];\n            if (value == null) {\n                return;\n            }\n            domainValues[name] = domainChecks[name](value);\n            domainTypes.push({ name, type: domainFieldTypes[name] });\n        });\n        const encoder = TypedDataEncoder.from(types);\n        const typesWithDomain = shallowCopy(types);\n        if (typesWithDomain.EIP712Domain) {\n            logger.throwArgumentError(\"types must not contain EIP712Domain type\", \"types.EIP712Domain\", types);\n        }\n        else {\n            typesWithDomain.EIP712Domain = domainTypes;\n        }\n        // Validate the data structures and types\n        encoder.encode(value);\n        return {\n            types: typesWithDomain,\n            domain: domainValues,\n            primaryType: encoder.primaryType,\n            message: encoder.visit(value, (type, value) => {\n                // bytes\n                if (type.match(/^bytes(\\d*)/)) {\n                    return hexlify(arrayify(value));\n                }\n                // uint or int\n                if (type.match(/^u?int/)) {\n                    return BigNumber.from(value).toString();\n                }\n                switch (type) {\n                    case \"address\":\n                        return value.toLowerCase();\n                    case \"bool\":\n                        return !!value;\n                    case \"string\":\n                        if (typeof (value) !== \"string\") {\n                            logger.throwArgumentError(`invalid string`, \"value\", value);\n                        }\n                        return value;\n                }\n                return logger.throwArgumentError(\"unsupported type\", \"type\", type);\n            })\n        };\n    }\n}\n//# sourceMappingURL=typed-data.js.map","import { get } from 'svelte/store';\nimport { invoke } from '@tauri-apps/api';\nimport { ledgerWalletDerivationIndex } from '$lib/stores/wallets';\nimport { walletConnectNetwork } from '$lib/stores/walletconnect';\nimport type { Float, RaindexClient, RaindexVault } from '@rainlanguage/orderbook';\n\nexport async function vaultDeposit(\n  raindexClient: RaindexClient,\n  vault: RaindexVault,\n  amount: Float,\n) {\n  const chainId = get(walletConnectNetwork);\n  const network = raindexClient.getNetworkByChainId(chainId);\n  if (network.error) {\n    throw new Error(network.error.readableMsg);\n  }\n\n  await invoke('vault_deposit', {\n    depositArgs: {\n      vault_id: vault.vaultId.toString(),\n      token: vault.token.address,\n      amount: amount.toString(),\n    },\n    transactionArgs: {\n      rpcs: network.value.rpcs,\n      orderbook_address: vault.orderbook,\n      derivation_index: get(ledgerWalletDerivationIndex),\n      chain_id: chainId,\n    },\n  });\n}\n\nexport async function vaultWithdraw(\n  raindexClient: RaindexClient,\n  vault: RaindexVault,\n  targetAmount: Float,\n) {\n  const chainId = get(walletConnectNetwork);\n  const network = raindexClient.getNetworkByChainId(chainId);\n  if (network.error) {\n    throw new Error(network.error.readableMsg);\n  }\n\n  await invoke('vault_withdraw', {\n    chainId,\n    withdrawArgs: {\n      vault_id: vault.vaultId.toString(),\n      token: vault.token.address,\n      target_amount: targetAmount.toString(),\n    },\n    transactionArgs: {\n      rpcs: network.value.rpcs,\n      orderbook_address: vault.orderbook,\n      derivation_index: get(ledgerWalletDerivationIndex),\n      chain_id: chainId,\n    },\n  });\n}\n\nexport async function vaultDepositCalldata(vaultId: bigint, token: string, amount: Float) {\n  return await invoke('vault_deposit_calldata', {\n    depositArgs: {\n      vault_id: vaultId.toString(),\n      token,\n      amount,\n    },\n  });\n}\n","export const version = \"abstract-provider/5.7.0\";\n//# sourceMappingURL=_version.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { BigNumber } from \"@ethersproject/bignumber\";\nimport { isHexString } from \"@ethersproject/bytes\";\nimport { Description, defineReadOnly, resolveProperties } from \"@ethersproject/properties\";\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nconst logger = new Logger(version);\n;\n;\n//export type CallTransactionable = {\n//    call(transaction: TransactionRequest): Promise<TransactionResponse>;\n//};\nexport class ForkEvent extends Description {\n    static isForkEvent(value) {\n        return !!(value && value._isForkEvent);\n    }\n}\nexport class BlockForkEvent extends ForkEvent {\n    constructor(blockHash, expiry) {\n        if (!isHexString(blockHash, 32)) {\n            logger.throwArgumentError(\"invalid blockHash\", \"blockHash\", blockHash);\n        }\n        super({\n            _isForkEvent: true,\n            _isBlockForkEvent: true,\n            expiry: (expiry || 0),\n            blockHash: blockHash\n        });\n    }\n}\nexport class TransactionForkEvent extends ForkEvent {\n    constructor(hash, expiry) {\n        if (!isHexString(hash, 32)) {\n            logger.throwArgumentError(\"invalid transaction hash\", \"hash\", hash);\n        }\n        super({\n            _isForkEvent: true,\n            _isTransactionForkEvent: true,\n            expiry: (expiry || 0),\n            hash: hash\n        });\n    }\n}\nexport class TransactionOrderForkEvent extends ForkEvent {\n    constructor(beforeHash, afterHash, expiry) {\n        if (!isHexString(beforeHash, 32)) {\n            logger.throwArgumentError(\"invalid transaction hash\", \"beforeHash\", beforeHash);\n        }\n        if (!isHexString(afterHash, 32)) {\n            logger.throwArgumentError(\"invalid transaction hash\", \"afterHash\", afterHash);\n        }\n        super({\n            _isForkEvent: true,\n            _isTransactionOrderForkEvent: true,\n            expiry: (expiry || 0),\n            beforeHash: beforeHash,\n            afterHash: afterHash\n        });\n    }\n}\n///////////////////////////////\n// Exported Abstracts\nexport class Provider {\n    constructor() {\n        logger.checkAbstract(new.target, Provider);\n        defineReadOnly(this, \"_isProvider\", true);\n    }\n    getFeeData() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { block, gasPrice } = yield resolveProperties({\n                block: this.getBlock(\"latest\"),\n                gasPrice: this.getGasPrice().catch((error) => {\n                    // @TODO: Why is this now failing on Calaveras?\n                    //console.log(error);\n                    return null;\n                })\n            });\n            let lastBaseFeePerGas = null, maxFeePerGas = null, maxPriorityFeePerGas = null;\n            if (block && block.baseFeePerGas) {\n                // We may want to compute this more accurately in the future,\n                // using the formula \"check if the base fee is correct\".\n                // See: https://eips.ethereum.org/EIPS/eip-1559\n                lastBaseFeePerGas = block.baseFeePerGas;\n                maxPriorityFeePerGas = BigNumber.from(\"1500000000\");\n                maxFeePerGas = block.baseFeePerGas.mul(2).add(maxPriorityFeePerGas);\n            }\n            return { lastBaseFeePerGas, maxFeePerGas, maxPriorityFeePerGas, gasPrice };\n        });\n    }\n    // Alias for \"on\"\n    addListener(eventName, listener) {\n        return this.on(eventName, listener);\n    }\n    // Alias for \"off\"\n    removeListener(eventName, listener) {\n        return this.off(eventName, listener);\n    }\n    static isProvider(value) {\n        return !!(value && value._isProvider);\n    }\n}\n//# sourceMappingURL=index.js.map","export const version = \"abstract-signer/5.7.0\";\n//# sourceMappingURL=_version.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { defineReadOnly, resolveProperties, shallowCopy } from \"@ethersproject/properties\";\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nconst logger = new Logger(version);\nconst allowedTransactionKeys = [\n    \"accessList\", \"ccipReadEnabled\", \"chainId\", \"customData\", \"data\", \"from\", \"gasLimit\", \"gasPrice\", \"maxFeePerGas\", \"maxPriorityFeePerGas\", \"nonce\", \"to\", \"type\", \"value\"\n];\nconst forwardErrors = [\n    Logger.errors.INSUFFICIENT_FUNDS,\n    Logger.errors.NONCE_EXPIRED,\n    Logger.errors.REPLACEMENT_UNDERPRICED,\n];\n;\n;\nexport class Signer {\n    ///////////////////\n    // Sub-classes MUST call super\n    constructor() {\n        logger.checkAbstract(new.target, Signer);\n        defineReadOnly(this, \"_isSigner\", true);\n    }\n    ///////////////////\n    // Sub-classes MAY override these\n    getBalance(blockTag) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._checkProvider(\"getBalance\");\n            return yield this.provider.getBalance(this.getAddress(), blockTag);\n        });\n    }\n    getTransactionCount(blockTag) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._checkProvider(\"getTransactionCount\");\n            return yield this.provider.getTransactionCount(this.getAddress(), blockTag);\n        });\n    }\n    // Populates \"from\" if unspecified, and estimates the gas for the transaction\n    estimateGas(transaction) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._checkProvider(\"estimateGas\");\n            const tx = yield resolveProperties(this.checkTransaction(transaction));\n            return yield this.provider.estimateGas(tx);\n        });\n    }\n    // Populates \"from\" if unspecified, and calls with the transaction\n    call(transaction, blockTag) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._checkProvider(\"call\");\n            const tx = yield resolveProperties(this.checkTransaction(transaction));\n            return yield this.provider.call(tx, blockTag);\n        });\n    }\n    // Populates all fields in a transaction, signs it and sends it to the network\n    sendTransaction(transaction) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._checkProvider(\"sendTransaction\");\n            const tx = yield this.populateTransaction(transaction);\n            const signedTx = yield this.signTransaction(tx);\n            return yield this.provider.sendTransaction(signedTx);\n        });\n    }\n    getChainId() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._checkProvider(\"getChainId\");\n            const network = yield this.provider.getNetwork();\n            return network.chainId;\n        });\n    }\n    getGasPrice() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._checkProvider(\"getGasPrice\");\n            return yield this.provider.getGasPrice();\n        });\n    }\n    getFeeData() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._checkProvider(\"getFeeData\");\n            return yield this.provider.getFeeData();\n        });\n    }\n    resolveName(name) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._checkProvider(\"resolveName\");\n            return yield this.provider.resolveName(name);\n        });\n    }\n    // Checks a transaction does not contain invalid keys and if\n    // no \"from\" is provided, populates it.\n    // - does NOT require a provider\n    // - adds \"from\" is not present\n    // - returns a COPY (safe to mutate the result)\n    // By default called from: (overriding these prevents it)\n    //   - call\n    //   - estimateGas\n    //   - populateTransaction (and therefor sendTransaction)\n    checkTransaction(transaction) {\n        for (const key in transaction) {\n            if (allowedTransactionKeys.indexOf(key) === -1) {\n                logger.throwArgumentError(\"invalid transaction key: \" + key, \"transaction\", transaction);\n            }\n        }\n        const tx = shallowCopy(transaction);\n        if (tx.from == null) {\n            tx.from = this.getAddress();\n        }\n        else {\n            // Make sure any provided address matches this signer\n            tx.from = Promise.all([\n                Promise.resolve(tx.from),\n                this.getAddress()\n            ]).then((result) => {\n                if (result[0].toLowerCase() !== result[1].toLowerCase()) {\n                    logger.throwArgumentError(\"from address mismatch\", \"transaction\", transaction);\n                }\n                return result[0];\n            });\n        }\n        return tx;\n    }\n    // Populates ALL keys for a transaction and checks that \"from\" matches\n    // this Signer. Should be used by sendTransaction but NOT by signTransaction.\n    // By default called from: (overriding these prevents it)\n    //   - sendTransaction\n    //\n    // Notes:\n    //  - We allow gasPrice for EIP-1559 as long as it matches maxFeePerGas\n    populateTransaction(transaction) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const tx = yield resolveProperties(this.checkTransaction(transaction));\n            if (tx.to != null) {\n                tx.to = Promise.resolve(tx.to).then((to) => __awaiter(this, void 0, void 0, function* () {\n                    if (to == null) {\n                        return null;\n                    }\n                    const address = yield this.resolveName(to);\n                    if (address == null) {\n                        logger.throwArgumentError(\"provided ENS name resolves to null\", \"tx.to\", to);\n                    }\n                    return address;\n                }));\n                // Prevent this error from causing an UnhandledPromiseException\n                tx.to.catch((error) => { });\n            }\n            // Do not allow mixing pre-eip-1559 and eip-1559 properties\n            const hasEip1559 = (tx.maxFeePerGas != null || tx.maxPriorityFeePerGas != null);\n            if (tx.gasPrice != null && (tx.type === 2 || hasEip1559)) {\n                logger.throwArgumentError(\"eip-1559 transaction do not support gasPrice\", \"transaction\", transaction);\n            }\n            else if ((tx.type === 0 || tx.type === 1) && hasEip1559) {\n                logger.throwArgumentError(\"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas\", \"transaction\", transaction);\n            }\n            if ((tx.type === 2 || tx.type == null) && (tx.maxFeePerGas != null && tx.maxPriorityFeePerGas != null)) {\n                // Fully-formed EIP-1559 transaction (skip getFeeData)\n                tx.type = 2;\n            }\n            else if (tx.type === 0 || tx.type === 1) {\n                // Explicit Legacy or EIP-2930 transaction\n                // Populate missing gasPrice\n                if (tx.gasPrice == null) {\n                    tx.gasPrice = this.getGasPrice();\n                }\n            }\n            else {\n                // We need to get fee data to determine things\n                const feeData = yield this.getFeeData();\n                if (tx.type == null) {\n                    // We need to auto-detect the intended type of this transaction...\n                    if (feeData.maxFeePerGas != null && feeData.maxPriorityFeePerGas != null) {\n                        // The network supports EIP-1559!\n                        // Upgrade transaction from null to eip-1559\n                        tx.type = 2;\n                        if (tx.gasPrice != null) {\n                            // Using legacy gasPrice property on an eip-1559 network,\n                            // so use gasPrice as both fee properties\n                            const gasPrice = tx.gasPrice;\n                            delete tx.gasPrice;\n                            tx.maxFeePerGas = gasPrice;\n                            tx.maxPriorityFeePerGas = gasPrice;\n                        }\n                        else {\n                            // Populate missing fee data\n                            if (tx.maxFeePerGas == null) {\n                                tx.maxFeePerGas = feeData.maxFeePerGas;\n                            }\n                            if (tx.maxPriorityFeePerGas == null) {\n                                tx.maxPriorityFeePerGas = feeData.maxPriorityFeePerGas;\n                            }\n                        }\n                    }\n                    else if (feeData.gasPrice != null) {\n                        // Network doesn't support EIP-1559...\n                        // ...but they are trying to use EIP-1559 properties\n                        if (hasEip1559) {\n                            logger.throwError(\"network does not support EIP-1559\", Logger.errors.UNSUPPORTED_OPERATION, {\n                                operation: \"populateTransaction\"\n                            });\n                        }\n                        // Populate missing fee data\n                        if (tx.gasPrice == null) {\n                            tx.gasPrice = feeData.gasPrice;\n                        }\n                        // Explicitly set untyped transaction to legacy\n                        tx.type = 0;\n                    }\n                    else {\n                        // getFeeData has failed us.\n                        logger.throwError(\"failed to get consistent fee data\", Logger.errors.UNSUPPORTED_OPERATION, {\n                            operation: \"signer.getFeeData\"\n                        });\n                    }\n                }\n                else if (tx.type === 2) {\n                    // Explicitly using EIP-1559\n                    // Populate missing fee data\n                    if (tx.maxFeePerGas == null) {\n                        tx.maxFeePerGas = feeData.maxFeePerGas;\n                    }\n                    if (tx.maxPriorityFeePerGas == null) {\n                        tx.maxPriorityFeePerGas = feeData.maxPriorityFeePerGas;\n                    }\n                }\n            }\n            if (tx.nonce == null) {\n                tx.nonce = this.getTransactionCount(\"pending\");\n            }\n            if (tx.gasLimit == null) {\n                tx.gasLimit = this.estimateGas(tx).catch((error) => {\n                    if (forwardErrors.indexOf(error.code) >= 0) {\n                        throw error;\n                    }\n                    return logger.throwError(\"cannot estimate gas; transaction may fail or may require manual gas limit\", Logger.errors.UNPREDICTABLE_GAS_LIMIT, {\n                        error: error,\n                        tx: tx\n                    });\n                });\n            }\n            if (tx.chainId == null) {\n                tx.chainId = this.getChainId();\n            }\n            else {\n                tx.chainId = Promise.all([\n                    Promise.resolve(tx.chainId),\n                    this.getChainId()\n                ]).then((results) => {\n                    if (results[1] !== 0 && results[0] !== results[1]) {\n                        logger.throwArgumentError(\"chainId address mismatch\", \"transaction\", transaction);\n                    }\n                    return results[0];\n                });\n            }\n            return yield resolveProperties(tx);\n        });\n    }\n    ///////////////////\n    // Sub-classes SHOULD leave these alone\n    _checkProvider(operation) {\n        if (!this.provider) {\n            logger.throwError(\"missing provider\", Logger.errors.UNSUPPORTED_OPERATION, {\n                operation: (operation || \"_checkProvider\")\n            });\n        }\n    }\n    static isSigner(value) {\n        return !!(value && value._isSigner);\n    }\n}\nexport class VoidSigner extends Signer {\n    constructor(address, provider) {\n        super();\n        defineReadOnly(this, \"address\", address);\n        defineReadOnly(this, \"provider\", provider || null);\n    }\n    getAddress() {\n        return Promise.resolve(this.address);\n    }\n    _fail(message, operation) {\n        return Promise.resolve().then(() => {\n            logger.throwError(message, Logger.errors.UNSUPPORTED_OPERATION, { operation: operation });\n        });\n    }\n    signMessage(message) {\n        return this._fail(\"VoidSigner cannot sign messages\", \"signMessage\");\n    }\n    signTransaction(transaction) {\n        return this._fail(\"VoidSigner cannot sign transactions\", \"signTransaction\");\n    }\n    _signTypedData(domain, types, value) {\n        return this._fail(\"VoidSigner cannot sign typed data\", \"signTypedData\");\n    }\n    connect(provider) {\n        return new VoidSigner(this.address, provider);\n    }\n}\n//# sourceMappingURL=index.js.map","/**\n * var basex = require(\"base-x\");\n *\n * This implementation is heavily based on base-x. The main reason to\n * deviate was to prevent the dependency of Buffer.\n *\n * Contributors:\n *\n * base-x encoding\n * Forked from https://github.com/cryptocoinjs/bs58\n * Originally written by Mike Hearn for BitcoinJ\n * Copyright (c) 2011 Google Inc\n * Ported to JavaScript by Stefan Thomas\n * Merged Buffer refactorings from base58-native by Stephen Pair\n * Copyright (c) 2013 BitPay Inc\n *\n * The MIT License (MIT)\n *\n * Copyright base-x contributors (c) 2016\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n *\n */\nimport { arrayify } from \"@ethersproject/bytes\";\nimport { defineReadOnly } from \"@ethersproject/properties\";\nexport class BaseX {\n    constructor(alphabet) {\n        defineReadOnly(this, \"alphabet\", alphabet);\n        defineReadOnly(this, \"base\", alphabet.length);\n        defineReadOnly(this, \"_alphabetMap\", {});\n        defineReadOnly(this, \"_leader\", alphabet.charAt(0));\n        // pre-compute lookup table\n        for (let i = 0; i < alphabet.length; i++) {\n            this._alphabetMap[alphabet.charAt(i)] = i;\n        }\n    }\n    encode(value) {\n        let source = arrayify(value);\n        if (source.length === 0) {\n            return \"\";\n        }\n        let digits = [0];\n        for (let i = 0; i < source.length; ++i) {\n            let carry = source[i];\n            for (let j = 0; j < digits.length; ++j) {\n                carry += digits[j] << 8;\n                digits[j] = carry % this.base;\n                carry = (carry / this.base) | 0;\n            }\n            while (carry > 0) {\n                digits.push(carry % this.base);\n                carry = (carry / this.base) | 0;\n            }\n        }\n        let string = \"\";\n        // deal with leading zeros\n        for (let k = 0; source[k] === 0 && k < source.length - 1; ++k) {\n            string += this._leader;\n        }\n        // convert digits to a string\n        for (let q = digits.length - 1; q >= 0; --q) {\n            string += this.alphabet[digits[q]];\n        }\n        return string;\n    }\n    decode(value) {\n        if (typeof (value) !== \"string\") {\n            throw new TypeError(\"Expected String\");\n        }\n        let bytes = [];\n        if (value.length === 0) {\n            return new Uint8Array(bytes);\n        }\n        bytes.push(0);\n        for (let i = 0; i < value.length; i++) {\n            let byte = this._alphabetMap[value[i]];\n            if (byte === undefined) {\n                throw new Error(\"Non-base\" + this.base + \" character\");\n            }\n            let carry = byte;\n            for (let j = 0; j < bytes.length; ++j) {\n                carry += bytes[j] * this.base;\n                bytes[j] = carry & 0xff;\n                carry >>= 8;\n            }\n            while (carry > 0) {\n                bytes.push(carry & 0xff);\n                carry >>= 8;\n            }\n        }\n        // deal with leading zeros\n        for (let k = 0; value[k] === this._leader && k < value.length - 1; ++k) {\n            bytes.push(0);\n        }\n        return arrayify(new Uint8Array(bytes.reverse()));\n    }\n}\nconst Base32 = new BaseX(\"abcdefghijklmnopqrstuvwxyz234567\");\nconst Base58 = new BaseX(\"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\");\nexport { Base32, Base58 };\n//console.log(Base58.decode(\"Qmd2V777o5XvJbYMeMb8k2nU5f8d3ciUQ5YpYuWhzv8iDj\"))\n//console.log(Base58.encode(Base58.decode(\"Qmd2V777o5XvJbYMeMb8k2nU5f8d3ciUQ5YpYuWhzv8iDj\")))\n//# sourceMappingURL=index.js.map","\"use strict\";\nimport hash from \"hash.js\";\n//const _ripemd160 = _hash.ripemd160;\nimport { arrayify } from \"@ethersproject/bytes\";\nimport { SupportedAlgorithm } from \"./types\";\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nconst logger = new Logger(version);\nexport function ripemd160(data) {\n    return \"0x\" + (hash.ripemd160().update(arrayify(data)).digest(\"hex\"));\n}\nexport function sha256(data) {\n    return \"0x\" + (hash.sha256().update(arrayify(data)).digest(\"hex\"));\n}\nexport function sha512(data) {\n    return \"0x\" + (hash.sha512().update(arrayify(data)).digest(\"hex\"));\n}\nexport function computeHmac(algorithm, key, data) {\n    if (!SupportedAlgorithm[algorithm]) {\n        logger.throwError(\"unsupported algorithm \" + algorithm, Logger.errors.UNSUPPORTED_OPERATION, {\n            operation: \"hmac\",\n            algorithm: algorithm\n        });\n    }\n    return \"0x\" + hash.hmac(hash[algorithm], arrayify(key)).update(arrayify(data)).digest(\"hex\");\n}\n//# sourceMappingURL=sha2.js.map","export const version = \"networks/5.7.1\";\n//# sourceMappingURL=_version.js.map","\"use strict\";\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nconst logger = new Logger(version);\n;\nfunction isRenetworkable(value) {\n    return (value && typeof (value.renetwork) === \"function\");\n}\nfunction ethDefaultProvider(network) {\n    const func = function (providers, options) {\n        if (options == null) {\n            options = {};\n        }\n        const providerList = [];\n        if (providers.InfuraProvider && options.infura !== \"-\") {\n            try {\n                providerList.push(new providers.InfuraProvider(network, options.infura));\n            }\n            catch (error) { }\n        }\n        if (providers.EtherscanProvider && options.etherscan !== \"-\") {\n            try {\n                providerList.push(new providers.EtherscanProvider(network, options.etherscan));\n            }\n            catch (error) { }\n        }\n        if (providers.AlchemyProvider && options.alchemy !== \"-\") {\n            try {\n                providerList.push(new providers.AlchemyProvider(network, options.alchemy));\n            }\n            catch (error) { }\n        }\n        if (providers.PocketProvider && options.pocket !== \"-\") {\n            // These networks are currently faulty on Pocket as their\n            // network does not handle the Berlin hardfork, which is\n            // live on these ones.\n            // @TODO: This goes away once Pocket has upgraded their nodes\n            const skip = [\"goerli\", \"ropsten\", \"rinkeby\", \"sepolia\"];\n            try {\n                const provider = new providers.PocketProvider(network, options.pocket);\n                if (provider.network && skip.indexOf(provider.network.name) === -1) {\n                    providerList.push(provider);\n                }\n            }\n            catch (error) { }\n        }\n        if (providers.CloudflareProvider && options.cloudflare !== \"-\") {\n            try {\n                providerList.push(new providers.CloudflareProvider(network));\n            }\n            catch (error) { }\n        }\n        if (providers.AnkrProvider && options.ankr !== \"-\") {\n            try {\n                const skip = [\"ropsten\"];\n                const provider = new providers.AnkrProvider(network, options.ankr);\n                if (provider.network && skip.indexOf(provider.network.name) === -1) {\n                    providerList.push(provider);\n                }\n            }\n            catch (error) { }\n        }\n        if (providerList.length === 0) {\n            return null;\n        }\n        if (providers.FallbackProvider) {\n            let quorum = 1;\n            if (options.quorum != null) {\n                quorum = options.quorum;\n            }\n            else if (network === \"homestead\") {\n                quorum = 2;\n            }\n            return new providers.FallbackProvider(providerList, quorum);\n        }\n        return providerList[0];\n    };\n    func.renetwork = function (network) {\n        return ethDefaultProvider(network);\n    };\n    return func;\n}\nfunction etcDefaultProvider(url, network) {\n    const func = function (providers, options) {\n        if (providers.JsonRpcProvider) {\n            return new providers.JsonRpcProvider(url, network);\n        }\n        return null;\n    };\n    func.renetwork = function (network) {\n        return etcDefaultProvider(url, network);\n    };\n    return func;\n}\nconst homestead = {\n    chainId: 1,\n    ensAddress: \"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e\",\n    name: \"homestead\",\n    _defaultProvider: ethDefaultProvider(\"homestead\")\n};\nconst ropsten = {\n    chainId: 3,\n    ensAddress: \"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e\",\n    name: \"ropsten\",\n    _defaultProvider: ethDefaultProvider(\"ropsten\")\n};\nconst classicMordor = {\n    chainId: 63,\n    name: \"classicMordor\",\n    _defaultProvider: etcDefaultProvider(\"https://www.ethercluster.com/mordor\", \"classicMordor\")\n};\n// See: https://chainlist.org\nconst networks = {\n    unspecified: { chainId: 0, name: \"unspecified\" },\n    homestead: homestead,\n    mainnet: homestead,\n    morden: { chainId: 2, name: \"morden\" },\n    ropsten: ropsten,\n    testnet: ropsten,\n    rinkeby: {\n        chainId: 4,\n        ensAddress: \"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e\",\n        name: \"rinkeby\",\n        _defaultProvider: ethDefaultProvider(\"rinkeby\")\n    },\n    kovan: {\n        chainId: 42,\n        name: \"kovan\",\n        _defaultProvider: ethDefaultProvider(\"kovan\")\n    },\n    goerli: {\n        chainId: 5,\n        ensAddress: \"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e\",\n        name: \"goerli\",\n        _defaultProvider: ethDefaultProvider(\"goerli\")\n    },\n    kintsugi: { chainId: 1337702, name: \"kintsugi\" },\n    sepolia: {\n        chainId: 11155111,\n        name: \"sepolia\",\n        _defaultProvider: ethDefaultProvider(\"sepolia\")\n    },\n    // ETC (See: #351)\n    classic: {\n        chainId: 61,\n        name: \"classic\",\n        _defaultProvider: etcDefaultProvider(\"https:/\\/www.ethercluster.com/etc\", \"classic\")\n    },\n    classicMorden: { chainId: 62, name: \"classicMorden\" },\n    classicMordor: classicMordor,\n    classicTestnet: classicMordor,\n    classicKotti: {\n        chainId: 6,\n        name: \"classicKotti\",\n        _defaultProvider: etcDefaultProvider(\"https:/\\/www.ethercluster.com/kotti\", \"classicKotti\")\n    },\n    xdai: { chainId: 100, name: \"xdai\" },\n    matic: {\n        chainId: 137,\n        name: \"matic\",\n        _defaultProvider: ethDefaultProvider(\"matic\")\n    },\n    maticmum: { chainId: 80001, name: \"maticmum\" },\n    optimism: {\n        chainId: 10,\n        name: \"optimism\",\n        _defaultProvider: ethDefaultProvider(\"optimism\")\n    },\n    \"optimism-kovan\": { chainId: 69, name: \"optimism-kovan\" },\n    \"optimism-goerli\": { chainId: 420, name: \"optimism-goerli\" },\n    arbitrum: { chainId: 42161, name: \"arbitrum\" },\n    \"arbitrum-rinkeby\": { chainId: 421611, name: \"arbitrum-rinkeby\" },\n    \"arbitrum-goerli\": { chainId: 421613, name: \"arbitrum-goerli\" },\n    bnb: { chainId: 56, name: \"bnb\" },\n    bnbt: { chainId: 97, name: \"bnbt\" },\n};\n/**\n *  getNetwork\n *\n *  Converts a named common networks or chain ID (network ID) to a Network\n *  and verifies a network is a valid Network..\n */\nexport function getNetwork(network) {\n    // No network (null)\n    if (network == null) {\n        return null;\n    }\n    if (typeof (network) === \"number\") {\n        for (const name in networks) {\n            const standard = networks[name];\n            if (standard.chainId === network) {\n                return {\n                    name: standard.name,\n                    chainId: standard.chainId,\n                    ensAddress: (standard.ensAddress || null),\n                    _defaultProvider: (standard._defaultProvider || null)\n                };\n            }\n        }\n        return {\n            chainId: network,\n            name: \"unknown\"\n        };\n    }\n    if (typeof (network) === \"string\") {\n        const standard = networks[network];\n        if (standard == null) {\n            return null;\n        }\n        return {\n            name: standard.name,\n            chainId: standard.chainId,\n            ensAddress: standard.ensAddress,\n            _defaultProvider: (standard._defaultProvider || null)\n        };\n    }\n    const standard = networks[network.name];\n    // Not a standard network; check that it is a valid network in general\n    if (!standard) {\n        if (typeof (network.chainId) !== \"number\") {\n            logger.throwArgumentError(\"invalid network chainId\", \"network\", network);\n        }\n        return network;\n    }\n    // Make sure the chainId matches the expected network chainId (or is 0; disable EIP-155)\n    if (network.chainId !== 0 && network.chainId !== standard.chainId) {\n        logger.throwArgumentError(\"network chainId mismatch\", \"network\", network);\n    }\n    // @TODO: In the next major version add an attach function to a defaultProvider\n    // class and move the _defaultProvider internal to this file (extend Network)\n    let defaultProvider = network._defaultProvider || null;\n    if (defaultProvider == null && standard._defaultProvider) {\n        if (isRenetworkable(standard._defaultProvider)) {\n            defaultProvider = standard._defaultProvider.renetwork(network);\n        }\n        else {\n            defaultProvider = standard._defaultProvider;\n        }\n    }\n    // Standard Network (allow overriding the ENS address)\n    return {\n        name: network.name,\n        chainId: standard.chainId,\n        ensAddress: (network.ensAddress || standard.ensAddress || null),\n        _defaultProvider: defaultProvider\n    };\n}\n//# sourceMappingURL=index.js.map","export const version = \"web/5.7.1\";\n//# sourceMappingURL=_version.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { arrayify } from \"@ethersproject/bytes\";\nexport function getUrl(href, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (options == null) {\n            options = {};\n        }\n        const request = {\n            method: (options.method || \"GET\"),\n            headers: (options.headers || {}),\n            body: (options.body || undefined),\n        };\n        if (options.skipFetchSetup !== true) {\n            request.mode = \"cors\"; // no-cors, cors, *same-origin\n            request.cache = \"no-cache\"; // *default, no-cache, reload, force-cache, only-if-cached\n            request.credentials = \"same-origin\"; // include, *same-origin, omit\n            request.redirect = \"follow\"; // manual, *follow, error\n            request.referrer = \"client\"; // no-referrer, *client\n        }\n        ;\n        if (options.fetchOptions != null) {\n            const opts = options.fetchOptions;\n            if (opts.mode) {\n                request.mode = (opts.mode);\n            }\n            if (opts.cache) {\n                request.cache = (opts.cache);\n            }\n            if (opts.credentials) {\n                request.credentials = (opts.credentials);\n            }\n            if (opts.redirect) {\n                request.redirect = (opts.redirect);\n            }\n            if (opts.referrer) {\n                request.referrer = opts.referrer;\n            }\n        }\n        const response = yield fetch(href, request);\n        const body = yield response.arrayBuffer();\n        const headers = {};\n        if (response.headers.forEach) {\n            response.headers.forEach((value, key) => {\n                headers[key.toLowerCase()] = value;\n            });\n        }\n        else {\n            ((response.headers).keys)().forEach((key) => {\n                headers[key.toLowerCase()] = response.headers.get(key);\n            });\n        }\n        return {\n            headers: headers,\n            statusCode: response.status,\n            statusMessage: response.statusText,\n            body: arrayify(new Uint8Array(body)),\n        };\n    });\n}\n//# sourceMappingURL=geturl.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { decode as base64Decode, encode as base64Encode } from \"@ethersproject/base64\";\nimport { hexlify, isBytesLike } from \"@ethersproject/bytes\";\nimport { shallowCopy } from \"@ethersproject/properties\";\nimport { toUtf8Bytes, toUtf8String } from \"@ethersproject/strings\";\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nconst logger = new Logger(version);\nimport { getUrl } from \"./geturl\";\nfunction staller(duration) {\n    return new Promise((resolve) => {\n        setTimeout(resolve, duration);\n    });\n}\nfunction bodyify(value, type) {\n    if (value == null) {\n        return null;\n    }\n    if (typeof (value) === \"string\") {\n        return value;\n    }\n    if (isBytesLike(value)) {\n        if (type && (type.split(\"/\")[0] === \"text\" || type.split(\";\")[0].trim() === \"application/json\")) {\n            try {\n                return toUtf8String(value);\n            }\n            catch (error) { }\n            ;\n        }\n        return hexlify(value);\n    }\n    return value;\n}\nfunction unpercent(value) {\n    return toUtf8Bytes(value.replace(/%([0-9a-f][0-9a-f])/gi, (all, code) => {\n        return String.fromCharCode(parseInt(code, 16));\n    }));\n}\n// This API is still a work in progress; the future changes will likely be:\n// - ConnectionInfo => FetchDataRequest<T = any>\n// - FetchDataRequest.body? = string | Uint8Array | { contentType: string, data: string | Uint8Array }\n//   - If string => text/plain, Uint8Array => application/octet-stream (if content-type unspecified)\n// - FetchDataRequest.processFunc = (body: Uint8Array, response: FetchDataResponse) => T\n// For this reason, it should be considered internal until the API is finalized\nexport function _fetchData(connection, body, processFunc) {\n    // How many times to retry in the event of a throttle\n    const attemptLimit = (typeof (connection) === \"object\" && connection.throttleLimit != null) ? connection.throttleLimit : 12;\n    logger.assertArgument((attemptLimit > 0 && (attemptLimit % 1) === 0), \"invalid connection throttle limit\", \"connection.throttleLimit\", attemptLimit);\n    const throttleCallback = ((typeof (connection) === \"object\") ? connection.throttleCallback : null);\n    const throttleSlotInterval = ((typeof (connection) === \"object\" && typeof (connection.throttleSlotInterval) === \"number\") ? connection.throttleSlotInterval : 100);\n    logger.assertArgument((throttleSlotInterval > 0 && (throttleSlotInterval % 1) === 0), \"invalid connection throttle slot interval\", \"connection.throttleSlotInterval\", throttleSlotInterval);\n    const errorPassThrough = ((typeof (connection) === \"object\") ? !!(connection.errorPassThrough) : false);\n    const headers = {};\n    let url = null;\n    // @TODO: Allow ConnectionInfo to override some of these values\n    const options = {\n        method: \"GET\",\n    };\n    let allow304 = false;\n    let timeout = 2 * 60 * 1000;\n    if (typeof (connection) === \"string\") {\n        url = connection;\n    }\n    else if (typeof (connection) === \"object\") {\n        if (connection == null || connection.url == null) {\n            logger.throwArgumentError(\"missing URL\", \"connection.url\", connection);\n        }\n        url = connection.url;\n        if (typeof (connection.timeout) === \"number\" && connection.timeout > 0) {\n            timeout = connection.timeout;\n        }\n        if (connection.headers) {\n            for (const key in connection.headers) {\n                headers[key.toLowerCase()] = { key: key, value: String(connection.headers[key]) };\n                if ([\"if-none-match\", \"if-modified-since\"].indexOf(key.toLowerCase()) >= 0) {\n                    allow304 = true;\n                }\n            }\n        }\n        options.allowGzip = !!connection.allowGzip;\n        if (connection.user != null && connection.password != null) {\n            if (url.substring(0, 6) !== \"https:\" && connection.allowInsecureAuthentication !== true) {\n                logger.throwError(\"basic authentication requires a secure https url\", Logger.errors.INVALID_ARGUMENT, { argument: \"url\", url: url, user: connection.user, password: \"[REDACTED]\" });\n            }\n            const authorization = connection.user + \":\" + connection.password;\n            headers[\"authorization\"] = {\n                key: \"Authorization\",\n                value: \"Basic \" + base64Encode(toUtf8Bytes(authorization))\n            };\n        }\n        if (connection.skipFetchSetup != null) {\n            options.skipFetchSetup = !!connection.skipFetchSetup;\n        }\n        if (connection.fetchOptions != null) {\n            options.fetchOptions = shallowCopy(connection.fetchOptions);\n        }\n    }\n    const reData = new RegExp(\"^data:([^;:]*)?(;base64)?,(.*)$\", \"i\");\n    const dataMatch = ((url) ? url.match(reData) : null);\n    if (dataMatch) {\n        try {\n            const response = {\n                statusCode: 200,\n                statusMessage: \"OK\",\n                headers: { \"content-type\": (dataMatch[1] || \"text/plain\") },\n                body: (dataMatch[2] ? base64Decode(dataMatch[3]) : unpercent(dataMatch[3]))\n            };\n            let result = response.body;\n            if (processFunc) {\n                result = processFunc(response.body, response);\n            }\n            return Promise.resolve(result);\n        }\n        catch (error) {\n            logger.throwError(\"processing response error\", Logger.errors.SERVER_ERROR, {\n                body: bodyify(dataMatch[1], dataMatch[2]),\n                error: error,\n                requestBody: null,\n                requestMethod: \"GET\",\n                url: url\n            });\n        }\n    }\n    if (body) {\n        options.method = \"POST\";\n        options.body = body;\n        if (headers[\"content-type\"] == null) {\n            headers[\"content-type\"] = { key: \"Content-Type\", value: \"application/octet-stream\" };\n        }\n        if (headers[\"content-length\"] == null) {\n            headers[\"content-length\"] = { key: \"Content-Length\", value: String(body.length) };\n        }\n    }\n    const flatHeaders = {};\n    Object.keys(headers).forEach((key) => {\n        const header = headers[key];\n        flatHeaders[header.key] = header.value;\n    });\n    options.headers = flatHeaders;\n    const runningTimeout = (function () {\n        let timer = null;\n        const promise = new Promise(function (resolve, reject) {\n            if (timeout) {\n                timer = setTimeout(() => {\n                    if (timer == null) {\n                        return;\n                    }\n                    timer = null;\n                    reject(logger.makeError(\"timeout\", Logger.errors.TIMEOUT, {\n                        requestBody: bodyify(options.body, flatHeaders[\"content-type\"]),\n                        requestMethod: options.method,\n                        timeout: timeout,\n                        url: url\n                    }));\n                }, timeout);\n            }\n        });\n        const cancel = function () {\n            if (timer == null) {\n                return;\n            }\n            clearTimeout(timer);\n            timer = null;\n        };\n        return { promise, cancel };\n    })();\n    const runningFetch = (function () {\n        return __awaiter(this, void 0, void 0, function* () {\n            for (let attempt = 0; attempt < attemptLimit; attempt++) {\n                let response = null;\n                try {\n                    response = yield getUrl(url, options);\n                    if (attempt < attemptLimit) {\n                        if (response.statusCode === 301 || response.statusCode === 302) {\n                            // Redirection; for now we only support absolute locataions\n                            const location = response.headers.location || \"\";\n                            if (options.method === \"GET\" && location.match(/^https:/)) {\n                                url = response.headers.location;\n                                continue;\n                            }\n                        }\n                        else if (response.statusCode === 429) {\n                            // Exponential back-off throttling\n                            let tryAgain = true;\n                            if (throttleCallback) {\n                                tryAgain = yield throttleCallback(attempt, url);\n                            }\n                            if (tryAgain) {\n                                let stall = 0;\n                                const retryAfter = response.headers[\"retry-after\"];\n                                if (typeof (retryAfter) === \"string\" && retryAfter.match(/^[1-9][0-9]*$/)) {\n                                    stall = parseInt(retryAfter) * 1000;\n                                }\n                                else {\n                                    stall = throttleSlotInterval * parseInt(String(Math.random() * Math.pow(2, attempt)));\n                                }\n                                //console.log(\"Stalling 429\");\n                                yield staller(stall);\n                                continue;\n                            }\n                        }\n                    }\n                }\n                catch (error) {\n                    response = error.response;\n                    if (response == null) {\n                        runningTimeout.cancel();\n                        logger.throwError(\"missing response\", Logger.errors.SERVER_ERROR, {\n                            requestBody: bodyify(options.body, flatHeaders[\"content-type\"]),\n                            requestMethod: options.method,\n                            serverError: error,\n                            url: url\n                        });\n                    }\n                }\n                let body = response.body;\n                if (allow304 && response.statusCode === 304) {\n                    body = null;\n                }\n                else if (!errorPassThrough && (response.statusCode < 200 || response.statusCode >= 300)) {\n                    runningTimeout.cancel();\n                    logger.throwError(\"bad response\", Logger.errors.SERVER_ERROR, {\n                        status: response.statusCode,\n                        headers: response.headers,\n                        body: bodyify(body, ((response.headers) ? response.headers[\"content-type\"] : null)),\n                        requestBody: bodyify(options.body, flatHeaders[\"content-type\"]),\n                        requestMethod: options.method,\n                        url: url\n                    });\n                }\n                if (processFunc) {\n                    try {\n                        const result = yield processFunc(body, response);\n                        runningTimeout.cancel();\n                        return result;\n                    }\n                    catch (error) {\n                        // Allow the processFunc to trigger a throttle\n                        if (error.throttleRetry && attempt < attemptLimit) {\n                            let tryAgain = true;\n                            if (throttleCallback) {\n                                tryAgain = yield throttleCallback(attempt, url);\n                            }\n                            if (tryAgain) {\n                                const timeout = throttleSlotInterval * parseInt(String(Math.random() * Math.pow(2, attempt)));\n                                //console.log(\"Stalling callback\");\n                                yield staller(timeout);\n                                continue;\n                            }\n                        }\n                        runningTimeout.cancel();\n                        logger.throwError(\"processing response error\", Logger.errors.SERVER_ERROR, {\n                            body: bodyify(body, ((response.headers) ? response.headers[\"content-type\"] : null)),\n                            error: error,\n                            requestBody: bodyify(options.body, flatHeaders[\"content-type\"]),\n                            requestMethod: options.method,\n                            url: url\n                        });\n                    }\n                }\n                runningTimeout.cancel();\n                // If we had a processFunc, it either returned a T or threw above.\n                // The \"body\" is now a Uint8Array.\n                return body;\n            }\n            return logger.throwError(\"failed response\", Logger.errors.SERVER_ERROR, {\n                requestBody: bodyify(options.body, flatHeaders[\"content-type\"]),\n                requestMethod: options.method,\n                url: url\n            });\n        });\n    })();\n    return Promise.race([runningTimeout.promise, runningFetch]);\n}\nexport function fetchJson(connection, json, processFunc) {\n    let processJsonFunc = (value, response) => {\n        let result = null;\n        if (value != null) {\n            try {\n                result = JSON.parse(toUtf8String(value));\n            }\n            catch (error) {\n                logger.throwError(\"invalid JSON\", Logger.errors.SERVER_ERROR, {\n                    body: value,\n                    error: error\n                });\n            }\n        }\n        if (processFunc) {\n            result = processFunc(result, response);\n        }\n        return result;\n    };\n    // If we have json to send, we must\n    // - add content-type of application/json (unless already overridden)\n    // - convert the json to bytes\n    let body = null;\n    if (json != null) {\n        body = toUtf8Bytes(json);\n        // Create a connection with the content-type set for JSON\n        const updated = (typeof (connection) === \"string\") ? ({ url: connection }) : shallowCopy(connection);\n        if (updated.headers) {\n            const hasContentType = (Object.keys(updated.headers).filter((k) => (k.toLowerCase() === \"content-type\")).length) !== 0;\n            if (!hasContentType) {\n                updated.headers = shallowCopy(updated.headers);\n                updated.headers[\"content-type\"] = \"application/json\";\n            }\n        }\n        else {\n            updated.headers = { \"content-type\": \"application/json\" };\n        }\n        connection = updated;\n    }\n    return _fetchData(connection, body, processJsonFunc);\n}\nexport function poll(func, options) {\n    if (!options) {\n        options = {};\n    }\n    options = shallowCopy(options);\n    if (options.floor == null) {\n        options.floor = 0;\n    }\n    if (options.ceiling == null) {\n        options.ceiling = 10000;\n    }\n    if (options.interval == null) {\n        options.interval = 250;\n    }\n    return new Promise(function (resolve, reject) {\n        let timer = null;\n        let done = false;\n        // Returns true if cancel was successful. Unsuccessful cancel means we're already done.\n        const cancel = () => {\n            if (done) {\n                return false;\n            }\n            done = true;\n            if (timer) {\n                clearTimeout(timer);\n            }\n            return true;\n        };\n        if (options.timeout) {\n            timer = setTimeout(() => {\n                if (cancel()) {\n                    reject(new Error(\"timeout\"));\n                }\n            }, options.timeout);\n        }\n        const retryLimit = options.retryLimit;\n        let attempt = 0;\n        function check() {\n            return func().then(function (result) {\n                // If we have a result, or are allowed null then we're done\n                if (result !== undefined) {\n                    if (cancel()) {\n                        resolve(result);\n                    }\n                }\n                else if (options.oncePoll) {\n                    options.oncePoll.once(\"poll\", check);\n                }\n                else if (options.onceBlock) {\n                    options.onceBlock.once(\"block\", check);\n                    // Otherwise, exponential back-off (up to 10s) our next request\n                }\n                else if (!done) {\n                    attempt++;\n                    if (attempt > retryLimit) {\n                        if (cancel()) {\n                            reject(new Error(\"retry limit reached\"));\n                        }\n                        return;\n                    }\n                    let timeout = options.interval * parseInt(String(Math.random() * Math.pow(2, attempt)));\n                    if (timeout < options.floor) {\n                        timeout = options.floor;\n                    }\n                    if (timeout > options.ceiling) {\n                        timeout = options.ceiling;\n                    }\n                    setTimeout(check, timeout);\n                }\n                return null;\n            }, function (error) {\n                if (cancel()) {\n                    reject(error);\n                }\n            });\n        }\n        check();\n    });\n}\n//# sourceMappingURL=index.js.map","'use strict'\nvar ALPHABET = 'qpzry9x8gf2tvdw0s3jn54khce6mua7l'\n\n// pre-compute lookup table\nvar ALPHABET_MAP = {}\nfor (var z = 0; z < ALPHABET.length; z++) {\n  var x = ALPHABET.charAt(z)\n\n  if (ALPHABET_MAP[x] !== undefined) throw new TypeError(x + ' is ambiguous')\n  ALPHABET_MAP[x] = z\n}\n\nfunction polymodStep (pre) {\n  var b = pre >> 25\n  return ((pre & 0x1FFFFFF) << 5) ^\n    (-((b >> 0) & 1) & 0x3b6a57b2) ^\n    (-((b >> 1) & 1) & 0x26508e6d) ^\n    (-((b >> 2) & 1) & 0x1ea119fa) ^\n    (-((b >> 3) & 1) & 0x3d4233dd) ^\n    (-((b >> 4) & 1) & 0x2a1462b3)\n}\n\nfunction prefixChk (prefix) {\n  var chk = 1\n  for (var i = 0; i < prefix.length; ++i) {\n    var c = prefix.charCodeAt(i)\n    if (c < 33 || c > 126) return 'Invalid prefix (' + prefix + ')'\n\n    chk = polymodStep(chk) ^ (c >> 5)\n  }\n  chk = polymodStep(chk)\n\n  for (i = 0; i < prefix.length; ++i) {\n    var v = prefix.charCodeAt(i)\n    chk = polymodStep(chk) ^ (v & 0x1f)\n  }\n  return chk\n}\n\nfunction encode (prefix, words, LIMIT) {\n  LIMIT = LIMIT || 90\n  if ((prefix.length + 7 + words.length) > LIMIT) throw new TypeError('Exceeds length limit')\n\n  prefix = prefix.toLowerCase()\n\n  // determine chk mod\n  var chk = prefixChk(prefix)\n  if (typeof chk === 'string') throw new Error(chk)\n\n  var result = prefix + '1'\n  for (var i = 0; i < words.length; ++i) {\n    var x = words[i]\n    if ((x >> 5) !== 0) throw new Error('Non 5-bit word')\n\n    chk = polymodStep(chk) ^ x\n    result += ALPHABET.charAt(x)\n  }\n\n  for (i = 0; i < 6; ++i) {\n    chk = polymodStep(chk)\n  }\n  chk ^= 1\n\n  for (i = 0; i < 6; ++i) {\n    var v = (chk >> ((5 - i) * 5)) & 0x1f\n    result += ALPHABET.charAt(v)\n  }\n\n  return result\n}\n\nfunction __decode (str, LIMIT) {\n  LIMIT = LIMIT || 90\n  if (str.length < 8) return str + ' too short'\n  if (str.length > LIMIT) return 'Exceeds length limit'\n\n  // don't allow mixed case\n  var lowered = str.toLowerCase()\n  var uppered = str.toUpperCase()\n  if (str !== lowered && str !== uppered) return 'Mixed-case string ' + str\n  str = lowered\n\n  var split = str.lastIndexOf('1')\n  if (split === -1) return 'No separator character for ' + str\n  if (split === 0) return 'Missing prefix for ' + str\n\n  var prefix = str.slice(0, split)\n  var wordChars = str.slice(split + 1)\n  if (wordChars.length < 6) return 'Data too short'\n\n  var chk = prefixChk(prefix)\n  if (typeof chk === 'string') return chk\n\n  var words = []\n  for (var i = 0; i < wordChars.length; ++i) {\n    var c = wordChars.charAt(i)\n    var v = ALPHABET_MAP[c]\n    if (v === undefined) return 'Unknown character ' + c\n    chk = polymodStep(chk) ^ v\n\n    // not in the checksum?\n    if (i + 6 >= wordChars.length) continue\n    words.push(v)\n  }\n\n  if (chk !== 1) return 'Invalid checksum for ' + str\n  return { prefix: prefix, words: words }\n}\n\nfunction decodeUnsafe () {\n  var res = __decode.apply(null, arguments)\n  if (typeof res === 'object') return res\n}\n\nfunction decode (str) {\n  var res = __decode.apply(null, arguments)\n  if (typeof res === 'object') return res\n\n  throw new Error(res)\n}\n\nfunction convert (data, inBits, outBits, pad) {\n  var value = 0\n  var bits = 0\n  var maxV = (1 << outBits) - 1\n\n  var result = []\n  for (var i = 0; i < data.length; ++i) {\n    value = (value << inBits) | data[i]\n    bits += inBits\n\n    while (bits >= outBits) {\n      bits -= outBits\n      result.push((value >> bits) & maxV)\n    }\n  }\n\n  if (pad) {\n    if (bits > 0) {\n      result.push((value << (outBits - bits)) & maxV)\n    }\n  } else {\n    if (bits >= inBits) return 'Excess padding'\n    if ((value << (outBits - bits)) & maxV) return 'Non-zero padding'\n  }\n\n  return result\n}\n\nfunction toWordsUnsafe (bytes) {\n  var res = convert(bytes, 8, 5, true)\n  if (Array.isArray(res)) return res\n}\n\nfunction toWords (bytes) {\n  var res = convert(bytes, 8, 5, true)\n  if (Array.isArray(res)) return res\n\n  throw new Error(res)\n}\n\nfunction fromWordsUnsafe (words) {\n  var res = convert(words, 5, 8, false)\n  if (Array.isArray(res)) return res\n}\n\nfunction fromWords (words) {\n  var res = convert(words, 5, 8, false)\n  if (Array.isArray(res)) return res\n\n  throw new Error(res)\n}\n\nmodule.exports = {\n  decodeUnsafe: decodeUnsafe,\n  decode: decode,\n  encode: encode,\n  toWordsUnsafe: toWordsUnsafe,\n  toWords: toWords,\n  fromWordsUnsafe: fromWordsUnsafe,\n  fromWords: fromWords\n}\n","export const version = \"providers/5.7.2\";\n//# sourceMappingURL=_version.js.map","\"use strict\";\nimport { getAddress, getContractAddress } from \"@ethersproject/address\";\nimport { BigNumber } from \"@ethersproject/bignumber\";\nimport { hexDataLength, hexDataSlice, hexValue, hexZeroPad, isHexString } from \"@ethersproject/bytes\";\nimport { AddressZero } from \"@ethersproject/constants\";\nimport { shallowCopy } from \"@ethersproject/properties\";\nimport { accessListify, parse as parseTransaction } from \"@ethersproject/transactions\";\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nconst logger = new Logger(version);\nexport class Formatter {\n    constructor() {\n        this.formats = this.getDefaultFormats();\n    }\n    getDefaultFormats() {\n        const formats = ({});\n        const address = this.address.bind(this);\n        const bigNumber = this.bigNumber.bind(this);\n        const blockTag = this.blockTag.bind(this);\n        const data = this.data.bind(this);\n        const hash = this.hash.bind(this);\n        const hex = this.hex.bind(this);\n        const number = this.number.bind(this);\n        const type = this.type.bind(this);\n        const strictData = (v) => { return this.data(v, true); };\n        formats.transaction = {\n            hash: hash,\n            type: type,\n            accessList: Formatter.allowNull(this.accessList.bind(this), null),\n            blockHash: Formatter.allowNull(hash, null),\n            blockNumber: Formatter.allowNull(number, null),\n            transactionIndex: Formatter.allowNull(number, null),\n            confirmations: Formatter.allowNull(number, null),\n            from: address,\n            // either (gasPrice) or (maxPriorityFeePerGas + maxFeePerGas)\n            // must be set\n            gasPrice: Formatter.allowNull(bigNumber),\n            maxPriorityFeePerGas: Formatter.allowNull(bigNumber),\n            maxFeePerGas: Formatter.allowNull(bigNumber),\n            gasLimit: bigNumber,\n            to: Formatter.allowNull(address, null),\n            value: bigNumber,\n            nonce: number,\n            data: data,\n            r: Formatter.allowNull(this.uint256),\n            s: Formatter.allowNull(this.uint256),\n            v: Formatter.allowNull(number),\n            creates: Formatter.allowNull(address, null),\n            raw: Formatter.allowNull(data),\n        };\n        formats.transactionRequest = {\n            from: Formatter.allowNull(address),\n            nonce: Formatter.allowNull(number),\n            gasLimit: Formatter.allowNull(bigNumber),\n            gasPrice: Formatter.allowNull(bigNumber),\n            maxPriorityFeePerGas: Formatter.allowNull(bigNumber),\n            maxFeePerGas: Formatter.allowNull(bigNumber),\n            to: Formatter.allowNull(address),\n            value: Formatter.allowNull(bigNumber),\n            data: Formatter.allowNull(strictData),\n            type: Formatter.allowNull(number),\n            accessList: Formatter.allowNull(this.accessList.bind(this), null),\n        };\n        formats.receiptLog = {\n            transactionIndex: number,\n            blockNumber: number,\n            transactionHash: hash,\n            address: address,\n            topics: Formatter.arrayOf(hash),\n            data: data,\n            logIndex: number,\n            blockHash: hash,\n        };\n        formats.receipt = {\n            to: Formatter.allowNull(this.address, null),\n            from: Formatter.allowNull(this.address, null),\n            contractAddress: Formatter.allowNull(address, null),\n            transactionIndex: number,\n            // should be allowNull(hash), but broken-EIP-658 support is handled in receipt\n            root: Formatter.allowNull(hex),\n            gasUsed: bigNumber,\n            logsBloom: Formatter.allowNull(data),\n            blockHash: hash,\n            transactionHash: hash,\n            logs: Formatter.arrayOf(this.receiptLog.bind(this)),\n            blockNumber: number,\n            confirmations: Formatter.allowNull(number, null),\n            cumulativeGasUsed: bigNumber,\n            effectiveGasPrice: Formatter.allowNull(bigNumber),\n            status: Formatter.allowNull(number),\n            type: type\n        };\n        formats.block = {\n            hash: Formatter.allowNull(hash),\n            parentHash: hash,\n            number: number,\n            timestamp: number,\n            nonce: Formatter.allowNull(hex),\n            difficulty: this.difficulty.bind(this),\n            gasLimit: bigNumber,\n            gasUsed: bigNumber,\n            miner: Formatter.allowNull(address),\n            extraData: data,\n            transactions: Formatter.allowNull(Formatter.arrayOf(hash)),\n            baseFeePerGas: Formatter.allowNull(bigNumber)\n        };\n        formats.blockWithTransactions = shallowCopy(formats.block);\n        formats.blockWithTransactions.transactions = Formatter.allowNull(Formatter.arrayOf(this.transactionResponse.bind(this)));\n        formats.filter = {\n            fromBlock: Formatter.allowNull(blockTag, undefined),\n            toBlock: Formatter.allowNull(blockTag, undefined),\n            blockHash: Formatter.allowNull(hash, undefined),\n            address: Formatter.allowNull(address, undefined),\n            topics: Formatter.allowNull(this.topics.bind(this), undefined),\n        };\n        formats.filterLog = {\n            blockNumber: Formatter.allowNull(number),\n            blockHash: Formatter.allowNull(hash),\n            transactionIndex: number,\n            removed: Formatter.allowNull(this.boolean.bind(this)),\n            address: address,\n            data: Formatter.allowFalsish(data, \"0x\"),\n            topics: Formatter.arrayOf(hash),\n            transactionHash: hash,\n            logIndex: number,\n        };\n        return formats;\n    }\n    accessList(accessList) {\n        return accessListify(accessList || []);\n    }\n    // Requires a BigNumberish that is within the IEEE754 safe integer range; returns a number\n    // Strict! Used on input.\n    number(number) {\n        if (number === \"0x\") {\n            return 0;\n        }\n        return BigNumber.from(number).toNumber();\n    }\n    type(number) {\n        if (number === \"0x\" || number == null) {\n            return 0;\n        }\n        return BigNumber.from(number).toNumber();\n    }\n    // Strict! Used on input.\n    bigNumber(value) {\n        return BigNumber.from(value);\n    }\n    // Requires a boolean, \"true\" or  \"false\"; returns a boolean\n    boolean(value) {\n        if (typeof (value) === \"boolean\") {\n            return value;\n        }\n        if (typeof (value) === \"string\") {\n            value = value.toLowerCase();\n            if (value === \"true\") {\n                return true;\n            }\n            if (value === \"false\") {\n                return false;\n            }\n        }\n        throw new Error(\"invalid boolean - \" + value);\n    }\n    hex(value, strict) {\n        if (typeof (value) === \"string\") {\n            if (!strict && value.substring(0, 2) !== \"0x\") {\n                value = \"0x\" + value;\n            }\n            if (isHexString(value)) {\n                return value.toLowerCase();\n            }\n        }\n        return logger.throwArgumentError(\"invalid hash\", \"value\", value);\n    }\n    data(value, strict) {\n        const result = this.hex(value, strict);\n        if ((result.length % 2) !== 0) {\n            throw new Error(\"invalid data; odd-length - \" + value);\n        }\n        return result;\n    }\n    // Requires an address\n    // Strict! Used on input.\n    address(value) {\n        return getAddress(value);\n    }\n    callAddress(value) {\n        if (!isHexString(value, 32)) {\n            return null;\n        }\n        const address = getAddress(hexDataSlice(value, 12));\n        return (address === AddressZero) ? null : address;\n    }\n    contractAddress(value) {\n        return getContractAddress(value);\n    }\n    // Strict! Used on input.\n    blockTag(blockTag) {\n        if (blockTag == null) {\n            return \"latest\";\n        }\n        if (blockTag === \"earliest\") {\n            return \"0x0\";\n        }\n        switch (blockTag) {\n            case \"earliest\": return \"0x0\";\n            case \"latest\":\n            case \"pending\":\n            case \"safe\":\n            case \"finalized\":\n                return blockTag;\n        }\n        if (typeof (blockTag) === \"number\" || isHexString(blockTag)) {\n            return hexValue(blockTag);\n        }\n        throw new Error(\"invalid blockTag\");\n    }\n    // Requires a hash, optionally requires 0x prefix; returns prefixed lowercase hash.\n    hash(value, strict) {\n        const result = this.hex(value, strict);\n        if (hexDataLength(result) !== 32) {\n            return logger.throwArgumentError(\"invalid hash\", \"value\", value);\n        }\n        return result;\n    }\n    // Returns the difficulty as a number, or if too large (i.e. PoA network) null\n    difficulty(value) {\n        if (value == null) {\n            return null;\n        }\n        const v = BigNumber.from(value);\n        try {\n            return v.toNumber();\n        }\n        catch (error) { }\n        return null;\n    }\n    uint256(value) {\n        if (!isHexString(value)) {\n            throw new Error(\"invalid uint256\");\n        }\n        return hexZeroPad(value, 32);\n    }\n    _block(value, format) {\n        if (value.author != null && value.miner == null) {\n            value.miner = value.author;\n        }\n        // The difficulty may need to come from _difficulty in recursed blocks\n        const difficulty = (value._difficulty != null) ? value._difficulty : value.difficulty;\n        const result = Formatter.check(format, value);\n        result._difficulty = ((difficulty == null) ? null : BigNumber.from(difficulty));\n        return result;\n    }\n    block(value) {\n        return this._block(value, this.formats.block);\n    }\n    blockWithTransactions(value) {\n        return this._block(value, this.formats.blockWithTransactions);\n    }\n    // Strict! Used on input.\n    transactionRequest(value) {\n        return Formatter.check(this.formats.transactionRequest, value);\n    }\n    transactionResponse(transaction) {\n        // Rename gas to gasLimit\n        if (transaction.gas != null && transaction.gasLimit == null) {\n            transaction.gasLimit = transaction.gas;\n        }\n        // Some clients (TestRPC) do strange things like return 0x0 for the\n        // 0 address; correct this to be a real address\n        if (transaction.to && BigNumber.from(transaction.to).isZero()) {\n            transaction.to = \"0x0000000000000000000000000000000000000000\";\n        }\n        // Rename input to data\n        if (transaction.input != null && transaction.data == null) {\n            transaction.data = transaction.input;\n        }\n        // If to and creates are empty, populate the creates from the transaction\n        if (transaction.to == null && transaction.creates == null) {\n            transaction.creates = this.contractAddress(transaction);\n        }\n        if ((transaction.type === 1 || transaction.type === 2) && transaction.accessList == null) {\n            transaction.accessList = [];\n        }\n        const result = Formatter.check(this.formats.transaction, transaction);\n        if (transaction.chainId != null) {\n            let chainId = transaction.chainId;\n            if (isHexString(chainId)) {\n                chainId = BigNumber.from(chainId).toNumber();\n            }\n            result.chainId = chainId;\n        }\n        else {\n            let chainId = transaction.networkId;\n            // geth-etc returns chainId\n            if (chainId == null && result.v == null) {\n                chainId = transaction.chainId;\n            }\n            if (isHexString(chainId)) {\n                chainId = BigNumber.from(chainId).toNumber();\n            }\n            if (typeof (chainId) !== \"number\" && result.v != null) {\n                chainId = (result.v - 35) / 2;\n                if (chainId < 0) {\n                    chainId = 0;\n                }\n                chainId = parseInt(chainId);\n            }\n            if (typeof (chainId) !== \"number\") {\n                chainId = 0;\n            }\n            result.chainId = chainId;\n        }\n        // 0x0000... should actually be null\n        if (result.blockHash && result.blockHash.replace(/0/g, \"\") === \"x\") {\n            result.blockHash = null;\n        }\n        return result;\n    }\n    transaction(value) {\n        return parseTransaction(value);\n    }\n    receiptLog(value) {\n        return Formatter.check(this.formats.receiptLog, value);\n    }\n    receipt(value) {\n        const result = Formatter.check(this.formats.receipt, value);\n        // RSK incorrectly implemented EIP-658, so we munge things a bit here for it\n        if (result.root != null) {\n            if (result.root.length <= 4) {\n                // Could be 0x00, 0x0, 0x01 or 0x1\n                const value = BigNumber.from(result.root).toNumber();\n                if (value === 0 || value === 1) {\n                    // Make sure if both are specified, they match\n                    if (result.status != null && (result.status !== value)) {\n                        logger.throwArgumentError(\"alt-root-status/status mismatch\", \"value\", { root: result.root, status: result.status });\n                    }\n                    result.status = value;\n                    delete result.root;\n                }\n                else {\n                    logger.throwArgumentError(\"invalid alt-root-status\", \"value.root\", result.root);\n                }\n            }\n            else if (result.root.length !== 66) {\n                // Must be a valid bytes32\n                logger.throwArgumentError(\"invalid root hash\", \"value.root\", result.root);\n            }\n        }\n        if (result.status != null) {\n            result.byzantium = true;\n        }\n        return result;\n    }\n    topics(value) {\n        if (Array.isArray(value)) {\n            return value.map((v) => this.topics(v));\n        }\n        else if (value != null) {\n            return this.hash(value, true);\n        }\n        return null;\n    }\n    filter(value) {\n        return Formatter.check(this.formats.filter, value);\n    }\n    filterLog(value) {\n        return Formatter.check(this.formats.filterLog, value);\n    }\n    static check(format, object) {\n        const result = {};\n        for (const key in format) {\n            try {\n                const value = format[key](object[key]);\n                if (value !== undefined) {\n                    result[key] = value;\n                }\n            }\n            catch (error) {\n                error.checkKey = key;\n                error.checkValue = object[key];\n                throw error;\n            }\n        }\n        return result;\n    }\n    // if value is null-ish, nullValue is returned\n    static allowNull(format, nullValue) {\n        return (function (value) {\n            if (value == null) {\n                return nullValue;\n            }\n            return format(value);\n        });\n    }\n    // If value is false-ish, replaceValue is returned\n    static allowFalsish(format, replaceValue) {\n        return (function (value) {\n            if (!value) {\n                return replaceValue;\n            }\n            return format(value);\n        });\n    }\n    // Requires an Array satisfying check\n    static arrayOf(format) {\n        return (function (array) {\n            if (!Array.isArray(array)) {\n                throw new Error(\"not an array\");\n            }\n            const result = [];\n            array.forEach(function (value) {\n                result.push(format(value));\n            });\n            return result;\n        });\n    }\n}\nexport function isCommunityResourcable(value) {\n    return (value && typeof (value.isCommunityResource) === \"function\");\n}\nexport function isCommunityResource(value) {\n    return (isCommunityResourcable(value) && value.isCommunityResource());\n}\n// Show the throttle message only once\nlet throttleMessage = false;\nexport function showThrottleMessage() {\n    if (throttleMessage) {\n        return;\n    }\n    throttleMessage = true;\n    console.log(\"========= NOTICE =========\");\n    console.log(\"Request-Rate Exceeded  (this message will not be repeated)\");\n    console.log(\"\");\n    console.log(\"The default API keys for each service are provided as a highly-throttled,\");\n    console.log(\"community resource for low-traffic projects and early prototyping.\");\n    console.log(\"\");\n    console.log(\"While your application will continue to function, we highly recommended\");\n    console.log(\"signing up for your own API keys to improve performance, increase your\");\n    console.log(\"request rate/limit and enable other perks, such as metrics and advanced APIs.\");\n    console.log(\"\");\n    console.log(\"For more details: https:/\\/docs.ethers.io/api-keys/\");\n    console.log(\"==========================\");\n}\n//# sourceMappingURL=formatter.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ForkEvent, Provider } from \"@ethersproject/abstract-provider\";\nimport { encode as base64Encode } from \"@ethersproject/base64\";\nimport { Base58 } from \"@ethersproject/basex\";\nimport { BigNumber } from \"@ethersproject/bignumber\";\nimport { arrayify, concat, hexConcat, hexDataLength, hexDataSlice, hexlify, hexValue, hexZeroPad, isHexString } from \"@ethersproject/bytes\";\nimport { HashZero } from \"@ethersproject/constants\";\nimport { dnsEncode, namehash } from \"@ethersproject/hash\";\nimport { getNetwork } from \"@ethersproject/networks\";\nimport { defineReadOnly, getStatic, resolveProperties } from \"@ethersproject/properties\";\nimport { sha256 } from \"@ethersproject/sha2\";\nimport { toUtf8Bytes, toUtf8String } from \"@ethersproject/strings\";\nimport { fetchJson, poll } from \"@ethersproject/web\";\nimport bech32 from \"bech32\";\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nconst logger = new Logger(version);\nimport { Formatter } from \"./formatter\";\nconst MAX_CCIP_REDIRECTS = 10;\n//////////////////////////////\n// Event Serializeing\nfunction checkTopic(topic) {\n    if (topic == null) {\n        return \"null\";\n    }\n    if (hexDataLength(topic) !== 32) {\n        logger.throwArgumentError(\"invalid topic\", \"topic\", topic);\n    }\n    return topic.toLowerCase();\n}\nfunction serializeTopics(topics) {\n    // Remove trailing null AND-topics; they are redundant\n    topics = topics.slice();\n    while (topics.length > 0 && topics[topics.length - 1] == null) {\n        topics.pop();\n    }\n    return topics.map((topic) => {\n        if (Array.isArray(topic)) {\n            // Only track unique OR-topics\n            const unique = {};\n            topic.forEach((topic) => {\n                unique[checkTopic(topic)] = true;\n            });\n            // The order of OR-topics does not matter\n            const sorted = Object.keys(unique);\n            sorted.sort();\n            return sorted.join(\"|\");\n        }\n        else {\n            return checkTopic(topic);\n        }\n    }).join(\"&\");\n}\nfunction deserializeTopics(data) {\n    if (data === \"\") {\n        return [];\n    }\n    return data.split(/&/g).map((topic) => {\n        if (topic === \"\") {\n            return [];\n        }\n        const comps = topic.split(\"|\").map((topic) => {\n            return ((topic === \"null\") ? null : topic);\n        });\n        return ((comps.length === 1) ? comps[0] : comps);\n    });\n}\nfunction getEventTag(eventName) {\n    if (typeof (eventName) === \"string\") {\n        eventName = eventName.toLowerCase();\n        if (hexDataLength(eventName) === 32) {\n            return \"tx:\" + eventName;\n        }\n        if (eventName.indexOf(\":\") === -1) {\n            return eventName;\n        }\n    }\n    else if (Array.isArray(eventName)) {\n        return \"filter:*:\" + serializeTopics(eventName);\n    }\n    else if (ForkEvent.isForkEvent(eventName)) {\n        logger.warn(\"not implemented\");\n        throw new Error(\"not implemented\");\n    }\n    else if (eventName && typeof (eventName) === \"object\") {\n        return \"filter:\" + (eventName.address || \"*\") + \":\" + serializeTopics(eventName.topics || []);\n    }\n    throw new Error(\"invalid event - \" + eventName);\n}\n//////////////////////////////\n// Helper Object\nfunction getTime() {\n    return (new Date()).getTime();\n}\nfunction stall(duration) {\n    return new Promise((resolve) => {\n        setTimeout(resolve, duration);\n    });\n}\n//////////////////////////////\n// Provider Object\n/**\n *  EventType\n *   - \"block\"\n *   - \"poll\"\n *   - \"didPoll\"\n *   - \"pending\"\n *   - \"error\"\n *   - \"network\"\n *   - filter\n *   - topics array\n *   - transaction hash\n */\nconst PollableEvents = [\"block\", \"network\", \"pending\", \"poll\"];\nexport class Event {\n    constructor(tag, listener, once) {\n        defineReadOnly(this, \"tag\", tag);\n        defineReadOnly(this, \"listener\", listener);\n        defineReadOnly(this, \"once\", once);\n        this._lastBlockNumber = -2;\n        this._inflight = false;\n    }\n    get event() {\n        switch (this.type) {\n            case \"tx\":\n                return this.hash;\n            case \"filter\":\n                return this.filter;\n        }\n        return this.tag;\n    }\n    get type() {\n        return this.tag.split(\":\")[0];\n    }\n    get hash() {\n        const comps = this.tag.split(\":\");\n        if (comps[0] !== \"tx\") {\n            return null;\n        }\n        return comps[1];\n    }\n    get filter() {\n        const comps = this.tag.split(\":\");\n        if (comps[0] !== \"filter\") {\n            return null;\n        }\n        const address = comps[1];\n        const topics = deserializeTopics(comps[2]);\n        const filter = {};\n        if (topics.length > 0) {\n            filter.topics = topics;\n        }\n        if (address && address !== \"*\") {\n            filter.address = address;\n        }\n        return filter;\n    }\n    pollable() {\n        return (this.tag.indexOf(\":\") >= 0 || PollableEvents.indexOf(this.tag) >= 0);\n    }\n}\n;\n// https://github.com/satoshilabs/slips/blob/master/slip-0044.md\nconst coinInfos = {\n    \"0\": { symbol: \"btc\", p2pkh: 0x00, p2sh: 0x05, prefix: \"bc\" },\n    \"2\": { symbol: \"ltc\", p2pkh: 0x30, p2sh: 0x32, prefix: \"ltc\" },\n    \"3\": { symbol: \"doge\", p2pkh: 0x1e, p2sh: 0x16 },\n    \"60\": { symbol: \"eth\", ilk: \"eth\" },\n    \"61\": { symbol: \"etc\", ilk: \"eth\" },\n    \"700\": { symbol: \"xdai\", ilk: \"eth\" },\n};\nfunction bytes32ify(value) {\n    return hexZeroPad(BigNumber.from(value).toHexString(), 32);\n}\n// Compute the Base58Check encoded data (checksum is first 4 bytes of sha256d)\nfunction base58Encode(data) {\n    return Base58.encode(concat([data, hexDataSlice(sha256(sha256(data)), 0, 4)]));\n}\nconst matcherIpfs = new RegExp(\"^(ipfs):/\\/(.*)$\", \"i\");\nconst matchers = [\n    new RegExp(\"^(https):/\\/(.*)$\", \"i\"),\n    new RegExp(\"^(data):(.*)$\", \"i\"),\n    matcherIpfs,\n    new RegExp(\"^eip155:[0-9]+/(erc[0-9]+):(.*)$\", \"i\"),\n];\nfunction _parseString(result, start) {\n    try {\n        return toUtf8String(_parseBytes(result, start));\n    }\n    catch (error) { }\n    return null;\n}\nfunction _parseBytes(result, start) {\n    if (result === \"0x\") {\n        return null;\n    }\n    const offset = BigNumber.from(hexDataSlice(result, start, start + 32)).toNumber();\n    const length = BigNumber.from(hexDataSlice(result, offset, offset + 32)).toNumber();\n    return hexDataSlice(result, offset + 32, offset + 32 + length);\n}\n// Trim off the ipfs:// prefix and return the default gateway URL\nfunction getIpfsLink(link) {\n    if (link.match(/^ipfs:\\/\\/ipfs\\//i)) {\n        link = link.substring(12);\n    }\n    else if (link.match(/^ipfs:\\/\\//i)) {\n        link = link.substring(7);\n    }\n    else {\n        logger.throwArgumentError(\"unsupported IPFS format\", \"link\", link);\n    }\n    return `https:/\\/gateway.ipfs.io/ipfs/${link}`;\n}\nfunction numPad(value) {\n    const result = arrayify(value);\n    if (result.length > 32) {\n        throw new Error(\"internal; should not happen\");\n    }\n    const padded = new Uint8Array(32);\n    padded.set(result, 32 - result.length);\n    return padded;\n}\nfunction bytesPad(value) {\n    if ((value.length % 32) === 0) {\n        return value;\n    }\n    const result = new Uint8Array(Math.ceil(value.length / 32) * 32);\n    result.set(value);\n    return result;\n}\n// ABI Encodes a series of (bytes, bytes, ...)\nfunction encodeBytes(datas) {\n    const result = [];\n    let byteCount = 0;\n    // Add place-holders for pointers as we add items\n    for (let i = 0; i < datas.length; i++) {\n        result.push(null);\n        byteCount += 32;\n    }\n    for (let i = 0; i < datas.length; i++) {\n        const data = arrayify(datas[i]);\n        // Update the bytes offset\n        result[i] = numPad(byteCount);\n        // The length and padded value of data\n        result.push(numPad(data.length));\n        result.push(bytesPad(data));\n        byteCount += 32 + Math.ceil(data.length / 32) * 32;\n    }\n    return hexConcat(result);\n}\nexport class Resolver {\n    // The resolvedAddress is only for creating a ReverseLookup resolver\n    constructor(provider, address, name, resolvedAddress) {\n        defineReadOnly(this, \"provider\", provider);\n        defineReadOnly(this, \"name\", name);\n        defineReadOnly(this, \"address\", provider.formatter.address(address));\n        defineReadOnly(this, \"_resolvedAddress\", resolvedAddress);\n    }\n    supportsWildcard() {\n        if (!this._supportsEip2544) {\n            // supportsInterface(bytes4 = selector(\"resolve(bytes,bytes)\"))\n            this._supportsEip2544 = this.provider.call({\n                to: this.address,\n                data: \"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000\"\n            }).then((result) => {\n                return BigNumber.from(result).eq(1);\n            }).catch((error) => {\n                if (error.code === Logger.errors.CALL_EXCEPTION) {\n                    return false;\n                }\n                // Rethrow the error: link is down, etc. Let future attempts retry.\n                this._supportsEip2544 = null;\n                throw error;\n            });\n        }\n        return this._supportsEip2544;\n    }\n    _fetch(selector, parameters) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // e.g. keccak256(\"addr(bytes32,uint256)\")\n            const tx = {\n                to: this.address,\n                ccipReadEnabled: true,\n                data: hexConcat([selector, namehash(this.name), (parameters || \"0x\")])\n            };\n            // Wildcard support; use EIP-2544 to resolve the request\n            let parseBytes = false;\n            if (yield this.supportsWildcard()) {\n                parseBytes = true;\n                // selector(\"resolve(bytes,bytes)\")\n                tx.data = hexConcat([\"0x9061b923\", encodeBytes([dnsEncode(this.name), tx.data])]);\n            }\n            try {\n                let result = yield this.provider.call(tx);\n                if ((arrayify(result).length % 32) === 4) {\n                    logger.throwError(\"resolver threw error\", Logger.errors.CALL_EXCEPTION, {\n                        transaction: tx, data: result\n                    });\n                }\n                if (parseBytes) {\n                    result = _parseBytes(result, 0);\n                }\n                return result;\n            }\n            catch (error) {\n                if (error.code === Logger.errors.CALL_EXCEPTION) {\n                    return null;\n                }\n                throw error;\n            }\n        });\n    }\n    _fetchBytes(selector, parameters) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield this._fetch(selector, parameters);\n            if (result != null) {\n                return _parseBytes(result, 0);\n            }\n            return null;\n        });\n    }\n    _getAddress(coinType, hexBytes) {\n        const coinInfo = coinInfos[String(coinType)];\n        if (coinInfo == null) {\n            logger.throwError(`unsupported coin type: ${coinType}`, Logger.errors.UNSUPPORTED_OPERATION, {\n                operation: `getAddress(${coinType})`\n            });\n        }\n        if (coinInfo.ilk === \"eth\") {\n            return this.provider.formatter.address(hexBytes);\n        }\n        const bytes = arrayify(hexBytes);\n        // P2PKH: OP_DUP OP_HASH160 <pubKeyHash> OP_EQUALVERIFY OP_CHECKSIG\n        if (coinInfo.p2pkh != null) {\n            const p2pkh = hexBytes.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);\n            if (p2pkh) {\n                const length = parseInt(p2pkh[1], 16);\n                if (p2pkh[2].length === length * 2 && length >= 1 && length <= 75) {\n                    return base58Encode(concat([[coinInfo.p2pkh], (\"0x\" + p2pkh[2])]));\n                }\n            }\n        }\n        // P2SH: OP_HASH160 <scriptHash> OP_EQUAL\n        if (coinInfo.p2sh != null) {\n            const p2sh = hexBytes.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);\n            if (p2sh) {\n                const length = parseInt(p2sh[1], 16);\n                if (p2sh[2].length === length * 2 && length >= 1 && length <= 75) {\n                    return base58Encode(concat([[coinInfo.p2sh], (\"0x\" + p2sh[2])]));\n                }\n            }\n        }\n        // Bech32\n        if (coinInfo.prefix != null) {\n            const length = bytes[1];\n            // https://github.com/bitcoin/bips/blob/master/bip-0141.mediawiki#witness-program\n            let version = bytes[0];\n            if (version === 0x00) {\n                if (length !== 20 && length !== 32) {\n                    version = -1;\n                }\n            }\n            else {\n                version = -1;\n            }\n            if (version >= 0 && bytes.length === 2 + length && length >= 1 && length <= 75) {\n                const words = bech32.toWords(bytes.slice(2));\n                words.unshift(version);\n                return bech32.encode(coinInfo.prefix, words);\n            }\n        }\n        return null;\n    }\n    getAddress(coinType) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (coinType == null) {\n                coinType = 60;\n            }\n            // If Ethereum, use the standard `addr(bytes32)`\n            if (coinType === 60) {\n                try {\n                    // keccak256(\"addr(bytes32)\")\n                    const result = yield this._fetch(\"0x3b3b57de\");\n                    // No address\n                    if (result === \"0x\" || result === HashZero) {\n                        return null;\n                    }\n                    return this.provider.formatter.callAddress(result);\n                }\n                catch (error) {\n                    if (error.code === Logger.errors.CALL_EXCEPTION) {\n                        return null;\n                    }\n                    throw error;\n                }\n            }\n            // keccak256(\"addr(bytes32,uint256\")\n            const hexBytes = yield this._fetchBytes(\"0xf1cb7e06\", bytes32ify(coinType));\n            // No address\n            if (hexBytes == null || hexBytes === \"0x\") {\n                return null;\n            }\n            // Compute the address\n            const address = this._getAddress(coinType, hexBytes);\n            if (address == null) {\n                logger.throwError(`invalid or unsupported coin data`, Logger.errors.UNSUPPORTED_OPERATION, {\n                    operation: `getAddress(${coinType})`,\n                    coinType: coinType,\n                    data: hexBytes\n                });\n            }\n            return address;\n        });\n    }\n    getAvatar() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const linkage = [{ type: \"name\", content: this.name }];\n            try {\n                // test data for ricmoo.eth\n                //const avatar = \"eip155:1/erc721:0x265385c7f4132228A0d54EB1A9e7460b91c0cC68/29233\";\n                const avatar = yield this.getText(\"avatar\");\n                if (avatar == null) {\n                    return null;\n                }\n                for (let i = 0; i < matchers.length; i++) {\n                    const match = avatar.match(matchers[i]);\n                    if (match == null) {\n                        continue;\n                    }\n                    const scheme = match[1].toLowerCase();\n                    switch (scheme) {\n                        case \"https\":\n                            linkage.push({ type: \"url\", content: avatar });\n                            return { linkage, url: avatar };\n                        case \"data\":\n                            linkage.push({ type: \"data\", content: avatar });\n                            return { linkage, url: avatar };\n                        case \"ipfs\":\n                            linkage.push({ type: \"ipfs\", content: avatar });\n                            return { linkage, url: getIpfsLink(avatar) };\n                        case \"erc721\":\n                        case \"erc1155\": {\n                            // Depending on the ERC type, use tokenURI(uint256) or url(uint256)\n                            const selector = (scheme === \"erc721\") ? \"0xc87b56dd\" : \"0x0e89341c\";\n                            linkage.push({ type: scheme, content: avatar });\n                            // The owner of this name\n                            const owner = (this._resolvedAddress || (yield this.getAddress()));\n                            const comps = (match[2] || \"\").split(\"/\");\n                            if (comps.length !== 2) {\n                                return null;\n                            }\n                            const addr = yield this.provider.formatter.address(comps[0]);\n                            const tokenId = hexZeroPad(BigNumber.from(comps[1]).toHexString(), 32);\n                            // Check that this account owns the token\n                            if (scheme === \"erc721\") {\n                                // ownerOf(uint256 tokenId)\n                                const tokenOwner = this.provider.formatter.callAddress(yield this.provider.call({\n                                    to: addr, data: hexConcat([\"0x6352211e\", tokenId])\n                                }));\n                                if (owner !== tokenOwner) {\n                                    return null;\n                                }\n                                linkage.push({ type: \"owner\", content: tokenOwner });\n                            }\n                            else if (scheme === \"erc1155\") {\n                                // balanceOf(address owner, uint256 tokenId)\n                                const balance = BigNumber.from(yield this.provider.call({\n                                    to: addr, data: hexConcat([\"0x00fdd58e\", hexZeroPad(owner, 32), tokenId])\n                                }));\n                                if (balance.isZero()) {\n                                    return null;\n                                }\n                                linkage.push({ type: \"balance\", content: balance.toString() });\n                            }\n                            // Call the token contract for the metadata URL\n                            const tx = {\n                                to: this.provider.formatter.address(comps[0]),\n                                data: hexConcat([selector, tokenId])\n                            };\n                            let metadataUrl = _parseString(yield this.provider.call(tx), 0);\n                            if (metadataUrl == null) {\n                                return null;\n                            }\n                            linkage.push({ type: \"metadata-url-base\", content: metadataUrl });\n                            // ERC-1155 allows a generic {id} in the URL\n                            if (scheme === \"erc1155\") {\n                                metadataUrl = metadataUrl.replace(\"{id}\", tokenId.substring(2));\n                                linkage.push({ type: \"metadata-url-expanded\", content: metadataUrl });\n                            }\n                            // Transform IPFS metadata links\n                            if (metadataUrl.match(/^ipfs:/i)) {\n                                metadataUrl = getIpfsLink(metadataUrl);\n                            }\n                            linkage.push({ type: \"metadata-url\", content: metadataUrl });\n                            // Get the token metadata\n                            const metadata = yield fetchJson(metadataUrl);\n                            if (!metadata) {\n                                return null;\n                            }\n                            linkage.push({ type: \"metadata\", content: JSON.stringify(metadata) });\n                            // Pull the image URL out\n                            let imageUrl = metadata.image;\n                            if (typeof (imageUrl) !== \"string\") {\n                                return null;\n                            }\n                            if (imageUrl.match(/^(https:\\/\\/|data:)/i)) {\n                                // Allow\n                            }\n                            else {\n                                // Transform IPFS link to gateway\n                                const ipfs = imageUrl.match(matcherIpfs);\n                                if (ipfs == null) {\n                                    return null;\n                                }\n                                linkage.push({ type: \"url-ipfs\", content: imageUrl });\n                                imageUrl = getIpfsLink(imageUrl);\n                            }\n                            linkage.push({ type: \"url\", content: imageUrl });\n                            return { linkage, url: imageUrl };\n                        }\n                    }\n                }\n            }\n            catch (error) { }\n            return null;\n        });\n    }\n    getContentHash() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // keccak256(\"contenthash()\")\n            const hexBytes = yield this._fetchBytes(\"0xbc1c58d1\");\n            // No contenthash\n            if (hexBytes == null || hexBytes === \"0x\") {\n                return null;\n            }\n            // IPFS (CID: 1, Type: DAG-PB)\n            const ipfs = hexBytes.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);\n            if (ipfs) {\n                const length = parseInt(ipfs[3], 16);\n                if (ipfs[4].length === length * 2) {\n                    return \"ipfs:/\\/\" + Base58.encode(\"0x\" + ipfs[1]);\n                }\n            }\n            // IPNS (CID: 1, Type: libp2p-key)\n            const ipns = hexBytes.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);\n            if (ipns) {\n                const length = parseInt(ipns[3], 16);\n                if (ipns[4].length === length * 2) {\n                    return \"ipns:/\\/\" + Base58.encode(\"0x\" + ipns[1]);\n                }\n            }\n            // Swarm (CID: 1, Type: swarm-manifest; hash/length hard-coded to keccak256/32)\n            const swarm = hexBytes.match(/^0xe40101fa011b20([0-9a-f]*)$/);\n            if (swarm) {\n                if (swarm[1].length === (32 * 2)) {\n                    return \"bzz:/\\/\" + swarm[1];\n                }\n            }\n            const skynet = hexBytes.match(/^0x90b2c605([0-9a-f]*)$/);\n            if (skynet) {\n                if (skynet[1].length === (34 * 2)) {\n                    // URL Safe base64; https://datatracker.ietf.org/doc/html/rfc4648#section-5\n                    const urlSafe = { \"=\": \"\", \"+\": \"-\", \"/\": \"_\" };\n                    const hash = base64Encode(\"0x\" + skynet[1]).replace(/[=+\\/]/g, (a) => (urlSafe[a]));\n                    return \"sia:/\\/\" + hash;\n                }\n            }\n            return logger.throwError(`invalid or unsupported content hash data`, Logger.errors.UNSUPPORTED_OPERATION, {\n                operation: \"getContentHash()\",\n                data: hexBytes\n            });\n        });\n    }\n    getText(key) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // The key encoded as parameter to fetchBytes\n            let keyBytes = toUtf8Bytes(key);\n            // The nodehash consumes the first slot, so the string pointer targets\n            // offset 64, with the length at offset 64 and data starting at offset 96\n            keyBytes = concat([bytes32ify(64), bytes32ify(keyBytes.length), keyBytes]);\n            // Pad to word-size (32 bytes)\n            if ((keyBytes.length % 32) !== 0) {\n                keyBytes = concat([keyBytes, hexZeroPad(\"0x\", 32 - (key.length % 32))]);\n            }\n            const hexBytes = yield this._fetchBytes(\"0x59d1d43c\", hexlify(keyBytes));\n            if (hexBytes == null || hexBytes === \"0x\") {\n                return null;\n            }\n            return toUtf8String(hexBytes);\n        });\n    }\n}\nlet defaultFormatter = null;\nlet nextPollId = 1;\nexport class BaseProvider extends Provider {\n    /**\n     *  ready\n     *\n     *  A Promise<Network> that resolves only once the provider is ready.\n     *\n     *  Sub-classes that call the super with a network without a chainId\n     *  MUST set this. Standard named networks have a known chainId.\n     *\n     */\n    constructor(network) {\n        super();\n        // Events being listened to\n        this._events = [];\n        this._emitted = { block: -2 };\n        this.disableCcipRead = false;\n        this.formatter = new.target.getFormatter();\n        // If network is any, this Provider allows the underlying\n        // network to change dynamically, and we auto-detect the\n        // current network\n        defineReadOnly(this, \"anyNetwork\", (network === \"any\"));\n        if (this.anyNetwork) {\n            network = this.detectNetwork();\n        }\n        if (network instanceof Promise) {\n            this._networkPromise = network;\n            // Squash any \"unhandled promise\" errors; that do not need to be handled\n            network.catch((error) => { });\n            // Trigger initial network setting (async)\n            this._ready().catch((error) => { });\n        }\n        else {\n            const knownNetwork = getStatic(new.target, \"getNetwork\")(network);\n            if (knownNetwork) {\n                defineReadOnly(this, \"_network\", knownNetwork);\n                this.emit(\"network\", knownNetwork, null);\n            }\n            else {\n                logger.throwArgumentError(\"invalid network\", \"network\", network);\n            }\n        }\n        this._maxInternalBlockNumber = -1024;\n        this._lastBlockNumber = -2;\n        this._maxFilterBlockRange = 10;\n        this._pollingInterval = 4000;\n        this._fastQueryDate = 0;\n    }\n    _ready() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._network == null) {\n                let network = null;\n                if (this._networkPromise) {\n                    try {\n                        network = yield this._networkPromise;\n                    }\n                    catch (error) { }\n                }\n                // Try the Provider's network detection (this MUST throw if it cannot)\n                if (network == null) {\n                    network = yield this.detectNetwork();\n                }\n                // This should never happen; every Provider sub-class should have\n                // suggested a network by here (or have thrown).\n                if (!network) {\n                    logger.throwError(\"no network detected\", Logger.errors.UNKNOWN_ERROR, {});\n                }\n                // Possible this call stacked so do not call defineReadOnly again\n                if (this._network == null) {\n                    if (this.anyNetwork) {\n                        this._network = network;\n                    }\n                    else {\n                        defineReadOnly(this, \"_network\", network);\n                    }\n                    this.emit(\"network\", network, null);\n                }\n            }\n            return this._network;\n        });\n    }\n    // This will always return the most recently established network.\n    // For \"any\", this can change (a \"network\" event is emitted before\n    // any change is reflected); otherwise this cannot change\n    get ready() {\n        return poll(() => {\n            return this._ready().then((network) => {\n                return network;\n            }, (error) => {\n                // If the network isn't running yet, we will wait\n                if (error.code === Logger.errors.NETWORK_ERROR && error.event === \"noNetwork\") {\n                    return undefined;\n                }\n                throw error;\n            });\n        });\n    }\n    // @TODO: Remove this and just create a singleton formatter\n    static getFormatter() {\n        if (defaultFormatter == null) {\n            defaultFormatter = new Formatter();\n        }\n        return defaultFormatter;\n    }\n    // @TODO: Remove this and just use getNetwork\n    static getNetwork(network) {\n        return getNetwork((network == null) ? \"homestead\" : network);\n    }\n    ccipReadFetch(tx, calldata, urls) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.disableCcipRead || urls.length === 0) {\n                return null;\n            }\n            const sender = tx.to.toLowerCase();\n            const data = calldata.toLowerCase();\n            const errorMessages = [];\n            for (let i = 0; i < urls.length; i++) {\n                const url = urls[i];\n                // URL expansion\n                const href = url.replace(\"{sender}\", sender).replace(\"{data}\", data);\n                // If no {data} is present, use POST; otherwise GET\n                const json = (url.indexOf(\"{data}\") >= 0) ? null : JSON.stringify({ data, sender });\n                const result = yield fetchJson({ url: href, errorPassThrough: true }, json, (value, response) => {\n                    value.status = response.statusCode;\n                    return value;\n                });\n                if (result.data) {\n                    return result.data;\n                }\n                const errorMessage = (result.message || \"unknown error\");\n                // 4xx indicates the result is not present; stop\n                if (result.status >= 400 && result.status < 500) {\n                    return logger.throwError(`response not found during CCIP fetch: ${errorMessage}`, Logger.errors.SERVER_ERROR, { url, errorMessage });\n                }\n                // 5xx indicates server issue; try the next url\n                errorMessages.push(errorMessage);\n            }\n            return logger.throwError(`error encountered during CCIP fetch: ${errorMessages.map((m) => JSON.stringify(m)).join(\", \")}`, Logger.errors.SERVER_ERROR, {\n                urls, errorMessages\n            });\n        });\n    }\n    // Fetches the blockNumber, but will reuse any result that is less\n    // than maxAge old or has been requested since the last request\n    _getInternalBlockNumber(maxAge) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._ready();\n            // Allowing stale data up to maxAge old\n            if (maxAge > 0) {\n                // While there are pending internal block requests...\n                while (this._internalBlockNumber) {\n                    // ...\"remember\" which fetch we started with\n                    const internalBlockNumber = this._internalBlockNumber;\n                    try {\n                        // Check the result is not too stale\n                        const result = yield internalBlockNumber;\n                        if ((getTime() - result.respTime) <= maxAge) {\n                            return result.blockNumber;\n                        }\n                        // Too old; fetch a new value\n                        break;\n                    }\n                    catch (error) {\n                        // The fetch rejected; if we are the first to get the\n                        // rejection, drop through so we replace it with a new\n                        // fetch; all others blocked will then get that fetch\n                        // which won't match the one they \"remembered\" and loop\n                        if (this._internalBlockNumber === internalBlockNumber) {\n                            break;\n                        }\n                    }\n                }\n            }\n            const reqTime = getTime();\n            const checkInternalBlockNumber = resolveProperties({\n                blockNumber: this.perform(\"getBlockNumber\", {}),\n                networkError: this.getNetwork().then((network) => (null), (error) => (error))\n            }).then(({ blockNumber, networkError }) => {\n                if (networkError) {\n                    // Unremember this bad internal block number\n                    if (this._internalBlockNumber === checkInternalBlockNumber) {\n                        this._internalBlockNumber = null;\n                    }\n                    throw networkError;\n                }\n                const respTime = getTime();\n                blockNumber = BigNumber.from(blockNumber).toNumber();\n                if (blockNumber < this._maxInternalBlockNumber) {\n                    blockNumber = this._maxInternalBlockNumber;\n                }\n                this._maxInternalBlockNumber = blockNumber;\n                this._setFastBlockNumber(blockNumber); // @TODO: Still need this?\n                return { blockNumber, reqTime, respTime };\n            });\n            this._internalBlockNumber = checkInternalBlockNumber;\n            // Swallow unhandled exceptions; if needed they are handled else where\n            checkInternalBlockNumber.catch((error) => {\n                // Don't null the dead (rejected) fetch, if it has already been updated\n                if (this._internalBlockNumber === checkInternalBlockNumber) {\n                    this._internalBlockNumber = null;\n                }\n            });\n            return (yield checkInternalBlockNumber).blockNumber;\n        });\n    }\n    poll() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const pollId = nextPollId++;\n            // Track all running promises, so we can trigger a post-poll once they are complete\n            const runners = [];\n            let blockNumber = null;\n            try {\n                blockNumber = yield this._getInternalBlockNumber(100 + this.pollingInterval / 2);\n            }\n            catch (error) {\n                this.emit(\"error\", error);\n                return;\n            }\n            this._setFastBlockNumber(blockNumber);\n            // Emit a poll event after we have the latest (fast) block number\n            this.emit(\"poll\", pollId, blockNumber);\n            // If the block has not changed, meh.\n            if (blockNumber === this._lastBlockNumber) {\n                this.emit(\"didPoll\", pollId);\n                return;\n            }\n            // First polling cycle, trigger a \"block\" events\n            if (this._emitted.block === -2) {\n                this._emitted.block = blockNumber - 1;\n            }\n            if (Math.abs((this._emitted.block) - blockNumber) > 1000) {\n                logger.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${blockNumber})`);\n                this.emit(\"error\", logger.makeError(\"network block skew detected\", Logger.errors.NETWORK_ERROR, {\n                    blockNumber: blockNumber,\n                    event: \"blockSkew\",\n                    previousBlockNumber: this._emitted.block\n                }));\n                this.emit(\"block\", blockNumber);\n            }\n            else {\n                // Notify all listener for each block that has passed\n                for (let i = this._emitted.block + 1; i <= blockNumber; i++) {\n                    this.emit(\"block\", i);\n                }\n            }\n            // The emitted block was updated, check for obsolete events\n            if (this._emitted.block !== blockNumber) {\n                this._emitted.block = blockNumber;\n                Object.keys(this._emitted).forEach((key) => {\n                    // The block event does not expire\n                    if (key === \"block\") {\n                        return;\n                    }\n                    // The block we were at when we emitted this event\n                    const eventBlockNumber = this._emitted[key];\n                    // We cannot garbage collect pending transactions or blocks here\n                    // They should be garbage collected by the Provider when setting\n                    // \"pending\" events\n                    if (eventBlockNumber === \"pending\") {\n                        return;\n                    }\n                    // Evict any transaction hashes or block hashes over 12 blocks\n                    // old, since they should not return null anyways\n                    if (blockNumber - eventBlockNumber > 12) {\n                        delete this._emitted[key];\n                    }\n                });\n            }\n            // First polling cycle\n            if (this._lastBlockNumber === -2) {\n                this._lastBlockNumber = blockNumber - 1;\n            }\n            // Find all transaction hashes we are waiting on\n            this._events.forEach((event) => {\n                switch (event.type) {\n                    case \"tx\": {\n                        const hash = event.hash;\n                        let runner = this.getTransactionReceipt(hash).then((receipt) => {\n                            if (!receipt || receipt.blockNumber == null) {\n                                return null;\n                            }\n                            this._emitted[\"t:\" + hash] = receipt.blockNumber;\n                            this.emit(hash, receipt);\n                            return null;\n                        }).catch((error) => { this.emit(\"error\", error); });\n                        runners.push(runner);\n                        break;\n                    }\n                    case \"filter\": {\n                        // We only allow a single getLogs to be in-flight at a time\n                        if (!event._inflight) {\n                            event._inflight = true;\n                            // This is the first filter for this event, so we want to\n                            // restrict events to events that happened no earlier than now\n                            if (event._lastBlockNumber === -2) {\n                                event._lastBlockNumber = blockNumber - 1;\n                            }\n                            // Filter from the last *known* event; due to load-balancing\n                            // and some nodes returning updated block numbers before\n                            // indexing events, a logs result with 0 entries cannot be\n                            // trusted and we must retry a range which includes it again\n                            const filter = event.filter;\n                            filter.fromBlock = event._lastBlockNumber + 1;\n                            filter.toBlock = blockNumber;\n                            // Prevent fitler ranges from growing too wild, since it is quite\n                            // likely there just haven't been any events to move the lastBlockNumber.\n                            const minFromBlock = filter.toBlock - this._maxFilterBlockRange;\n                            if (minFromBlock > filter.fromBlock) {\n                                filter.fromBlock = minFromBlock;\n                            }\n                            if (filter.fromBlock < 0) {\n                                filter.fromBlock = 0;\n                            }\n                            const runner = this.getLogs(filter).then((logs) => {\n                                // Allow the next getLogs\n                                event._inflight = false;\n                                if (logs.length === 0) {\n                                    return;\n                                }\n                                logs.forEach((log) => {\n                                    // Only when we get an event for a given block number\n                                    // can we trust the events are indexed\n                                    if (log.blockNumber > event._lastBlockNumber) {\n                                        event._lastBlockNumber = log.blockNumber;\n                                    }\n                                    // Make sure we stall requests to fetch blocks and txs\n                                    this._emitted[\"b:\" + log.blockHash] = log.blockNumber;\n                                    this._emitted[\"t:\" + log.transactionHash] = log.blockNumber;\n                                    this.emit(filter, log);\n                                });\n                            }).catch((error) => {\n                                this.emit(\"error\", error);\n                                // Allow another getLogs (the range was not updated)\n                                event._inflight = false;\n                            });\n                            runners.push(runner);\n                        }\n                        break;\n                    }\n                }\n            });\n            this._lastBlockNumber = blockNumber;\n            // Once all events for this loop have been processed, emit \"didPoll\"\n            Promise.all(runners).then(() => {\n                this.emit(\"didPoll\", pollId);\n            }).catch((error) => { this.emit(\"error\", error); });\n            return;\n        });\n    }\n    // Deprecated; do not use this\n    resetEventsBlock(blockNumber) {\n        this._lastBlockNumber = blockNumber - 1;\n        if (this.polling) {\n            this.poll();\n        }\n    }\n    get network() {\n        return this._network;\n    }\n    // This method should query the network if the underlying network\n    // can change, such as when connected to a JSON-RPC backend\n    detectNetwork() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return logger.throwError(\"provider does not support network detection\", Logger.errors.UNSUPPORTED_OPERATION, {\n                operation: \"provider.detectNetwork\"\n            });\n        });\n    }\n    getNetwork() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const network = yield this._ready();\n            // Make sure we are still connected to the same network; this is\n            // only an external call for backends which can have the underlying\n            // network change spontaneously\n            const currentNetwork = yield this.detectNetwork();\n            if (network.chainId !== currentNetwork.chainId) {\n                // We are allowing network changes, things can get complex fast;\n                // make sure you know what you are doing if you use \"any\"\n                if (this.anyNetwork) {\n                    this._network = currentNetwork;\n                    // Reset all internal block number guards and caches\n                    this._lastBlockNumber = -2;\n                    this._fastBlockNumber = null;\n                    this._fastBlockNumberPromise = null;\n                    this._fastQueryDate = 0;\n                    this._emitted.block = -2;\n                    this._maxInternalBlockNumber = -1024;\n                    this._internalBlockNumber = null;\n                    // The \"network\" event MUST happen before this method resolves\n                    // so any events have a chance to unregister, so we stall an\n                    // additional event loop before returning from /this/ call\n                    this.emit(\"network\", currentNetwork, network);\n                    yield stall(0);\n                    return this._network;\n                }\n                const error = logger.makeError(\"underlying network changed\", Logger.errors.NETWORK_ERROR, {\n                    event: \"changed\",\n                    network: network,\n                    detectedNetwork: currentNetwork\n                });\n                this.emit(\"error\", error);\n                throw error;\n            }\n            return network;\n        });\n    }\n    get blockNumber() {\n        this._getInternalBlockNumber(100 + this.pollingInterval / 2).then((blockNumber) => {\n            this._setFastBlockNumber(blockNumber);\n        }, (error) => { });\n        return (this._fastBlockNumber != null) ? this._fastBlockNumber : -1;\n    }\n    get polling() {\n        return (this._poller != null);\n    }\n    set polling(value) {\n        if (value && !this._poller) {\n            this._poller = setInterval(() => { this.poll(); }, this.pollingInterval);\n            if (!this._bootstrapPoll) {\n                this._bootstrapPoll = setTimeout(() => {\n                    this.poll();\n                    // We block additional polls until the polling interval\n                    // is done, to prevent overwhelming the poll function\n                    this._bootstrapPoll = setTimeout(() => {\n                        // If polling was disabled, something may require a poke\n                        // since starting the bootstrap poll and it was disabled\n                        if (!this._poller) {\n                            this.poll();\n                        }\n                        // Clear out the bootstrap so we can do another\n                        this._bootstrapPoll = null;\n                    }, this.pollingInterval);\n                }, 0);\n            }\n        }\n        else if (!value && this._poller) {\n            clearInterval(this._poller);\n            this._poller = null;\n        }\n    }\n    get pollingInterval() {\n        return this._pollingInterval;\n    }\n    set pollingInterval(value) {\n        if (typeof (value) !== \"number\" || value <= 0 || parseInt(String(value)) != value) {\n            throw new Error(\"invalid polling interval\");\n        }\n        this._pollingInterval = value;\n        if (this._poller) {\n            clearInterval(this._poller);\n            this._poller = setInterval(() => { this.poll(); }, this._pollingInterval);\n        }\n    }\n    _getFastBlockNumber() {\n        const now = getTime();\n        // Stale block number, request a newer value\n        if ((now - this._fastQueryDate) > 2 * this._pollingInterval) {\n            this._fastQueryDate = now;\n            this._fastBlockNumberPromise = this.getBlockNumber().then((blockNumber) => {\n                if (this._fastBlockNumber == null || blockNumber > this._fastBlockNumber) {\n                    this._fastBlockNumber = blockNumber;\n                }\n                return this._fastBlockNumber;\n            });\n        }\n        return this._fastBlockNumberPromise;\n    }\n    _setFastBlockNumber(blockNumber) {\n        // Older block, maybe a stale request\n        if (this._fastBlockNumber != null && blockNumber < this._fastBlockNumber) {\n            return;\n        }\n        // Update the time we updated the blocknumber\n        this._fastQueryDate = getTime();\n        // Newer block number, use  it\n        if (this._fastBlockNumber == null || blockNumber > this._fastBlockNumber) {\n            this._fastBlockNumber = blockNumber;\n            this._fastBlockNumberPromise = Promise.resolve(blockNumber);\n        }\n    }\n    waitForTransaction(transactionHash, confirmations, timeout) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this._waitForTransaction(transactionHash, (confirmations == null) ? 1 : confirmations, timeout || 0, null);\n        });\n    }\n    _waitForTransaction(transactionHash, confirmations, timeout, replaceable) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const receipt = yield this.getTransactionReceipt(transactionHash);\n            // Receipt is already good\n            if ((receipt ? receipt.confirmations : 0) >= confirmations) {\n                return receipt;\n            }\n            // Poll until the receipt is good...\n            return new Promise((resolve, reject) => {\n                const cancelFuncs = [];\n                let done = false;\n                const alreadyDone = function () {\n                    if (done) {\n                        return true;\n                    }\n                    done = true;\n                    cancelFuncs.forEach((func) => { func(); });\n                    return false;\n                };\n                const minedHandler = (receipt) => {\n                    if (receipt.confirmations < confirmations) {\n                        return;\n                    }\n                    if (alreadyDone()) {\n                        return;\n                    }\n                    resolve(receipt);\n                };\n                this.on(transactionHash, minedHandler);\n                cancelFuncs.push(() => { this.removeListener(transactionHash, minedHandler); });\n                if (replaceable) {\n                    let lastBlockNumber = replaceable.startBlock;\n                    let scannedBlock = null;\n                    const replaceHandler = (blockNumber) => __awaiter(this, void 0, void 0, function* () {\n                        if (done) {\n                            return;\n                        }\n                        // Wait 1 second; this is only used in the case of a fault, so\n                        // we will trade off a little bit of latency for more consistent\n                        // results and fewer JSON-RPC calls\n                        yield stall(1000);\n                        this.getTransactionCount(replaceable.from).then((nonce) => __awaiter(this, void 0, void 0, function* () {\n                            if (done) {\n                                return;\n                            }\n                            if (nonce <= replaceable.nonce) {\n                                lastBlockNumber = blockNumber;\n                            }\n                            else {\n                                // First check if the transaction was mined\n                                {\n                                    const mined = yield this.getTransaction(transactionHash);\n                                    if (mined && mined.blockNumber != null) {\n                                        return;\n                                    }\n                                }\n                                // First time scanning. We start a little earlier for some\n                                // wiggle room here to handle the eventually consistent nature\n                                // of blockchain (e.g. the getTransactionCount was for a\n                                // different block)\n                                if (scannedBlock == null) {\n                                    scannedBlock = lastBlockNumber - 3;\n                                    if (scannedBlock < replaceable.startBlock) {\n                                        scannedBlock = replaceable.startBlock;\n                                    }\n                                }\n                                while (scannedBlock <= blockNumber) {\n                                    if (done) {\n                                        return;\n                                    }\n                                    const block = yield this.getBlockWithTransactions(scannedBlock);\n                                    for (let ti = 0; ti < block.transactions.length; ti++) {\n                                        const tx = block.transactions[ti];\n                                        // Successfully mined!\n                                        if (tx.hash === transactionHash) {\n                                            return;\n                                        }\n                                        // Matches our transaction from and nonce; its a replacement\n                                        if (tx.from === replaceable.from && tx.nonce === replaceable.nonce) {\n                                            if (done) {\n                                                return;\n                                            }\n                                            // Get the receipt of the replacement\n                                            const receipt = yield this.waitForTransaction(tx.hash, confirmations);\n                                            // Already resolved or rejected (prolly a timeout)\n                                            if (alreadyDone()) {\n                                                return;\n                                            }\n                                            // The reason we were replaced\n                                            let reason = \"replaced\";\n                                            if (tx.data === replaceable.data && tx.to === replaceable.to && tx.value.eq(replaceable.value)) {\n                                                reason = \"repriced\";\n                                            }\n                                            else if (tx.data === \"0x\" && tx.from === tx.to && tx.value.isZero()) {\n                                                reason = \"cancelled\";\n                                            }\n                                            // Explain why we were replaced\n                                            reject(logger.makeError(\"transaction was replaced\", Logger.errors.TRANSACTION_REPLACED, {\n                                                cancelled: (reason === \"replaced\" || reason === \"cancelled\"),\n                                                reason,\n                                                replacement: this._wrapTransaction(tx),\n                                                hash: transactionHash,\n                                                receipt\n                                            }));\n                                            return;\n                                        }\n                                    }\n                                    scannedBlock++;\n                                }\n                            }\n                            if (done) {\n                                return;\n                            }\n                            this.once(\"block\", replaceHandler);\n                        }), (error) => {\n                            if (done) {\n                                return;\n                            }\n                            this.once(\"block\", replaceHandler);\n                        });\n                    });\n                    if (done) {\n                        return;\n                    }\n                    this.once(\"block\", replaceHandler);\n                    cancelFuncs.push(() => {\n                        this.removeListener(\"block\", replaceHandler);\n                    });\n                }\n                if (typeof (timeout) === \"number\" && timeout > 0) {\n                    const timer = setTimeout(() => {\n                        if (alreadyDone()) {\n                            return;\n                        }\n                        reject(logger.makeError(\"timeout exceeded\", Logger.errors.TIMEOUT, { timeout: timeout }));\n                    }, timeout);\n                    if (timer.unref) {\n                        timer.unref();\n                    }\n                    cancelFuncs.push(() => { clearTimeout(timer); });\n                }\n            });\n        });\n    }\n    getBlockNumber() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this._getInternalBlockNumber(0);\n        });\n    }\n    getGasPrice() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.getNetwork();\n            const result = yield this.perform(\"getGasPrice\", {});\n            try {\n                return BigNumber.from(result);\n            }\n            catch (error) {\n                return logger.throwError(\"bad result from backend\", Logger.errors.SERVER_ERROR, {\n                    method: \"getGasPrice\",\n                    result, error\n                });\n            }\n        });\n    }\n    getBalance(addressOrName, blockTag) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.getNetwork();\n            const params = yield resolveProperties({\n                address: this._getAddress(addressOrName),\n                blockTag: this._getBlockTag(blockTag)\n            });\n            const result = yield this.perform(\"getBalance\", params);\n            try {\n                return BigNumber.from(result);\n            }\n            catch (error) {\n                return logger.throwError(\"bad result from backend\", Logger.errors.SERVER_ERROR, {\n                    method: \"getBalance\",\n                    params, result, error\n                });\n            }\n        });\n    }\n    getTransactionCount(addressOrName, blockTag) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.getNetwork();\n            const params = yield resolveProperties({\n                address: this._getAddress(addressOrName),\n                blockTag: this._getBlockTag(blockTag)\n            });\n            const result = yield this.perform(\"getTransactionCount\", params);\n            try {\n                return BigNumber.from(result).toNumber();\n            }\n            catch (error) {\n                return logger.throwError(\"bad result from backend\", Logger.errors.SERVER_ERROR, {\n                    method: \"getTransactionCount\",\n                    params, result, error\n                });\n            }\n        });\n    }\n    getCode(addressOrName, blockTag) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.getNetwork();\n            const params = yield resolveProperties({\n                address: this._getAddress(addressOrName),\n                blockTag: this._getBlockTag(blockTag)\n            });\n            const result = yield this.perform(\"getCode\", params);\n            try {\n                return hexlify(result);\n            }\n            catch (error) {\n                return logger.throwError(\"bad result from backend\", Logger.errors.SERVER_ERROR, {\n                    method: \"getCode\",\n                    params, result, error\n                });\n            }\n        });\n    }\n    getStorageAt(addressOrName, position, blockTag) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.getNetwork();\n            const params = yield resolveProperties({\n                address: this._getAddress(addressOrName),\n                blockTag: this._getBlockTag(blockTag),\n                position: Promise.resolve(position).then((p) => hexValue(p))\n            });\n            const result = yield this.perform(\"getStorageAt\", params);\n            try {\n                return hexlify(result);\n            }\n            catch (error) {\n                return logger.throwError(\"bad result from backend\", Logger.errors.SERVER_ERROR, {\n                    method: \"getStorageAt\",\n                    params, result, error\n                });\n            }\n        });\n    }\n    // This should be called by any subclass wrapping a TransactionResponse\n    _wrapTransaction(tx, hash, startBlock) {\n        if (hash != null && hexDataLength(hash) !== 32) {\n            throw new Error(\"invalid response - sendTransaction\");\n        }\n        const result = tx;\n        // Check the hash we expect is the same as the hash the server reported\n        if (hash != null && tx.hash !== hash) {\n            logger.throwError(\"Transaction hash mismatch from Provider.sendTransaction.\", Logger.errors.UNKNOWN_ERROR, { expectedHash: tx.hash, returnedHash: hash });\n        }\n        result.wait = (confirms, timeout) => __awaiter(this, void 0, void 0, function* () {\n            if (confirms == null) {\n                confirms = 1;\n            }\n            if (timeout == null) {\n                timeout = 0;\n            }\n            // Get the details to detect replacement\n            let replacement = undefined;\n            if (confirms !== 0 && startBlock != null) {\n                replacement = {\n                    data: tx.data,\n                    from: tx.from,\n                    nonce: tx.nonce,\n                    to: tx.to,\n                    value: tx.value,\n                    startBlock\n                };\n            }\n            const receipt = yield this._waitForTransaction(tx.hash, confirms, timeout, replacement);\n            if (receipt == null && confirms === 0) {\n                return null;\n            }\n            // No longer pending, allow the polling loop to garbage collect this\n            this._emitted[\"t:\" + tx.hash] = receipt.blockNumber;\n            if (receipt.status === 0) {\n                logger.throwError(\"transaction failed\", Logger.errors.CALL_EXCEPTION, {\n                    transactionHash: tx.hash,\n                    transaction: tx,\n                    receipt: receipt\n                });\n            }\n            return receipt;\n        });\n        return result;\n    }\n    sendTransaction(signedTransaction) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.getNetwork();\n            const hexTx = yield Promise.resolve(signedTransaction).then(t => hexlify(t));\n            const tx = this.formatter.transaction(signedTransaction);\n            if (tx.confirmations == null) {\n                tx.confirmations = 0;\n            }\n            const blockNumber = yield this._getInternalBlockNumber(100 + 2 * this.pollingInterval);\n            try {\n                const hash = yield this.perform(\"sendTransaction\", { signedTransaction: hexTx });\n                return this._wrapTransaction(tx, hash, blockNumber);\n            }\n            catch (error) {\n                error.transaction = tx;\n                error.transactionHash = tx.hash;\n                throw error;\n            }\n        });\n    }\n    _getTransactionRequest(transaction) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const values = yield transaction;\n            const tx = {};\n            [\"from\", \"to\"].forEach((key) => {\n                if (values[key] == null) {\n                    return;\n                }\n                tx[key] = Promise.resolve(values[key]).then((v) => (v ? this._getAddress(v) : null));\n            });\n            [\"gasLimit\", \"gasPrice\", \"maxFeePerGas\", \"maxPriorityFeePerGas\", \"value\"].forEach((key) => {\n                if (values[key] == null) {\n                    return;\n                }\n                tx[key] = Promise.resolve(values[key]).then((v) => (v ? BigNumber.from(v) : null));\n            });\n            [\"type\"].forEach((key) => {\n                if (values[key] == null) {\n                    return;\n                }\n                tx[key] = Promise.resolve(values[key]).then((v) => ((v != null) ? v : null));\n            });\n            if (values.accessList) {\n                tx.accessList = this.formatter.accessList(values.accessList);\n            }\n            [\"data\"].forEach((key) => {\n                if (values[key] == null) {\n                    return;\n                }\n                tx[key] = Promise.resolve(values[key]).then((v) => (v ? hexlify(v) : null));\n            });\n            return this.formatter.transactionRequest(yield resolveProperties(tx));\n        });\n    }\n    _getFilter(filter) {\n        return __awaiter(this, void 0, void 0, function* () {\n            filter = yield filter;\n            const result = {};\n            if (filter.address != null) {\n                result.address = this._getAddress(filter.address);\n            }\n            [\"blockHash\", \"topics\"].forEach((key) => {\n                if (filter[key] == null) {\n                    return;\n                }\n                result[key] = filter[key];\n            });\n            [\"fromBlock\", \"toBlock\"].forEach((key) => {\n                if (filter[key] == null) {\n                    return;\n                }\n                result[key] = this._getBlockTag(filter[key]);\n            });\n            return this.formatter.filter(yield resolveProperties(result));\n        });\n    }\n    _call(transaction, blockTag, attempt) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (attempt >= MAX_CCIP_REDIRECTS) {\n                logger.throwError(\"CCIP read exceeded maximum redirections\", Logger.errors.SERVER_ERROR, {\n                    redirects: attempt, transaction\n                });\n            }\n            const txSender = transaction.to;\n            const result = yield this.perform(\"call\", { transaction, blockTag });\n            // CCIP Read request via OffchainLookup(address,string[],bytes,bytes4,bytes)\n            if (attempt >= 0 && blockTag === \"latest\" && txSender != null && result.substring(0, 10) === \"0x556f1830\" && (hexDataLength(result) % 32 === 4)) {\n                try {\n                    const data = hexDataSlice(result, 4);\n                    // Check the sender of the OffchainLookup matches the transaction\n                    const sender = hexDataSlice(data, 0, 32);\n                    if (!BigNumber.from(sender).eq(txSender)) {\n                        logger.throwError(\"CCIP Read sender did not match\", Logger.errors.CALL_EXCEPTION, {\n                            name: \"OffchainLookup\",\n                            signature: \"OffchainLookup(address,string[],bytes,bytes4,bytes)\",\n                            transaction, data: result\n                        });\n                    }\n                    // Read the URLs from the response\n                    const urls = [];\n                    const urlsOffset = BigNumber.from(hexDataSlice(data, 32, 64)).toNumber();\n                    const urlsLength = BigNumber.from(hexDataSlice(data, urlsOffset, urlsOffset + 32)).toNumber();\n                    const urlsData = hexDataSlice(data, urlsOffset + 32);\n                    for (let u = 0; u < urlsLength; u++) {\n                        const url = _parseString(urlsData, u * 32);\n                        if (url == null) {\n                            logger.throwError(\"CCIP Read contained corrupt URL string\", Logger.errors.CALL_EXCEPTION, {\n                                name: \"OffchainLookup\",\n                                signature: \"OffchainLookup(address,string[],bytes,bytes4,bytes)\",\n                                transaction, data: result\n                            });\n                        }\n                        urls.push(url);\n                    }\n                    // Get the CCIP calldata to forward\n                    const calldata = _parseBytes(data, 64);\n                    // Get the callbackSelector (bytes4)\n                    if (!BigNumber.from(hexDataSlice(data, 100, 128)).isZero()) {\n                        logger.throwError(\"CCIP Read callback selector included junk\", Logger.errors.CALL_EXCEPTION, {\n                            name: \"OffchainLookup\",\n                            signature: \"OffchainLookup(address,string[],bytes,bytes4,bytes)\",\n                            transaction, data: result\n                        });\n                    }\n                    const callbackSelector = hexDataSlice(data, 96, 100);\n                    // Get the extra data to send back to the contract as context\n                    const extraData = _parseBytes(data, 128);\n                    const ccipResult = yield this.ccipReadFetch(transaction, calldata, urls);\n                    if (ccipResult == null) {\n                        logger.throwError(\"CCIP Read disabled or provided no URLs\", Logger.errors.CALL_EXCEPTION, {\n                            name: \"OffchainLookup\",\n                            signature: \"OffchainLookup(address,string[],bytes,bytes4,bytes)\",\n                            transaction, data: result\n                        });\n                    }\n                    const tx = {\n                        to: txSender,\n                        data: hexConcat([callbackSelector, encodeBytes([ccipResult, extraData])])\n                    };\n                    return this._call(tx, blockTag, attempt + 1);\n                }\n                catch (error) {\n                    if (error.code === Logger.errors.SERVER_ERROR) {\n                        throw error;\n                    }\n                }\n            }\n            try {\n                return hexlify(result);\n            }\n            catch (error) {\n                return logger.throwError(\"bad result from backend\", Logger.errors.SERVER_ERROR, {\n                    method: \"call\",\n                    params: { transaction, blockTag }, result, error\n                });\n            }\n        });\n    }\n    call(transaction, blockTag) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.getNetwork();\n            const resolved = yield resolveProperties({\n                transaction: this._getTransactionRequest(transaction),\n                blockTag: this._getBlockTag(blockTag),\n                ccipReadEnabled: Promise.resolve(transaction.ccipReadEnabled)\n            });\n            return this._call(resolved.transaction, resolved.blockTag, resolved.ccipReadEnabled ? 0 : -1);\n        });\n    }\n    estimateGas(transaction) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.getNetwork();\n            const params = yield resolveProperties({\n                transaction: this._getTransactionRequest(transaction)\n            });\n            const result = yield this.perform(\"estimateGas\", params);\n            try {\n                return BigNumber.from(result);\n            }\n            catch (error) {\n                return logger.throwError(\"bad result from backend\", Logger.errors.SERVER_ERROR, {\n                    method: \"estimateGas\",\n                    params, result, error\n                });\n            }\n        });\n    }\n    _getAddress(addressOrName) {\n        return __awaiter(this, void 0, void 0, function* () {\n            addressOrName = yield addressOrName;\n            if (typeof (addressOrName) !== \"string\") {\n                logger.throwArgumentError(\"invalid address or ENS name\", \"name\", addressOrName);\n            }\n            const address = yield this.resolveName(addressOrName);\n            if (address == null) {\n                logger.throwError(\"ENS name not configured\", Logger.errors.UNSUPPORTED_OPERATION, {\n                    operation: `resolveName(${JSON.stringify(addressOrName)})`\n                });\n            }\n            return address;\n        });\n    }\n    _getBlock(blockHashOrBlockTag, includeTransactions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.getNetwork();\n            blockHashOrBlockTag = yield blockHashOrBlockTag;\n            // If blockTag is a number (not \"latest\", etc), this is the block number\n            let blockNumber = -128;\n            const params = {\n                includeTransactions: !!includeTransactions\n            };\n            if (isHexString(blockHashOrBlockTag, 32)) {\n                params.blockHash = blockHashOrBlockTag;\n            }\n            else {\n                try {\n                    params.blockTag = yield this._getBlockTag(blockHashOrBlockTag);\n                    if (isHexString(params.blockTag)) {\n                        blockNumber = parseInt(params.blockTag.substring(2), 16);\n                    }\n                }\n                catch (error) {\n                    logger.throwArgumentError(\"invalid block hash or block tag\", \"blockHashOrBlockTag\", blockHashOrBlockTag);\n                }\n            }\n            return poll(() => __awaiter(this, void 0, void 0, function* () {\n                const block = yield this.perform(\"getBlock\", params);\n                // Block was not found\n                if (block == null) {\n                    // For blockhashes, if we didn't say it existed, that blockhash may\n                    // not exist. If we did see it though, perhaps from a log, we know\n                    // it exists, and this node is just not caught up yet.\n                    if (params.blockHash != null) {\n                        if (this._emitted[\"b:\" + params.blockHash] == null) {\n                            return null;\n                        }\n                    }\n                    // For block tags, if we are asking for a future block, we return null\n                    if (params.blockTag != null) {\n                        if (blockNumber > this._emitted.block) {\n                            return null;\n                        }\n                    }\n                    // Retry on the next block\n                    return undefined;\n                }\n                // Add transactions\n                if (includeTransactions) {\n                    let blockNumber = null;\n                    for (let i = 0; i < block.transactions.length; i++) {\n                        const tx = block.transactions[i];\n                        if (tx.blockNumber == null) {\n                            tx.confirmations = 0;\n                        }\n                        else if (tx.confirmations == null) {\n                            if (blockNumber == null) {\n                                blockNumber = yield this._getInternalBlockNumber(100 + 2 * this.pollingInterval);\n                            }\n                            // Add the confirmations using the fast block number (pessimistic)\n                            let confirmations = (blockNumber - tx.blockNumber) + 1;\n                            if (confirmations <= 0) {\n                                confirmations = 1;\n                            }\n                            tx.confirmations = confirmations;\n                        }\n                    }\n                    const blockWithTxs = this.formatter.blockWithTransactions(block);\n                    blockWithTxs.transactions = blockWithTxs.transactions.map((tx) => this._wrapTransaction(tx));\n                    return blockWithTxs;\n                }\n                return this.formatter.block(block);\n            }), { oncePoll: this });\n        });\n    }\n    getBlock(blockHashOrBlockTag) {\n        return (this._getBlock(blockHashOrBlockTag, false));\n    }\n    getBlockWithTransactions(blockHashOrBlockTag) {\n        return (this._getBlock(blockHashOrBlockTag, true));\n    }\n    getTransaction(transactionHash) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.getNetwork();\n            transactionHash = yield transactionHash;\n            const params = { transactionHash: this.formatter.hash(transactionHash, true) };\n            return poll(() => __awaiter(this, void 0, void 0, function* () {\n                const result = yield this.perform(\"getTransaction\", params);\n                if (result == null) {\n                    if (this._emitted[\"t:\" + transactionHash] == null) {\n                        return null;\n                    }\n                    return undefined;\n                }\n                const tx = this.formatter.transactionResponse(result);\n                if (tx.blockNumber == null) {\n                    tx.confirmations = 0;\n                }\n                else if (tx.confirmations == null) {\n                    const blockNumber = yield this._getInternalBlockNumber(100 + 2 * this.pollingInterval);\n                    // Add the confirmations using the fast block number (pessimistic)\n                    let confirmations = (blockNumber - tx.blockNumber) + 1;\n                    if (confirmations <= 0) {\n                        confirmations = 1;\n                    }\n                    tx.confirmations = confirmations;\n                }\n                return this._wrapTransaction(tx);\n            }), { oncePoll: this });\n        });\n    }\n    getTransactionReceipt(transactionHash) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.getNetwork();\n            transactionHash = yield transactionHash;\n            const params = { transactionHash: this.formatter.hash(transactionHash, true) };\n            return poll(() => __awaiter(this, void 0, void 0, function* () {\n                const result = yield this.perform(\"getTransactionReceipt\", params);\n                if (result == null) {\n                    if (this._emitted[\"t:\" + transactionHash] == null) {\n                        return null;\n                    }\n                    return undefined;\n                }\n                // \"geth-etc\" returns receipts before they are ready\n                if (result.blockHash == null) {\n                    return undefined;\n                }\n                const receipt = this.formatter.receipt(result);\n                if (receipt.blockNumber == null) {\n                    receipt.confirmations = 0;\n                }\n                else if (receipt.confirmations == null) {\n                    const blockNumber = yield this._getInternalBlockNumber(100 + 2 * this.pollingInterval);\n                    // Add the confirmations using the fast block number (pessimistic)\n                    let confirmations = (blockNumber - receipt.blockNumber) + 1;\n                    if (confirmations <= 0) {\n                        confirmations = 1;\n                    }\n                    receipt.confirmations = confirmations;\n                }\n                return receipt;\n            }), { oncePoll: this });\n        });\n    }\n    getLogs(filter) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.getNetwork();\n            const params = yield resolveProperties({ filter: this._getFilter(filter) });\n            const logs = yield this.perform(\"getLogs\", params);\n            logs.forEach((log) => {\n                if (log.removed == null) {\n                    log.removed = false;\n                }\n            });\n            return Formatter.arrayOf(this.formatter.filterLog.bind(this.formatter))(logs);\n        });\n    }\n    getEtherPrice() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.getNetwork();\n            return this.perform(\"getEtherPrice\", {});\n        });\n    }\n    _getBlockTag(blockTag) {\n        return __awaiter(this, void 0, void 0, function* () {\n            blockTag = yield blockTag;\n            if (typeof (blockTag) === \"number\" && blockTag < 0) {\n                if (blockTag % 1) {\n                    logger.throwArgumentError(\"invalid BlockTag\", \"blockTag\", blockTag);\n                }\n                let blockNumber = yield this._getInternalBlockNumber(100 + 2 * this.pollingInterval);\n                blockNumber += blockTag;\n                if (blockNumber < 0) {\n                    blockNumber = 0;\n                }\n                return this.formatter.blockTag(blockNumber);\n            }\n            return this.formatter.blockTag(blockTag);\n        });\n    }\n    getResolver(name) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let currentName = name;\n            while (true) {\n                if (currentName === \"\" || currentName === \".\") {\n                    return null;\n                }\n                // Optimization since the eth node cannot change and does\n                // not have a wildcard resolver\n                if (name !== \"eth\" && currentName === \"eth\") {\n                    return null;\n                }\n                // Check the current node for a resolver\n                const addr = yield this._getResolver(currentName, \"getResolver\");\n                // Found a resolver!\n                if (addr != null) {\n                    const resolver = new Resolver(this, addr, name);\n                    // Legacy resolver found, using EIP-2544 so it isn't safe to use\n                    if (currentName !== name && !(yield resolver.supportsWildcard())) {\n                        return null;\n                    }\n                    return resolver;\n                }\n                // Get the parent node\n                currentName = currentName.split(\".\").slice(1).join(\".\");\n            }\n        });\n    }\n    _getResolver(name, operation) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (operation == null) {\n                operation = \"ENS\";\n            }\n            const network = yield this.getNetwork();\n            // No ENS...\n            if (!network.ensAddress) {\n                logger.throwError(\"network does not support ENS\", Logger.errors.UNSUPPORTED_OPERATION, { operation, network: network.name });\n            }\n            try {\n                // keccak256(\"resolver(bytes32)\")\n                const addrData = yield this.call({\n                    to: network.ensAddress,\n                    data: (\"0x0178b8bf\" + namehash(name).substring(2))\n                });\n                return this.formatter.callAddress(addrData);\n            }\n            catch (error) {\n                // ENS registry cannot throw errors on resolver(bytes32)\n            }\n            return null;\n        });\n    }\n    resolveName(name) {\n        return __awaiter(this, void 0, void 0, function* () {\n            name = yield name;\n            // If it is already an address, nothing to resolve\n            try {\n                return Promise.resolve(this.formatter.address(name));\n            }\n            catch (error) {\n                // If is is a hexstring, the address is bad (See #694)\n                if (isHexString(name)) {\n                    throw error;\n                }\n            }\n            if (typeof (name) !== \"string\") {\n                logger.throwArgumentError(\"invalid ENS name\", \"name\", name);\n            }\n            // Get the addr from the resolver\n            const resolver = yield this.getResolver(name);\n            if (!resolver) {\n                return null;\n            }\n            return yield resolver.getAddress();\n        });\n    }\n    lookupAddress(address) {\n        return __awaiter(this, void 0, void 0, function* () {\n            address = yield address;\n            address = this.formatter.address(address);\n            const node = address.substring(2).toLowerCase() + \".addr.reverse\";\n            const resolverAddr = yield this._getResolver(node, \"lookupAddress\");\n            if (resolverAddr == null) {\n                return null;\n            }\n            // keccak(\"name(bytes32)\")\n            const name = _parseString(yield this.call({\n                to: resolverAddr,\n                data: (\"0x691f3431\" + namehash(node).substring(2))\n            }), 0);\n            const addr = yield this.resolveName(name);\n            if (addr != address) {\n                return null;\n            }\n            return name;\n        });\n    }\n    getAvatar(nameOrAddress) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let resolver = null;\n            if (isHexString(nameOrAddress)) {\n                // Address; reverse lookup\n                const address = this.formatter.address(nameOrAddress);\n                const node = address.substring(2).toLowerCase() + \".addr.reverse\";\n                const resolverAddress = yield this._getResolver(node, \"getAvatar\");\n                if (!resolverAddress) {\n                    return null;\n                }\n                // Try resolving the avatar against the addr.reverse resolver\n                resolver = new Resolver(this, resolverAddress, node);\n                try {\n                    const avatar = yield resolver.getAvatar();\n                    if (avatar) {\n                        return avatar.url;\n                    }\n                }\n                catch (error) {\n                    if (error.code !== Logger.errors.CALL_EXCEPTION) {\n                        throw error;\n                    }\n                }\n                // Try getting the name and performing forward lookup; allowing wildcards\n                try {\n                    // keccak(\"name(bytes32)\")\n                    const name = _parseString(yield this.call({\n                        to: resolverAddress,\n                        data: (\"0x691f3431\" + namehash(node).substring(2))\n                    }), 0);\n                    resolver = yield this.getResolver(name);\n                }\n                catch (error) {\n                    if (error.code !== Logger.errors.CALL_EXCEPTION) {\n                        throw error;\n                    }\n                    return null;\n                }\n            }\n            else {\n                // ENS name; forward lookup with wildcard\n                resolver = yield this.getResolver(nameOrAddress);\n                if (!resolver) {\n                    return null;\n                }\n            }\n            const avatar = yield resolver.getAvatar();\n            if (avatar == null) {\n                return null;\n            }\n            return avatar.url;\n        });\n    }\n    perform(method, params) {\n        return logger.throwError(method + \" not implemented\", Logger.errors.NOT_IMPLEMENTED, { operation: method });\n    }\n    _startEvent(event) {\n        this.polling = (this._events.filter((e) => e.pollable()).length > 0);\n    }\n    _stopEvent(event) {\n        this.polling = (this._events.filter((e) => e.pollable()).length > 0);\n    }\n    _addEventListener(eventName, listener, once) {\n        const event = new Event(getEventTag(eventName), listener, once);\n        this._events.push(event);\n        this._startEvent(event);\n        return this;\n    }\n    on(eventName, listener) {\n        return this._addEventListener(eventName, listener, false);\n    }\n    once(eventName, listener) {\n        return this._addEventListener(eventName, listener, true);\n    }\n    emit(eventName, ...args) {\n        let result = false;\n        let stopped = [];\n        let eventTag = getEventTag(eventName);\n        this._events = this._events.filter((event) => {\n            if (event.tag !== eventTag) {\n                return true;\n            }\n            setTimeout(() => {\n                event.listener.apply(this, args);\n            }, 0);\n            result = true;\n            if (event.once) {\n                stopped.push(event);\n                return false;\n            }\n            return true;\n        });\n        stopped.forEach((event) => { this._stopEvent(event); });\n        return result;\n    }\n    listenerCount(eventName) {\n        if (!eventName) {\n            return this._events.length;\n        }\n        let eventTag = getEventTag(eventName);\n        return this._events.filter((event) => {\n            return (event.tag === eventTag);\n        }).length;\n    }\n    listeners(eventName) {\n        if (eventName == null) {\n            return this._events.map((event) => event.listener);\n        }\n        let eventTag = getEventTag(eventName);\n        return this._events\n            .filter((event) => (event.tag === eventTag))\n            .map((event) => event.listener);\n    }\n    off(eventName, listener) {\n        if (listener == null) {\n            return this.removeAllListeners(eventName);\n        }\n        const stopped = [];\n        let found = false;\n        let eventTag = getEventTag(eventName);\n        this._events = this._events.filter((event) => {\n            if (event.tag !== eventTag || event.listener != listener) {\n                return true;\n            }\n            if (found) {\n                return true;\n            }\n            found = true;\n            stopped.push(event);\n            return false;\n        });\n        stopped.forEach((event) => { this._stopEvent(event); });\n        return this;\n    }\n    removeAllListeners(eventName) {\n        let stopped = [];\n        if (eventName == null) {\n            stopped = this._events;\n            this._events = [];\n        }\n        else {\n            const eventTag = getEventTag(eventName);\n            this._events = this._events.filter((event) => {\n                if (event.tag !== eventTag) {\n                    return true;\n                }\n                stopped.push(event);\n                return false;\n            });\n        }\n        stopped.forEach((event) => { this._stopEvent(event); });\n        return this;\n    }\n}\n//# sourceMappingURL=base-provider.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Signer } from \"@ethersproject/abstract-signer\";\nimport { BigNumber } from \"@ethersproject/bignumber\";\nimport { hexlify, hexValue, hexZeroPad, isHexString } from \"@ethersproject/bytes\";\nimport { _TypedDataEncoder } from \"@ethersproject/hash\";\nimport { checkProperties, deepCopy, defineReadOnly, getStatic, resolveProperties, shallowCopy } from \"@ethersproject/properties\";\nimport { toUtf8Bytes } from \"@ethersproject/strings\";\nimport { accessListify } from \"@ethersproject/transactions\";\nimport { fetchJson, poll } from \"@ethersproject/web\";\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nconst logger = new Logger(version);\nimport { BaseProvider } from \"./base-provider\";\nconst errorGas = [\"call\", \"estimateGas\"];\nfunction spelunk(value, requireData) {\n    if (value == null) {\n        return null;\n    }\n    // These *are* the droids we're looking for.\n    if (typeof (value.message) === \"string\" && value.message.match(\"reverted\")) {\n        const data = isHexString(value.data) ? value.data : null;\n        if (!requireData || data) {\n            return { message: value.message, data };\n        }\n    }\n    // Spelunk further...\n    if (typeof (value) === \"object\") {\n        for (const key in value) {\n            const result = spelunk(value[key], requireData);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n    // Might be a JSON string we can further descend...\n    if (typeof (value) === \"string\") {\n        try {\n            return spelunk(JSON.parse(value), requireData);\n        }\n        catch (error) { }\n    }\n    return null;\n}\nfunction checkError(method, error, params) {\n    const transaction = params.transaction || params.signedTransaction;\n    // Undo the \"convenience\" some nodes are attempting to prevent backwards\n    // incompatibility; maybe for v6 consider forwarding reverts as errors\n    if (method === \"call\") {\n        const result = spelunk(error, true);\n        if (result) {\n            return result.data;\n        }\n        // Nothing descriptive..\n        logger.throwError(\"missing revert data in call exception; Transaction reverted without a reason string\", Logger.errors.CALL_EXCEPTION, {\n            data: \"0x\", transaction, error\n        });\n    }\n    if (method === \"estimateGas\") {\n        // Try to find something, with a preference on SERVER_ERROR body\n        let result = spelunk(error.body, false);\n        if (result == null) {\n            result = spelunk(error, false);\n        }\n        // Found \"reverted\", this is a CALL_EXCEPTION\n        if (result) {\n            logger.throwError(\"cannot estimate gas; transaction may fail or may require manual gas limit\", Logger.errors.UNPREDICTABLE_GAS_LIMIT, {\n                reason: result.message, method, transaction, error\n            });\n        }\n    }\n    // @TODO: Should we spelunk for message too?\n    let message = error.message;\n    if (error.code === Logger.errors.SERVER_ERROR && error.error && typeof (error.error.message) === \"string\") {\n        message = error.error.message;\n    }\n    else if (typeof (error.body) === \"string\") {\n        message = error.body;\n    }\n    else if (typeof (error.responseText) === \"string\") {\n        message = error.responseText;\n    }\n    message = (message || \"\").toLowerCase();\n    // \"insufficient funds for gas * price + value + cost(data)\"\n    if (message.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)) {\n        logger.throwError(\"insufficient funds for intrinsic transaction cost\", Logger.errors.INSUFFICIENT_FUNDS, {\n            error, method, transaction\n        });\n    }\n    // \"nonce too low\"\n    if (message.match(/nonce (is )?too low/i)) {\n        logger.throwError(\"nonce has already been used\", Logger.errors.NONCE_EXPIRED, {\n            error, method, transaction\n        });\n    }\n    // \"replacement transaction underpriced\"\n    if (message.match(/replacement transaction underpriced|transaction gas price.*too low/i)) {\n        logger.throwError(\"replacement fee too low\", Logger.errors.REPLACEMENT_UNDERPRICED, {\n            error, method, transaction\n        });\n    }\n    // \"replacement transaction underpriced\"\n    if (message.match(/only replay-protected/i)) {\n        logger.throwError(\"legacy pre-eip-155 transactions not supported\", Logger.errors.UNSUPPORTED_OPERATION, {\n            error, method, transaction\n        });\n    }\n    if (errorGas.indexOf(method) >= 0 && message.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)) {\n        logger.throwError(\"cannot estimate gas; transaction may fail or may require manual gas limit\", Logger.errors.UNPREDICTABLE_GAS_LIMIT, {\n            error, method, transaction\n        });\n    }\n    throw error;\n}\nfunction timer(timeout) {\n    return new Promise(function (resolve) {\n        setTimeout(resolve, timeout);\n    });\n}\nfunction getResult(payload) {\n    if (payload.error) {\n        // @TODO: not any\n        const error = new Error(payload.error.message);\n        error.code = payload.error.code;\n        error.data = payload.error.data;\n        throw error;\n    }\n    return payload.result;\n}\nfunction getLowerCase(value) {\n    if (value) {\n        return value.toLowerCase();\n    }\n    return value;\n}\nconst _constructorGuard = {};\nexport class JsonRpcSigner extends Signer {\n    constructor(constructorGuard, provider, addressOrIndex) {\n        super();\n        if (constructorGuard !== _constructorGuard) {\n            throw new Error(\"do not call the JsonRpcSigner constructor directly; use provider.getSigner\");\n        }\n        defineReadOnly(this, \"provider\", provider);\n        if (addressOrIndex == null) {\n            addressOrIndex = 0;\n        }\n        if (typeof (addressOrIndex) === \"string\") {\n            defineReadOnly(this, \"_address\", this.provider.formatter.address(addressOrIndex));\n            defineReadOnly(this, \"_index\", null);\n        }\n        else if (typeof (addressOrIndex) === \"number\") {\n            defineReadOnly(this, \"_index\", addressOrIndex);\n            defineReadOnly(this, \"_address\", null);\n        }\n        else {\n            logger.throwArgumentError(\"invalid address or index\", \"addressOrIndex\", addressOrIndex);\n        }\n    }\n    connect(provider) {\n        return logger.throwError(\"cannot alter JSON-RPC Signer connection\", Logger.errors.UNSUPPORTED_OPERATION, {\n            operation: \"connect\"\n        });\n    }\n    connectUnchecked() {\n        return new UncheckedJsonRpcSigner(_constructorGuard, this.provider, this._address || this._index);\n    }\n    getAddress() {\n        if (this._address) {\n            return Promise.resolve(this._address);\n        }\n        return this.provider.send(\"eth_accounts\", []).then((accounts) => {\n            if (accounts.length <= this._index) {\n                logger.throwError(\"unknown account #\" + this._index, Logger.errors.UNSUPPORTED_OPERATION, {\n                    operation: \"getAddress\"\n                });\n            }\n            return this.provider.formatter.address(accounts[this._index]);\n        });\n    }\n    sendUncheckedTransaction(transaction) {\n        transaction = shallowCopy(transaction);\n        const fromAddress = this.getAddress().then((address) => {\n            if (address) {\n                address = address.toLowerCase();\n            }\n            return address;\n        });\n        // The JSON-RPC for eth_sendTransaction uses 90000 gas; if the user\n        // wishes to use this, it is easy to specify explicitly, otherwise\n        // we look it up for them.\n        if (transaction.gasLimit == null) {\n            const estimate = shallowCopy(transaction);\n            estimate.from = fromAddress;\n            transaction.gasLimit = this.provider.estimateGas(estimate);\n        }\n        if (transaction.to != null) {\n            transaction.to = Promise.resolve(transaction.to).then((to) => __awaiter(this, void 0, void 0, function* () {\n                if (to == null) {\n                    return null;\n                }\n                const address = yield this.provider.resolveName(to);\n                if (address == null) {\n                    logger.throwArgumentError(\"provided ENS name resolves to null\", \"tx.to\", to);\n                }\n                return address;\n            }));\n        }\n        return resolveProperties({\n            tx: resolveProperties(transaction),\n            sender: fromAddress\n        }).then(({ tx, sender }) => {\n            if (tx.from != null) {\n                if (tx.from.toLowerCase() !== sender) {\n                    logger.throwArgumentError(\"from address mismatch\", \"transaction\", transaction);\n                }\n            }\n            else {\n                tx.from = sender;\n            }\n            const hexTx = this.provider.constructor.hexlifyTransaction(tx, { from: true });\n            return this.provider.send(\"eth_sendTransaction\", [hexTx]).then((hash) => {\n                return hash;\n            }, (error) => {\n                if (typeof (error.message) === \"string\" && error.message.match(/user denied/i)) {\n                    logger.throwError(\"user rejected transaction\", Logger.errors.ACTION_REJECTED, {\n                        action: \"sendTransaction\",\n                        transaction: tx\n                    });\n                }\n                return checkError(\"sendTransaction\", error, hexTx);\n            });\n        });\n    }\n    signTransaction(transaction) {\n        return logger.throwError(\"signing transactions is unsupported\", Logger.errors.UNSUPPORTED_OPERATION, {\n            operation: \"signTransaction\"\n        });\n    }\n    sendTransaction(transaction) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // This cannot be mined any earlier than any recent block\n            const blockNumber = yield this.provider._getInternalBlockNumber(100 + 2 * this.provider.pollingInterval);\n            // Send the transaction\n            const hash = yield this.sendUncheckedTransaction(transaction);\n            try {\n                // Unfortunately, JSON-RPC only provides and opaque transaction hash\n                // for a response, and we need the actual transaction, so we poll\n                // for it; it should show up very quickly\n                return yield poll(() => __awaiter(this, void 0, void 0, function* () {\n                    const tx = yield this.provider.getTransaction(hash);\n                    if (tx === null) {\n                        return undefined;\n                    }\n                    return this.provider._wrapTransaction(tx, hash, blockNumber);\n                }), { oncePoll: this.provider });\n            }\n            catch (error) {\n                error.transactionHash = hash;\n                throw error;\n            }\n        });\n    }\n    signMessage(message) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = ((typeof (message) === \"string\") ? toUtf8Bytes(message) : message);\n            const address = yield this.getAddress();\n            try {\n                return yield this.provider.send(\"personal_sign\", [hexlify(data), address.toLowerCase()]);\n            }\n            catch (error) {\n                if (typeof (error.message) === \"string\" && error.message.match(/user denied/i)) {\n                    logger.throwError(\"user rejected signing\", Logger.errors.ACTION_REJECTED, {\n                        action: \"signMessage\",\n                        from: address,\n                        messageData: message\n                    });\n                }\n                throw error;\n            }\n        });\n    }\n    _legacySignMessage(message) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = ((typeof (message) === \"string\") ? toUtf8Bytes(message) : message);\n            const address = yield this.getAddress();\n            try {\n                // https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_sign\n                return yield this.provider.send(\"eth_sign\", [address.toLowerCase(), hexlify(data)]);\n            }\n            catch (error) {\n                if (typeof (error.message) === \"string\" && error.message.match(/user denied/i)) {\n                    logger.throwError(\"user rejected signing\", Logger.errors.ACTION_REJECTED, {\n                        action: \"_legacySignMessage\",\n                        from: address,\n                        messageData: message\n                    });\n                }\n                throw error;\n            }\n        });\n    }\n    _signTypedData(domain, types, value) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Populate any ENS names (in-place)\n            const populated = yield _TypedDataEncoder.resolveNames(domain, types, value, (name) => {\n                return this.provider.resolveName(name);\n            });\n            const address = yield this.getAddress();\n            try {\n                return yield this.provider.send(\"eth_signTypedData_v4\", [\n                    address.toLowerCase(),\n                    JSON.stringify(_TypedDataEncoder.getPayload(populated.domain, types, populated.value))\n                ]);\n            }\n            catch (error) {\n                if (typeof (error.message) === \"string\" && error.message.match(/user denied/i)) {\n                    logger.throwError(\"user rejected signing\", Logger.errors.ACTION_REJECTED, {\n                        action: \"_signTypedData\",\n                        from: address,\n                        messageData: { domain: populated.domain, types, value: populated.value }\n                    });\n                }\n                throw error;\n            }\n        });\n    }\n    unlock(password) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const provider = this.provider;\n            const address = yield this.getAddress();\n            return provider.send(\"personal_unlockAccount\", [address.toLowerCase(), password, null]);\n        });\n    }\n}\nclass UncheckedJsonRpcSigner extends JsonRpcSigner {\n    sendTransaction(transaction) {\n        return this.sendUncheckedTransaction(transaction).then((hash) => {\n            return {\n                hash: hash,\n                nonce: null,\n                gasLimit: null,\n                gasPrice: null,\n                data: null,\n                value: null,\n                chainId: null,\n                confirmations: 0,\n                from: null,\n                wait: (confirmations) => { return this.provider.waitForTransaction(hash, confirmations); }\n            };\n        });\n    }\n}\nconst allowedTransactionKeys = {\n    chainId: true, data: true, gasLimit: true, gasPrice: true, nonce: true, to: true, value: true,\n    type: true, accessList: true,\n    maxFeePerGas: true, maxPriorityFeePerGas: true\n};\nexport class JsonRpcProvider extends BaseProvider {\n    constructor(url, network) {\n        let networkOrReady = network;\n        // The network is unknown, query the JSON-RPC for it\n        if (networkOrReady == null) {\n            networkOrReady = new Promise((resolve, reject) => {\n                setTimeout(() => {\n                    this.detectNetwork().then((network) => {\n                        resolve(network);\n                    }, (error) => {\n                        reject(error);\n                    });\n                }, 0);\n            });\n        }\n        super(networkOrReady);\n        // Default URL\n        if (!url) {\n            url = getStatic(this.constructor, \"defaultUrl\")();\n        }\n        if (typeof (url) === \"string\") {\n            defineReadOnly(this, \"connection\", Object.freeze({\n                url: url\n            }));\n        }\n        else {\n            defineReadOnly(this, \"connection\", Object.freeze(shallowCopy(url)));\n        }\n        this._nextId = 42;\n    }\n    get _cache() {\n        if (this._eventLoopCache == null) {\n            this._eventLoopCache = {};\n        }\n        return this._eventLoopCache;\n    }\n    static defaultUrl() {\n        return \"http:/\\/localhost:8545\";\n    }\n    detectNetwork() {\n        if (!this._cache[\"detectNetwork\"]) {\n            this._cache[\"detectNetwork\"] = this._uncachedDetectNetwork();\n            // Clear this cache at the beginning of the next event loop\n            setTimeout(() => {\n                this._cache[\"detectNetwork\"] = null;\n            }, 0);\n        }\n        return this._cache[\"detectNetwork\"];\n    }\n    _uncachedDetectNetwork() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield timer(0);\n            let chainId = null;\n            try {\n                chainId = yield this.send(\"eth_chainId\", []);\n            }\n            catch (error) {\n                try {\n                    chainId = yield this.send(\"net_version\", []);\n                }\n                catch (error) { }\n            }\n            if (chainId != null) {\n                const getNetwork = getStatic(this.constructor, \"getNetwork\");\n                try {\n                    return getNetwork(BigNumber.from(chainId).toNumber());\n                }\n                catch (error) {\n                    return logger.throwError(\"could not detect network\", Logger.errors.NETWORK_ERROR, {\n                        chainId: chainId,\n                        event: \"invalidNetwork\",\n                        serverError: error\n                    });\n                }\n            }\n            return logger.throwError(\"could not detect network\", Logger.errors.NETWORK_ERROR, {\n                event: \"noNetwork\"\n            });\n        });\n    }\n    getSigner(addressOrIndex) {\n        return new JsonRpcSigner(_constructorGuard, this, addressOrIndex);\n    }\n    getUncheckedSigner(addressOrIndex) {\n        return this.getSigner(addressOrIndex).connectUnchecked();\n    }\n    listAccounts() {\n        return this.send(\"eth_accounts\", []).then((accounts) => {\n            return accounts.map((a) => this.formatter.address(a));\n        });\n    }\n    send(method, params) {\n        const request = {\n            method: method,\n            params: params,\n            id: (this._nextId++),\n            jsonrpc: \"2.0\"\n        };\n        this.emit(\"debug\", {\n            action: \"request\",\n            request: deepCopy(request),\n            provider: this\n        });\n        // We can expand this in the future to any call, but for now these\n        // are the biggest wins and do not require any serializing parameters.\n        const cache = ([\"eth_chainId\", \"eth_blockNumber\"].indexOf(method) >= 0);\n        if (cache && this._cache[method]) {\n            return this._cache[method];\n        }\n        const result = fetchJson(this.connection, JSON.stringify(request), getResult).then((result) => {\n            this.emit(\"debug\", {\n                action: \"response\",\n                request: request,\n                response: result,\n                provider: this\n            });\n            return result;\n        }, (error) => {\n            this.emit(\"debug\", {\n                action: \"response\",\n                error: error,\n                request: request,\n                provider: this\n            });\n            throw error;\n        });\n        // Cache the fetch, but clear it on the next event loop\n        if (cache) {\n            this._cache[method] = result;\n            setTimeout(() => {\n                this._cache[method] = null;\n            }, 0);\n        }\n        return result;\n    }\n    prepareRequest(method, params) {\n        switch (method) {\n            case \"getBlockNumber\":\n                return [\"eth_blockNumber\", []];\n            case \"getGasPrice\":\n                return [\"eth_gasPrice\", []];\n            case \"getBalance\":\n                return [\"eth_getBalance\", [getLowerCase(params.address), params.blockTag]];\n            case \"getTransactionCount\":\n                return [\"eth_getTransactionCount\", [getLowerCase(params.address), params.blockTag]];\n            case \"getCode\":\n                return [\"eth_getCode\", [getLowerCase(params.address), params.blockTag]];\n            case \"getStorageAt\":\n                return [\"eth_getStorageAt\", [getLowerCase(params.address), hexZeroPad(params.position, 32), params.blockTag]];\n            case \"sendTransaction\":\n                return [\"eth_sendRawTransaction\", [params.signedTransaction]];\n            case \"getBlock\":\n                if (params.blockTag) {\n                    return [\"eth_getBlockByNumber\", [params.blockTag, !!params.includeTransactions]];\n                }\n                else if (params.blockHash) {\n                    return [\"eth_getBlockByHash\", [params.blockHash, !!params.includeTransactions]];\n                }\n                return null;\n            case \"getTransaction\":\n                return [\"eth_getTransactionByHash\", [params.transactionHash]];\n            case \"getTransactionReceipt\":\n                return [\"eth_getTransactionReceipt\", [params.transactionHash]];\n            case \"call\": {\n                const hexlifyTransaction = getStatic(this.constructor, \"hexlifyTransaction\");\n                return [\"eth_call\", [hexlifyTransaction(params.transaction, { from: true }), params.blockTag]];\n            }\n            case \"estimateGas\": {\n                const hexlifyTransaction = getStatic(this.constructor, \"hexlifyTransaction\");\n                return [\"eth_estimateGas\", [hexlifyTransaction(params.transaction, { from: true })]];\n            }\n            case \"getLogs\":\n                if (params.filter && params.filter.address != null) {\n                    params.filter.address = getLowerCase(params.filter.address);\n                }\n                return [\"eth_getLogs\", [params.filter]];\n            default:\n                break;\n        }\n        return null;\n    }\n    perform(method, params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Legacy networks do not like the type field being passed along (which\n            // is fair), so we delete type if it is 0 and a non-EIP-1559 network\n            if (method === \"call\" || method === \"estimateGas\") {\n                const tx = params.transaction;\n                if (tx && tx.type != null && BigNumber.from(tx.type).isZero()) {\n                    // If there are no EIP-1559 properties, it might be non-EIP-1559\n                    if (tx.maxFeePerGas == null && tx.maxPriorityFeePerGas == null) {\n                        const feeData = yield this.getFeeData();\n                        if (feeData.maxFeePerGas == null && feeData.maxPriorityFeePerGas == null) {\n                            // Network doesn't know about EIP-1559 (and hence type)\n                            params = shallowCopy(params);\n                            params.transaction = shallowCopy(tx);\n                            delete params.transaction.type;\n                        }\n                    }\n                }\n            }\n            const args = this.prepareRequest(method, params);\n            if (args == null) {\n                logger.throwError(method + \" not implemented\", Logger.errors.NOT_IMPLEMENTED, { operation: method });\n            }\n            try {\n                return yield this.send(args[0], args[1]);\n            }\n            catch (error) {\n                return checkError(method, error, params);\n            }\n        });\n    }\n    _startEvent(event) {\n        if (event.tag === \"pending\") {\n            this._startPending();\n        }\n        super._startEvent(event);\n    }\n    _startPending() {\n        if (this._pendingFilter != null) {\n            return;\n        }\n        const self = this;\n        const pendingFilter = this.send(\"eth_newPendingTransactionFilter\", []);\n        this._pendingFilter = pendingFilter;\n        pendingFilter.then(function (filterId) {\n            function poll() {\n                self.send(\"eth_getFilterChanges\", [filterId]).then(function (hashes) {\n                    if (self._pendingFilter != pendingFilter) {\n                        return null;\n                    }\n                    let seq = Promise.resolve();\n                    hashes.forEach(function (hash) {\n                        // @TODO: This should be garbage collected at some point... How? When?\n                        self._emitted[\"t:\" + hash.toLowerCase()] = \"pending\";\n                        seq = seq.then(function () {\n                            return self.getTransaction(hash).then(function (tx) {\n                                self.emit(\"pending\", tx);\n                                return null;\n                            });\n                        });\n                    });\n                    return seq.then(function () {\n                        return timer(1000);\n                    });\n                }).then(function () {\n                    if (self._pendingFilter != pendingFilter) {\n                        self.send(\"eth_uninstallFilter\", [filterId]);\n                        return;\n                    }\n                    setTimeout(function () { poll(); }, 0);\n                    return null;\n                }).catch((error) => { });\n            }\n            poll();\n            return filterId;\n        }).catch((error) => { });\n    }\n    _stopEvent(event) {\n        if (event.tag === \"pending\" && this.listenerCount(\"pending\") === 0) {\n            this._pendingFilter = null;\n        }\n        super._stopEvent(event);\n    }\n    // Convert an ethers.js transaction into a JSON-RPC transaction\n    //  - gasLimit => gas\n    //  - All values hexlified\n    //  - All numeric values zero-striped\n    //  - All addresses are lowercased\n    // NOTE: This allows a TransactionRequest, but all values should be resolved\n    //       before this is called\n    // @TODO: This will likely be removed in future versions and prepareRequest\n    //        will be the preferred method for this.\n    static hexlifyTransaction(transaction, allowExtra) {\n        // Check only allowed properties are given\n        const allowed = shallowCopy(allowedTransactionKeys);\n        if (allowExtra) {\n            for (const key in allowExtra) {\n                if (allowExtra[key]) {\n                    allowed[key] = true;\n                }\n            }\n        }\n        checkProperties(transaction, allowed);\n        const result = {};\n        // JSON-RPC now requires numeric values to be \"quantity\" values\n        [\"chainId\", \"gasLimit\", \"gasPrice\", \"type\", \"maxFeePerGas\", \"maxPriorityFeePerGas\", \"nonce\", \"value\"].forEach(function (key) {\n            if (transaction[key] == null) {\n                return;\n            }\n            const value = hexValue(BigNumber.from(transaction[key]));\n            if (key === \"gasLimit\") {\n                key = \"gas\";\n            }\n            result[key] = value;\n        });\n        [\"from\", \"to\", \"data\"].forEach(function (key) {\n            if (transaction[key] == null) {\n                return;\n            }\n            result[key] = hexlify(transaction[key]);\n        });\n        if (transaction.accessList) {\n            result[\"accessList\"] = accessListify(transaction.accessList);\n        }\n        return result;\n    }\n}\n//# sourceMappingURL=json-rpc-provider.js.map","\"use strict\";\nimport { deepCopy, defineReadOnly } from \"@ethersproject/properties\";\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nconst logger = new Logger(version);\nimport { JsonRpcProvider } from \"./json-rpc-provider\";\nlet _nextId = 1;\nfunction buildWeb3LegacyFetcher(provider, sendFunc) {\n    const fetcher = \"Web3LegacyFetcher\";\n    return function (method, params) {\n        const request = {\n            method: method,\n            params: params,\n            id: (_nextId++),\n            jsonrpc: \"2.0\"\n        };\n        return new Promise((resolve, reject) => {\n            this.emit(\"debug\", {\n                action: \"request\",\n                fetcher,\n                request: deepCopy(request),\n                provider: this\n            });\n            sendFunc(request, (error, response) => {\n                if (error) {\n                    this.emit(\"debug\", {\n                        action: \"response\",\n                        fetcher,\n                        error,\n                        request,\n                        provider: this\n                    });\n                    return reject(error);\n                }\n                this.emit(\"debug\", {\n                    action: \"response\",\n                    fetcher,\n                    request,\n                    response,\n                    provider: this\n                });\n                if (response.error) {\n                    const error = new Error(response.error.message);\n                    error.code = response.error.code;\n                    error.data = response.error.data;\n                    return reject(error);\n                }\n                resolve(response.result);\n            });\n        });\n    };\n}\nfunction buildEip1193Fetcher(provider) {\n    return function (method, params) {\n        if (params == null) {\n            params = [];\n        }\n        const request = { method, params };\n        this.emit(\"debug\", {\n            action: \"request\",\n            fetcher: \"Eip1193Fetcher\",\n            request: deepCopy(request),\n            provider: this\n        });\n        return provider.request(request).then((response) => {\n            this.emit(\"debug\", {\n                action: \"response\",\n                fetcher: \"Eip1193Fetcher\",\n                request,\n                response,\n                provider: this\n            });\n            return response;\n        }, (error) => {\n            this.emit(\"debug\", {\n                action: \"response\",\n                fetcher: \"Eip1193Fetcher\",\n                request,\n                error,\n                provider: this\n            });\n            throw error;\n        });\n    };\n}\nexport class Web3Provider extends JsonRpcProvider {\n    constructor(provider, network) {\n        if (provider == null) {\n            logger.throwArgumentError(\"missing provider\", \"provider\", provider);\n        }\n        let path = null;\n        let jsonRpcFetchFunc = null;\n        let subprovider = null;\n        if (typeof (provider) === \"function\") {\n            path = \"unknown:\";\n            jsonRpcFetchFunc = provider;\n        }\n        else {\n            path = provider.host || provider.path || \"\";\n            if (!path && provider.isMetaMask) {\n                path = \"metamask\";\n            }\n            subprovider = provider;\n            if (provider.request) {\n                if (path === \"\") {\n                    path = \"eip-1193:\";\n                }\n                jsonRpcFetchFunc = buildEip1193Fetcher(provider);\n            }\n            else if (provider.sendAsync) {\n                jsonRpcFetchFunc = buildWeb3LegacyFetcher(provider, provider.sendAsync.bind(provider));\n            }\n            else if (provider.send) {\n                jsonRpcFetchFunc = buildWeb3LegacyFetcher(provider, provider.send.bind(provider));\n            }\n            else {\n                logger.throwArgumentError(\"unsupported provider\", \"provider\", provider);\n            }\n            if (!path) {\n                path = \"unknown:\";\n            }\n        }\n        super(path, network);\n        defineReadOnly(this, \"jsonRpcFetchFunc\", jsonRpcFetchFunc);\n        defineReadOnly(this, \"provider\", subprovider);\n    }\n    send(method, params) {\n        return this.jsonRpcFetchFunc(method, params);\n    }\n}\n//# sourceMappingURL=web3-provider.js.map","import { toasts } from '$lib/stores/toasts';\nimport { get } from '@square/svelte-store';\nimport { BigNumber, ethers } from 'ethers';\nimport { walletconnectAccount, walletconnectProvider } from '$lib/stores/walletconnect';\n\nexport async function ethersExecute(\n  calldata: Uint8Array,\n  to: string,\n): Promise<ethers.providers.TransactionResponse> {\n  if (!walletconnectProvider || !get(walletconnectAccount)) {\n    toasts.error('user not connected');\n    return Promise.reject('user not connected');\n  } else {\n    const ethersProvider = new ethers.providers.Web3Provider(walletconnectProvider);\n    const signer = ethersProvider.getSigner();\n    const rawtx = {\n      data: calldata,\n      to,\n    };\n    return signer.sendTransaction(rawtx);\n  }\n}\n\nconst allowanceAbi = ['function allowance(address owner, address spender) view returns (uint256)'];\nconst balanceOfAbi = ['function balanceOf(address account) view returns (uint256)'];\n\nexport async function checkAllowance(tokenAddress: string, spender: string): Promise<BigNumber> {\n  if (!walletconnectProvider) {\n    toasts.error('user not connected');\n    return Promise.reject('user not connected');\n  } else {\n    const ethersProvider = new ethers.providers.Web3Provider(walletconnectProvider);\n    const signer = ethersProvider.getSigner();\n    const contract = new ethers.Contract(tokenAddress, allowanceAbi, signer);\n    return contract.allowance(await signer.getAddress(), spender) as BigNumber;\n  }\n}\n\nexport async function checkERC20Balance(tokenAddress: string): Promise<BigNumber> {\n  if (!walletconnectProvider) {\n    toasts.error('user not connected');\n    return Promise.reject('user not connected');\n  } else {\n    const ethersProvider = new ethers.providers.Web3Provider(walletconnectProvider);\n    const signer = ethersProvider.getSigner();\n    const contract = new ethers.Contract(tokenAddress, balanceOfAbi, signer);\n    return contract.balanceOf(await signer.getAddress()) as BigNumber;\n  }\n}\n","<script lang=\"ts\">\n  import { Button, Modal } from 'flowbite-svelte';\n  import { ledgerWalletAddress } from '$lib/stores/wallets';\n  import InputLedgerWallet from '$lib/components/InputLedgerWallet.svelte';\n  import InputWalletConnect from '$lib/components/InputWalletConnect.svelte';\n  import { walletConnectNetwork, walletconnectAccount } from '$lib/stores/walletconnect';\n  import {\n    IconLedger,\n    IconWalletConnect,\n    ButtonLoading,\n    getNetworkName,\n  } from '@rainlanguage/ui-components';\n  import type { NetworkCfg } from '@rainlanguage/orderbook';\n\n  export let open = false;\n  export let title: string;\n  export let execButtonLabel: string;\n  export let executeLedger: () => Promise<void>;\n  export let executeWalletconnect: () => Promise<void>;\n  export let isSubmitting = false;\n  export let onBack: (() => void) | undefined = undefined;\n  export let chainId: number | undefined = undefined;\n  export let overrideNetwork: NetworkCfg | undefined = undefined;\n\n  let selectedLedger = false;\n  let selectedWalletconnect = false;\n\n  function reset() {\n    open = false;\n    if (!isSubmitting) {\n      selectedLedger = false;\n      selectedWalletconnect = false;\n    }\n  }\n</script>\n\n<Modal {title} bind:open outsideclose={!isSubmitting} size=\"sm\" on:close={reset}>\n  {#if !selectedLedger && !selectedWalletconnect && !$walletconnectAccount && !$ledgerWalletAddress}\n    <div class=\"flex justify-center space-x-4\">\n      <Button class=\"text-lg\" on:click={() => (selectedLedger = true)}>\n        <div class=\"mr-4\">\n          <IconLedger />\n        </div>\n        Ledger Wallet\n      </Button>\n      <Button class=\"text-lg\" on:click={() => (selectedWalletconnect = true)}>\n        <div class=\"mr-3\">\n          <IconWalletConnect />\n        </div>\n        WalletConnect\n      </Button>\n    </div>\n\n    <div class=\"flex justify-end space-x-4\">\n      {#if onBack}\n        <Button\n          color=\"alternative\"\n          on:click={() => {\n            onBack?.();\n            reset();\n          }}>Back</Button\n        >\n      {/if}\n    </div>\n  {:else if selectedLedger || $ledgerWalletAddress}\n    <InputLedgerWallet />\n    <div\n      class={!$ledgerWalletAddress\n        ? 'flex justify-between space-x-4'\n        : 'flex justify-end space-x-4'}\n    >\n      {#if !$ledgerWalletAddress}\n        <Button color=\"alternative\" on:click={() => (selectedLedger = false)}>Back</Button>\n      {/if}\n      <ButtonLoading\n        on:click={() => executeLedger().finally(() => reset())}\n        disabled={isSubmitting || !$ledgerWalletAddress}\n        loading={isSubmitting}\n      >\n        {execButtonLabel}\n      </ButtonLoading>\n    </div>\n  {:else if selectedWalletconnect || $walletconnectAccount}\n    <InputWalletConnect priorityChainIds={chainId ? [chainId] : []} />\n    <div\n      class={!$walletconnectAccount\n        ? 'flex items-center justify-between space-x-4'\n        : 'flex items-center justify-end space-x-4'}\n    >\n      {#if !$walletconnectAccount}\n        <Button color=\"alternative\" on:click={() => (selectedWalletconnect = false)}>Back</Button>\n      {/if}\n      <ButtonLoading\n        on:click={() => executeWalletconnect().finally(() => reset())}\n        disabled={isSubmitting || !$walletconnectAccount || $walletConnectNetwork !== chainId}\n        loading={isSubmitting}\n      >\n        {execButtonLabel}\n      </ButtonLoading>\n      {#if $walletconnectAccount && $walletConnectNetwork !== chainId}\n        <div class=\"text-red-500\" data-testid=\"network-connection-error\">\n          You are connected to {getNetworkName($walletConnectNetwork) || 'an unknown'} network. Please\n          connect your wallet to {overrideNetwork?.key || getNetworkName(chainId ?? 0) || 'unknown'}\n          network.\n        </div>\n      {/if}\n    </div>\n  {/if}\n</Modal>\n","<script lang=\"ts\">\n  import { Button, Modal, Label, ButtonGroup } from 'flowbite-svelte';\n  import { Float, type AccountBalance, type RaindexVault } from '@rainlanguage/orderbook';\n  import { vaultDeposit } from '$lib/services/vault';\n  import { InputTokenAmount, useRaindexClient } from '@rainlanguage/ui-components';\n  import { ethersExecute } from '$lib/services/ethersTx';\n  import { toasts } from '$lib/stores/toasts';\n  import ModalExecute from './ModalExecute.svelte';\n  import { formatEthersTransactionError } from '$lib/utils/transaction';\n  import { reportErrorToSentry } from '$lib/services/sentry';\n  import { hexToBytes, toHex } from 'viem';\n  import { onMount } from 'svelte';\n\n  const raindexClient = useRaindexClient();\n\n  export let open = false;\n  export let vault: RaindexVault;\n  export let onDeposit: () => void;\n\n  let amount: Float;\n  let isSubmitting = false;\n  let selectWallet = false;\n  let userBalance: AccountBalance = {\n    balance: Float.parse('0').value,\n    formattedBalance: '0',\n  } as unknown as AccountBalance;\n\n  function reset() {\n    open = false;\n    if (!isSubmitting) {\n      amount = Float.parse('0').value as Float;\n      selectWallet = false;\n    }\n  }\n\n  async function executeLedger() {\n    isSubmitting = true;\n    try {\n      await vaultDeposit(raindexClient, vault, amount);\n      onDeposit();\n    } catch (e) {\n      reportErrorToSentry(e);\n    }\n    isSubmitting = false;\n    reset();\n  }\n\n  async function executeWalletconnect() {\n    isSubmitting = true;\n    try {\n      const allowance = await vault.getAllowance();\n      if (allowance.error) {\n        throw new Error(allowance.error.readableMsg);\n      }\n      let allowanceFloat = Float.parse(allowance.value);\n      if (allowanceFloat.error) {\n        throw new Error(allowanceFloat.error.readableMsg);\n      }\n\n      if (allowanceFloat.value.lt(amount).value) {\n        const calldata = await vault.getApprovalCalldata(amount);\n        if (calldata.error) {\n          throw new Error(calldata.error.readableMsg);\n        }\n        const approveTx = await ethersExecute(hexToBytes(calldata.value), vault.token.address);\n        toasts.success('Approve Transaction sent successfully!');\n        await approveTx.wait(1);\n      }\n\n      const calldata = await vault.getDepositCalldata(amount);\n      if (calldata.error) {\n        throw new Error(calldata.error.readableMsg);\n      }\n      const depositTx = await ethersExecute(hexToBytes(calldata.value), vault.orderbook);\n      toasts.success('Transaction sent successfully!');\n      await depositTx.wait(1);\n      onDeposit();\n    } catch (e) {\n      reportErrorToSentry(e);\n      toasts.error(formatEthersTransactionError(e));\n    }\n    isSubmitting = false;\n    reset();\n  }\n\n  async function fetchUserBalance() {\n    const balance = await vault.getOwnerBalance();\n    if (balance.error) {\n      throw new Error(balance.error.readableMsg);\n    }\n    userBalance = balance.value;\n  }\n\n  onMount(() => {\n    fetchUserBalance();\n  });\n</script>\n\n{#if !selectWallet}\n  <Modal title=\"Deposit to Vault\" bind:open outsideclose size=\"sm\" on:close={reset}>\n    <div>\n      <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n        Vault ID\n      </h5>\n      <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n        {toHex(vault.vaultId)}\n      </p>\n    </div>\n\n    <div>\n      <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n        Token\n      </h5>\n      <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n        {vault.token.name}\n      </p>\n    </div>\n\n    <div>\n      <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n        Owner\n      </h5>\n      <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n        {vault.owner}\n      </p>\n    </div>\n\n    <div class=\"flex justify-between\">\n      <div class=\"w-1/2\">\n        <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n          Your Balance\n        </h5>\n        <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n          {userBalance.formattedBalance}\n        </p>\n      </div>\n      <div class=\"w-1/2\">\n        <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n          Vault Balance\n        </h5>\n        <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n          {vault.formattedBalance}\n        </p>\n      </div>\n    </div>\n\n    <div class=\"mb-6\">\n      <Label\n        for=\"amount\"\n        class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\"\n      >\n        Amount\n      </Label>\n      <ButtonGroup class=\"w-full\">\n        <InputTokenAmount\n          bind:value={amount}\n          symbol={vault.token.symbol}\n          maxValue={userBalance.balance}\n        />\n      </ButtonGroup>\n    </div>\n    <div class=\"flex w-full justify-end space-x-4\">\n      <Button color=\"alternative\" on:click={reset} disabled={isSubmitting}>Cancel</Button>\n      <Button\n        on:click={() => {\n          selectWallet = true;\n          open = false;\n        }}\n        disabled={!amount || amount.isZero().value || isSubmitting}\n      >\n        Proceed\n      </Button>\n    </div>\n  </Modal>\n{/if}\n\n<ModalExecute\n  chainId={vault.chainId}\n  bind:open={selectWallet}\n  onBack={() => (open = true)}\n  title=\"Deposit to Vault\"\n  execButtonLabel=\"Deposit\"\n  {executeLedger}\n  {executeWalletconnect}\n  bind:isSubmitting\n/>\n","<script lang=\"ts\">\n  import { Button, Modal, Label, Helper } from 'flowbite-svelte';\n  import { Float, type RaindexVault } from '@rainlanguage/orderbook';\n  import { vaultWithdraw } from '$lib/services/vault';\n  import { InputTokenAmount, useRaindexClient } from '@rainlanguage/ui-components';\n  import { ethersExecute } from '$lib/services/ethersTx';\n  import { toasts } from '$lib/stores/toasts';\n  import ModalExecute from './ModalExecute.svelte';\n  import { reportErrorToSentry } from '$lib/services/sentry';\n  import { formatEthersTransactionError } from '$lib/utils/transaction';\n  import { hexToBytes, toHex } from 'viem';\n\n  const raindexClient = useRaindexClient();\n\n  export let open = false;\n  export let vault: RaindexVault;\n  export let onWithdraw: () => void;\n\n  let amount: Float = Float.parse('0').value as Float;\n  let amountGTBalance: boolean;\n  let isSubmitting = false;\n  let selectWallet = false;\n\n  $: amountGTBalance = amount ? !!amount.gt(vault.balance).value : false;\n\n  function reset() {\n    open = false;\n    if (!isSubmitting) {\n      amount = Float.parse('0').value as Float;\n      selectWallet = false;\n    }\n  }\n\n  async function executeLedger() {\n    isSubmitting = true;\n    try {\n      await vaultWithdraw(raindexClient, vault, amount);\n      onWithdraw();\n    } catch (e) {\n      reportErrorToSentry(e);\n    }\n    isSubmitting = false;\n    reset();\n  }\n\n  async function executeWalletconnect() {\n    isSubmitting = true;\n    try {\n      const calldata = await vault.getWithdrawCalldata(amount);\n      if (calldata.error) {\n        throw new Error(calldata.error.readableMsg);\n      }\n      const tx = await ethersExecute(hexToBytes(calldata.value), vault.orderbook);\n      toasts.success('Transaction sent successfully!');\n      await tx.wait(1);\n      onWithdraw();\n    } catch (e) {\n      reportErrorToSentry(e);\n      toasts.error(formatEthersTransactionError(e));\n    }\n    isSubmitting = false;\n    reset();\n  }\n</script>\n\n{#if !selectWallet}\n  <Modal\n    title=\"Withdraw from Vault\"\n    bind:open\n    outsideclose={!isSubmitting}\n    size=\"sm\"\n    on:close={reset}\n  >\n    <div>\n      <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n        Vault ID\n      </h5>\n      <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n        {toHex(vault.vaultId)}\n      </p>\n    </div>\n\n    <div>\n      <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n        Token\n      </h5>\n      <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n        {vault.token.name}\n      </p>\n    </div>\n\n    <div>\n      <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n        Owner\n      </h5>\n      <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n        {vault.owner}\n      </p>\n    </div>\n\n    <div>\n      <h5 class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\">\n        Vault Balance\n      </h5>\n      <p class=\"break-all font-normal leading-tight text-gray-700 dark:text-gray-400\">\n        {vault.formattedBalance}\n      </p>\n    </div>\n\n    <div class=\"mb-6 w-full\">\n      <Label\n        for=\"amount\"\n        class=\"mb-2 w-full text-xl font-bold tracking-tight text-gray-900 dark:text-white\"\n      >\n        Target Amount\n      </Label>\n      <InputTokenAmount bind:value={amount} symbol={vault.token.symbol} maxValue={vault.balance} />\n\n      <Helper color=\"red\" class=\"h-6 text-sm\">\n        {#if amountGTBalance}\n          Target amount cannot exceed available balance.\n        {/if}\n      </Helper>\n    </div>\n    <div class=\"flex w-full justify-end space-x-4\">\n      <Button color=\"alternative\" on:click={reset}>Cancel</Button>\n\n      <Button\n        on:click={() => {\n          selectWallet = true;\n          open = false;\n        }}\n        disabled={!amount || amount.isZero().value || amountGTBalance || isSubmitting}\n      >\n        Proceed\n      </Button>\n    </div>\n  </Modal>\n{/if}\n\n<ModalExecute\n  chainId={vault.chainId}\n  bind:open={selectWallet}\n  onBack={() => (open = true)}\n  title=\"Withdraw from Vault\"\n  execButtonLabel=\"Withdraw\"\n  {executeLedger}\n  {executeWalletconnect}\n  bind:isSubmitting\n/>\n","import { get } from 'svelte/store';\nimport { invoke } from '@tauri-apps/api';\nimport { ledgerWalletDerivationIndex } from '$lib/stores/wallets';\nimport type {\n  DeploymentCfg,\n  RaindexClient,\n  RaindexOrder,\n  ScenarioCfg,\n} from '@rainlanguage/orderbook';\n\nexport async function orderAdd(dotrain: string, deployment: DeploymentCfg) {\n  await invoke('order_add', {\n    dotrain,\n    deployment,\n    transactionArgs: {\n      rpcs: deployment.order.network.rpcs,\n      orderbook_address: deployment.order.orderbook?.address,\n      derivation_index: get(ledgerWalletDerivationIndex),\n      chain_id: deployment.order.network.chainId,\n    },\n  });\n}\n\nexport async function orderRemove(raindexClient: RaindexClient, order: RaindexOrder) {\n  const orderbook = raindexClient.getOrderbookByAddress(order.orderbook);\n  if (orderbook.error) {\n    throw new Error(orderbook.error.readableMsg);\n  }\n\n  await invoke('order_remove', {\n    order,\n    transactionArgs: {\n      rpcs: orderbook.value.network.rpcs,\n      orderbook_address: order.orderbook,\n      derivation_index: get(ledgerWalletDerivationIndex),\n      chain_id: order.chainId,\n    },\n    subgraphArgs: {\n      url: orderbook.value.subgraph.url,\n    },\n  });\n}\n\nexport async function orderAddCalldata(dotrain: string, deployment: DeploymentCfg) {\n  return await invoke('order_add_calldata', {\n    dotrain,\n    deployment,\n    transactionArgs: {\n      rpcs: deployment.order.network.rpcs,\n      orderbook_address: deployment.order.orderbook?.address,\n      derivation_index: undefined,\n      chain_id: deployment.order.network.chainId,\n    },\n  });\n}\n\nexport async function orderAddComposeRainlang(\n  dotrain: string,\n  settings: string[],\n  scenario: ScenarioCfg,\n): Promise<string> {\n  return await invoke('compose_from_scenario', {\n    dotrain,\n    settings,\n    scenario,\n  });\n}\n\nexport async function validateSpecVersion(dotrain: string, settings: string[]): Promise<undefined> {\n  return await invoke('validate_spec_version', {\n    dotrain,\n    settings,\n  });\n}\n","<script lang=\"ts\">\n  import ModalExecute from '$lib/components/ModalExecute.svelte';\n  import { orderRemove } from '$lib/services/order';\n  import { ethersExecute } from '$lib/services/ethersTx';\n  import { toasts } from '$lib/stores/toasts';\n  import { reportErrorToSentry } from '$lib/services/sentry';\n  import { formatEthersTransactionError } from '$lib/utils/transaction';\n  import type { RaindexOrder } from '@rainlanguage/orderbook';\n  import { hexToBytes } from 'viem';\n  import { useRaindexClient } from '@rainlanguage/ui-components';\n\n  const raindexClient = useRaindexClient();\n\n  export let order: RaindexOrder;\n  export let onOrderRemoved: () => void;\n\n  let isSubmitting = false;\n  let openOrderRemoveModal = true;\n\n  async function executeLedger() {\n    isSubmitting = true;\n    try {\n      await orderRemove(raindexClient, order);\n      onOrderRemoved();\n    } catch (e) {\n      reportErrorToSentry(e);\n    }\n    isSubmitting = false;\n  }\n  async function executeWalletconnect() {\n    isSubmitting = true;\n    try {\n      const calldata = order.getRemoveCalldata();\n      if (calldata.error) {\n        throw new Error(calldata.error.readableMsg);\n      }\n      const tx = await ethersExecute(hexToBytes(calldata.value), order.orderbook);\n      toasts.success('Transaction sent successfully!');\n      await tx.wait(1);\n      onOrderRemoved();\n    } catch (e) {\n      reportErrorToSentry(e);\n      toasts.error(formatEthersTransactionError(e));\n    }\n    isSubmitting = false;\n  }\n</script>\n\n<ModalExecute\n  chainId={order.chainId}\n  bind:open={openOrderRemoveModal}\n  title=\"Remove Order\"\n  execButtonLabel=\"Remove Order\"\n  {executeLedger}\n  {executeWalletconnect}\n  bind:isSubmitting\n/>\n","import type { RainEvalResultsTable } from '@rainlanguage/orderbook';\nimport { invoke } from '@tauri-apps/api';\nimport { mockIPC } from '@tauri-apps/api/mocks';\n\nexport const tradeDebug = async (txHash: string, rpcUrls: string[]) => {\n  return await invoke<RainEvalResultsTable>('debug_trade', {\n    txHash,\n    rpcs: rpcUrls,\n  });\n};\n\nexport const mockTradeDebug: RainEvalResultsTable = {\n  columnNames: ['1', '2', '3'],\n  rows: [['0x01', '0x02', '0x03']],\n};\n\nif (import.meta.vitest) {\n  const { it, expect } = import.meta.vitest;\n\n  it('uses the trade_debug command correctly', async () => {\n    mockIPC((cmd) => {\n      if (cmd === 'debug_trade') {\n        return mockTradeDebug;\n      }\n    });\n\n    const result = await tradeDebug('0x123', ['https://rpc-url.com']);\n    expect(result).toEqual(mockTradeDebug);\n  });\n}\n","<script lang=\"ts\">\n  import type { RainEvalResultsTable } from '@rainlanguage/orderbook';\n  import {\n    Table,\n    TableBody,\n    TableBodyCell,\n    TableBodyRow,\n    TableHead,\n    TableHeadCell,\n  } from 'flowbite-svelte';\n  import { formatEther, hexToBigInt, isHex } from 'viem';\n\n  export let table: RainEvalResultsTable;\n</script>\n\n<Table\n  divClass=\"cursor-pointer rounded-lg overflow-hidden dark:border-none border overflow-x-scroll\"\n>\n  <TableHead>\n    <TableHeadCell>Stack item</TableHeadCell>\n    <TableHeadCell>Value</TableHeadCell>\n    <TableHeadCell>Hex</TableHeadCell>\n  </TableHead>\n  <TableBody>\n    {#each table.rows[0] as value, i}\n      <TableBodyRow>\n        <TableBodyCell data-testid=\"debug-stack\">{table.columnNames[i]}</TableBodyCell>\n        <TableBodyCell data-testid=\"debug-value\"\n          >{isHex(value) ? formatEther(hexToBigInt(value)) : ''}</TableBodyCell\n        >\n        <TableBodyCell data-testid=\"debug-value-hex\">{value}</TableBodyCell>\n      </TableBodyRow>\n    {/each}\n  </TableBody>\n</Table>\n","<script lang=\"ts\">\n  import { queryClient } from '$lib/queries/queryClient';\n  import { tradeDebug } from '$lib/queries/tradeDebug';\n  import { createQuery } from '@tanstack/svelte-query';\n  import { Alert, Modal, Spinner } from 'flowbite-svelte';\n  import EvalResultsTable from '../debug/EvalResultsTable.svelte';\n\n  export let open: boolean;\n  export let txHash: string;\n  export let rpcUrls: string[];\n\n  $: debugQuery = createQuery(\n    {\n      queryKey: [txHash + rpcUrls.join(',')],\n      queryFn: () => {\n        return tradeDebug(txHash, rpcUrls);\n      },\n      retry: 0,\n    },\n    queryClient,\n  );\n</script>\n\n<Modal title=\"Debug trade\" bind:open outsideclose size=\"lg\">\n  <div class=\"flex flex-col gap-y-2 text-sm\">\n    <span data-testid=\"modal-trade-debug-tx-hash\">Trade transaction: {txHash}</span>\n    <span data-testid=\"modal-trade-debug-rpc-url\">RPCs: {rpcUrls.join(', ')}</span>\n  </div>\n  {#if $debugQuery.isLoading}\n    <div data-testid=\"modal-trade-debug-loading-message\" class=\"flex items-center gap-x-2\">\n      <Spinner size=\"4\" />\n      <span>Replaying trade... this can take a while.</span>\n    </div>\n  {/if}\n  {#if $debugQuery.isError}\n    <Alert data-testid=\"modal-trade-debug-error\" color=\"red\">{$debugQuery.error}</Alert>\n  {/if}\n  {#if $debugQuery.data}\n    <EvalResultsTable table={$debugQuery.data} />\n  {/if}\n</Modal>\n","import { invoke } from '@tauri-apps/api';\nimport type { RainEvalResultsTable, SgOrder } from '@rainlanguage/orderbook';\nimport { mockIPC } from '@tauri-apps/api/mocks';\n\nexport async function debugOrderQuote(\n  order: SgOrder,\n  rpcs: string[],\n  inputIOIndex: number,\n  outputIOIndex: number,\n  blockNumber?: number,\n) {\n  return await invoke<[RainEvalResultsTable, string | undefined]>('debug_order_quote', {\n    order,\n    inputIoIndex: inputIOIndex,\n    outputIoIndex: outputIOIndex,\n    blockNumber,\n    rpcs,\n  });\n}\n\nexport const mockQuoteDebug: [RainEvalResultsTable, string | undefined] = [\n  {\n    columnNames: ['1', '2', '3'],\n    rows: [['0x01', '0x02', '0x03']],\n  },\n  'some error msg',\n];\n\nif (import.meta.vitest) {\n  const { it, expect } = import.meta.vitest;\n\n  it('uses the trade_debug command correctly', async () => {\n    mockIPC((cmd) => {\n      if (cmd === 'debug_order_quote') {\n        return mockQuoteDebug;\n      }\n    });\n\n    const result = await debugOrderQuote(\n      {\n        id: '1',\n        orderbook: { id: '0x00' },\n        orderBytes: '0x123',\n        orderHash: '0x123',\n        owner: '0x123',\n        outputs: [],\n        inputs: [],\n        active: true,\n        timestampAdded: BigInt(123),\n        tradesCount: 0,\n      } as unknown as SgOrder,\n      ['http://localhost:8545'],\n      0,\n      0,\n      123,\n    );\n    expect(result).toEqual(mockQuoteDebug);\n  });\n}\n","<script lang=\"ts\">\n  import { debugOrderQuote } from '$lib/queries/orderQuote';\n  import { queryClient } from '$lib/queries/queryClient';\n  import type { RaindexOrder } from '@rainlanguage/orderbook';\n  import { createQuery } from '@tanstack/svelte-query';\n  import { Alert, Modal } from 'flowbite-svelte';\n  import { Refresh, useRaindexClient } from '@rainlanguage/ui-components';\n  import EvalResultsTable from '../debug/EvalResultsTable.svelte';\n  import { fade } from 'svelte/transition';\n\n  const raindexClient = useRaindexClient();\n\n  export let open: boolean;\n  export let order: RaindexOrder;\n  export let inputIOIndex: number;\n  export let outputIOIndex: number;\n  export let pair: string;\n  export let blockNumber: bigint | undefined;\n\n  $: debugQuery = createQuery(\n    {\n      queryKey: [order + pair + blockNumber],\n      queryFn: async () => {\n        const network = raindexClient.getNetworkByChainId(order.chainId);\n        if (network.error) {\n          throw new Error(network.error.readableMsg);\n        }\n\n        const sgOrder = order.convertToSgOrder();\n        if (sgOrder.error) {\n          throw new Error(sgOrder.error.readableMsg);\n        }\n\n        const result = await debugOrderQuote(\n          sgOrder.value,\n          network.value.rpcs,\n          inputIOIndex,\n          outputIOIndex,\n          blockNumber ? Number(blockNumber) : undefined,\n        );\n        return result;\n      },\n      retry: 0,\n      refetchOnWindowFocus: false,\n      refetchInterval: false,\n      refetchOnMount: true,\n    },\n    queryClient,\n  );\n</script>\n\n<Modal title={`Debugging quote for pair ${pair}`} bind:open outsideclose size=\"lg\">\n  <div class=\"flex items-center\">\n    {#if $debugQuery.data}\n      <div class=\"flex flex-col text-sm\">\n        <span class=\"whitespace-nowrap\" data-testid=\"modal-quote-debug-block-number\"\n          >Block: {blockNumber}</span\n        >\n      </div>\n    {/if}\n    <div class=\"flex w-full items-center justify-end\">\n      {#if $debugQuery.isLoading || $debugQuery.isFetching}\n        <span class=\"text-sm\" transition:fade data-testid=\"modal-quote-debug-loading-message\"\n          >Getting quote stack...</span\n        >\n      {/if}\n      <Refresh\n        data-testid=\"refreshButton\"\n        class=\"ml-2 h-8 w-5 cursor-pointer text-gray-400 dark:text-gray-400\"\n        on:click={() => $debugQuery.refetch()}\n        spin={$debugQuery.isLoading || $debugQuery.isFetching}\n      />\n    </div>\n  </div>\n  {#if $debugQuery.data}\n    {#if !!$debugQuery.data[1]}\n      <Alert data-testid=\"modal-quote-debug-error-partial\" color=\"red\">{$debugQuery.data[1]}</Alert>\n    {/if}\n    <EvalResultsTable table={$debugQuery.data[0]} />\n  {/if}\n  <div class=\"flex flex-col gap-y-2 text-sm\"></div>\n</Modal>\n","<script lang=\"ts\">\n  import { Modal } from 'flowbite-svelte';\n  import EvalResultsTable from '../debug/EvalResultsTable.svelte';\n  import type { RainEvalResultsTable } from '@rainlanguage/orderbook';\n  export let open: boolean;\n  export let pair: string;\n  export let data: RainEvalResultsTable;\n</script>\n\n<Modal title={`Debugging scenario for pair ${pair}`} bind:open outsideclose size=\"lg\">\n  <div class=\"flex items-center\">\n    <div class=\"flex w-full items-center justify-end\"></div>\n  </div>\n  <EvalResultsTable table={data} />\n  <div class=\"flex flex-col gap-y-2 text-sm\"></div>\n</Modal>\n","import ModalVaultDeposit from '$lib/components/ModalVaultDeposit.svelte';\nimport ModalVaultWithdraw from '$lib/components/ModalVaultWithdraw.svelte';\nimport type { RainEvalResultsTable, RaindexVault, RaindexOrder } from '@rainlanguage/orderbook';\nimport ModalOrderRemove from '$lib/components/modal/ModalOrderRemove.svelte';\nimport ModalTradeDebug from '$lib/components/modal/ModalTradeDebug.svelte';\nimport ModalQuoteDebug from '$lib/components/modal/ModalQuoteDebug.svelte';\nimport ModalScenarioDebug from '$lib/components/modal/ModalScenarioDebug.svelte';\nimport type { getAllContexts } from 'svelte';\n\nexport const handleDepositModal = (\n  vault: RaindexVault,\n  onDeposit: () => void,\n  context: ReturnType<typeof getAllContexts>,\n) => {\n  new ModalVaultDeposit({\n    target: document.body,\n    props: { open: true, vault, onDeposit },\n    context,\n  });\n};\n\nexport const handleWithdrawModal = (\n  vault: RaindexVault,\n  onWithdraw: () => void,\n  context: ReturnType<typeof getAllContexts>,\n) => {\n  new ModalVaultWithdraw({\n    target: document.body,\n    props: { open: true, vault, onWithdraw },\n    context,\n  });\n};\n\nexport const handleOrderRemoveModal = (\n  order: RaindexOrder,\n  onOrderRemoved: () => void,\n  context: ReturnType<typeof getAllContexts>,\n) => {\n  new ModalOrderRemove({\n    target: document.body,\n    props: { order, onOrderRemoved },\n    context,\n  });\n};\n\nexport const handleDebugTradeModal = (txHash: string, rpcUrls: string[]) => {\n  new ModalTradeDebug({ target: document.body, props: { open: true, txHash, rpcUrls } });\n};\n\nexport const handleQuoteDebugModal = (\n  order: RaindexOrder,\n  inputIOIndex: number,\n  outputIOIndex: number,\n  pair: string,\n  blockNumber?: bigint,\n) => {\n  new ModalQuoteDebug({\n    target: document.body,\n    props: {\n      open: true,\n      order,\n      inputIOIndex,\n      outputIOIndex,\n      pair,\n      blockNumber,\n    },\n  });\n};\n\nexport const handleScenarioDebugModal = (pair: string, data: RainEvalResultsTable) => {\n  new ModalScenarioDebug({ target: document.body, props: { open: true, pair, data } });\n};\n"],"names":["ctx","div_class_value","twMerge","insert_hydration","target","div","anchor","current","dirty","size","$$props","divClass","setContext","create_dynamic_element","svelte_element","svelte_element_data","set_dynamic_element_data","tag","show","use","label_levels","label","color","defaultClass","node","colorClasses","$$value","control","$$invalidate","labelClass","attr","input","if_block0","create_if_block_1","if_block1","create_if_block","wrapper_changes","clampSize","s","type","value","floatClass","borderClasses","ringClasses","background","getContext","group","textSizes","leftPadding","rightPadding","inputPadding","inputClass","_size","_color","$$slots","div_levels","darkBgClasses","divider","prefixPadding","twJoin","append_hydration","table","table_class_value","striped","hoverable","noborder","shadow","customeColor","colors","tbody","tableBodyClass","svelte_element_role_value","element","claim_element","nodes","get_spread_update","svelte_element_levels","previous_tag","safe_not_equal","tdClass","tdClassfinal","tr_levels","tr","hoverColors","stripColors","trClass","thead_levels","thead","theadClass","defaultRow","bgColors","textColor","borderColors","theadClassfinal","th_class_value","th","padding","QueryObserver","Subscribable","client","options","#client","#selectError","#currentThenable","pendingThenable","#currentQuery","#currentQueryInitialState","#currentResult","#currentResultState","#currentResultOptions","#selectFn","#selectResult","#lastQueryWithDefinedData","#staleTimeoutId","#refetchIntervalId","#currentRefetchInterval","#trackedProps","shouldFetchOnMount","#executeFetch","#updateTimers","shouldFetchOn","#clearStaleTimeout","#clearRefetchInterval","notifyOptions","prevOptions","prevQuery","resolveEnabled","#updateQuery","shallowEqualObjects","mounted","shouldFetchOptionally","resolveStaleTime","#updateStaleTimeout","nextRefetchInterval","#computeRefetchInterval","#updateRefetchInterval","query","result","shouldAssignObserverCurrentProperties","onPropTracked","trackedResult","key","defaultedOptions","fetchOptions","promise","noop","staleTime","isServer","isValidTimeout","timeout","timeUntilStale","nextInterval","focusManager","prevResult","prevResultState","prevResultOptions","queryInitialState","state","newState","isPlaceholderData","data","fetchOnMount","fetchOptionally","fetchState","error","errorUpdatedAt","status","replaceData","selectError","placeholderData","isFetching","isPending","isError","isLoading","hasData","nextResult","isStale","finalizeThenableIfPossible","thenable","recreateThenable","pending","prevThenable","defaultNotifyOptions","shouldNotifyListeners","notifyOnChangeProps","notifyOnChangePropsValue","includedProps","typedKey","#notify","notifyManager","listener","shouldLoadOnMount","field","observer","optimisticResult","useIsRestoring","getIsRestoringContext","useQueryClient","queryClient","getQueryClientContext","isSvelteStore","obj","createBaseQuery","Observer","isRestoring","optionsStore","readable","defaultedOptionsStore","derived","$optionsStore","$isRestoring","get","$defaultedOptions","set","unsubscribe","subscribe","$result","$defaultedOptionsStore","createQuery","svg_class_value","svg","path","sizes","role","ariaLabel","spin","testId","getNetworkName","chainId","chains","chain","DEFAULT_PAGE_SIZE","DEFAULT_REFRESH_INTERVAL","span","input_class_value","div2","div1","div0","symbol","maxValue","Float","inputValue","handleInput","event","parsedValue","fillMaxValue","formattedValue","AddressZero","HashZero","id","text","keccak256","toUtf8Bytes","version","decode","textData","i","arrayify","encode","flat","array","depth","forEach","flatDeep","arr","val","fromEntries","decode_arithmetic","bytes","pos","u16","symbol_count","total","acc","skip","pos_payload","read_width","read_buffer","read_bit","N","FULL","HALF","QRTR","MASK","register","symbols","low","range","start","end","mid","a","b","offset","x","read_payload","v","read_compressed_payload","signed","read_counts","next","read_ascending","read_deltas","read_member_array","lookup","n","vX","vN","j","read_mapped_map","ret","w","read_linear_table","read_replacement_table","read_zero_terminated_array","read_transposed","m","dx","dy","ys","_","j_dy","y","read_emoji_trie","sorted","read","branches","keys","temp","valid","fe0f","save","check","getData","r","VALID","IGNORED","MAPPED","EMOJI_ROOT","HYPHEN","UNDERSCORE","explode_cp","name","toUtf8CodePoints","filter_fe0f","cps","cp","ens_normalize_post_check","err","ens_normalize","normalize","emoji_filter","output","emoji","consume_emoji_reversed","nfc","eaten","_a","saved","stack","logger","Logger","Zeros","checkComponent","comp","ensNameSplit","comps","last","namehash","concat","hexlify","dnsEncode","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","reject","fulfilled","step","e","rejected","NegativeOne","BigNumber","Zero","One","MaxUint256","hexPadRight","padOffset","hexConcat","hexTrue","hexZeroPad","hexFalse","domainFieldTypes","domainFieldNames","checkString","domainChecks","getAddress","getBaseEncoder","match","width","boundsUpper","boundsLower","encodeType","fields","TypedDataEncoder","types","defineReadOnly","deepCopy","links","parents","subtypes","uniqueNames","baseType","primaryTypes","t","checkCircular","found","child","subtype","st","encoder","subEncoder","length","encodedType","values","callback","accum","domain","domainFields","resolveName","shallowCopy","ensCache","isHexString","domainValues","domainTypes","typesWithDomain","vaultDeposit","raindexClient","vault","amount","walletConnectNetwork","network","invoke","ledgerWalletDerivationIndex","vaultWithdraw","targetAmount","ForkEvent","Description","Provider","block","gasPrice","resolveProperties","lastBaseFeePerGas","maxFeePerGas","maxPriorityFeePerGas","eventName","allowedTransactionKeys","forwardErrors","Signer","blockTag","transaction","tx","signedTx","to","address","hasEip1559","feeData","results","operation","BaseX","alphabet","source","digits","carry","string","k","q","byte","Base58","sha256","hash","isRenetworkable","ethDefaultProvider","func","providers","providerList","provider","quorum","etcDefaultProvider","url","homestead","ropsten","classicMordor","networks","getNetwork","standard","defaultProvider","getUrl","href","request","opts","response","body","headers","staller","duration","bodyify","isBytesLike","toUtf8String","unpercent","all","code","_fetchData","connection","processFunc","attemptLimit","throttleCallback","throttleSlotInterval","errorPassThrough","allow304","authorization","base64Encode","reData","dataMatch","base64Decode","flatHeaders","header","runningTimeout","timer","runningFetch","attempt","location","tryAgain","stall","retryAfter","fetchJson","json","processJsonFunc","updated","poll","done","cancel","retryLimit","ALPHABET","ALPHABET_MAP","z","polymodStep","pre","prefixChk","prefix","chk","c","words","LIMIT","__decode","str","lowered","uppered","split","wordChars","decodeUnsafe","res","convert","inBits","outBits","pad","bits","maxV","toWordsUnsafe","toWords","fromWordsUnsafe","fromWords","bech32","Formatter","formats","bigNumber","hex","number","strictData","accessList","accessListify","strict","hexDataSlice","getContractAddress","hexValue","hexDataLength","format","difficulty","parseTransaction","object","nullValue","replaceValue","MAX_CCIP_REDIRECTS","checkTopic","topic","serializeTopics","topics","unique","deserializeTopics","getEventTag","getTime","PollableEvents","Event","once","filter","coinInfos","bytes32ify","base58Encode","matcherIpfs","matchers","_parseString","_parseBytes","getIpfsLink","link","numPad","padded","bytesPad","encodeBytes","datas","byteCount","Resolver","resolvedAddress","selector","parameters","parseBytes","coinType","hexBytes","coinInfo","p2pkh","p2sh","linkage","avatar","scheme","owner","addr","tokenId","tokenOwner","balance","metadataUrl","metadata","imageUrl","ipfs","ipns","swarm","skynet","urlSafe","keyBytes","defaultFormatter","nextPollId","BaseProvider","knownNetwork","getStatic","calldata","urls","sender","errorMessages","errorMessage","maxAge","internalBlockNumber","reqTime","checkInternalBlockNumber","blockNumber","networkError","respTime","pollId","runners","eventBlockNumber","runner","receipt","minFromBlock","logs","log","currentNetwork","now","transactionHash","confirmations","replaceable","cancelFuncs","alreadyDone","minedHandler","lastBlockNumber","scannedBlock","replaceHandler","nonce","mined","ti","reason","addressOrName","params","position","p","startBlock","confirms","replacement","signedTransaction","hexTx","txSender","urlsOffset","urlsLength","urlsData","u","callbackSelector","extraData","ccipResult","resolved","blockHashOrBlockTag","includeTransactions","blockWithTxs","currentName","resolver","addrData","resolverAddr","nameOrAddress","resolverAddress","method","args","stopped","eventTag","errorGas","spelunk","requireData","checkError","message","getResult","payload","getLowerCase","_constructorGuard","JsonRpcSigner","constructorGuard","addressOrIndex","UncheckedJsonRpcSigner","accounts","fromAddress","estimate","populated","_TypedDataEncoder","password","JsonRpcProvider","networkOrReady","cache","self","pendingFilter","filterId","hashes","seq","allowExtra","allowed","checkProperties","_nextId","buildWeb3LegacyFetcher","sendFunc","fetcher","buildEip1193Fetcher","Web3Provider","jsonRpcFetchFunc","subprovider","ethersExecute","walletconnectProvider","walletconnectAccount","toasts","signer","ethers.providers.Web3Provider","rawtx","create_if_block_6","create_if_block_5","inputwalletconnect_changes","buttonloading_changes","create_if_block_3","set_data","t1","t1_value","t3","t3_value","open","title","execButtonLabel","executeLedger","executeWalletconnect","isSubmitting","onBack","overrideNetwork","selectedLedger","selectedWalletconnect","reset","click_handler","click_handler_1","click_handler_3","click_handler_5","inputtokenamount_changes","toHex","t10_value","t14_value","t18_value","h50","p0","h51","p1","h52","p2","div5","div3","h53","p3","div4","h54","p4","div6","div7","t2","t2_value","t6","t6_value","t10","t14","t18","button1_changes","modalexecute_changes","useRaindexClient","onDeposit","selectWallet","userBalance","reportErrorToSentry","allowance","allowanceFloat","approveTx","hexToBytes","depositTx","formatEthersTransactionError","fetchUserBalance","onMount","onWithdraw","amountGTBalance","orderAdd","dotrain","deployment","orderRemove","order","orderbook","orderAddCalldata","orderAddComposeRainlang","settings","scenario","validateSpecVersion","onOrderRemoved","openOrderRemoveModal","tradeDebug","txHash","rpcUrls","t_value","isHex","formatEther","hexToBigInt","each_blocks","evalresultstable_changes","create_if_block_2","if_block2","span0","span1","t4","t4_value","$$subscribe_debugQuery","debugQuery","debugOrderQuote","rpcs","inputIOIndex","outputIOIndex","refresh_changes","pair","$debugQuery","sgOrder","handleDepositModal","context","ModalVaultDeposit","handleWithdrawModal","ModalVaultWithdraw","handleOrderRemoveModal","ModalOrderRemove","handleDebugTradeModal","ModalTradeDebug","handleQuoteDebugModal","ModalQuoteDebug","handleScenarioDebugModal","ModalScenarioDebug"],"mappings":"k8CAOSA,EAAW,CAAA,GAAS,MAAAC,EAAAC,GAAQF,EAAU,CAAA,EAAAA,KAAQ,KAAK,+MAA5DG,EAEKC,EAAAC,EAAAC,CAAA,uHAFIN,EAAW,CAAA,GAAS,CAAAO,GAAAC,EAAA,GAAAP,KAAAA,EAAAC,GAAQF,EAAU,CAAA,EAAAA,KAAQ,KAAK,KAAA,CAAA,MAAAC,CAAA,+KALjD,CAAA,KAAAQ,EAAO,IAAI,EAAAC,EACX,CAAA,SAAAC,EAAW,kCAAkC,EAAAD,EACxD,OAAAE,GAAW,QAAO,CAAI,KAAAH,EAAI,shBCEFT,EAAG,CAAA,QAAHA,EAAG,CAAA,GAAAa,GAAAb,CAAA,8FAAHA,EAAG,CAAA,SAAHA,EAAG,CAAA,CAAA,oBAAHA,EAAG,CAAA,iDAAHA,EAAG,CAAA,iDAAHA,EAAG,CAAA,iJAAcA,EAAW,CAAA,CAAA,+DAA5BA,EAAG,CAAA,CAAA,iCAAHA,EAAG,CAAA,GAAA,QAAA,YAAA,EAAA,EAAA,qDAAHA,EAAG,CAAA,CAAA,EAAAc,EAAAC,CAAA,UAAzBZ,EAA4EC,EAAAU,EAAAR,CAAA,qIAAtDU,GAAAhB,qBAAiBA,EAAW,CAAA,CAAA,CAAA,CAAA,qJAD/CA,EAAI,CAAA,EAAA,wZALU,CAAA,IAAAiB,EAAM,KAAK,EAAAP,GACnB,KAAAQ,CAAI,EAAAR,GACJ,IAAAS,EAAG,IAAA,8kBCmBgB,IAAAC,EAAA,CAAApB,YAAoBA,EAAU,CAAA,EAAA,0LAA1DG,EAA2EC,EAAAiB,EAAAf,CAAA,6HAA/CN,EAAW,CAAA,oBAASA,EAAU,CAAA,CAAA,0JAFvDA,EAAI,CAAA,EAAA,yaAlBE,CAAA,MAAAsB,EAAQ,MAAM,EAAAZ,EACd,CAAA,aAAAa,EAAe,0CAA0C,EAAAb,EACzD,CAAA,KAAAQ,EAAO,EAAI,EAAAR,EAClBc,QACEC,EAAY,CACd,KAAM,mCACN,MAAO,qCACP,IAAK,iCACL,SAAU,8EAYMD,EAAIE,2OATvB,OACSC,EAAUH,GAAM,QACtBI,EAAA,EAAAN,EAAQK,GAAS,SAAW,WAAaL,CAAK,EAE/CM,EAAA,EAAAC,EAAa3B,GAAQqB,EAAcE,EAAaH,CAAK,EAAGZ,EAAQ,KAAK,CAAA,qMCoCpDV,EAAW,CAAA,EAAE,MAAOA,EAAU,CAAA,gNAJjC8B,EAAAzB,EAAA,QAAAJ,EAAAC,GAAQF,EAAY,CAAA,EAAAA,KAAQ,SAAS,EAAA,qCAAA,UAAlDG,EAEKC,EAAAC,EAAAC,CAAA,4GAFQ,CAAAC,GAAAC,EAAA,CAAA,EAAA,IAAAP,KAAAA,EAAAC,GAAQF,EAAY,CAAA,EAAAA,KAAQ,SAAS,EAAA,uJAKvCA,EAAW,CAAA,EAAiK,CAAA,KAAAA,EAAI,CAAA,CAAA,SAAWA,EAAU,CAAA,CAAA,gJAAhNG,EAAmNC,EAAA2B,EAAAzB,CAAA,mXAAxMN,EAAW,CAAA,EAAiKQ,EAAA,CAAA,EAAA,GAAA,CAAA,KAAAR,EAAI,CAAA,CAAA,iBAAWA,EAAU,CAAA,CAAA,yPAGnM8B,EAAAzB,EAAA,QAAAJ,EAAAC,GAAQF,EAAY,CAAA,EAAAA,KAAQ,UAAU,EAAA,eAAA,UAAnDG,EAA8FC,EAAAC,EAAAC,CAAA,4GAAjF,CAAAC,GAAAC,EAAA,CAAA,EAAA,IAAAP,KAAAA,EAAAC,GAAQF,EAAY,CAAA,EAAAA,KAAQ,UAAU,EAAA,gIAThDgC,EAAAhC,KAAQ,MAAIiC,GAAAjC,CAAA,sDAQZ,IAAAkC,EAAAlC,KAAQ,OAAKmC,GAAAnC,CAAA,wMARbA,KAAQ,wOAQRA,KAAQ,iTATwB,KAAAA,EAAQ,CAAA,EAAA,MAAQA,KAAQ,wIAAxBQ,EAAA,CAAA,EAAA,KAAA4B,EAAA,KAAApC,EAAQ,CAAA,EAAA,MAAQA,KAAQ,4IA9CtB,SAAAqC,GAAUC,EAAC,CACzC,OAAAA,GAAKA,IAAM,KAAO,KAAOA,IAAM,KAAO,KAAOA,sJAO7C,GAAA,CAAA,KAAAC,EAAO,MAAM,EAAA7B,EACb,CAAA,MAAA8B,EAAQ,MAAS,EAAA9B,EACjB,CAAA,KAAAD,EAAO,MAAS,EAAAC,EAChB,CAAA,aAAAa,EAAe,6EAA6E,EAAAb,EAC5F,CAAA,MAAAY,EAAQ,MAAM,EAAAZ,EACd,CAAA,WAAA+B,EAAa,uEAAuE,EAAA/B,QACzFgC,EAAa,CACf,KAAM,uCACN,OAAQ,uCACR,MAAO,yCACP,IAAK,sCAEHC,EAAW,CACb,KAAM,4GACN,MAAO,oGACP,IAAK,6FAEHlB,EAAY,CACd,KAAM,sFACN,OAAQ,sFACR,MAAO,mHACP,IAAK,8GAGLmB,EAAaC,GAAW,YAAY,EACpCC,EAAQD,GAAW,OAAO,QACxBE,EAAS,CAAK,GAAI,aAAc,GAAI,UAAW,GAAI,gBACnDC,EAAW,CAAK,GAAI,OAAQ,GAAI,QAAS,GAAI,OAAO,EACpDC,EAAY,CAAK,GAAI,OAAQ,GAAI,QAAS,GAAI,OAAO,EACrDC,EAAY,CAAK,GAAI,MAAO,GAAI,QAAS,GAAI,KAAK,MAEpDC,8wBADHvB,EAAA,GAAEwB,EAAQ3C,GAAQ4B,GAAUS,GAAO,IAAI,GAAK,IAAI,EAEhD,OACSO,EAAS/B,IAAU,QAAUsB,EAAa,SAAWtB,EAC3DM,EAAA,EAAAuB,GAAajD,GAAO,CAAEqB,EAAc2B,EAAaE,CAAK,EAAIE,EAAQ,MAAQN,EAAYI,CAAK,GAAOE,EAAQ,OAASL,EAAaG,CAAK,EAAIT,EAAYrB,CAAK,EAAGG,EAAa4B,CAAM,EAAGX,EAAcW,CAAM,EAAGN,EAAUK,CAAK,EAAGN,GAAS,aAAcA,GAAS,uCAAwCA,GAAS,0CAA2CpC,EAAQ,iSChB3V,IAAA6C,EAAA,CAAAvD,YAAoBA,EAAQ,CAAA,EAAA,sLAArCG,EAEKC,EAAAC,EAAAC,CAAA,uHAFIN,EAAW,CAAA,oBAASA,EAAQ,CAAA,CAAA,6JAvB1B,CAAA,KAAAS,EAAO,MAAS,EAAAC,EAEvBkC,EAAaC,GAAW,YAAY,EACpCC,EAAQD,GAAW,OAAO,QACxBH,EAAa,CACf,KAAM,uCACN,OAAQ,wCAENc,EAAa,CACf,KAAM,sCACN,OAAQ,uCAENC,EAAO,CACT,KAAM,qDACN,OAAQ,sDAENV,EAAS,CAAK,GAAI,aAAc,GAAI,UAAW,GAAI,gBACnDW,EAAa,CAAK,GAAI,OAAQ,GAAI,OAAQ,GAAI,MAAM,yJAEzD9B,EAAA,EAAEwB,EAAQ3C,GAAQ4B,GAAUS,GAAO,IAAI,GAAK,IAAI,EAChDlB,EAAA,EAAEjB,EAAWT,GAAQ6C,EAAUK,CAAK,EAAGM,EAAcN,CAAK,EAAGR,EAAaF,EAAc,OAAYA,EAAc,KAAS,4BAA6BE,EAAaY,EAAc,OAASA,EAAc,KAAMZ,EAAaa,EAAQ,OAASA,EAAQ,KAAM,qEAAsE,uCAAwC/C,EAAQ,uLCItWV,EAAW,CAAA,WAASE,GAAQ,2BAA4BF,KAAOA,EAAK,CAAA,CAAA,EAAGA,EAAO,CAAA,EAAC,KAAK,+OADrF8B,EAAAzB,EAAA,QAAAJ,EAAA0D,GAAO3D,EAAU,CAAA,EAAAA,MAAU,yBAAyB,CAAA,UAAhEG,EAIKC,EAAAC,EAAAC,CAAA,EAHHsD,EAEOvD,EAAAwD,CAAA,6HAFI7D,EAAW,CAAA,oBAASE,GAAQ,2BAA4BF,KAAOA,EAAK,CAAA,CAAA,EAAGA,EAAO,CAAA,EAAC,KAAK,KAAA,CAAA,MAAA8D,CAAA,MADrF,CAAAvD,GAAAC,EAAA,GAAAP,KAAAA,EAAA0D,GAAO3D,EAAU,CAAA,EAAAA,MAAU,yBAAyB,yOAxBrD,CAAA,SAAAW,EAAW,0BAA0B,EAAAD,EACrC,CAAA,QAAAqD,EAAU,EAAK,EAAArD,EACf,CAAA,UAAAsD,EAAY,EAAK,EAAAtD,EACjB,CAAA,SAAAuD,EAAW,EAAK,EAAAvD,EAChB,CAAA,OAAAwD,EAAS,EAAK,EAAAxD,EACd,CAAA,MAAAY,EAAQ,SAAS,EAAAZ,EACjB,CAAA,aAAAyD,EAAe,EAAE,EAAAzD,QACtB0D,EAAM,CACR,QAAS,mCACT,KAAM,mCACN,MAAO,qCACP,IAAK,iCACL,OAAQ,uCACR,OAAQ,uCACR,OAAQ,uCACR,KAAM,mCACN,OAAQD,6WAETvD,GAAW,UAAWmD,CAAO,kBAC7BnD,GAAW,YAAaoD,CAAS,kBACjCpD,GAAW,WAAYqD,CAAQ,gBAC/BrD,GAAW,QAASU,CAAK,yXCpBdtB,EAAc,CAAA,CAAA,UAA5BG,EAEOC,EAAAiE,EAAA/D,CAAA,2HAFON,EAAc,CAAA,CAAA,sHAHT,CAAA,eAAAsE,EAAiB,MAAS,EAAA5D,4QCSgBV,EAAW,CAAA,SAASA,EAAY,CAAA,CAAA,GAAiB,KAAAuE,EAAAvE,EAAQ,CAAA,EAAA,QAAU,SAAW,kEAArHc,EAAA0D,EAAAxE,EAAQ,CAAA,EAAA,QAAU,SAAW,IAAI,0BAAjCc,EAAA2D,EAAAC,IAAA1E,EAAQ,CAAA,EAAA,QAAU,SAAW,OAAI,QAAA,cAAA,CAAA,MAAA,GAAA,KAAA,GAAA,kDAAjCgB,GAAAhB,EAAQ,CAAA,EAAA,QAAU,SAAW,IAAI,EAAAc,EAAAC,CAAA,UAAvDZ,EAEgBC,EAAAU,EAAAR,CAAA,iIAFMU,GAAAhB,EAAQ,CAAA,EAAA,QAAU,SAAW,IAAI,EAAAc,EAAAC,EAAA4D,GAAAC,EAAA,MAAM5E,EAAW,CAAA,oBAASA,EAAY,CAAA,CAAA,GAAiB,CAAAO,GAAAC,EAAA,GAAA+D,KAAAA,EAAAvE,EAAQ,CAAA,EAAA,QAAU,SAAW,UAAS,CAAA,KAAAuE,CAAA,gGAA9H,IAAAM,EAAA7E,EAAQ,CAAA,EAAA,QAAU,SAAW,SAA7Bc,GAAAd,EAAQ,CAAA,EAAA,QAAU,SAAW,OAAIa,GAAAb,CAAA,gGAAjCA,EAAQ,CAAA,EAAA,UAAR8E,GAAAD,EAAA7E,EAAQ,CAAA,EAAA,QAAU,SAAW,IAAI,kBAAjC6E,EAAA7E,EAAQ,CAAA,EAAA,QAAU,SAAW,kDAA7B6E,EAAA7E,EAAQ,CAAA,EAAA,QAAU,SAAW,mLAPxC,CAAA,QAAA+E,EAAU,0CAA0C,EAAArE,EAC3DY,EAAQ,UACZA,EAAQuB,GAAW,OAAO,MACtBmC,gLACHpD,EAAA,EAAEoD,EAAe9E,GAAQ6E,EAASzD,IAAU,UAAY,gCAAkC,oDAAqDZ,EAAQ,mLC4BhJ,IAAAuE,EAAA,CAAAjF,YAAoBA,EAAO,CAAA,EAAA,oLAAnCG,EAEIC,EAAA8E,EAAA5E,CAAA,mMAFIN,EAAW,CAAA,oBAASA,EAAO,CAAA,CAAA,kKAhCxB,MAAAsB,EAAQuB,GAAW,OAAO,CAAA,EAAAnC,QAC/B0D,EAAM,CACR,QAAS,iDACT,KAAM,8BACN,MAAO,gCACP,IAAK,4BACL,OAAQ,kCACR,OAAQ,kCACR,OAAQ,IAENe,EAAW,CACb,QAAS,0CACT,KAAM,oBACN,MAAO,qBACP,IAAK,mBACL,OAAQ,sBACR,OAAQ,sBACR,OAAQ,IAENC,EAAW,CACb,QAAS,0EACT,KAAM,8EACN,MAAO,kFACP,IAAK,0EACL,OAAQ,sFACR,OAAQ,sFACR,OAAQ,QAERC,6OACHzD,EAAA,EAAEyD,EAAUnF,GAAO,EAAG2C,GAAW,UAAU,GAAK,2BAA4BuB,EAAO9C,CAAK,EAAGuB,GAAW,WAAW,GAAKsC,EAAY7D,CAAK,EAAGuB,GAAW,SAAS,GAAKuC,EAAY9D,CAAK,EAAGZ,EAAQ,8gBCN5LP,EAEIC,EAAA8E,EAAA5E,CAAA,6OAHDN,EAAU,CAAA,EAAA,0BADN,IAAAsF,EAAA,CAAAtF,YAAoBA,EAAe,CAAA,EAAA,oLAA9CG,EAQOC,EAAAmF,EAAAjF,CAAA,uLARIN,EAAW,CAAA,oBAASA,EAAe,CAAA,CAAA,yKArBnC,CAAA,WAAAwF,EAAa,mBAAmB,EAAA9E,EAChC,CAAA,WAAA+E,EAAa,EAAI,EAAA/E,EACxBY,EACJA,EAAQuB,GAAW,OAAO,MACtBoB,EAAWpB,GAAW,UAAU,EAChCkB,EAAUlB,GAAW,SAAS,QAE5B6C,EAAQ,CACV,QAFiBzB,GAAYF,EAAU,GAAK,8BAG5C,KAAM,cACN,MAAO,eACP,IAAK,aACL,OAAQ,gBACR,OAAQ,gBACR,OAAQ,QAER4B,EAAYrE,IAAU,UAAY,mCAAqCA,IAAU,SAAW,GAAK,8BACjGsE,EAAe7B,EAAU,GAAKzC,IAAU,UAAY,kBAAoBA,IAAU,SAAW,aAAeA,CAAK,sMAClHuE,EAAkB3F,GAAQsF,EAAYG,EAAW5B,GAAW6B,EAAcF,EAASpE,CAAK,EAAGZ,EAAQ,KAAK,CAAA,oMChBnGV,EAAW,CAAA,GAAS,MAAA8F,EAAA5F,GAAQF,EAAS,CAAA,EAAAA,KAAQ,KAAK,sLAA1DG,EAEIC,EAAA2F,EAAAzF,CAAA,0SAFIN,EAAW,CAAA,GAAS,CAAAO,GAAAC,EAAA,GAAAsF,KAAAA,EAAA5F,GAAQF,EAAS,CAAA,EAAAA,KAAQ,KAAK,KAAA,CAAA,MAAA8F,CAAA,mKAH/C,CAAA,QAAAE,EAAU,WAAW,EAAAtF,+eCe7B,IAACuF,GAAgB,cAAcC,EAAa,CAC7C,YAAYC,EAAQC,EAAS,CAC3B,MAAO,EACP,KAAK,QAAUA,EACf,KAAKC,GAAUF,EACf,KAAKG,GAAe,KACpB,KAAKC,GAAmBC,GAAiB,EACpC,KAAK,QAAQ,+BAChB,KAAKD,GAAiB,OACpB,IAAI,MAAM,2DAA2D,CACtE,EAEH,KAAK,YAAa,EAClB,KAAK,WAAWH,CAAO,CAC3B,CACEC,GACAI,GAAgB,OAChBC,GAA4B,OAC5BC,GAAiB,OACjBC,GACAC,GACAN,GACAD,GACAQ,GACAC,GAGAC,GACAC,GACAC,GACAC,GACAC,GAAgC,IAAI,IACpC,aAAc,CACZ,KAAK,QAAU,KAAK,QAAQ,KAAK,IAAI,CACzC,CACE,aAAc,CACR,KAAK,UAAU,OAAS,IAC1B,KAAKX,GAAc,YAAY,IAAI,EAC/BY,GAAmB,KAAKZ,GAAe,KAAK,OAAO,EACrD,KAAKa,GAAe,EAEpB,KAAK,aAAc,EAErB,KAAKC,GAAe,EAE1B,CACE,eAAgB,CACT,KAAK,gBACR,KAAK,QAAS,CAEpB,CACE,wBAAyB,CACvB,OAAOC,GACL,KAAKf,GACL,KAAK,QACL,KAAK,QAAQ,kBACd,CACL,CACE,0BAA2B,CACzB,OAAOe,GACL,KAAKf,GACL,KAAK,QACL,KAAK,QAAQ,oBACd,CACL,CACE,SAAU,CACR,KAAK,UAA4B,IAAI,IACrC,KAAKgB,GAAoB,EACzB,KAAKC,GAAuB,EAC5B,KAAKjB,GAAc,eAAe,IAAI,CAC1C,CACE,WAAWL,EAASuB,EAAe,CACjC,MAAMC,EAAc,KAAK,QACnBC,EAAY,KAAKpB,GAEvB,GADA,KAAK,QAAU,KAAKJ,GAAQ,oBAAoBD,CAAO,EACnD,KAAK,QAAQ,UAAY,QAAU,OAAO,KAAK,QAAQ,SAAY,WAAa,OAAO,KAAK,QAAQ,SAAY,YAAc,OAAO0B,GAAe,KAAK,QAAQ,QAAS,KAAKrB,EAAa,GAAM,UACpM,MAAM,IAAI,MACR,uEACD,EAEH,KAAKsB,GAAc,EACnB,KAAKtB,GAAc,WAAW,KAAK,OAAO,EACtCmB,EAAY,YAAc,CAACI,GAAoB,KAAK,QAASJ,CAAW,GAC1E,KAAKvB,GAAQ,cAAe,EAAC,OAAO,CAClC,KAAM,yBACN,MAAO,KAAKI,GACZ,SAAU,IAClB,CAAO,EAEH,MAAMwB,EAAU,KAAK,aAAc,EAC/BA,GAAWC,GACb,KAAKzB,GACLoB,EACA,KAAK,QACLD,CACN,GACM,KAAKN,GAAe,EAEtB,KAAK,aAAaK,CAAa,EAC3BM,IAAY,KAAKxB,KAAkBoB,GAAaC,GAAe,KAAK,QAAQ,QAAS,KAAKrB,EAAa,IAAMqB,GAAeF,EAAY,QAAS,KAAKnB,EAAa,GAAK0B,GAAiB,KAAK,QAAQ,UAAW,KAAK1B,EAAa,IAAM0B,GAAiBP,EAAY,UAAW,KAAKnB,EAAa,IACrS,KAAK2B,GAAqB,EAE5B,MAAMC,EAAsB,KAAKC,GAAyB,EACtDL,IAAY,KAAKxB,KAAkBoB,GAAaC,GAAe,KAAK,QAAQ,QAAS,KAAKrB,EAAa,IAAMqB,GAAeF,EAAY,QAAS,KAAKnB,EAAa,GAAK4B,IAAwB,KAAKlB,KACvM,KAAKoB,GAAuBF,CAAmB,CAErD,CACE,oBAAoBjC,EAAS,CAC3B,MAAMoC,EAAQ,KAAKnC,GAAQ,cAAe,EAAC,MAAM,KAAKA,GAASD,CAAO,EAChEqC,EAAS,KAAK,aAAaD,EAAOpC,CAAO,EAC/C,OAAIsC,GAAsC,KAAMD,CAAM,IACpD,KAAK9B,GAAiB8B,EACtB,KAAK5B,GAAwB,KAAK,QAClC,KAAKD,GAAsB,KAAKH,GAAc,OAEzCgC,CACX,CACE,kBAAmB,CACjB,OAAO,KAAK9B,EAChB,CACE,YAAY8B,EAAQE,EAAe,CACjC,MAAMC,EAAgB,CAAE,EACxB,cAAO,KAAKH,CAAM,EAAE,QAASI,GAAQ,CACnC,OAAO,eAAeD,EAAeC,EAAK,CACxC,aAAc,GACd,WAAY,GACZ,IAAK,KACH,KAAK,UAAUA,CAAG,EAClBF,IAAgBE,CAAG,EACZJ,EAAOI,CAAG,EAE3B,CAAO,CACP,CAAK,EACMD,CACX,CACE,UAAUC,EAAK,CACb,KAAKzB,GAAc,IAAIyB,CAAG,CAC9B,CACE,iBAAkB,CAChB,OAAO,KAAKpC,EAChB,CACE,QAAQ,CAAE,GAAGL,CAAS,EAAG,GAAI,CAC3B,OAAO,KAAK,MAAM,CAChB,GAAGA,CACT,CAAK,CACL,CACE,gBAAgBA,EAAS,CACvB,MAAM0C,EAAmB,KAAKzC,GAAQ,oBAAoBD,CAAO,EAC3DoC,EAAQ,KAAKnC,GAAQ,cAAe,EAAC,MAAM,KAAKA,GAASyC,CAAgB,EAC/E,OAAON,EAAM,MAAK,EAAG,KAAK,IAAM,KAAK,aAAaA,EAAOM,CAAgB,CAAC,CAC9E,CACE,MAAMC,EAAc,CAClB,OAAO,KAAKzB,GAAc,CACxB,GAAGyB,EACH,cAAeA,EAAa,eAAiB,EACnD,CAAK,EAAE,KAAK,KACN,KAAK,aAAc,EACZ,KAAKpC,GACb,CACL,CACEW,GAAcyB,EAAc,CAC1B,KAAKhB,GAAc,EACnB,IAAIiB,EAAU,KAAKvC,GAAc,MAC/B,KAAK,QACLsC,CACD,EACD,OAAKA,GAAc,eACjBC,EAAUA,EAAQ,MAAMC,EAAI,GAEvBD,CACX,CACEZ,IAAsB,CACpB,KAAKX,GAAoB,EACzB,MAAMyB,EAAYf,GAChB,KAAK,QAAQ,UACb,KAAK1B,EACN,EACD,GAAI0C,IAAY,KAAKxC,GAAe,SAAW,CAACyC,GAAeF,CAAS,EACtE,OAGF,MAAMG,EADOC,GAAe,KAAK3C,GAAe,cAAeuC,CAAS,EACjD,EACvB,KAAKjC,GAAkB,WAAW,IAAM,CACjC,KAAKN,GAAe,SACvB,KAAK,aAAc,CAEtB,EAAE0C,CAAO,CACd,CACEf,IAA0B,CACxB,OAAQ,OAAO,KAAK,QAAQ,iBAAoB,WAAa,KAAK,QAAQ,gBAAgB,KAAK7B,EAAa,EAAI,KAAK,QAAQ,kBAAoB,EACrJ,CACE8B,GAAuBgB,EAAc,CACnC,KAAK7B,GAAuB,EAC5B,KAAKP,GAA0BoC,EAC3B,EAAAJ,IAAYrB,GAAe,KAAK,QAAQ,QAAS,KAAKrB,EAAa,IAAM,IAAS,CAAC2C,GAAe,KAAKjC,EAAuB,GAAK,KAAKA,KAA4B,KAGxK,KAAKD,GAAqB,YAAY,IAAM,EACtC,KAAK,QAAQ,6BAA+BsC,GAAa,UAAS,IACpE,KAAKlC,GAAe,CAE5B,EAAO,KAAKH,EAAuB,EACnC,CACEI,IAAgB,CACd,KAAKa,GAAqB,EAC1B,KAAKG,GAAuB,KAAKD,IAAyB,CAC9D,CACEb,IAAqB,CACf,KAAKR,KACP,aAAa,KAAKA,EAAe,EACjC,KAAKA,GAAkB,OAE7B,CACES,IAAwB,CAClB,KAAKR,KACP,cAAc,KAAKA,EAAkB,EACrC,KAAKA,GAAqB,OAEhC,CACE,aAAasB,EAAOpC,EAAS,CAC3B,MAAMyB,EAAY,KAAKpB,GACjBmB,EAAc,KAAK,QACnB6B,EAAa,KAAK9C,GAClB+C,EAAkB,KAAK9C,GACvB+C,EAAoB,KAAK9C,GAEzB+C,EADcpB,IAAUX,EACUW,EAAM,MAAQ,KAAK9B,GACrD,CAAE,MAAAmD,CAAK,EAAKrB,EAClB,IAAIsB,EAAW,CAAE,GAAGD,CAAO,EACvBE,EAAoB,GACpBC,EACJ,GAAI5D,EAAQ,mBAAoB,CAC9B,MAAM6B,EAAU,KAAK,aAAc,EAC7BgC,GAAe,CAAChC,GAAWZ,GAAmBmB,EAAOpC,CAAO,EAC5D8D,EAAkBjC,GAAWC,GAAsBM,EAAOX,EAAWzB,EAASwB,CAAW,GAC3FqC,IAAgBC,KAClBJ,EAAW,CACT,GAAGA,EACH,GAAGK,GAAWN,EAAM,KAAMrB,EAAM,OAAO,CACxC,GAECpC,EAAQ,qBAAuB,gBACjC0D,EAAS,YAAc,OAE/B,CACI,GAAI,CAAE,MAAAM,EAAO,eAAAC,EAAgB,OAAAC,CAAQ,EAAGR,EACxC,GAAI1D,EAAQ,QAAU0D,EAAS,OAAS,OACtC,GAAIL,GAAcK,EAAS,OAASJ,GAAiB,MAAQtD,EAAQ,SAAW,KAAKU,GACnFkD,EAAO,KAAKjD,OAEZ,IAAI,CACF,KAAKD,GAAYV,EAAQ,OACzB4D,EAAO5D,EAAQ,OAAO0D,EAAS,IAAI,EACnCE,EAAOO,GAAYd,GAAY,KAAMO,EAAM5D,CAAO,EAClD,KAAKW,GAAgBiD,EACrB,KAAK1D,GAAe,IACrB,OAAQkE,EAAa,CACpB,KAAKlE,GAAekE,CAC9B,MAGMR,EAAOF,EAAS,KAElB,GAAI1D,EAAQ,kBAAoB,QAAU4D,IAAS,QAAUM,IAAW,UAAW,CACjF,IAAIG,EACJ,GAAIhB,GAAY,mBAAqBrD,EAAQ,kBAAoBuD,GAAmB,gBAClFc,EAAkBhB,EAAW,aAE7BgB,EAAkB,OAAOrE,EAAQ,iBAAoB,WAAaA,EAAQ,gBACxE,KAAKY,IAA2B,MAAM,KACtC,KAAKA,EACN,EAAGZ,EAAQ,gBACRA,EAAQ,QAAUqE,IAAoB,OACxC,GAAI,CACFA,EAAkBrE,EAAQ,OAAOqE,CAAe,EAChD,KAAKnE,GAAe,IACrB,OAAQkE,GAAa,CACpB,KAAKlE,GAAekE,EAChC,CAGUC,IAAoB,SACtBH,EAAS,UACTN,EAAOO,GACLd,GAAY,KACZgB,EACArE,CACD,EACD2D,EAAoB,GAE5B,CACQ,KAAKzD,KACP8D,EAAQ,KAAK9D,GACb0D,EAAO,KAAKjD,GACZsD,EAAiB,KAAK,IAAK,EAC3BC,EAAS,SAEX,MAAMI,EAAaZ,EAAS,cAAgB,WACtCa,EAAYL,IAAW,UACvBM,EAAUN,IAAW,QACrBO,EAAYF,GAAaD,EACzBI,EAAUd,IAAS,OA4BnBe,EA3BS,CACb,OAAAT,EACA,YAAaR,EAAS,YACtB,UAAAa,EACA,UAAWL,IAAW,UACtB,QAAAM,EACA,iBAAkBC,EAClB,UAAAA,EACA,KAAAb,EACA,cAAeF,EAAS,cACxB,MAAAM,EACA,eAAAC,EACA,aAAcP,EAAS,kBACvB,cAAeA,EAAS,mBACxB,iBAAkBA,EAAS,iBAC3B,UAAWA,EAAS,gBAAkB,GAAKA,EAAS,iBAAmB,EACvE,oBAAqBA,EAAS,gBAAkBF,EAAkB,iBAAmBE,EAAS,iBAAmBF,EAAkB,iBACnI,WAAAc,EACA,aAAcA,GAAc,CAACC,EAC7B,eAAgBC,GAAW,CAACE,EAC5B,SAAUhB,EAAS,cAAgB,SACnC,kBAAAC,EACA,eAAgBa,GAAWE,EAC3B,QAASE,GAAQxC,EAAOpC,CAAO,EAC/B,QAAS,KAAK,QACd,QAAS,KAAKG,EACf,EAED,GAAI,KAAK,QAAQ,8BAA+B,CAC9C,MAAM0E,EAA8BC,GAAa,CAC3CH,EAAW,SAAW,QACxBG,EAAS,OAAOH,EAAW,KAAK,EACvBA,EAAW,OAAS,QAC7BG,EAAS,QAAQH,EAAW,IAAI,CAEnC,EACKI,GAAmB,IAAM,CAC7B,MAAMC,EAAU,KAAK7E,GAAmBwE,EAAW,QAAUvE,GAAiB,EAC9EyE,EAA2BG,CAAO,CACnC,EACKC,EAAe,KAAK9E,GAC1B,OAAQ8E,EAAa,OAAM,CACzB,IAAK,UACC7C,EAAM,YAAcX,EAAU,WAChCoD,EAA2BI,CAAY,EAEzC,MACF,IAAK,aACCN,EAAW,SAAW,SAAWA,EAAW,OAASM,EAAa,QACpEF,GAAkB,EAEpB,MACF,IAAK,YACCJ,EAAW,SAAW,SAAWA,EAAW,QAAUM,EAAa,SACrEF,GAAkB,EAEpB,KACV,CACA,CACI,OAAOJ,CACX,CACE,aAAapD,EAAe,CAC1B,MAAM8B,EAAa,KAAK9C,GAClBoE,EAAa,KAAK,aAAa,KAAKtE,GAAe,KAAK,OAAO,EAMrE,GALA,KAAKG,GAAsB,KAAKH,GAAc,MAC9C,KAAKI,GAAwB,KAAK,QAC9B,KAAKD,GAAoB,OAAS,SACpC,KAAKI,GAA4B,KAAKP,IAEpCuB,GAAoB+C,EAAYtB,CAAU,EAC5C,OAEF,KAAK9C,GAAiBoE,EACtB,MAAMO,EAAuB,CAAE,EACzBC,EAAwB,IAAM,CAClC,GAAI,CAAC9B,EACH,MAAO,GAET,KAAM,CAAE,oBAAA+B,GAAwB,KAAK,QAC/BC,EAA2B,OAAOD,GAAwB,WAAaA,EAAqB,EAAGA,EACrG,GAAIC,IAA6B,OAAS,CAACA,GAA4B,CAAC,KAAKrE,GAAc,KACzF,MAAO,GAET,MAAMsE,EAAgB,IAAI,IACxBD,GAA4B,KAAKrE,EAClC,EACD,OAAI,KAAK,QAAQ,cACfsE,EAAc,IAAI,OAAO,EAEpB,OAAO,KAAK,KAAK/E,EAAc,EAAE,KAAMkC,GAAQ,CACpD,MAAM8C,EAAW9C,EAEjB,OADgB,KAAKlC,GAAegF,CAAQ,IAAMlC,EAAWkC,CAAQ,GACnDD,EAAc,IAAIC,CAAQ,CACpD,CAAO,CACF,EACGhE,GAAe,YAAc,IAAS4D,EAAqB,IAC7DD,EAAqB,UAAY,IAEnC,KAAKM,GAAQ,CAAE,GAAGN,EAAsB,GAAG3D,CAAa,CAAE,CAC9D,CACEI,IAAe,CACb,MAAMS,EAAQ,KAAKnC,GAAQ,cAAa,EAAG,MAAM,KAAKA,GAAS,KAAK,OAAO,EAC3E,GAAImC,IAAU,KAAK/B,GACjB,OAEF,MAAMoB,EAAY,KAAKpB,GACvB,KAAKA,GAAgB+B,EACrB,KAAK9B,GAA4B8B,EAAM,MACnC,KAAK,iBACPX,GAAW,eAAe,IAAI,EAC9BW,EAAM,YAAY,IAAI,EAE5B,CACE,eAAgB,CACd,KAAK,aAAc,EACf,KAAK,gBACP,KAAKjB,GAAe,CAE1B,CACEqE,GAAQjE,EAAe,CACrBkE,GAAc,MAAM,IAAM,CACpBlE,EAAc,WAChB,KAAK,UAAU,QAASmE,GAAa,CACnCA,EAAS,KAAKnF,EAAc,CACtC,CAAS,EAEH,KAAKN,GAAQ,cAAe,EAAC,OAAO,CAClC,MAAO,KAAKI,GACZ,KAAM,wBACd,CAAO,CACP,CAAK,CACL,CACA,EACA,SAASsF,GAAkBvD,EAAOpC,EAAS,CACzC,OAAO0B,GAAe1B,EAAQ,QAASoC,CAAK,IAAM,IAASA,EAAM,MAAM,OAAS,QAAU,EAAEA,EAAM,MAAM,SAAW,SAAWpC,EAAQ,eAAiB,GACzJ,CACA,SAASiB,GAAmBmB,EAAOpC,EAAS,CAC1C,OAAO2F,GAAkBvD,EAAOpC,CAAO,GAAKoC,EAAM,MAAM,OAAS,QAAUhB,GAAcgB,EAAOpC,EAASA,EAAQ,cAAc,CACjI,CACA,SAASoB,GAAcgB,EAAOpC,EAAS4F,EAAO,CAC5C,GAAIlE,GAAe1B,EAAQ,QAASoC,CAAK,IAAM,GAAO,CACpD,MAAMhG,EAAQ,OAAOwJ,GAAU,WAAaA,EAAMxD,CAAK,EAAIwD,EAC3D,OAAOxJ,IAAU,UAAYA,IAAU,IAASwI,GAAQxC,EAAOpC,CAAO,CAC1E,CACE,MAAO,EACT,CACA,SAAS8B,GAAsBM,EAAOX,EAAWzB,EAASwB,EAAa,CACrE,OAAQY,IAAUX,GAAaC,GAAeF,EAAY,QAASY,CAAK,IAAM,MAAW,CAACpC,EAAQ,UAAYoC,EAAM,MAAM,SAAW,UAAYwC,GAAQxC,EAAOpC,CAAO,CACzK,CACA,SAAS4E,GAAQxC,EAAOpC,EAAS,CAC/B,OAAO0B,GAAe1B,EAAQ,QAASoC,CAAK,IAAM,IAASA,EAAM,cAAcL,GAAiB/B,EAAQ,UAAWoC,CAAK,CAAC,CAC3H,CACA,SAASE,GAAsCuD,EAAUC,EAAkB,CACzE,MAAK,CAAAlE,GAAoBiE,EAAS,iBAAkB,EAAEC,CAAgB,CAIxE,CC1dO,SAASC,IAAiB,CAC7B,OAAOC,GAAuB,CAClC,CCFO,SAASC,GAAeC,EAAa,CACxC,OAAIA,GAEGC,GAAuB,CAClC,CCLO,SAASC,GAAcC,EAAK,CAC/B,MAAO,cAAeA,GAAO,OAAOA,EAAI,WAAc,UAC1D,CCGO,SAASC,GAAgBtG,EAASuG,EAAUL,EAAa,CAE5D,MAAMnG,EAASkG,GAAeC,CAAW,EACnCM,EAAcT,GAAgB,EAE9BU,EAAeL,GAAcpG,CAAO,EAAIA,EAAU0G,GAAS1G,CAAO,EAElE2G,EAAwBC,GAAQ,CAACH,EAAcD,CAAW,EAAG,CAAC,CAACK,EAAeC,CAAY,IAAM,CAClG,MAAMpE,EAAmB3C,EAAO,oBAAoB8G,CAAa,EACjE,OAAAnE,EAAiB,mBAAqBoE,EAChC,cACA,aACCpE,CACf,CAAK,EAEKmD,EAAW,IAAIU,EAASxG,EAAQgH,GAAIJ,CAAqB,CAAC,EAChEA,EAAsB,UAAWK,GAAsB,CAGnDnB,EAAS,WAAWmB,EAAmB,CAAE,UAAW,EAAK,CAAE,CACnE,CAAK,EACD,MAAM3E,EAASuE,GAAQJ,EAAa,CAACM,EAAcG,IAAQ,CACvD,MAAMC,EAAcJ,EACd,IAAM,GACNjB,EAAS,UAAUJ,GAAc,WAAWwB,CAAG,CAAC,EACtD,OAAApB,EAAS,aAAc,EAChBqB,CACf,CAAK,EAEK,CAAE,UAAAC,GAAcP,GAAQ,CAACvE,EAAQsE,CAAqB,EAAG,CAAC,CAACS,EAASC,CAAsB,KAC5FD,EAAUvB,EAAS,oBAAoBwB,CAAsB,EACrDA,EAAuB,oBAEzBD,EADAvB,EAAS,YAAYuB,CAAO,EAErC,EACD,MAAO,CAAE,UAAAD,CAAW,CACxB,CCvCO,SAASG,GAAYtH,EAASkG,EAAa,CAC9C,OAAOI,GAAgBtG,EAASH,GAAeqG,CAAW,CAC9D,gDCcctM,EAAM,CAAA,CAAA,qDAGfA,EAAW,CAAA,GACR,MAAA2N,EAAAzN,GACN,uCACAF,KAAMA,EAAI,CAAA,CAAA,EACVA,EAAO,CAAA,EAAC,MACRA,EAAO,CAAA,EAAA,wBAA0B,EAAC,6BAGvBA,EAAS,CAAA,CAAA,+lBAZtBG,EA+BKC,EAAAwN,EAAAtN,CAAA,EAPJsD,EAMCgK,EAAAC,CAAA,uPA7BY7N,EAAM,CAAA,CAAA,2DAGfA,EAAW,CAAA,EACRQ,EAAA,KAAAmN,KAAAA,EAAAzN,GACN,uCACAF,KAAMA,EAAI,CAAA,CAAA,EACVA,EAAO,CAAA,EAAC,MACRA,EAAO,CAAA,EAAA,wBAA0B,EAAC,IAAA,CAAA,MAAA2N,CAAA,sCAGvB3N,EAAS,CAAA,CAAA,2JA3BhBA,EAAM6C,GAAW,SAAS,GAAA,CAAA,EAC1BiL,EAAK,CACT,GAAI,UACJ,GAAI,UACJ,GAAI,UACJ,GAAI,UACJ,GAAI,WAEK,GAAA,CAAA,KAAArN,EAAOT,EAAI,MAAQ,IAAI,EAAAU,EACvB,CAAA,KAAAqN,EAAO/N,EAAI,MAAQ,KAAK,EAAAU,EACxB,CAAA,UAAAsN,EAAY,SAAS,EAAAtN,EACrB,CAAA,KAAAuN,EAAO,EAAK,EAAAvN,EACZ,CAAA,OAAAwN,EAAS,gBAAgB,EAAAxN,uoBCb7B,SAASyN,GAAeC,EAAS,CAEpC,OADc,OAAO,OAAOC,EAAM,EAAE,KAAMC,GAAUA,EAAM,KAAOF,CAAO,GAC1D,IAClB,CCJY,MAACG,GAAoB,GACpBC,GAA2B,8JC2C6BxO,EAAY,CAAA,CAAA,6MAD7EG,EAEKC,EAAAC,EAAAC,CAAA,6MAD0E,KAAG,cAAH,KAAG,mYAQhFN,EAAM,CAAA,CAAA,2DAANA,EAAM,CAAA,CAAA,sEADRG,EAEMC,EAAAqO,EAAAnO,CAAA,2BADJN,EAAM,CAAA,CAAA,2DAVJA,EAAQ,CAAA,GAAAiC,GAAAjC,CAAA,IAOTA,EAAM,CAAA,GAAAmC,GAAAnC,CAAA,6VAZyU8B,EAAAC,EAAA,QAAA2M,EAAA,2UAAA1O,MAAU,6BAA6B,EAAA,+FAL7XG,EAyBKC,EAAAuO,EAAArO,CAAA,EAxBJsD,EAuBK+K,EAAAC,CAAA,EAtBJhL,EAaKgL,EAAAC,CAAA,EAZJjL,EAKCiL,EAAA9M,CAAA,OAFY/B,EAAU,CAAA,CAAA,wFACZA,EAAW,CAAA,CAAA,oBAF6T,CAAAO,GAAAC,EAAA,GAAAkO,KAAAA,EAAA,2UAAA1O,MAAU,6BAA6B,oCAC7WA,EAAU,CAAA,QAAVA,EAAU,CAAA,CAAA,EAIlBA,EAAQ,CAAA,mGAOTA,EAAM,CAAA,kNA/CF,GAAA,CAAA,OAAA8O,QAAe,EAAApO,EACf,CAAA,SAAAqO,QAAiB,EAAArO,EACjB,CAAA,MAAA8B,EAAQwM,GAAM,MAAM,GAAG,EAAE,KAAK,EAAAtO,EACrCuO,EAAa,GACR,SAAAC,EAAYC,EAAK,OAClBpN,EAAQoN,EAAM,OAEhB,OADJF,EAAalN,EAAM,KAAK,EACpBkN,IAAe,GACjBrN,EAAA,EAAAY,EAAQwM,GAAM,MAAM,GAAG,EAAE,KAAK,OAE1B,IAAAI,EAAcJ,GAAM,MAAMC,CAAU,EACpC,GAAAG,EAAY,MAAK,CACnBxN,EAAA,EAAAY,EAAQwM,GAAM,MAAM,GAAG,EAAE,KAAK,aAGhCxM,EAAQ4M,EAAY,KAAK,YAGpBC,GAAY,KACdN,EAAQ,OACbnN,EAAA,EAAAY,EAAQuM,CAAQ,EACZ,IAAAO,EAAiB9M,EAAM,OAAM,EAAG,UAC/B8M,EAAc,CACjB1N,EAAA,EAAAqN,EAAa,EAAE,SAGjBrN,EAAA,EAAAqN,EAAaK,CAAc,eAUbL,EAAU,KAAA,2OCtCnB,MAAMM,GAAc,6CCAdC,GAAW,qECEjB,SAASC,GAAGC,EAAM,CACrB,OAAOC,GAAUC,GAAYF,CAAI,CAAC,CACtC,CCJO,MAAMG,GAAU,aCEhB,SAASC,GAAOC,EAAU,CAC7BA,EAAW,KAAKA,CAAQ,EACxB,MAAM/F,EAAO,CAAE,EACf,QAASgG,EAAI,EAAGA,EAAID,EAAS,OAAQC,IACjChG,EAAK,KAAK+F,EAAS,WAAWC,CAAC,CAAC,EAEpC,OAAOC,GAASjG,CAAI,CACxB,CACO,SAASkG,GAAOlG,EAAM,CACzBA,EAAOiG,GAASjG,CAAI,EACpB,IAAI+F,EAAW,GACf,QAASC,EAAI,EAAGA,EAAIhG,EAAK,OAAQgG,IAC7BD,GAAY,OAAO,aAAa/F,EAAKgG,CAAC,CAAC,EAE3C,OAAO,KAAKD,CAAQ,CACxB,CCYA,SAASI,GAAKC,EAAOC,EAAO,CACpBA,GAAS,OACTA,EAAQ,GAEZ,MAAM5H,EAAS,CAAE,EACX6H,EAAU7H,EAAO,QACjB8H,EAAW,SAAUC,EAAKH,EAAO,CACnCC,EAAQ,KAAKE,EAAK,SAAUC,EAAK,CACzBJ,EAAQ,GAAK,MAAM,QAAQI,CAAG,EAC9BF,EAASE,EAAKJ,EAAQ,CAAC,EAGvB5H,EAAO,KAAKgI,CAAG,CAE/B,CAAS,CACJ,EACD,OAAAF,EAASH,EAAOC,CAAK,EACd5H,CACX,CACA,SAASiI,GAAYN,EAAO,CACxB,MAAM3H,EAAS,CAAE,EACjB,QAASuH,EAAI,EAAGA,EAAII,EAAM,OAAQJ,IAAK,CACnC,MAAMxN,EAAQ4N,EAAMJ,CAAC,EACrBvH,EAAOjG,EAAM,CAAC,CAAC,EAAIA,EAAM,CAAC,CAClC,CACI,OAAOiG,CACX,CACO,SAASkI,GAAkBC,EAAO,CACrC,IAAIC,EAAM,EACV,SAASC,GAAM,CAAE,OAAQF,EAAMC,GAAK,GAAK,EAAKD,EAAMC,GAAK,CAAE,CAE3D,IAAIE,EAAeD,EAAK,EACpBE,EAAQ,EACRC,EAAM,CAAC,EAAG,CAAC,EACf,QAASjB,EAAI,EAAGA,EAAIe,EAAcf,IAC9BiB,EAAI,KAAKD,GAASF,GAAK,EAG3B,IAAII,EAAOJ,EAAK,EACZK,EAAcN,EAClBA,GAAOK,EACP,IAAIE,EAAa,EACbC,EAAc,EAClB,SAASC,GAAW,CAChB,OAAIF,GAAc,IAGdC,EAAeA,GAAe,EAAKT,EAAMC,GAAK,EAC9CO,EAAa,GAETC,GAAe,EAAED,EAAc,CAC/C,CACI,MAAMG,EAAI,GACJC,EAAO,KAAK,IAAI,EAAGD,CAAC,EACpBE,EAAOD,IAAS,EAChBE,EAAOD,GAAQ,EACfE,EAAOH,EAAO,EAEpB,IAAII,EAAW,EACf,QAAS5B,EAAI,EAAGA,EAAIuB,EAAGvB,IACnB4B,EAAYA,GAAY,EAAKN,EAAU,EAC3C,IAAIO,EAAU,CAAE,EACZC,EAAM,EACNC,EAAQP,EACZ,OAAa,CACT,IAAIhP,EAAQ,KAAK,QAASoP,EAAWE,EAAM,GAAKd,EAAS,GAAKe,CAAK,EAC/DC,EAAQ,EACRC,EAAMlB,EACV,KAAOkB,EAAMD,EAAQ,GAAG,CACpB,IAAIE,EAAOF,EAAQC,IAAS,EACxBzP,EAAQyO,EAAIiB,CAAG,EACfD,EAAMC,EAGNF,EAAQE,CAExB,CACQ,GAAIF,GAAS,EACT,MACJH,EAAQ,KAAKG,CAAK,EAClB,IAAIG,GAAIL,EAAM,KAAK,MAAMC,EAAQd,EAAIe,CAAK,EAAIhB,CAAK,EAC/CoB,EAAIN,EAAM,KAAK,MAAMC,EAAQd,EAAIe,EAAQ,CAAC,EAAIhB,CAAK,EAAI,EAC3D,KAAS,GAAAmB,GAAIC,GAAKX,IACdG,EAAYA,GAAY,EAAKD,EAAOL,EAAU,EAC9Ca,GAAKA,IAAK,EAAKR,EACfS,EAAKA,GAAK,EAAKT,EAAO,EAE1B,KAAOQ,GAAI,CAACC,EAAIV,GACZE,EAAYA,EAAWH,EAAUG,GAAY,EAAMD,IAAS,EAAML,EAAU,EAC5Ea,GAAKA,IAAK,EAAKV,EACfW,GAAMA,EAAIX,IAAS,EAAKA,EAAO,EAEnCK,EAAMK,GACNJ,EAAQ,EAAIK,EAAID,EACxB,CACI,IAAIE,EAAStB,EAAe,EAC5B,OAAOc,EAAQ,IAAIS,GAAK,CACpB,OAAQA,EAAID,EAAM,CACd,IAAK,GAAG,OAAOA,EAAS,OAAYzB,EAAMO,GAAa,GAAK,GAAOP,EAAMO,GAAa,GAAK,EAAKP,EAAMO,GAAa,GACnH,IAAK,GAAG,OAAOkB,EAAS,KAAUzB,EAAMO,GAAa,GAAK,EAAKP,EAAMO,GAAa,GAClF,IAAK,GAAG,OAAOkB,EAASzB,EAAMO,GAAa,EAC3C,QAAS,OAAOmB,EAAI,CAChC,CACA,CAAK,CACL,CAEO,SAASC,GAAaC,EAAG,CAC5B,IAAI3B,EAAM,EACV,MAAO,IAAM2B,EAAE3B,GAAK,CACxB,CACO,SAAS4B,GAAwB7B,EAAO,CAC3C,OAAO2B,GAAa5B,GAAkBC,CAAK,CAAC,CAChD,CAEO,SAAS8B,GAAO1C,EAAG,CACtB,OAAQA,EAAI,EAAM,CAACA,GAAK,EAAMA,GAAK,CACvC,CACA,SAAS2C,GAAY,EAAGC,EAAM,CAC1B,IAAIJ,EAAI,MAAM,CAAC,EACf,QAASxC,EAAI,EAAGA,EAAI,EAAGA,IACnBwC,EAAExC,CAAC,EAAI,EAAI4C,EAAM,EACrB,OAAOJ,CACX,CACA,SAASK,GAAe,EAAGD,EAAM,CAC7B,IAAIJ,EAAI,MAAM,CAAC,EACf,QAASxC,EAAI,EAAGsC,EAAI,GAAItC,EAAI,EAAGA,IAC3BwC,EAAExC,CAAC,EAAIsC,GAAK,EAAIM,EAAM,EAC1B,OAAOJ,CACX,CACA,SAASM,GAAY,EAAGF,EAAM,CAC1B,IAAIJ,EAAI,MAAM,CAAC,EACf,QAASxC,EAAI,EAAGsC,EAAI,EAAGtC,EAAI,EAAGA,IAC1BwC,EAAExC,CAAC,EAAIsC,GAAKI,GAAOE,EAAI,CAAE,EAC7B,OAAOJ,CACX,CACO,SAASO,GAAkBH,EAAMI,EAAQ,CAC5C,IAAIR,EAAIK,GAAeD,EAAI,EAAIA,CAAI,EAC/BK,EAAIL,EAAM,EACVM,EAAKL,GAAeI,EAAGL,CAAI,EAC3BO,EAAKR,GAAYM,EAAGL,CAAI,EAC5B,QAAS5C,EAAI,EAAGA,EAAIiD,EAAGjD,IACnB,QAASoD,EAAI,EAAGA,EAAID,EAAGnD,CAAC,EAAGoD,IACvBZ,EAAE,KAAKU,EAAGlD,CAAC,EAAIoD,CAAC,EAGxB,OAAOJ,EAASR,EAAE,IAAIF,GAAKU,EAAOV,CAAC,CAAC,EAAIE,CAC5C,CAIO,SAASa,GAAgBT,EAAM,CAClC,IAAIU,EAAM,CAAE,EACZ,OAAa,CACT,IAAIC,EAAIX,EAAM,EACd,GAAIW,GAAK,EACL,MACJD,EAAI,KAAKE,GAAkBD,EAAGX,CAAI,CAAC,CAC3C,CACI,OAAa,CACT,IAAIW,EAAIX,EAAI,EAAK,EACjB,GAAIW,EAAI,EACJ,MACJD,EAAI,KAAKG,GAAuBF,EAAGX,CAAI,CAAC,CAChD,CACI,OAAOlC,GAAYP,GAAKmD,CAAG,CAAC,CAChC,CACO,SAASI,GAA2Bd,EAAM,CAC7C,IAAIJ,EAAI,CAAE,EACV,OAAa,CACT,IAAIxC,EAAI4C,EAAM,EACd,GAAI5C,GAAK,EACL,MACJwC,EAAE,KAAKxC,CAAC,CAChB,CACI,OAAOwC,CACX,CACA,SAASmB,GAAgB,EAAGJ,EAAGX,EAAM,CACjC,IAAIgB,EAAI,MAAM,CAAC,EAAE,KAAK,MAAS,EAAE,IAAI,IAAM,EAAE,EAC7C,QAAS5D,EAAI,EAAGA,EAAIuD,EAAGvD,IACnB8C,GAAY,EAAGF,CAAI,EAAE,QAAQ,CAACN,EAAGc,IAAMQ,EAAER,CAAC,EAAE,KAAKd,CAAC,CAAC,EAEvD,OAAOsB,CACX,CACA,SAASJ,GAAkBD,EAAGX,EAAM,CAChC,IAAIiB,EAAK,EAAIjB,EAAM,EACfkB,EAAKlB,EAAM,EACXO,EAAKO,GAA2Bd,CAAI,EACpCgB,EAAID,GAAgBR,EAAG,OAAQ,EAAII,EAAGX,CAAI,EAC9C,OAAOzC,GAAKyD,EAAE,IAAI,CAACpB,EAAGxC,IAAM,CACxB,MAAMsC,EAAIE,EAAE,CAAC,EAAGuB,EAAKvB,EAAE,MAAM,CAAC,EAG9B,OAAO,MAAMW,EAAGnD,CAAC,CAAC,EAAE,KAAK,MAAS,EAAE,IAAI,CAACgE,EAAGZ,IAAM,CAC9C,IAAIa,EAAOb,EAAIU,EACf,MAAO,CAACxB,EAAIc,EAAIS,EAAIE,EAAG,IAAIG,GAAKA,EAAID,CAAI,CAAC,CACrD,CAAS,CACT,CAAK,CAAC,CACN,CACA,SAASR,GAAuBF,EAAGX,EAAM,CACrC,IAAIK,EAAI,EAAIL,EAAM,EAElB,OADQe,GAAgBV,EAAG,EAAIM,EAAGX,CAAI,EAC7B,IAAIJ,GAAK,CAACA,EAAE,CAAC,EAAGA,EAAE,MAAM,CAAC,CAAC,CAAC,CACxC,CACO,SAAS2B,GAAgBvB,EAAM,CAClC,IAAIwB,EAASrB,GAAkBH,CAAI,EAAE,KAAK,CAACT,EAAGC,IAAMD,EAAIC,CAAC,EACzD,OAAOiC,EAAM,EACb,SAASA,GAAO,CACZ,IAAIC,EAAW,CAAE,EACjB,OAAa,CACT,IAAIC,EAAOxB,GAAkBH,EAAMwB,CAAM,EACzC,GAAIG,EAAK,QAAU,EACf,MACJD,EAAS,KAAK,CAAE,IAAK,IAAI,IAAIC,CAAI,EAAG,KAAMF,EAAI,EAAI,CAC9D,CACQC,EAAS,KAAK,CAACnC,EAAGC,IAAMA,EAAE,IAAI,KAAOD,EAAE,IAAI,IAAI,EAC/C,IAAIqC,EAAO5B,EAAM,EACb6B,EAAQD,EAAO,EACnBA,EAAQA,EAAO,EAAK,EACpB,IAAIE,EAAO,CAAC,EAAEF,EAAO,GACrBA,IAAS,EACT,IAAIG,EAAOH,GAAQ,EACfI,EAAQJ,GAAQ,EACpB,MAAO,CAAE,SAAAF,EAAU,MAAAG,EAAO,KAAAC,EAAM,KAAAC,EAAM,MAAAC,CAAO,CACrD,CACA,CC/NO,SAASC,IAAU,CACtB,OAAOpC,GAAwB3C,GAAO,k6cAAk6c,CAAC,CAC78c,CCFA,MAAMgF,GAAID,GAAS,EAGbE,GAAQ,IAAI,IAAIhC,GAAkB+B,EAAC,CAAC,EACpCE,GAAU,IAAI,IAAIjC,GAAkB+B,EAAC,CAAC,EACtCG,GAAS5B,GAAgByB,EAAC,EAC1BI,GAAaf,GAAgBW,EAAC,EAG9BK,GAAS,GACTC,GAAa,GACnB,SAASC,GAAWC,EAAM,CACtB,OAAOC,GAAiBD,CAAI,CAChC,CACA,SAASE,GAAYC,EAAK,CACtB,OAAOA,EAAI,OAAOC,GAAMA,GAAM,KAAM,CACxC,CACO,SAASC,GAAyBL,EAAM,CAC3C,QAASjU,KAASiU,EAAK,MAAM,GAAG,EAAG,CAC/B,IAAIG,EAAMJ,GAAWhU,CAAK,EAC1B,GAAI,CACA,QAAS2O,EAAIyF,EAAI,YAAYL,EAAU,EAAI,EAAGpF,GAAK,EAAGA,IAClD,GAAIyF,EAAIzF,CAAC,IAAMoF,GACX,MAAM,IAAI,MAAM,kCAAkC,EAG1D,GAAIK,EAAI,QAAU,GAAKA,EAAI,MAAMC,GAAMA,EAAK,GAAI,GAAKD,EAAI,CAAC,IAAMN,IAAUM,EAAI,CAAC,IAAMN,GACjF,MAAM,IAAI,MAAM,yBAAyB,CAEzD,OACeS,EAAK,CACR,MAAM,IAAI,MAAM,kBAAkBvU,CAAK,MAAMuU,EAAI,OAAO,EAAE,CACtE,CACA,CACI,OAAON,CACX,CACO,SAASO,GAAcP,EAAM,CAChC,OAAOK,GAAyBG,GAAUR,EAAME,EAAW,CAAC,CAChE,CACA,SAASM,GAAUR,EAAMS,EAAc,CACnC,IAAIhU,EAAQsT,GAAWC,CAAI,EAAE,QAAO,EAChCU,EAAS,CAAE,EACf,KAAOjU,EAAM,QAAQ,CACjB,IAAIkU,EAAQC,GAAuBnU,CAAK,EACxC,GAAIkU,EAAO,CACPD,EAAO,KAAK,GAAGD,EAAaE,CAAK,CAAC,EAClC,QACZ,CACQ,IAAIP,EAAK3T,EAAM,IAAK,EACpB,GAAIgT,GAAM,IAAIW,CAAE,EAAG,CACfM,EAAO,KAAKN,CAAE,EACd,QACZ,CACQ,GAAIV,GAAQ,IAAIU,CAAE,EACd,SAEJ,IAAID,EAAMR,GAAOS,CAAE,EACnB,GAAID,EAAK,CACLO,EAAO,KAAK,GAAGP,CAAG,EAClB,QACZ,CACQ,MAAM,IAAI,MAAM,2BAA2BC,EAAG,SAAS,EAAE,EAAE,YAAa,CAAA,EAAE,CAClF,CACI,OAAOC,GAAyBQ,GAAI,OAAO,cAAc,GAAGH,CAAM,CAAC,CAAC,CACxE,CACA,SAASG,GAAI7T,EAAG,CACZ,OAAOA,EAAE,UAAU,KAAK,CAC5B,CACA,SAAS4T,GAAuBT,EAAKW,EAAO,CACxC,IAAIC,EACJ,IAAI7U,EAAO0T,GACPe,EACAK,EACAC,EAAQ,CAAE,EACV1F,EAAM4E,EAAI,OAGd,KAAO5E,GAAK,CACR,IAAI6E,EAAKD,EAAI,EAAE5E,CAAG,EAElB,GADArP,GAAQ6U,EAAK7U,EAAK,SAAS,KAAK8Q,GAAKA,EAAE,IAAI,IAAIoD,CAAE,CAAC,KAAO,MAAQW,IAAO,OAAS,OAASA,EAAG,KACzF,CAAC7U,EACD,MACJ,GAAIA,EAAK,KACL8U,EAAQZ,UAEHlU,EAAK,OACNkU,IAAOY,EACP,MAERC,EAAM,KAAKb,CAAE,EACTlU,EAAK,OACL+U,EAAM,KAAK,KAAM,EACb1F,EAAM,GAAK4E,EAAI5E,EAAM,CAAC,GAAK,OAC3BA,KAEJrP,EAAK,QACLyU,EAAQM,EAAM,QACV/U,EAAK,OAAS,GACdyU,EAAM,OAAO,EAAG,CAAC,EAGrBR,EAAI,OAAS5E,EAEzB,CACI,OAAOoF,CACX,CClIA,MAAMO,GAAS,IAAIC,EAAO5G,EAAO,EAE3B6G,GAAQ,IAAI,WAAW,EAAE,EAC/BA,GAAM,KAAK,CAAC,EACZ,SAASC,GAAeC,EAAM,CAC1B,GAAIA,EAAK,SAAW,EAChB,MAAM,IAAI,MAAM,mCAAmC,EAEvD,OAAOA,CACX,CACA,SAASC,GAAavB,EAAM,CACxB,MAAM1E,EAAQhB,GAAYiG,GAAcP,CAAI,CAAC,EACvCwB,EAAQ,CAAE,EAChB,GAAIxB,EAAK,SAAW,EAChB,OAAOwB,EAEX,IAAIC,EAAO,EACX,QAAS/G,EAAI,EAAGA,EAAIY,EAAM,OAAQZ,IACpBY,EAAMZ,CAAC,IAEP,KACN8G,EAAM,KAAKH,GAAe/F,EAAM,MAAMmG,EAAM/G,CAAC,CAAC,CAAC,EAC/C+G,EAAO/G,EAAI,GAInB,GAAI+G,GAAQnG,EAAM,OACd,MAAM,IAAI,MAAM,mCAAmC,EAEvD,OAAAkG,EAAM,KAAKH,GAAe/F,EAAM,MAAMmG,CAAI,CAAC,CAAC,EACrCD,CACX,CAWO,SAASE,GAAS1B,EAAM,CAEvB,OAAQA,GAAU,UAClBkB,GAAO,mBAAmB,iCAAkC,OAAQlB,CAAI,EAE5E,IAAI7M,EAASiO,GACb,MAAMI,EAAQD,GAAavB,CAAI,EAC/B,KAAOwB,EAAM,QACTrO,EAASkH,GAAUsH,GAAO,CAACxO,EAAQkH,GAAUmH,EAAM,KAAK,CAAC,CAAC,CAAC,EAE/D,OAAOI,GAAQzO,CAAM,CACzB,CACO,SAAS0O,GAAU7B,EAAM,CAC5B,OAAO4B,GAAQD,GAAOJ,GAAavB,CAAI,EAAE,IAAKsB,GAAS,CAEnD,GAAIA,EAAK,OAAS,GACd,MAAM,IAAI,MAAM,oDAAoD,EAExE,MAAMhG,EAAQ,IAAI,WAAWgG,EAAK,OAAS,CAAC,EAC5C,OAAAhG,EAAM,IAAIgG,EAAM,CAAC,EACjBhG,EAAM,CAAC,EAAIA,EAAM,OAAS,EACnBA,CACf,CAAK,CAAC,CAAC,EAAI,IACX,CCtEA,IAAIwG,GAAwC,SAAUC,EAASC,EAAYC,EAAGC,EAAW,CACrF,SAASC,EAAMjV,EAAO,CAAE,OAAOA,aAAiB+U,EAAI/U,EAAQ,IAAI+U,EAAE,SAAUG,EAAS,CAAEA,EAAQlV,CAAK,CAAI,CAAA,CAAE,CAC1G,OAAO,IAAK+U,IAAMA,EAAI,UAAU,SAAUG,EAASC,EAAQ,CACvD,SAASC,EAAUpV,EAAO,CAAE,GAAI,CAAEqV,EAAKL,EAAU,KAAKhV,CAAK,CAAC,CAAI,OAAQsV,EAAG,CAAEH,EAAOG,CAAC,CAAI,CAAA,CACzF,SAASC,EAASvV,EAAO,CAAE,GAAI,CAAEqV,EAAKL,EAAU,MAAShV,CAAK,CAAC,CAAI,OAAQsV,EAAG,CAAEH,EAAOG,CAAC,CAAI,CAAA,CAC5F,SAASD,EAAKpP,EAAQ,CAAEA,EAAO,KAAOiP,EAAQjP,EAAO,KAAK,EAAIgP,EAAMhP,EAAO,KAAK,EAAE,KAAKmP,EAAWG,CAAQ,CAAE,CAC5GF,GAAML,EAAYA,EAAU,MAAMH,EAASC,GAAc,CAAA,CAAE,GAAG,MAAM,CAC5E,CAAK,CACL,EAQA,MAAMd,GAAS,IAAIC,EAAO5G,EAAO,EAE3B7J,GAAU,IAAI,WAAW,EAAE,EACjCA,GAAQ,KAAK,CAAC,EACd,MAAMgS,GAAcC,EAAU,KAAK,EAAE,EAC/BC,GAAOD,EAAU,KAAK,CAAC,EACvBE,GAAMF,EAAU,KAAK,CAAC,EACtBG,GAAaH,EAAU,KAAK,oEAAoE,EACtG,SAASI,GAAY7V,EAAO,CACxB,MAAMoO,EAAQX,GAASzN,CAAK,EACtB8V,EAAY1H,EAAM,OAAS,GACjC,OAAI0H,EACOC,GAAU,CAAC3H,EAAO5K,GAAQ,MAAMsS,CAAS,CAAC,CAAC,EAE/CpB,GAAQtG,CAAK,CACxB,CACA,MAAM4H,GAAUC,GAAWN,GAAI,YAAW,EAAI,EAAE,EAC1CO,GAAWD,GAAWP,GAAK,YAAW,EAAI,EAAE,EAC5CS,GAAmB,CACrB,KAAM,SACN,QAAS,SACT,QAAS,UACT,kBAAmB,UACnB,KAAM,SACV,EACMC,GAAmB,CACrB,OAAQ,UAAW,UAAW,oBAAqB,MACvD,EACA,SAASC,GAAYhQ,EAAK,CACtB,OAAO,SAAUrG,EAAO,CACpB,OAAI,OAAQA,GAAW,UACnBgU,GAAO,mBAAmB,4BAA4B,KAAK,UAAU3N,CAAG,CAAC,GAAI,UAAUA,CAAG,GAAIrG,CAAK,EAEhGA,CACV,CACL,CACA,MAAMsW,GAAe,CACjB,KAAMD,GAAY,MAAM,EACxB,QAASA,GAAY,SAAS,EAC9B,QAAS,SAAUrW,EAAO,CACtB,GAAI,CACA,OAAOyV,EAAU,KAAKzV,CAAK,EAAE,SAAU,CACnD,MACsB,CAAA,CACd,OAAOgU,GAAO,mBAAmB,qCAAsC,iBAAkBhU,CAAK,CACjG,EACD,kBAAmB,SAAUA,EAAO,CAChC,GAAI,CACA,OAAOuW,GAAWvW,CAAK,EAAE,YAAa,CAClD,MACsB,CAAA,CACd,OAAOgU,GAAO,mBAAmB,2CAA4C,2BAA4BhU,CAAK,CACjH,EACD,KAAM,SAAUA,EAAO,CACnB,GAAI,CACA,MAAMoO,EAAQX,GAASzN,CAAK,EAC5B,GAAIoO,EAAM,SAAW,GACjB,MAAM,IAAI,MAAM,YAAY,EAEhC,OAAOsG,GAAQtG,CAAK,CAChC,MACsB,CAAA,CACd,OAAO4F,GAAO,mBAAmB,8BAA+B,cAAehU,CAAK,CAC5F,CACA,EACA,SAASwW,GAAezW,EAAM,CAE1B,CACI,MAAM0W,EAAQ1W,EAAK,MAAM,gBAAgB,EACzC,GAAI0W,EAAO,CACP,MAAMvG,EAAUuG,EAAM,CAAC,IAAM,GACvBC,EAAQ,SAASD,EAAM,CAAC,GAAK,KAAK,GACpCC,EAAQ,IAAM,GAAKA,EAAQ,KAAQD,EAAM,CAAC,GAAKA,EAAM,CAAC,IAAM,OAAOC,CAAK,IACxE1C,GAAO,mBAAmB,wBAAyB,OAAQjU,CAAI,EAEnE,MAAM4W,EAAcf,GAAW,KAAK1F,EAAUwG,EAAQ,EAAKA,CAAK,EAC1DE,EAAc1G,EAASyG,EAAY,IAAIhB,EAAG,EAAE,IAAIH,EAAW,EAAIE,GACrE,OAAO,SAAU1V,EAAO,CACpB,MAAMgQ,EAAIyF,EAAU,KAAKzV,CAAK,EAC9B,OAAIgQ,EAAE,GAAG4G,CAAW,GAAK5G,EAAE,GAAG2G,CAAW,IACrC3C,GAAO,mBAAmB,2BAA2BjU,CAAI,GAAI,QAASC,CAAK,EAExEiW,GAAWjG,EAAE,OAAO,GAAG,EAAE,YAAa,EAAE,EAAE,CACpD,CACb,CACA,CAEI,CACI,MAAMyG,EAAQ1W,EAAK,MAAM,cAAc,EACvC,GAAI0W,EAAO,CACP,MAAMC,EAAQ,SAASD,EAAM,CAAC,CAAC,EAC/B,OAAIC,IAAU,GAAKA,EAAQ,IAAMD,EAAM,CAAC,IAAM,OAAOC,CAAK,IACtD1C,GAAO,mBAAmB,sBAAuB,OAAQjU,CAAI,EAE1D,SAAUC,EAAO,CAEpB,OADcyN,GAASzN,CAAK,EAClB,SAAW0W,GACjB1C,GAAO,mBAAmB,sBAAsBjU,CAAI,GAAI,QAASC,CAAK,EAEnE6V,GAAY7V,CAAK,CAC3B,CACb,CACA,CACI,OAAQD,EAAI,CACR,IAAK,UAAW,OAAO,SAAUC,EAAO,CACpC,OAAOiW,GAAWM,GAAWvW,CAAK,EAAG,EAAE,CAC1C,EACD,IAAK,OAAQ,OAAO,SAAUA,EAAO,CACjC,OAAUA,EAAoBgW,GAAXE,EACtB,EACD,IAAK,QAAS,OAAO,SAAUlW,EAAO,CAClC,OAAOmN,GAAUnN,CAAK,CACzB,EACD,IAAK,SAAU,OAAO,SAAUA,EAAO,CACnC,OAAOiN,GAAGjN,CAAK,CAClB,CACT,CACI,OAAO,IACX,CACA,SAAS6W,GAAW/D,EAAMgE,EAAQ,CAC9B,MAAO,GAAGhE,CAAI,IAAIgE,EAAO,IAAI,CAAC,CAAE,KAAAhE,EAAM,KAAA/S,CAAM,IAAMA,EAAO,IAAM+S,CAAK,EAAE,KAAK,GAAG,CAAC,GACnF,CACO,MAAMiE,EAAiB,CAC1B,YAAYC,EAAO,CACfC,GAAe,KAAM,QAAS,OAAO,OAAOC,GAASF,CAAK,CAAC,CAAC,EAC5DC,GAAe,KAAM,gBAAiB,EAAE,EACxCA,GAAe,KAAM,SAAU,EAAE,EAEjC,MAAME,EAAQ,CAAE,EAEVC,EAAU,CAAE,EAEZC,EAAW,CAAE,EACnB,OAAO,KAAKL,CAAK,EAAE,QAASjX,GAAS,CACjCoX,EAAMpX,CAAI,EAAI,CAAE,EAChBqX,EAAQrX,CAAI,EAAI,CAAE,EAClBsX,EAAStX,CAAI,EAAI,CAAE,CAC/B,CAAS,EACD,UAAW+S,KAAQkE,EAAO,CACtB,MAAMM,EAAc,CAAE,EACtBN,EAAMlE,CAAI,EAAE,QAAStJ,GAAU,CAEvB8N,EAAY9N,EAAM,IAAI,GACtBwK,GAAO,mBAAmB,2BAA2B,KAAK,UAAUxK,EAAM,IAAI,CAAC,OAAO,KAAK,UAAUsJ,CAAI,CAAC,GAAI,QAASkE,CAAK,EAEhIM,EAAY9N,EAAM,IAAI,EAAI,GAE1B,MAAM+N,EAAW/N,EAAM,KAAK,MAAM,qBAAqB,EAAE,CAAC,EACtD+N,IAAazE,GACbkB,GAAO,mBAAmB,8BAA8B,KAAK,UAAUuD,CAAQ,CAAC,GAAI,QAASP,CAAK,EAGtF,CAAAR,GAAee,CAAQ,IAIlCH,EAAQG,CAAQ,GACjBvD,GAAO,mBAAmB,gBAAgB,KAAK,UAAUuD,CAAQ,CAAC,GAAI,QAASP,CAAK,EAGxFI,EAAQG,CAAQ,EAAE,KAAKzE,CAAI,EAC3BqE,EAAMrE,CAAI,EAAEyE,CAAQ,EAAI,GACxC,CAAa,CACb,CAEQ,MAAMC,EAAe,OAAO,KAAKJ,CAAO,EAAE,OAAQ3G,GAAO2G,EAAQ3G,CAAC,EAAE,SAAW,CAAE,EAC7E+G,EAAa,SAAW,EACxBxD,GAAO,mBAAmB,uBAAwB,QAASgD,CAAK,EAE3DQ,EAAa,OAAS,GAC3BxD,GAAO,mBAAmB,4CAA4CwD,EAAa,IAAKC,GAAO,KAAK,UAAUA,CAAC,CAAE,EAAE,KAAK,IAAI,CAAC,GAAI,QAAST,CAAK,EAEnJC,GAAe,KAAM,cAAeO,EAAa,CAAC,CAAC,EAEnD,SAASE,EAAc3X,EAAM4X,EAAO,CAC5BA,EAAM5X,CAAI,GACViU,GAAO,mBAAmB,8BAA8B,KAAK,UAAUjU,CAAI,CAAC,GAAI,QAASiX,CAAK,EAElGW,EAAM5X,CAAI,EAAI,GACd,OAAO,KAAKoX,EAAMpX,CAAI,CAAC,EAAE,QAAS6X,GAAU,CACnCR,EAAQQ,CAAK,IAIlBF,EAAcE,EAAOD,CAAK,EAE1B,OAAO,KAAKA,CAAK,EAAE,QAASE,GAAY,CACpCR,EAASQ,CAAO,EAAED,CAAK,EAAI,EAC/C,CAAiB,EACjB,CAAa,EACD,OAAOD,EAAM5X,CAAI,CAC7B,CACQ2X,EAAc,KAAK,YAAa,EAAE,EAElC,UAAW5E,KAAQuE,EAAU,CACzB,MAAMS,EAAK,OAAO,KAAKT,EAASvE,CAAI,CAAC,EACrCgF,EAAG,KAAM,EACT,KAAK,OAAOhF,CAAI,EAAI+D,GAAW/D,EAAMkE,EAAMlE,CAAI,CAAC,EAAIgF,EAAG,IAAKL,GAAMZ,GAAWY,EAAGT,EAAMS,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,CAC9G,CACA,CACI,WAAW1X,EAAM,CACb,IAAIgY,EAAU,KAAK,cAAchY,CAAI,EACrC,OAAKgY,IACDA,EAAU,KAAK,cAAchY,CAAI,EAAI,KAAK,YAAYA,CAAI,GAEvDgY,CACf,CACI,YAAYhY,EAAM,CAEd,CACI,MAAMgY,EAAUvB,GAAezW,CAAI,EACnC,GAAIgY,EACA,OAAOA,CAEvB,CAEQ,MAAMtB,EAAQ1W,EAAK,MAAM,uBAAuB,EAChD,GAAI0W,EAAO,CACP,MAAMoB,EAAUpB,EAAM,CAAC,EACjBuB,EAAa,KAAK,WAAWH,CAAO,EACpCI,EAAS,SAASxB,EAAM,CAAC,CAAC,EAChC,OAAQzW,GAAU,CACViY,GAAU,GAAKjY,EAAM,SAAWiY,GAChCjE,GAAO,mBAAmB,0DAA2D,QAAShU,CAAK,EAEvG,IAAIiG,EAASjG,EAAM,IAAIgY,CAAU,EACjC,OAAI,KAAK,OAAOH,CAAO,IACnB5R,EAASA,EAAO,IAAIkH,EAAS,GAE1BA,GAAU4I,GAAU9P,CAAM,CAAC,CACrC,CACb,CAEQ,MAAM6Q,EAAS,KAAK,MAAM/W,CAAI,EAC9B,GAAI+W,EAAQ,CACR,MAAMoB,EAAcjL,GAAG,KAAK,OAAOlN,CAAI,CAAC,EACxC,OAAQC,GAAU,CACd,MAAMmY,EAASrB,EAAO,IAAI,CAAC,CAAE,KAAAhE,EAAM,KAAA/S,KAAW,CAC1C,MAAMkG,EAAS,KAAK,WAAWlG,CAAI,EAAEC,EAAM8S,CAAI,CAAC,EAChD,OAAI,KAAK,OAAO/S,CAAI,EACToN,GAAUlH,CAAM,EAEpBA,CAC3B,CAAiB,EACD,OAAAkS,EAAO,QAAQD,CAAW,EACnBnC,GAAUoC,CAAM,CAC1B,CACb,CACQ,OAAOnE,GAAO,mBAAmB,iBAAiBjU,CAAI,GAAI,OAAQA,CAAI,CAC9E,CACI,WAAW+S,EAAM,CACb,MAAM7M,EAAS,KAAK,OAAO6M,CAAI,EAC/B,OAAK7M,GACD+N,GAAO,mBAAmB,iBAAiB,KAAK,UAAUlB,CAAI,CAAC,GAAI,OAAQA,CAAI,EAE5E7M,CACf,CACI,WAAWlG,EAAMC,EAAO,CACpB,OAAO,KAAK,WAAWD,CAAI,EAAEC,CAAK,CAC1C,CACI,WAAW8S,EAAM9S,EAAO,CACpB,OAAOmN,GAAU,KAAK,WAAW2F,EAAM9S,CAAK,CAAC,CACrD,CACI,OAAOA,EAAO,CACV,OAAO,KAAK,WAAW,KAAK,YAAaA,CAAK,CACtD,CACI,KAAKA,EAAO,CACR,OAAO,KAAK,WAAW,KAAK,YAAaA,CAAK,CACtD,CACI,OAAOD,EAAMC,EAAOoY,EAAU,CAItB,GADgB5B,GAAezW,CAAI,EAE/B,OAAOqY,EAASrY,EAAMC,CAAK,EAInC,MAAMyW,EAAQ1W,EAAK,MAAM,uBAAuB,EAChD,GAAI0W,EAAO,CACP,MAAMoB,EAAUpB,EAAM,CAAC,EACjBwB,EAAS,SAASxB,EAAM,CAAC,CAAC,EAChC,OAAIwB,GAAU,GAAKjY,EAAM,SAAWiY,GAChCjE,GAAO,mBAAmB,0DAA2D,QAAShU,CAAK,EAEhGA,EAAM,IAAKgQ,GAAM,KAAK,OAAO6H,EAAS7H,EAAGoI,CAAQ,CAAC,CACrE,CAEQ,MAAMtB,EAAS,KAAK,MAAM/W,CAAI,EAC9B,OAAI+W,EACOA,EAAO,OAAO,CAACuB,EAAO,CAAE,KAAAvF,EAAM,KAAA/S,MACjCsY,EAAMvF,CAAI,EAAI,KAAK,OAAO/S,EAAMC,EAAM8S,CAAI,EAAGsF,CAAQ,EAC9CC,GACR,EAAE,EAEFrE,GAAO,mBAAmB,iBAAiBjU,CAAI,GAAI,OAAQA,CAAI,CAC9E,CACI,MAAMC,EAAOoY,EAAU,CACnB,OAAO,KAAK,OAAO,KAAK,YAAapY,EAAOoY,CAAQ,CAC5D,CACI,OAAO,KAAKpB,EAAO,CACf,OAAO,IAAID,GAAiBC,CAAK,CACzC,CACI,OAAO,eAAeA,EAAO,CACzB,OAAOD,GAAiB,KAAKC,CAAK,EAAE,WAC5C,CACI,OAAO,WAAWlE,EAAMkE,EAAOhX,EAAO,CAClC,OAAO+W,GAAiB,KAAKC,CAAK,EAAE,WAAWlE,EAAM9S,CAAK,CAClE,CACI,OAAO,WAAWsY,EAAQ,CACtB,MAAMC,EAAe,CAAE,EACvB,UAAWzF,KAAQwF,EAAQ,CACvB,MAAMvY,EAAOoW,GAAiBrD,CAAI,EAC7B/S,GACDiU,GAAO,mBAAmB,kCAAkC,KAAK,UAAUlB,CAAI,CAAC,GAAI,SAAUwF,CAAM,EAExGC,EAAa,KAAK,CAAE,KAAAzF,EAAM,KAAA/S,CAAI,CAAE,CAC5C,CACQ,OAAAwY,EAAa,KAAK,CAAC5I,EAAGC,IACXwG,GAAiB,QAAQzG,EAAE,IAAI,EAAIyG,GAAiB,QAAQxG,EAAE,IAAI,CAC5E,EACMmH,GAAiB,WAAW,eAAgB,CAAE,aAAcwB,CAAc,EAAED,CAAM,CACjG,CACI,OAAO,OAAOA,EAAQtB,EAAOhX,EAAO,CAChC,OAAO+V,GAAU,CACb,SACAgB,GAAiB,WAAWuB,CAAM,EAClCvB,GAAiB,KAAKC,CAAK,EAAE,KAAKhX,CAAK,CACnD,CAAS,CACT,CACI,OAAO,KAAKsY,EAAQtB,EAAOhX,EAAO,CAC9B,OAAOmN,GAAU4J,GAAiB,OAAOuB,EAAQtB,EAAOhX,CAAK,CAAC,CACtE,CAEI,OAAO,aAAasY,EAAQtB,EAAOhX,EAAOwY,EAAa,CACnD,OAAO5D,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAEhD0D,EAASG,GAAYH,CAAM,EAE3B,MAAMI,EAAW,CAAE,EAEfJ,EAAO,mBAAqB,CAACK,GAAYL,EAAO,kBAAmB,EAAE,IACrEI,EAASJ,EAAO,iBAAiB,EAAI,MAGzC,MAAMP,EAAUhB,GAAiB,KAAKC,CAAK,EAE3Ce,EAAQ,MAAM/X,EAAO,CAACD,EAAMC,KACpBD,IAAS,WAAa,CAAC4Y,GAAY3Y,EAAO,EAAE,IAC5C0Y,EAAS1Y,CAAK,EAAI,MAEfA,EACV,EAED,UAAW8S,KAAQ4F,EACfA,EAAS5F,CAAI,EAAI,MAAM0F,EAAY1F,CAAI,EAG3C,OAAIwF,EAAO,mBAAqBI,EAASJ,EAAO,iBAAiB,IAC7DA,EAAO,kBAAoBI,EAASJ,EAAO,iBAAiB,GAGhEtY,EAAQ+X,EAAQ,MAAM/X,EAAO,CAACD,EAAMC,IAC5BD,IAAS,WAAa2Y,EAAS1Y,CAAK,EAC7B0Y,EAAS1Y,CAAK,EAElBA,CACV,EACM,CAAE,OAAAsY,EAAQ,MAAAtY,CAAO,CACpC,CAAS,CACT,CACI,OAAO,WAAWsY,EAAQtB,EAAOhX,EAAO,CAEpC+W,GAAiB,WAAWuB,CAAM,EAElC,MAAMM,EAAe,CAAE,EACjBC,EAAc,CAAE,EACtBzC,GAAiB,QAAStD,GAAS,CAC/B,MAAM9S,EAAQsY,EAAOxF,CAAI,EACrB9S,GAAS,OAGb4Y,EAAa9F,CAAI,EAAIwD,GAAaxD,CAAI,EAAE9S,CAAK,EAC7C6Y,EAAY,KAAK,CAAE,KAAA/F,EAAM,KAAMqD,GAAiBrD,CAAI,EAAG,EACnE,CAAS,EACD,MAAMiF,EAAUhB,GAAiB,KAAKC,CAAK,EACrC8B,EAAkBL,GAAYzB,CAAK,EACzC,OAAI8B,EAAgB,aAChB9E,GAAO,mBAAmB,2CAA4C,qBAAsBgD,CAAK,EAGjG8B,EAAgB,aAAeD,EAGnCd,EAAQ,OAAO/X,CAAK,EACb,CACH,MAAO8Y,EACP,OAAQF,EACR,YAAab,EAAQ,YACrB,QAASA,EAAQ,MAAM/X,EAAO,CAACD,EAAMC,IAAU,CAE3C,GAAID,EAAK,MAAM,aAAa,EACxB,OAAO2U,GAAQjH,GAASzN,CAAK,CAAC,EAGlC,GAAID,EAAK,MAAM,QAAQ,EACnB,OAAO0V,EAAU,KAAKzV,CAAK,EAAE,SAAU,EAE3C,OAAQD,EAAI,CACR,IAAK,UACD,OAAOC,EAAM,YAAa,EAC9B,IAAK,OACD,MAAO,CAAC,CAACA,EACb,IAAK,SACD,OAAI,OAAQA,GAAW,UACnBgU,GAAO,mBAAmB,iBAAkB,QAAShU,CAAK,EAEvDA,CAC/B,CACgB,OAAOgU,GAAO,mBAAmB,mBAAoB,OAAQjU,CAAI,CACpE,CAAA,CACJ,CACT,CACA,CCjbsB,eAAAgZ,GACpBC,EACAC,EACAC,EACA,CACM,MAAAtN,EAAUjB,GAAIwO,EAAoB,EAClCC,EAAUJ,EAAc,oBAAoBpN,CAAO,EACzD,GAAIwN,EAAQ,MACV,MAAM,IAAI,MAAMA,EAAQ,MAAM,WAAW,EAG3C,MAAMC,GAAO,gBAAiB,CAC5B,YAAa,CACX,SAAUJ,EAAM,QAAQ,SAAS,EACjC,MAAOA,EAAM,MAAM,QACnB,OAAQC,EAAO,SAAS,CAC1B,EACA,gBAAiB,CACf,KAAME,EAAQ,MAAM,KACpB,kBAAmBH,EAAM,UACzB,iBAAkBtO,GAAI2O,EAA2B,EACjD,SAAU1N,CAAA,CACZ,CACD,CACH,CAEsB,eAAA2N,GACpBP,EACAC,EACAO,EACA,CACM,MAAA5N,EAAUjB,GAAIwO,EAAoB,EAClCC,EAAUJ,EAAc,oBAAoBpN,CAAO,EACzD,GAAIwN,EAAQ,MACV,MAAM,IAAI,MAAMA,EAAQ,MAAM,WAAW,EAG3C,MAAMC,GAAO,iBAAkB,CAC7B,QAAAzN,EACA,aAAc,CACZ,SAAUqN,EAAM,QAAQ,SAAS,EACjC,MAAOA,EAAM,MAAM,QACnB,cAAeO,EAAa,SAAS,CACvC,EACA,gBAAiB,CACf,KAAMJ,EAAQ,MAAM,KACpB,kBAAmBH,EAAM,UACzB,iBAAkBtO,GAAI2O,EAA2B,EACjD,SAAU1N,CAAA,CACZ,CACD,CACH,CCzDO,MAAMyB,GAAU,0BCCvB,IAAIuH,GAAwC,SAAUC,EAASC,EAAYC,EAAGC,EAAW,CACrF,SAASC,EAAMjV,EAAO,CAAE,OAAOA,aAAiB+U,EAAI/U,EAAQ,IAAI+U,EAAE,SAAUG,EAAS,CAAEA,EAAQlV,CAAK,CAAI,CAAA,CAAE,CAC1G,OAAO,IAAK+U,IAAMA,EAAI,UAAU,SAAUG,EAASC,EAAQ,CACvD,SAASC,EAAUpV,EAAO,CAAE,GAAI,CAAEqV,EAAKL,EAAU,KAAKhV,CAAK,CAAC,CAAI,OAAQsV,EAAG,CAAEH,EAAOG,CAAC,CAAI,CAAA,CACzF,SAASC,EAASvV,EAAO,CAAE,GAAI,CAAEqV,EAAKL,EAAU,MAAShV,CAAK,CAAC,CAAI,OAAQsV,EAAG,CAAEH,EAAOG,CAAC,CAAI,CAAA,CAC5F,SAASD,EAAKpP,EAAQ,CAAEA,EAAO,KAAOiP,EAAQjP,EAAO,KAAK,EAAIgP,EAAMhP,EAAO,KAAK,EAAE,KAAKmP,EAAWG,CAAQ,CAAE,CAC5GF,GAAML,EAAYA,EAAU,MAAMH,EAASC,GAAc,CAAA,CAAE,GAAG,MAAM,CAC5E,CAAK,CACL,EAMA,MAAMd,GAAS,IAAIC,EAAO5G,EAAO,EAM1B,MAAMoM,WAAkBC,EAAY,CACvC,OAAO,YAAY1Z,EAAO,CACtB,MAAO,CAAC,EAAEA,GAASA,EAAM,aACjC,CACA,CA8CO,MAAM2Z,EAAS,CAClB,aAAc,CACV3F,GAAO,cAAc,WAAY2F,EAAQ,EACzC1C,GAAe,KAAM,cAAe,EAAI,CAChD,CACI,YAAa,CACT,OAAOrC,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,KAAM,CAAE,MAAAgF,EAAO,SAAAC,CAAU,EAAG,MAAMC,GAAkB,CAChD,MAAO,KAAK,SAAS,QAAQ,EAC7B,SAAU,KAAK,YAAa,EAAC,MAAOlS,GAGzB,IACV,CACjB,CAAa,EACD,IAAImS,EAAoB,KAAMC,EAAe,KAAMC,EAAuB,KAC1E,OAAIL,GAASA,EAAM,gBAIfG,EAAoBH,EAAM,cAC1BK,EAAuBxE,EAAU,KAAK,YAAY,EAClDuE,EAAeJ,EAAM,cAAc,IAAI,CAAC,EAAE,IAAIK,CAAoB,GAE/D,CAAE,kBAAAF,EAAmB,aAAAC,EAAc,qBAAAC,EAAsB,SAAAJ,CAAU,CACtF,CAAS,CACT,CAEI,YAAYK,EAAW5Q,EAAU,CAC7B,OAAO,KAAK,GAAG4Q,EAAW5Q,CAAQ,CAC1C,CAEI,eAAe4Q,EAAW5Q,EAAU,CAChC,OAAO,KAAK,IAAI4Q,EAAW5Q,CAAQ,CAC3C,CACI,OAAO,WAAWtJ,EAAO,CACrB,MAAO,CAAC,EAAEA,GAASA,EAAM,YACjC,CACA,CC7GO,MAAMqN,GAAU,wBCCvB,IAAIuH,GAAwC,SAAUC,EAASC,EAAYC,EAAGC,EAAW,CACrF,SAASC,EAAMjV,EAAO,CAAE,OAAOA,aAAiB+U,EAAI/U,EAAQ,IAAI+U,EAAE,SAAUG,EAAS,CAAEA,EAAQlV,CAAK,CAAI,CAAA,CAAE,CAC1G,OAAO,IAAK+U,IAAMA,EAAI,UAAU,SAAUG,EAASC,EAAQ,CACvD,SAASC,EAAUpV,EAAO,CAAE,GAAI,CAAEqV,EAAKL,EAAU,KAAKhV,CAAK,CAAC,CAAI,OAAQsV,EAAG,CAAEH,EAAOG,CAAC,CAAI,CAAA,CACzF,SAASC,EAASvV,EAAO,CAAE,GAAI,CAAEqV,EAAKL,EAAU,MAAShV,CAAK,CAAC,CAAI,OAAQsV,EAAG,CAAEH,EAAOG,CAAC,CAAI,CAAA,CAC5F,SAASD,EAAKpP,EAAQ,CAAEA,EAAO,KAAOiP,EAAQjP,EAAO,KAAK,EAAIgP,EAAMhP,EAAO,KAAK,EAAE,KAAKmP,EAAWG,CAAQ,CAAE,CAC5GF,GAAML,EAAYA,EAAU,MAAMH,EAASC,GAAc,CAAA,CAAE,GAAG,MAAM,CAC5E,CAAK,CACL,EAIA,MAAMd,GAAS,IAAIC,EAAO5G,EAAO,EAC3B8M,GAAyB,CAC3B,aAAc,kBAAmB,UAAW,aAAc,OAAQ,OAAQ,WAAY,WAAY,eAAgB,uBAAwB,QAAS,KAAM,OAAQ,OACrK,EACMC,GAAgB,CAClBnG,EAAO,OAAO,mBACdA,EAAO,OAAO,cACdA,EAAO,OAAO,uBAClB,EAGO,MAAMoG,EAAO,CAGhB,aAAc,CACVrG,GAAO,cAAc,WAAYqG,EAAM,EACvCpD,GAAe,KAAM,YAAa,EAAI,CAC9C,CAGI,WAAWqD,EAAU,CACjB,OAAO1F,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,YAAK,eAAe,YAAY,EACzB,MAAM,KAAK,SAAS,WAAW,KAAK,WAAY,EAAE0F,CAAQ,CAC7E,CAAS,CACT,CACI,oBAAoBA,EAAU,CAC1B,OAAO1F,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,YAAK,eAAe,qBAAqB,EAClC,MAAM,KAAK,SAAS,oBAAoB,KAAK,WAAY,EAAE0F,CAAQ,CACtF,CAAS,CACT,CAEI,YAAYC,EAAa,CACrB,OAAO3F,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,KAAK,eAAe,aAAa,EACjC,MAAM4F,EAAK,MAAMV,GAAkB,KAAK,iBAAiBS,CAAW,CAAC,EACrE,OAAO,MAAM,KAAK,SAAS,YAAYC,CAAE,CACrD,CAAS,CACT,CAEI,KAAKD,EAAaD,EAAU,CACxB,OAAO1F,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,KAAK,eAAe,MAAM,EAC1B,MAAM4F,EAAK,MAAMV,GAAkB,KAAK,iBAAiBS,CAAW,CAAC,EACrE,OAAO,MAAM,KAAK,SAAS,KAAKC,EAAIF,CAAQ,CACxD,CAAS,CACT,CAEI,gBAAgBC,EAAa,CACzB,OAAO3F,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,KAAK,eAAe,iBAAiB,EACrC,MAAM4F,EAAK,MAAM,KAAK,oBAAoBD,CAAW,EAC/CE,EAAW,MAAM,KAAK,gBAAgBD,CAAE,EAC9C,OAAO,MAAM,KAAK,SAAS,gBAAgBC,CAAQ,CAC/D,CAAS,CACT,CACI,YAAa,CACT,OAAO7F,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,YAAK,eAAe,YAAY,GAChB,MAAM,KAAK,SAAS,WAAY,GACjC,OAC3B,CAAS,CACT,CACI,aAAc,CACV,OAAOA,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,YAAK,eAAe,aAAa,EAC1B,MAAM,KAAK,SAAS,YAAa,CACpD,CAAS,CACT,CACI,YAAa,CACT,OAAOA,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,YAAK,eAAe,YAAY,EACzB,MAAM,KAAK,SAAS,WAAY,CACnD,CAAS,CACT,CACI,YAAY9B,EAAM,CACd,OAAO8B,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,YAAK,eAAe,aAAa,EAC1B,MAAM,KAAK,SAAS,YAAY9B,CAAI,CACvD,CAAS,CACT,CAUI,iBAAiByH,EAAa,CAC1B,UAAWlU,KAAOkU,EACVJ,GAAuB,QAAQ9T,CAAG,IAAM,IACxC2N,GAAO,mBAAmB,4BAA8B3N,EAAK,cAAekU,CAAW,EAG/F,MAAMC,EAAK/B,GAAY8B,CAAW,EAClC,OAAIC,EAAG,MAAQ,KACXA,EAAG,KAAO,KAAK,WAAY,EAI3BA,EAAG,KAAO,QAAQ,IAAI,CAClB,QAAQ,QAAQA,EAAG,IAAI,EACvB,KAAK,WAAU,CAC/B,CAAa,EAAE,KAAMvU,IACDA,EAAO,CAAC,EAAE,YAAW,IAAOA,EAAO,CAAC,EAAE,eACtC+N,GAAO,mBAAmB,wBAAyB,cAAeuG,CAAW,EAE1EtU,EAAO,CAAC,EAClB,EAEEuU,CACf,CAQI,oBAAoBD,EAAa,CAC7B,OAAO3F,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAM4F,EAAK,MAAMV,GAAkB,KAAK,iBAAiBS,CAAW,CAAC,EACjEC,EAAG,IAAM,OACTA,EAAG,GAAK,QAAQ,QAAQA,EAAG,EAAE,EAAE,KAAME,GAAO9F,GAAU,KAAM,OAAQ,OAAQ,WAAa,CACrF,GAAI8F,GAAM,KACN,OAAO,KAEX,MAAMC,EAAU,MAAM,KAAK,YAAYD,CAAE,EACzC,OAAIC,GAAW,MACX3G,GAAO,mBAAmB,qCAAsC,QAAS0G,CAAE,EAExEC,CAC3B,CAAiB,CAAC,EAEFH,EAAG,GAAG,MAAO5S,GAAU,CAAA,CAAG,GAG9B,MAAMgT,EAAcJ,EAAG,cAAgB,MAAQA,EAAG,sBAAwB,KAO1E,GANIA,EAAG,UAAY,OAASA,EAAG,OAAS,GAAKI,GACzC5G,GAAO,mBAAmB,+CAAgD,cAAeuG,CAAW,GAE9FC,EAAG,OAAS,GAAKA,EAAG,OAAS,IAAMI,GACzC5G,GAAO,mBAAmB,4EAA6E,cAAeuG,CAAW,GAEhIC,EAAG,OAAS,GAAKA,EAAG,MAAQ,OAAUA,EAAG,cAAgB,MAAQA,EAAG,sBAAwB,KAE7FA,EAAG,KAAO,UAELA,EAAG,OAAS,GAAKA,EAAG,OAAS,EAG9BA,EAAG,UAAY,OACfA,EAAG,SAAW,KAAK,YAAa,OAGnC,CAED,MAAMK,EAAU,MAAM,KAAK,WAAY,EACvC,GAAIL,EAAG,MAAQ,KAEX,GAAIK,EAAQ,cAAgB,MAAQA,EAAQ,sBAAwB,KAIhE,GADAL,EAAG,KAAO,EACNA,EAAG,UAAY,KAAM,CAGrB,MAAMX,EAAWW,EAAG,SACpB,OAAOA,EAAG,SACVA,EAAG,aAAeX,EAClBW,EAAG,qBAAuBX,CACtD,MAGgCW,EAAG,cAAgB,OACnBA,EAAG,aAAeK,EAAQ,cAE1BL,EAAG,sBAAwB,OAC3BA,EAAG,qBAAuBK,EAAQ,2BAIrCA,EAAQ,UAAY,MAGrBD,GACA5G,GAAO,WAAW,oCAAqCC,EAAO,OAAO,sBAAuB,CACxF,UAAW,qBAC3C,CAA6B,EAGDuG,EAAG,UAAY,OACfA,EAAG,SAAWK,EAAQ,UAG1BL,EAAG,KAAO,GAIVxG,GAAO,WAAW,oCAAqCC,EAAO,OAAO,sBAAuB,CACxF,UAAW,mBACvC,CAAyB,OAGAuG,EAAG,OAAS,IAGbA,EAAG,cAAgB,OACnBA,EAAG,aAAeK,EAAQ,cAE1BL,EAAG,sBAAwB,OAC3BA,EAAG,qBAAuBK,EAAQ,sBAG1D,CACY,OAAIL,EAAG,OAAS,OACZA,EAAG,MAAQ,KAAK,oBAAoB,SAAS,GAE7CA,EAAG,UAAY,OACfA,EAAG,SAAW,KAAK,YAAYA,CAAE,EAAE,MAAO5S,GAAU,CAChD,GAAIwS,GAAc,QAAQxS,EAAM,IAAI,GAAK,EACrC,MAAMA,EAEV,OAAOoM,GAAO,WAAW,4EAA6EC,EAAO,OAAO,wBAAyB,CACzI,MAAOrM,EACP,GAAI4S,CAC5B,CAAqB,CACrB,CAAiB,GAEDA,EAAG,SAAW,KACdA,EAAG,QAAU,KAAK,WAAY,EAG9BA,EAAG,QAAU,QAAQ,IAAI,CACrB,QAAQ,QAAQA,EAAG,OAAO,EAC1B,KAAK,WAAU,CACnC,CAAiB,EAAE,KAAMM,IACDA,EAAQ,CAAC,IAAM,GAAKA,EAAQ,CAAC,IAAMA,EAAQ,CAAC,GAC5C9G,GAAO,mBAAmB,2BAA4B,cAAeuG,CAAW,EAE7EO,EAAQ,CAAC,EACnB,EAEE,MAAMhB,GAAkBU,CAAE,CAC7C,CAAS,CACT,CAGI,eAAeO,EAAW,CACjB,KAAK,UACN/G,GAAO,WAAW,mBAAoBC,EAAO,OAAO,sBAAuB,CACvE,UAAY8G,GAAa,gBACzC,CAAa,CAEb,CACI,OAAO,SAAS/a,EAAO,CACnB,MAAO,CAAC,EAAEA,GAASA,EAAM,UACjC,CACA,CCzOO,MAAMgb,EAAM,CACf,YAAYC,EAAU,CAClBhE,GAAe,KAAM,WAAYgE,CAAQ,EACzChE,GAAe,KAAM,OAAQgE,EAAS,MAAM,EAC5ChE,GAAe,KAAM,eAAgB,EAAE,EACvCA,GAAe,KAAM,UAAWgE,EAAS,OAAO,CAAC,CAAC,EAElD,QAASzN,EAAI,EAAGA,EAAIyN,EAAS,OAAQzN,IACjC,KAAK,aAAayN,EAAS,OAAOzN,CAAC,CAAC,EAAIA,CAEpD,CACI,OAAOxN,EAAO,CACV,IAAIkb,EAASzN,GAASzN,CAAK,EAC3B,GAAIkb,EAAO,SAAW,EAClB,MAAO,GAEX,IAAIC,EAAS,CAAC,CAAC,EACf,QAAS,EAAI,EAAG,EAAID,EAAO,OAAQ,EAAE,EAAG,CACpC,IAAIE,EAAQF,EAAO,CAAC,EACpB,QAAStK,EAAI,EAAGA,EAAIuK,EAAO,OAAQ,EAAEvK,EACjCwK,GAASD,EAAOvK,CAAC,GAAK,EACtBuK,EAAOvK,CAAC,EAAIwK,EAAQ,KAAK,KACzBA,EAASA,EAAQ,KAAK,KAAQ,EAElC,KAAOA,EAAQ,GACXD,EAAO,KAAKC,EAAQ,KAAK,IAAI,EAC7BA,EAASA,EAAQ,KAAK,KAAQ,CAE9C,CACQ,IAAIC,EAAS,GAEb,QAASC,EAAI,EAAGJ,EAAOI,CAAC,IAAM,GAAKA,EAAIJ,EAAO,OAAS,EAAG,EAAEI,EACxDD,GAAU,KAAK,QAGnB,QAASE,EAAIJ,EAAO,OAAS,EAAGI,GAAK,EAAG,EAAEA,EACtCF,GAAU,KAAK,SAASF,EAAOI,CAAC,CAAC,EAErC,OAAOF,CACf,CACI,OAAOrb,EAAO,CACV,GAAI,OAAQA,GAAW,SACnB,MAAM,IAAI,UAAU,iBAAiB,EAEzC,IAAIoO,EAAQ,CAAE,EACd,GAAIpO,EAAM,SAAW,EACjB,OAAO,IAAI,WAAWoO,CAAK,EAE/BA,EAAM,KAAK,CAAC,EACZ,QAASZ,EAAI,EAAGA,EAAIxN,EAAM,OAAQwN,IAAK,CACnC,IAAIgO,EAAO,KAAK,aAAaxb,EAAMwN,CAAC,CAAC,EACrC,GAAIgO,IAAS,OACT,MAAM,IAAI,MAAM,WAAa,KAAK,KAAO,YAAY,EAEzD,IAAIJ,EAAQI,EACZ,QAAS5K,EAAI,EAAGA,EAAIxC,EAAM,OAAQ,EAAEwC,EAChCwK,GAAShN,EAAMwC,CAAC,EAAI,KAAK,KACzBxC,EAAMwC,CAAC,EAAIwK,EAAQ,IACnBA,IAAU,EAEd,KAAOA,EAAQ,GACXhN,EAAM,KAAKgN,EAAQ,GAAI,EACvBA,IAAU,CAE1B,CAEQ,QAASE,EAAI,EAAGtb,EAAMsb,CAAC,IAAM,KAAK,SAAWA,EAAItb,EAAM,OAAS,EAAG,EAAEsb,EACjElN,EAAM,KAAK,CAAC,EAEhB,OAAOX,GAAS,IAAI,WAAWW,EAAM,QAAS,CAAA,CAAC,CACvD,CACA,CACe,IAAI4M,GAAM,kCAAkC,EAC3D,MAAMS,GAAS,IAAIT,GAAM,4DAA4D,ECvG9E,SAASU,GAAOlU,EAAM,CACzB,MAAO,KAAQmU,GAAK,OAAM,EAAG,OAAOlO,GAASjG,CAAI,CAAC,EAAE,OAAO,KAAK,CACpE,CCbO,MAAM6F,GAAU,iBCGjB2G,GAAS,IAAIC,EAAO5G,EAAO,EAEjC,SAASuO,GAAgB5b,EAAO,CAC5B,OAAQA,GAAS,OAAQA,EAAM,WAAe,UAClD,CACA,SAAS6b,GAAmBzC,EAAS,CACjC,MAAM0C,EAAO,SAAUC,EAAWnY,EAAS,CACnCA,GAAW,OACXA,EAAU,CAAE,GAEhB,MAAMoY,EAAe,CAAE,EACvB,GAAID,EAAU,gBAAkBnY,EAAQ,SAAW,IAC/C,GAAI,CACAoY,EAAa,KAAK,IAAID,EAAU,eAAe3C,EAASxV,EAAQ,MAAM,CAAC,CACvF,MAC0B,CAAA,CAElB,GAAImY,EAAU,mBAAqBnY,EAAQ,YAAc,IACrD,GAAI,CACAoY,EAAa,KAAK,IAAID,EAAU,kBAAkB3C,EAASxV,EAAQ,SAAS,CAAC,CAC7F,MAC0B,CAAA,CAElB,GAAImY,EAAU,iBAAmBnY,EAAQ,UAAY,IACjD,GAAI,CACAoY,EAAa,KAAK,IAAID,EAAU,gBAAgB3C,EAASxV,EAAQ,OAAO,CAAC,CACzF,MAC0B,CAAA,CAElB,GAAImY,EAAU,gBAAkBnY,EAAQ,SAAW,IAAK,CAKpD,MAAM8K,EAAO,CAAC,SAAU,UAAW,UAAW,SAAS,EACvD,GAAI,CACA,MAAMuN,EAAW,IAAIF,EAAU,eAAe3C,EAASxV,EAAQ,MAAM,EACjEqY,EAAS,SAAWvN,EAAK,QAAQuN,EAAS,QAAQ,IAAI,IAAM,IAC5DD,EAAa,KAAKC,CAAQ,CAE9C,MAC0B,CAAA,CAC1B,CACQ,GAAIF,EAAU,oBAAsBnY,EAAQ,aAAe,IACvD,GAAI,CACAoY,EAAa,KAAK,IAAID,EAAU,mBAAmB3C,CAAO,CAAC,CAC3E,MAC0B,CAAA,CAElB,GAAI2C,EAAU,cAAgBnY,EAAQ,OAAS,IAC3C,GAAI,CACA,MAAM8K,EAAO,CAAC,SAAS,EACjBuN,EAAW,IAAIF,EAAU,aAAa3C,EAASxV,EAAQ,IAAI,EAC7DqY,EAAS,SAAWvN,EAAK,QAAQuN,EAAS,QAAQ,IAAI,IAAM,IAC5DD,EAAa,KAAKC,CAAQ,CAE9C,MAC0B,CAAA,CAElB,GAAID,EAAa,SAAW,EACxB,OAAO,KAEX,GAAID,EAAU,iBAAkB,CAC5B,IAAIG,EAAS,EACb,OAAItY,EAAQ,QAAU,KAClBsY,EAAStY,EAAQ,OAEZwV,IAAY,cACjB8C,EAAS,GAEN,IAAIH,EAAU,iBAAiBC,EAAcE,CAAM,CACtE,CACQ,OAAOF,EAAa,CAAC,CACxB,EACD,OAAAF,EAAK,UAAY,SAAU1C,EAAS,CAChC,OAAOyC,GAAmBzC,CAAO,CACpC,EACM0C,CACX,CACA,SAASK,GAAmBC,EAAKhD,EAAS,CACtC,MAAM0C,EAAO,SAAUC,EAAWnY,EAAS,CACvC,OAAImY,EAAU,gBACH,IAAIA,EAAU,gBAAgBK,EAAKhD,CAAO,EAE9C,IACV,EACD,OAAA0C,EAAK,UAAY,SAAU1C,EAAS,CAChC,OAAO+C,GAAmBC,EAAKhD,CAAO,CACzC,EACM0C,CACX,CACA,MAAMO,GAAY,CACd,QAAS,EACT,WAAY,6CACZ,KAAM,YACN,iBAAkBR,GAAmB,WAAW,CACpD,EACMS,GAAU,CACZ,QAAS,EACT,WAAY,6CACZ,KAAM,UACN,iBAAkBT,GAAmB,SAAS,CAClD,EACMU,GAAgB,CAClB,QAAS,GACT,KAAM,gBACN,iBAAkBJ,GAAmB,sCAAuC,eAAe,CAC/F,EAEMK,GAAW,CACb,YAAa,CAAE,QAAS,EAAG,KAAM,aAAe,EAChD,UAAWH,GACX,QAASA,GACT,OAAQ,CAAE,QAAS,EAAG,KAAM,QAAU,EACtC,QAASC,GACT,QAASA,GACT,QAAS,CACL,QAAS,EACT,WAAY,6CACZ,KAAM,UACN,iBAAkBT,GAAmB,SAAS,CACjD,EACD,MAAO,CACH,QAAS,GACT,KAAM,QACN,iBAAkBA,GAAmB,OAAO,CAC/C,EACD,OAAQ,CACJ,QAAS,EACT,WAAY,6CACZ,KAAM,SACN,iBAAkBA,GAAmB,QAAQ,CAChD,EACD,SAAU,CAAE,QAAS,QAAS,KAAM,UAAY,EAChD,QAAS,CACL,QAAS,SACT,KAAM,UACN,iBAAkBA,GAAmB,SAAS,CACjD,EAED,QAAS,CACL,QAAS,GACT,KAAM,UACN,iBAAkBM,GAAmB,mCAAqC,SAAS,CACtF,EACD,cAAe,CAAE,QAAS,GAAI,KAAM,eAAiB,EACrD,cAAeI,GACf,eAAgBA,GAChB,aAAc,CACV,QAAS,EACT,KAAM,eACN,iBAAkBJ,GAAmB,qCAAuC,cAAc,CAC7F,EACD,KAAM,CAAE,QAAS,IAAK,KAAM,MAAQ,EACpC,MAAO,CACH,QAAS,IACT,KAAM,QACN,iBAAkBN,GAAmB,OAAO,CAC/C,EACD,SAAU,CAAE,QAAS,MAAO,KAAM,UAAY,EAC9C,SAAU,CACN,QAAS,GACT,KAAM,WACN,iBAAkBA,GAAmB,UAAU,CAClD,EACD,iBAAkB,CAAE,QAAS,GAAI,KAAM,gBAAkB,EACzD,kBAAmB,CAAE,QAAS,IAAK,KAAM,iBAAmB,EAC5D,SAAU,CAAE,QAAS,MAAO,KAAM,UAAY,EAC9C,mBAAoB,CAAE,QAAS,OAAQ,KAAM,kBAAoB,EACjE,kBAAmB,CAAE,QAAS,OAAQ,KAAM,iBAAmB,EAC/D,IAAK,CAAE,QAAS,GAAI,KAAM,KAAO,EACjC,KAAM,CAAE,QAAS,GAAI,KAAM,MAAQ,CACvC,EAOO,SAASY,GAAWrD,EAAS,CAEhC,GAAIA,GAAW,KACX,OAAO,KAEX,GAAI,OAAQA,GAAa,SAAU,CAC/B,UAAWtG,KAAQ0J,GAAU,CACzB,MAAME,EAAWF,GAAS1J,CAAI,EAC9B,GAAI4J,EAAS,UAAYtD,EACrB,MAAO,CACH,KAAMsD,EAAS,KACf,QAASA,EAAS,QAClB,WAAaA,EAAS,YAAc,KACpC,iBAAmBA,EAAS,kBAAoB,IACnD,CAEjB,CACQ,MAAO,CACH,QAAStD,EACT,KAAM,SACT,CACT,CACI,GAAI,OAAQA,GAAa,SAAU,CAC/B,MAAMsD,EAAWF,GAASpD,CAAO,EACjC,OAAIsD,GAAY,KACL,KAEJ,CACH,KAAMA,EAAS,KACf,QAASA,EAAS,QAClB,WAAYA,EAAS,WACrB,iBAAmBA,EAAS,kBAAoB,IACnD,CACT,CACI,MAAMA,EAAWF,GAASpD,EAAQ,IAAI,EAEtC,GAAI,CAACsD,EACD,OAAI,OAAQtD,EAAQ,SAAa,UAC7BpF,GAAO,mBAAmB,0BAA2B,UAAWoF,CAAO,EAEpEA,EAGPA,EAAQ,UAAY,GAAKA,EAAQ,UAAYsD,EAAS,SACtD1I,GAAO,mBAAmB,2BAA4B,UAAWoF,CAAO,EAI5E,IAAIuD,EAAkBvD,EAAQ,kBAAoB,KAClD,OAAIuD,GAAmB,MAAQD,EAAS,mBAChCd,GAAgBc,EAAS,gBAAgB,EACzCC,EAAkBD,EAAS,iBAAiB,UAAUtD,CAAO,EAG7DuD,EAAkBD,EAAS,kBAI5B,CACH,KAAMtD,EAAQ,KACd,QAASsD,EAAS,QAClB,WAAatD,EAAQ,YAAcsD,EAAS,YAAc,KAC1D,iBAAkBC,CACrB,CACL,CCtPO,MAAMtP,GAAU,YCCvB,IAAIuH,GAAwC,SAAUC,EAASC,EAAYC,EAAGC,EAAW,CACrF,SAASC,EAAMjV,EAAO,CAAE,OAAOA,aAAiB+U,EAAI/U,EAAQ,IAAI+U,EAAE,SAAUG,EAAS,CAAEA,EAAQlV,CAAK,CAAI,CAAA,CAAE,CAC1G,OAAO,IAAK+U,IAAMA,EAAI,UAAU,SAAUG,EAASC,EAAQ,CACvD,SAASC,EAAUpV,EAAO,CAAE,GAAI,CAAEqV,EAAKL,EAAU,KAAKhV,CAAK,CAAC,CAAI,OAAQsV,EAAG,CAAEH,EAAOG,CAAC,CAAI,CAAA,CACzF,SAASC,EAASvV,EAAO,CAAE,GAAI,CAAEqV,EAAKL,EAAU,MAAShV,CAAK,CAAC,CAAI,OAAQsV,EAAG,CAAEH,EAAOG,CAAC,CAAI,CAAA,CAC5F,SAASD,EAAKpP,EAAQ,CAAEA,EAAO,KAAOiP,EAAQjP,EAAO,KAAK,EAAIgP,EAAMhP,EAAO,KAAK,EAAE,KAAKmP,EAAWG,CAAQ,CAAE,CAC5GF,GAAML,EAAYA,EAAU,MAAMH,EAASC,GAAc,CAAA,CAAE,GAAG,MAAM,CAC5E,CAAK,CACL,EAEO,SAAS8H,GAAOC,EAAMjZ,EAAS,CAClC,OAAOgR,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAC5ChR,GAAW,OACXA,EAAU,CAAE,GAEhB,MAAMkZ,EAAU,CACZ,OAASlZ,EAAQ,QAAU,MAC3B,QAAUA,EAAQ,SAAW,GAC7B,KAAOA,EAAQ,MAAQ,MAC1B,EASD,GARIA,EAAQ,iBAAmB,KAC3BkZ,EAAQ,KAAO,OACfA,EAAQ,MAAQ,WAChBA,EAAQ,YAAc,cACtBA,EAAQ,SAAW,SACnBA,EAAQ,SAAW,UAGnBlZ,EAAQ,cAAgB,KAAM,CAC9B,MAAMmZ,EAAOnZ,EAAQ,aACjBmZ,EAAK,OACLD,EAAQ,KAAQC,EAAK,MAErBA,EAAK,QACLD,EAAQ,MAASC,EAAK,OAEtBA,EAAK,cACLD,EAAQ,YAAeC,EAAK,aAE5BA,EAAK,WACLD,EAAQ,SAAYC,EAAK,UAEzBA,EAAK,WACLD,EAAQ,SAAWC,EAAK,SAExC,CACQ,MAAMC,EAAW,MAAM,MAAMH,EAAMC,CAAO,EACpCG,EAAO,MAAMD,EAAS,YAAa,EACnCE,EAAU,CAAE,EAClB,OAAIF,EAAS,QAAQ,QACjBA,EAAS,QAAQ,QAAQ,CAAChd,EAAOqG,IAAQ,CACrC6W,EAAQ7W,EAAI,YAAa,CAAA,EAAIrG,CAC7C,CAAa,EAGCgd,EAAS,QAAS,KAAI,EAAI,QAAS3W,GAAQ,CACzC6W,EAAQ7W,EAAI,YAAa,CAAA,EAAI2W,EAAS,QAAQ,IAAI3W,CAAG,CACrE,CAAa,EAEE,CACH,QAAS6W,EACT,WAAYF,EAAS,OACrB,cAAeA,EAAS,WACxB,KAAMvP,GAAS,IAAI,WAAWwP,CAAI,CAAC,CACtC,CACT,CAAK,CACL,CClEA,IAAIrI,GAAwC,SAAUC,EAASC,EAAYC,EAAGC,EAAW,CACrF,SAASC,EAAMjV,EAAO,CAAE,OAAOA,aAAiB+U,EAAI/U,EAAQ,IAAI+U,EAAE,SAAUG,EAAS,CAAEA,EAAQlV,CAAK,CAAI,CAAA,CAAE,CAC1G,OAAO,IAAK+U,IAAMA,EAAI,UAAU,SAAUG,EAASC,EAAQ,CACvD,SAASC,EAAUpV,EAAO,CAAE,GAAI,CAAEqV,EAAKL,EAAU,KAAKhV,CAAK,CAAC,CAAI,OAAQsV,EAAG,CAAEH,EAAOG,CAAC,CAAI,CAAA,CACzF,SAASC,EAASvV,EAAO,CAAE,GAAI,CAAEqV,EAAKL,EAAU,MAAShV,CAAK,CAAC,CAAI,OAAQsV,EAAG,CAAEH,EAAOG,CAAC,CAAI,CAAA,CAC5F,SAASD,EAAKpP,EAAQ,CAAEA,EAAO,KAAOiP,EAAQjP,EAAO,KAAK,EAAIgP,EAAMhP,EAAO,KAAK,EAAE,KAAKmP,EAAWG,CAAQ,CAAE,CAC5GF,GAAML,EAAYA,EAAU,MAAMH,EAASC,GAAc,CAAA,CAAE,GAAG,MAAM,CAC5E,CAAK,CACL,EAOA,MAAMd,GAAS,IAAIC,EAAO5G,EAAO,EAEjC,SAAS8P,GAAQC,EAAU,CACvB,OAAO,IAAI,QAASlI,GAAY,CAC5B,WAAWA,EAASkI,CAAQ,CACpC,CAAK,CACL,CACA,SAASC,GAAQrd,EAAOD,EAAM,CAC1B,GAAIC,GAAS,KACT,OAAO,KAEX,GAAI,OAAQA,GAAW,SACnB,OAAOA,EAEX,GAAIsd,GAAYtd,CAAK,EAAG,CACpB,GAAID,IAASA,EAAK,MAAM,GAAG,EAAE,CAAC,IAAM,QAAUA,EAAK,MAAM,GAAG,EAAE,CAAC,EAAE,KAAI,IAAO,oBACxE,GAAI,CACA,OAAOwd,GAAavd,CAAK,CACzC,MAC0B,CAAA,CAGlB,OAAO0U,GAAQ1U,CAAK,CAC5B,CACI,OAAOA,CACX,CACA,SAASwd,GAAUxd,EAAO,CACtB,OAAOoN,GAAYpN,EAAM,QAAQ,wBAAyB,CAACyd,EAAKC,IACrD,OAAO,aAAa,SAASA,EAAM,EAAE,CAAC,CAChD,CAAC,CACN,CAOO,SAASC,GAAWC,EAAYX,EAAMY,EAAa,CAEtD,MAAMC,EAAgB,OAAQF,GAAgB,UAAYA,EAAW,eAAiB,KAAQA,EAAW,cAAgB,GACzH5J,GAAO,eAAgB8J,EAAe,GAAMA,EAAe,IAAO,EAAI,oCAAqC,2BAA4BA,CAAY,EACnJ,MAAMC,EAAqB,OAAQH,GAAgB,SAAYA,EAAW,iBAAmB,KACvFI,EAAyB,OAAQJ,GAAgB,UAAY,OAAQA,EAAW,sBAA0B,SAAYA,EAAW,qBAAuB,IAC9J5J,GAAO,eAAgBgK,EAAuB,GAAMA,EAAuB,IAAO,EAAI,4CAA6C,kCAAmCA,CAAoB,EAC1L,MAAMC,EAAqB,OAAQL,GAAgB,SAAY,CAAC,CAAEA,EAAW,iBAAoB,GAC3FV,EAAU,CAAE,EAClB,IAAId,EAAM,KAEV,MAAMxY,EAAU,CACZ,OAAQ,KACX,EACD,IAAIsa,EAAW,GACXrX,EAAU,EAAI,GAAK,IACvB,GAAI,OAAQ+W,GAAgB,SACxBxB,EAAMwB,UAED,OAAQA,GAAgB,SAAU,CAQvC,IAPIA,GAAc,MAAQA,EAAW,KAAO,OACxC5J,GAAO,mBAAmB,cAAe,iBAAkB4J,CAAU,EAEzExB,EAAMwB,EAAW,IACb,OAAQA,EAAW,SAAa,UAAYA,EAAW,QAAU,IACjE/W,EAAU+W,EAAW,SAErBA,EAAW,QACX,UAAWvX,KAAOuX,EAAW,QACzBV,EAAQ7W,EAAI,aAAa,EAAI,CAAE,IAAKA,EAAK,MAAO,OAAOuX,EAAW,QAAQvX,CAAG,CAAC,CAAG,EAC7E,CAAC,gBAAiB,mBAAmB,EAAE,QAAQA,EAAI,YAAW,CAAE,GAAK,IACrE6X,EAAW,IAKvB,GADAta,EAAQ,UAAY,CAAC,CAACga,EAAW,UAC7BA,EAAW,MAAQ,MAAQA,EAAW,UAAY,KAAM,CACpDxB,EAAI,UAAU,EAAG,CAAC,IAAM,UAAYwB,EAAW,8BAAgC,IAC/E5J,GAAO,WAAW,mDAAoDC,EAAO,OAAO,iBAAkB,CAAE,SAAU,MAAO,IAAKmI,EAAK,KAAMwB,EAAW,KAAM,SAAU,aAAc,EAEtL,MAAMO,EAAgBP,EAAW,KAAO,IAAMA,EAAW,SACzDV,EAAQ,cAAmB,CACvB,IAAK,gBACL,MAAO,SAAWkB,GAAahR,GAAY+Q,CAAa,CAAC,CAC5D,CACb,CACYP,EAAW,gBAAkB,OAC7Bha,EAAQ,eAAiB,CAAC,CAACga,EAAW,gBAEtCA,EAAW,cAAgB,OAC3Bha,EAAQ,aAAe6U,GAAYmF,EAAW,YAAY,EAEtE,CACI,MAAMS,EAAS,IAAI,OAAO,kCAAmC,GAAG,EAC1DC,EAAclC,EAAOA,EAAI,MAAMiC,CAAM,EAAI,KAC/C,GAAIC,EACA,GAAI,CACA,MAAMtB,EAAW,CACb,WAAY,IACZ,cAAe,KACf,QAAS,CAAE,eAAiBsB,EAAU,CAAC,GAAK,YAAe,EAC3D,KAAOA,EAAU,CAAC,EAAIC,GAAaD,EAAU,CAAC,CAAC,EAAId,GAAUc,EAAU,CAAC,CAAC,CAC5E,EACD,IAAIrY,EAAS+W,EAAS,KACtB,OAAIa,IACA5X,EAAS4X,EAAYb,EAAS,KAAMA,CAAQ,GAEzC,QAAQ,QAAQ/W,CAAM,CACzC,OACe2B,EAAO,CACVoM,GAAO,WAAW,4BAA6BC,EAAO,OAAO,aAAc,CACvE,KAAMoJ,GAAQiB,EAAU,CAAC,EAAGA,EAAU,CAAC,CAAC,EACxC,MAAO1W,EACP,YAAa,KACb,cAAe,MACf,IAAKwU,CACrB,CAAa,CACb,CAEQa,IACArZ,EAAQ,OAAS,OACjBA,EAAQ,KAAOqZ,EACXC,EAAQ,cAAc,GAAK,OAC3BA,EAAQ,cAAc,EAAI,CAAE,IAAK,eAAgB,MAAO,0BAA4B,GAEpFA,EAAQ,gBAAgB,GAAK,OAC7BA,EAAQ,gBAAgB,EAAI,CAAE,IAAK,iBAAkB,MAAO,OAAOD,EAAK,MAAM,CAAG,IAGzF,MAAMuB,EAAc,CAAE,EACtB,OAAO,KAAKtB,CAAO,EAAE,QAAS7W,GAAQ,CAClC,MAAMoY,EAASvB,EAAQ7W,CAAG,EAC1BmY,EAAYC,EAAO,GAAG,EAAIA,EAAO,KACzC,CAAK,EACD7a,EAAQ,QAAU4a,EAClB,MAAME,EAAkB,UAAY,CAChC,IAAIC,EAAQ,KAwBZ,MAAO,CAAE,QAvBO,IAAI,QAAQ,SAAUzJ,EAASC,EAAQ,CAC/CtO,IACA8X,EAAQ,WAAW,IAAM,CACjBA,GAAS,OAGbA,EAAQ,KACRxJ,EAAOnB,GAAO,UAAU,UAAWC,EAAO,OAAO,QAAS,CACtD,YAAaoJ,GAAQzZ,EAAQ,KAAM4a,EAAY,cAAc,CAAC,EAC9D,cAAe5a,EAAQ,OACvB,QAASiD,EACT,IAAKuV,CAC7B,CAAqB,CAAC,EACL,EAAEvV,CAAO,EAE1B,CAAS,EAQiB,OAPH,UAAY,CACnB8X,GAAS,OAGb,aAAaA,CAAK,EAClBA,EAAQ,KACX,CACyB,CAClC,EAAQ,EACEC,EAAgB,UAAY,CAC9B,OAAOhK,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,QAASiK,EAAU,EAAGA,EAAUf,EAAce,IAAW,CACrD,IAAI7B,EAAW,KACf,GAAI,CAEA,GADAA,EAAW,MAAMJ,GAAOR,EAAKxY,CAAO,EAChCib,EAAUf,GACV,GAAId,EAAS,aAAe,KAAOA,EAAS,aAAe,IAAK,CAE5D,MAAM8B,EAAW9B,EAAS,QAAQ,UAAY,GAC9C,GAAIpZ,EAAQ,SAAW,OAASkb,EAAS,MAAM,SAAS,EAAG,CACvD1C,EAAMY,EAAS,QAAQ,SACvB,QAChC,CACA,SACiCA,EAAS,aAAe,IAAK,CAElC,IAAI+B,EAAW,GAIf,GAHIhB,IACAgB,EAAW,MAAMhB,EAAiBc,EAASzC,CAAG,GAE9C2C,EAAU,CACV,IAAIC,EAAQ,EACZ,MAAMC,EAAajC,EAAS,QAAQ,aAAa,EAC7C,OAAQiC,GAAgB,UAAYA,EAAW,MAAM,eAAe,EACpED,EAAQ,SAASC,CAAU,EAAI,IAG/BD,EAAQhB,EAAuB,SAAS,OAAO,KAAK,SAAW,KAAK,IAAI,EAAGa,CAAO,CAAC,CAAC,EAGxF,MAAM1B,GAAQ6B,CAAK,EACnB,QAChC,CACA,EAEA,OACuBpX,EAAO,CACVoV,EAAWpV,EAAM,SACboV,GAAY,OACZ0B,EAAe,OAAQ,EACvB1K,GAAO,WAAW,mBAAoBC,EAAO,OAAO,aAAc,CAC9D,YAAaoJ,GAAQzZ,EAAQ,KAAM4a,EAAY,cAAc,CAAC,EAC9D,cAAe5a,EAAQ,OACvB,YAAagE,EACb,IAAKwU,CACjC,CAAyB,EAEzB,CACgB,IAAIa,EAAOD,EAAS,KAepB,GAdIkB,GAAYlB,EAAS,aAAe,IACpCC,EAAO,KAEF,CAACgB,IAAqBjB,EAAS,WAAa,KAAOA,EAAS,YAAc,OAC/E0B,EAAe,OAAQ,EACvB1K,GAAO,WAAW,eAAgBC,EAAO,OAAO,aAAc,CAC1D,OAAQ+I,EAAS,WACjB,QAASA,EAAS,QAClB,KAAMK,GAAQJ,EAAQD,EAAS,QAAWA,EAAS,QAAQ,cAAc,EAAI,IAAM,EACnF,YAAaK,GAAQzZ,EAAQ,KAAM4a,EAAY,cAAc,CAAC,EAC9D,cAAe5a,EAAQ,OACvB,IAAKwY,CAC7B,CAAqB,GAEDyB,EACA,GAAI,CACA,MAAM5X,EAAS,MAAM4X,EAAYZ,EAAMD,CAAQ,EAC/C,OAAA0B,EAAe,OAAQ,EAChBzY,CAC/B,OAC2B2B,EAAO,CAEV,GAAIA,EAAM,eAAiBiX,EAAUf,EAAc,CAC/C,IAAIiB,EAAW,GAIf,GAHIhB,IACAgB,EAAW,MAAMhB,EAAiBc,EAASzC,CAAG,GAE9C2C,EAAU,CACV,MAAMlY,EAAUmX,EAAuB,SAAS,OAAO,KAAK,OAAQ,EAAG,KAAK,IAAI,EAAGa,CAAO,CAAC,CAAC,EAE5F,MAAM1B,GAAQtW,CAAO,EACrB,QAChC,CACA,CACwB6X,EAAe,OAAQ,EACvB1K,GAAO,WAAW,4BAA6BC,EAAO,OAAO,aAAc,CACvE,KAAMoJ,GAAQJ,EAAQD,EAAS,QAAWA,EAAS,QAAQ,cAAc,EAAI,IAAM,EACnF,MAAOpV,EACP,YAAayV,GAAQzZ,EAAQ,KAAM4a,EAAY,cAAc,CAAC,EAC9D,cAAe5a,EAAQ,OACvB,IAAKwY,CACjC,CAAyB,CACzB,CAEgB,OAAAsC,EAAe,OAAQ,EAGhBzB,CACvB,CACY,OAAOjJ,GAAO,WAAW,kBAAmBC,EAAO,OAAO,aAAc,CACpE,YAAaoJ,GAAQzZ,EAAQ,KAAM4a,EAAY,cAAc,CAAC,EAC9D,cAAe5a,EAAQ,OACvB,IAAKwY,CACrB,CAAa,CACb,CAAS,CACT,EAAQ,EACJ,OAAO,QAAQ,KAAK,CAACsC,EAAe,QAASE,CAAY,CAAC,CAC9D,CACO,SAASM,GAAUtB,EAAYuB,EAAMtB,EAAa,CACrD,IAAIuB,EAAkB,CAACpf,EAAOgd,IAAa,CACvC,IAAI/W,EAAS,KACb,GAAIjG,GAAS,KACT,GAAI,CACAiG,EAAS,KAAK,MAAMsX,GAAavd,CAAK,CAAC,CACvD,OACmB4H,EAAO,CACVoM,GAAO,WAAW,eAAgBC,EAAO,OAAO,aAAc,CAC1D,KAAMjU,EACN,MAAO4H,CAC3B,CAAiB,CACjB,CAEQ,OAAIiW,IACA5X,EAAS4X,EAAY5X,EAAQ+W,CAAQ,GAElC/W,CACV,EAIGgX,EAAO,KACX,GAAIkC,GAAQ,KAAM,CACdlC,EAAO7P,GAAY+R,CAAI,EAEvB,MAAME,EAAW,OAAQzB,GAAgB,SAAa,CAAE,IAAKA,CAAU,EAAMnF,GAAYmF,CAAU,EAC/FyB,EAAQ,QACgB,OAAO,KAAKA,EAAQ,OAAO,EAAE,OAAQ/D,GAAOA,EAAE,YAAW,IAAO,cAAe,EAAE,SAAY,IAEjH+D,EAAQ,QAAU5G,GAAY4G,EAAQ,OAAO,EAC7CA,EAAQ,QAAQ,cAAc,EAAI,oBAItCA,EAAQ,QAAU,CAAE,eAAgB,kBAAoB,EAE5DzB,EAAayB,CACrB,CACI,OAAO1B,GAAWC,EAAYX,EAAMmC,CAAe,CACvD,CACO,SAASE,GAAKxD,EAAMlY,EAAS,CAChC,OAAKA,IACDA,EAAU,CAAE,GAEhBA,EAAU6U,GAAY7U,CAAO,EACzBA,EAAQ,OAAS,OACjBA,EAAQ,MAAQ,GAEhBA,EAAQ,SAAW,OACnBA,EAAQ,QAAU,KAElBA,EAAQ,UAAY,OACpBA,EAAQ,SAAW,KAEhB,IAAI,QAAQ,SAAUsR,EAASC,EAAQ,CAC1C,IAAIwJ,EAAQ,KACRY,EAAO,GAEX,MAAMC,EAAS,IACPD,EACO,IAEXA,EAAO,GACHZ,GACA,aAAaA,CAAK,EAEf,IAEP/a,EAAQ,UACR+a,EAAQ,WAAW,IAAM,CACjBa,EAAM,GACNrK,EAAO,IAAI,MAAM,SAAS,CAAC,CAE/C,EAAevR,EAAQ,OAAO,GAEtB,MAAM6b,EAAa7b,EAAQ,WAC3B,IAAIib,EAAU,EACd,SAASzM,GAAQ,CACb,OAAO0J,EAAM,EAAC,KAAK,SAAU7V,EAAQ,CAEjC,GAAIA,IAAW,OACPuZ,EAAM,GACNtK,EAAQjP,CAAM,UAGbrC,EAAQ,SACbA,EAAQ,SAAS,KAAK,OAAQwO,CAAK,UAE9BxO,EAAQ,UACbA,EAAQ,UAAU,KAAK,QAASwO,CAAK,UAGhC,CAACmN,EAAM,CAEZ,GADAV,IACIA,EAAUY,EAAY,CAClBD,EAAM,GACNrK,EAAO,IAAI,MAAM,qBAAqB,CAAC,EAE3C,MACxB,CACoB,IAAItO,EAAUjD,EAAQ,SAAW,SAAS,OAAO,KAAK,OAAM,EAAK,KAAK,IAAI,EAAGib,CAAO,CAAC,CAAC,EAClFhY,EAAUjD,EAAQ,QAClBiD,EAAUjD,EAAQ,OAElBiD,EAAUjD,EAAQ,UAClBiD,EAAUjD,EAAQ,SAEtB,WAAWwO,EAAOvL,CAAO,CAC7C,CACgB,OAAO,IACV,EAAE,SAAUe,EAAO,CACZ4X,EAAM,GACNrK,EAAOvN,CAAK,CAEhC,CAAa,CACb,CACQwK,EAAO,CACf,CAAK,CACL,CCjZA,IAAIsN,GAAW,mCAGXC,GAAe,CAAA,EACnB,QAASC,GAAI,EAAGA,GAAIF,GAAS,OAAQE,KAAK,CACxC,IAAI9P,GAAI4P,GAAS,OAAOE,EAAC,EAEzB,GAAID,GAAa7P,EAAC,IAAM,OAAW,MAAM,IAAI,UAAUA,GAAI,eAAe,EAC1E6P,GAAa7P,EAAC,EAAI8P,EACpB,CAEA,SAASC,GAAaC,EAAK,CACzB,IAAIlQ,EAAIkQ,GAAO,GACf,OAASA,EAAM,WAAc,EAC1B,EAAGlQ,GAAK,EAAK,GAAK,UAClB,EAAGA,GAAK,EAAK,GAAK,UAClB,EAAGA,GAAK,EAAK,GAAK,UAClB,EAAGA,GAAK,EAAK,GAAK,WAClB,EAAGA,GAAK,EAAK,GAAK,SACvB,CAEA,SAASmQ,GAAWC,EAAQ,CAE1B,QADIC,EAAM,EACDzS,EAAI,EAAGA,EAAIwS,EAAO,OAAQ,EAAExS,EAAG,CACtC,IAAI0S,EAAIF,EAAO,WAAWxS,CAAC,EAC3B,GAAI0S,EAAI,IAAMA,EAAI,IAAK,MAAO,mBAAqBF,EAAS,IAE5DC,EAAMJ,GAAYI,CAAG,EAAKC,GAAK,CACnC,CAGE,IAFAD,EAAMJ,GAAYI,CAAG,EAEhBzS,EAAI,EAAGA,EAAIwS,EAAO,OAAQ,EAAExS,EAAG,CAClC,IAAIwC,EAAIgQ,EAAO,WAAWxS,CAAC,EAC3ByS,EAAMJ,GAAYI,CAAG,EAAKjQ,EAAI,EAClC,CACE,OAAOiQ,CACT,CAEA,SAASvS,GAAQsS,EAAQG,EAAOC,EAAO,CAErC,GADAA,EAAQA,GAAS,GACZJ,EAAO,OAAS,EAAIG,EAAM,OAAUC,EAAO,MAAM,IAAI,UAAU,sBAAsB,EAE1FJ,EAASA,EAAO,YAAW,EAG3B,IAAIC,EAAMF,GAAUC,CAAM,EAC1B,GAAI,OAAOC,GAAQ,SAAU,MAAM,IAAI,MAAMA,CAAG,EAGhD,QADIha,EAAS+Z,EAAS,IACb,EAAI,EAAG,EAAIG,EAAM,OAAQ,EAAE,EAAG,CACrC,IAAIrQ,EAAIqQ,EAAM,CAAC,EACf,GAAKrQ,GAAK,EAAU,MAAM,IAAI,MAAM,gBAAgB,EAEpDmQ,EAAMJ,GAAYI,CAAG,EAAInQ,EACzB7J,GAAUyZ,GAAS,OAAO5P,CAAC,CAC/B,CAEE,IAAK,EAAI,EAAG,EAAI,EAAG,EAAE,EACnBmQ,EAAMJ,GAAYI,CAAG,EAIvB,IAFAA,GAAO,EAEF,EAAI,EAAG,EAAI,EAAG,EAAE,EAAG,CACtB,IAAIjQ,EAAKiQ,IAAS,EAAI,GAAK,EAAM,GACjCha,GAAUyZ,GAAS,OAAO1P,CAAC,CAC/B,CAEE,OAAO/J,CACT,CAEA,SAASoa,GAAUC,EAAKF,EAAO,CAE7B,GADAA,EAAQA,GAAS,GACbE,EAAI,OAAS,EAAG,OAAOA,EAAM,aACjC,GAAIA,EAAI,OAASF,EAAO,MAAO,uBAG/B,IAAIG,EAAUD,EAAI,YAAW,EACzBE,EAAUF,EAAI,YAAW,EAC7B,GAAIA,IAAQC,GAAWD,IAAQE,EAAS,MAAO,qBAAuBF,EACtEA,EAAMC,EAEN,IAAIE,EAAQH,EAAI,YAAY,GAAG,EAC/B,GAAIG,IAAU,GAAI,MAAO,8BAAgCH,EACzD,GAAIG,IAAU,EAAG,MAAO,sBAAwBH,EAEhD,IAAIN,EAASM,EAAI,MAAM,EAAGG,CAAK,EAC3BC,EAAYJ,EAAI,MAAMG,EAAQ,CAAC,EACnC,GAAIC,EAAU,OAAS,EAAG,MAAO,iBAEjC,IAAIT,EAAMF,GAAUC,CAAM,EAC1B,GAAI,OAAOC,GAAQ,SAAU,OAAOA,EAGpC,QADIE,EAAQ,CAAA,EACH3S,EAAI,EAAGA,EAAIkT,EAAU,OAAQ,EAAElT,EAAG,CACzC,IAAI0S,EAAIQ,EAAU,OAAOlT,CAAC,EACtBwC,EAAI2P,GAAaO,CAAC,EACtB,GAAIlQ,IAAM,OAAW,MAAO,qBAAuBkQ,EACnDD,EAAMJ,GAAYI,CAAG,EAAIjQ,EAGrB,EAAAxC,EAAI,GAAKkT,EAAU,SACvBP,EAAM,KAAKnQ,CAAC,CAChB,CAEE,OAAIiQ,IAAQ,EAAU,wBAA0BK,EACzC,CAAE,OAAQN,EAAQ,MAAOG,CAAK,CACvC,CAEA,SAASQ,IAAgB,CACvB,IAAIC,EAAMP,GAAS,MAAM,KAAM,SAAS,EACxC,GAAI,OAAOO,GAAQ,SAAU,OAAOA,CACtC,CAEA,SAAStT,GAAQgT,EAAK,CACpB,IAAIM,EAAMP,GAAS,MAAM,KAAM,SAAS,EACxC,GAAI,OAAOO,GAAQ,SAAU,OAAOA,EAEpC,MAAM,IAAI,MAAMA,CAAG,CACrB,CAEA,SAASC,GAASrZ,EAAMsZ,EAAQC,EAASC,EAAK,CAM5C,QALIhhB,EAAQ,EACRihB,EAAO,EACPC,GAAQ,GAAKH,GAAW,EAExB9a,EAAS,CAAA,EACJuH,EAAI,EAAGA,EAAIhG,EAAK,OAAQ,EAAEgG,EAIjC,IAHAxN,EAASA,GAAS8gB,EAAUtZ,EAAKgG,CAAC,EAClCyT,GAAQH,EAEDG,GAAQF,GACbE,GAAQF,EACR9a,EAAO,KAAMjG,GAASihB,EAAQC,CAAI,EAItC,GAAIF,EACEC,EAAO,GACThb,EAAO,KAAMjG,GAAU+gB,EAAUE,EAASC,CAAI,MAE3C,CACL,GAAID,GAAQH,EAAQ,MAAO,iBAC3B,GAAK9gB,GAAU+gB,EAAUE,EAASC,EAAM,MAAO,kBACnD,CAEE,OAAOjb,CACT,CAEA,SAASkb,GAAe/S,EAAO,CAC7B,IAAIwS,EAAMC,GAAQzS,EAAO,EAAG,EAAG,EAAI,EACnC,GAAI,MAAM,QAAQwS,CAAG,EAAG,OAAOA,CACjC,CAEA,SAASQ,GAAShT,EAAO,CACvB,IAAIwS,EAAMC,GAAQzS,EAAO,EAAG,EAAG,EAAI,EACnC,GAAI,MAAM,QAAQwS,CAAG,EAAG,OAAOA,EAE/B,MAAM,IAAI,MAAMA,CAAG,CACrB,CAEA,SAASS,GAAiBlB,EAAO,CAC/B,IAAIS,EAAMC,GAAQV,EAAO,EAAG,EAAG,EAAK,EACpC,GAAI,MAAM,QAAQS,CAAG,EAAG,OAAOA,CACjC,CAEA,SAASU,GAAWnB,EAAO,CACzB,IAAIS,EAAMC,GAAQV,EAAO,EAAG,EAAG,EAAK,EACpC,GAAI,MAAM,QAAQS,CAAG,EAAG,OAAOA,EAE/B,MAAM,IAAI,MAAMA,CAAG,CACrB,CAEA,IAAAW,GAAiB,CACf,aAAcZ,GACd,OAAQrT,GACR,OAAQI,GACR,cAAeyT,GACf,QAASC,GACT,gBAAiBC,GACjB,UAAWC,EACb,kBCrLajU,GAAU,kBCSjB2G,GAAS,IAAIC,EAAO5G,EAAO,EAC1B,MAAMmU,CAAU,CACnB,aAAc,CACV,KAAK,QAAU,KAAK,kBAAmB,CAC/C,CACI,mBAAoB,CAChB,MAAMC,EAAW,CAAA,EACX9G,EAAU,KAAK,QAAQ,KAAK,IAAI,EAChC+G,EAAY,KAAK,UAAU,KAAK,IAAI,EACpCpH,EAAW,KAAK,SAAS,KAAK,IAAI,EAClC9S,EAAO,KAAK,KAAK,KAAK,IAAI,EAC1BmU,EAAO,KAAK,KAAK,KAAK,IAAI,EAC1BgG,EAAM,KAAK,IAAI,KAAK,IAAI,EACxBC,EAAS,KAAK,OAAO,KAAK,IAAI,EAC9B7hB,EAAO,KAAK,KAAK,KAAK,IAAI,EAC1B8hB,EAAc7R,GAAe,KAAK,KAAKA,EAAG,EAAI,EACpD,OAAAyR,EAAQ,YAAc,CAClB,KAAM9F,EACN,KAAM5b,EACN,WAAYyhB,EAAU,UAAU,KAAK,WAAW,KAAK,IAAI,EAAG,IAAI,EAChE,UAAWA,EAAU,UAAU7F,EAAM,IAAI,EACzC,YAAa6F,EAAU,UAAUI,EAAQ,IAAI,EAC7C,iBAAkBJ,EAAU,UAAUI,EAAQ,IAAI,EAClD,cAAeJ,EAAU,UAAUI,EAAQ,IAAI,EAC/C,KAAMjH,EAGN,SAAU6G,EAAU,UAAUE,CAAS,EACvC,qBAAsBF,EAAU,UAAUE,CAAS,EACnD,aAAcF,EAAU,UAAUE,CAAS,EAC3C,SAAUA,EACV,GAAIF,EAAU,UAAU7G,EAAS,IAAI,EACrC,MAAO+G,EACP,MAAOE,EACP,KAAMpa,EACN,EAAGga,EAAU,UAAU,KAAK,OAAO,EACnC,EAAGA,EAAU,UAAU,KAAK,OAAO,EACnC,EAAGA,EAAU,UAAUI,CAAM,EAC7B,QAASJ,EAAU,UAAU7G,EAAS,IAAI,EAC1C,IAAK6G,EAAU,UAAUha,CAAI,CAChC,EACDia,EAAQ,mBAAqB,CACzB,KAAMD,EAAU,UAAU7G,CAAO,EACjC,MAAO6G,EAAU,UAAUI,CAAM,EACjC,SAAUJ,EAAU,UAAUE,CAAS,EACvC,SAAUF,EAAU,UAAUE,CAAS,EACvC,qBAAsBF,EAAU,UAAUE,CAAS,EACnD,aAAcF,EAAU,UAAUE,CAAS,EAC3C,GAAIF,EAAU,UAAU7G,CAAO,EAC/B,MAAO6G,EAAU,UAAUE,CAAS,EACpC,KAAMF,EAAU,UAAUK,CAAU,EACpC,KAAML,EAAU,UAAUI,CAAM,EAChC,WAAYJ,EAAU,UAAU,KAAK,WAAW,KAAK,IAAI,EAAG,IAAI,CACnE,EACDC,EAAQ,WAAa,CACjB,iBAAkBG,EAClB,YAAaA,EACb,gBAAiBjG,EACjB,QAAShB,EACT,OAAQ6G,EAAU,QAAQ7F,CAAI,EAC9B,KAAMnU,EACN,SAAUoa,EACV,UAAWjG,CACd,EACD8F,EAAQ,QAAU,CACd,GAAID,EAAU,UAAU,KAAK,QAAS,IAAI,EAC1C,KAAMA,EAAU,UAAU,KAAK,QAAS,IAAI,EAC5C,gBAAiBA,EAAU,UAAU7G,EAAS,IAAI,EAClD,iBAAkBiH,EAElB,KAAMJ,EAAU,UAAUG,CAAG,EAC7B,QAASD,EACT,UAAWF,EAAU,UAAUha,CAAI,EACnC,UAAWmU,EACX,gBAAiBA,EACjB,KAAM6F,EAAU,QAAQ,KAAK,WAAW,KAAK,IAAI,CAAC,EAClD,YAAaI,EACb,cAAeJ,EAAU,UAAUI,EAAQ,IAAI,EAC/C,kBAAmBF,EACnB,kBAAmBF,EAAU,UAAUE,CAAS,EAChD,OAAQF,EAAU,UAAUI,CAAM,EAClC,KAAM7hB,CACT,EACD0hB,EAAQ,MAAQ,CACZ,KAAMD,EAAU,UAAU7F,CAAI,EAC9B,WAAYA,EACZ,OAAQiG,EACR,UAAWA,EACX,MAAOJ,EAAU,UAAUG,CAAG,EAC9B,WAAY,KAAK,WAAW,KAAK,IAAI,EACrC,SAAUD,EACV,QAASA,EACT,MAAOF,EAAU,UAAU7G,CAAO,EAClC,UAAWnT,EACX,aAAcga,EAAU,UAAUA,EAAU,QAAQ7F,CAAI,CAAC,EACzD,cAAe6F,EAAU,UAAUE,CAAS,CAC/C,EACDD,EAAQ,sBAAwBhJ,GAAYgJ,EAAQ,KAAK,EACzDA,EAAQ,sBAAsB,aAAeD,EAAU,UAAUA,EAAU,QAAQ,KAAK,oBAAoB,KAAK,IAAI,CAAC,CAAC,EACvHC,EAAQ,OAAS,CACb,UAAWD,EAAU,UAAUlH,EAAU,MAAS,EAClD,QAASkH,EAAU,UAAUlH,EAAU,MAAS,EAChD,UAAWkH,EAAU,UAAU7F,EAAM,MAAS,EAC9C,QAAS6F,EAAU,UAAU7G,EAAS,MAAS,EAC/C,OAAQ6G,EAAU,UAAU,KAAK,OAAO,KAAK,IAAI,EAAG,MAAS,CAChE,EACDC,EAAQ,UAAY,CAChB,YAAaD,EAAU,UAAUI,CAAM,EACvC,UAAWJ,EAAU,UAAU7F,CAAI,EACnC,iBAAkBiG,EAClB,QAASJ,EAAU,UAAU,KAAK,QAAQ,KAAK,IAAI,CAAC,EACpD,QAAS7G,EACT,KAAM6G,EAAU,aAAaha,EAAM,IAAI,EACvC,OAAQga,EAAU,QAAQ7F,CAAI,EAC9B,gBAAiBA,EACjB,SAAUiG,CACb,EACMH,CACf,CACI,WAAWK,EAAY,CACnB,OAAOC,GAAcD,GAAc,EAAE,CAC7C,CAGI,OAAOF,EAAQ,CACX,OAAIA,IAAW,KACJ,EAEJnM,EAAU,KAAKmM,CAAM,EAAE,SAAU,CAChD,CACI,KAAKA,EAAQ,CACT,OAAIA,IAAW,MAAQA,GAAU,KACtB,EAEJnM,EAAU,KAAKmM,CAAM,EAAE,SAAU,CAChD,CAEI,UAAU5hB,EAAO,CACb,OAAOyV,EAAU,KAAKzV,CAAK,CACnC,CAEI,QAAQA,EAAO,CACX,GAAI,OAAQA,GAAW,UACnB,OAAOA,EAEX,GAAI,OAAQA,GAAW,SAAU,CAE7B,GADAA,EAAQA,EAAM,YAAa,EACvBA,IAAU,OACV,MAAO,GAEX,GAAIA,IAAU,QACV,MAAO,EAEvB,CACQ,MAAM,IAAI,MAAM,qBAAuBA,CAAK,CACpD,CACI,IAAIA,EAAOgiB,EAAQ,CACf,OAAI,OAAQhiB,GAAW,WACf,CAACgiB,GAAUhiB,EAAM,UAAU,EAAG,CAAC,IAAM,OACrCA,EAAQ,KAAOA,GAEf2Y,GAAY3Y,CAAK,GACVA,EAAM,YAAa,EAG3BgU,GAAO,mBAAmB,eAAgB,QAAShU,CAAK,CACvE,CACI,KAAKA,EAAOgiB,EAAQ,CAChB,MAAM/b,EAAS,KAAK,IAAIjG,EAAOgiB,CAAM,EACrC,GAAK/b,EAAO,OAAS,IAAO,EACxB,MAAM,IAAI,MAAM,8BAAgCjG,CAAK,EAEzD,OAAOiG,CACf,CAGI,QAAQjG,EAAO,CACX,OAAOuW,GAAWvW,CAAK,CAC/B,CACI,YAAYA,EAAO,CACf,GAAI,CAAC2Y,GAAY3Y,EAAO,EAAE,EACtB,OAAO,KAEX,MAAM2a,EAAUpE,GAAW0L,GAAajiB,EAAO,EAAE,CAAC,EAClD,OAAQ2a,IAAY5N,GAAe,KAAO4N,CAClD,CACI,gBAAgB3a,EAAO,CACnB,OAAOkiB,GAAmBliB,CAAK,CACvC,CAEI,SAASsa,EAAU,CACf,GAAIA,GAAY,KACZ,MAAO,SAEX,GAAIA,IAAa,WACb,MAAO,MAEX,OAAQA,EAAQ,CACZ,IAAK,WAAY,MAAO,MACxB,IAAK,SACL,IAAK,UACL,IAAK,OACL,IAAK,YACD,OAAOA,CACvB,CACQ,GAAI,OAAQA,GAAc,UAAY3B,GAAY2B,CAAQ,EACtD,OAAO6H,GAAS7H,CAAQ,EAE5B,MAAM,IAAI,MAAM,kBAAkB,CAC1C,CAEI,KAAKta,EAAOgiB,EAAQ,CAChB,MAAM/b,EAAS,KAAK,IAAIjG,EAAOgiB,CAAM,EACrC,OAAII,GAAcnc,CAAM,IAAM,GACnB+N,GAAO,mBAAmB,eAAgB,QAAShU,CAAK,EAE5DiG,CACf,CAEI,WAAWjG,EAAO,CACd,GAAIA,GAAS,KACT,OAAO,KAEX,MAAMgQ,EAAIyF,EAAU,KAAKzV,CAAK,EAC9B,GAAI,CACA,OAAOgQ,EAAE,SAAU,CAC/B,MACsB,CAAA,CACd,OAAO,IACf,CACI,QAAQhQ,EAAO,CACX,GAAI,CAAC2Y,GAAY3Y,CAAK,EAClB,MAAM,IAAI,MAAM,iBAAiB,EAErC,OAAOiW,GAAWjW,EAAO,EAAE,CACnC,CACI,OAAOA,EAAOqiB,EAAQ,CACdriB,EAAM,QAAU,MAAQA,EAAM,OAAS,OACvCA,EAAM,MAAQA,EAAM,QAGxB,MAAMsiB,EAActiB,EAAM,aAAe,KAAQA,EAAM,YAAcA,EAAM,WACrEiG,EAASub,EAAU,MAAMa,EAAQriB,CAAK,EAC5C,OAAAiG,EAAO,YAAgBqc,GAAc,KAAQ,KAAO7M,EAAU,KAAK6M,CAAU,EACtErc,CACf,CACI,MAAMjG,EAAO,CACT,OAAO,KAAK,OAAOA,EAAO,KAAK,QAAQ,KAAK,CACpD,CACI,sBAAsBA,EAAO,CACzB,OAAO,KAAK,OAAOA,EAAO,KAAK,QAAQ,qBAAqB,CACpE,CAEI,mBAAmBA,EAAO,CACtB,OAAOwhB,EAAU,MAAM,KAAK,QAAQ,mBAAoBxhB,CAAK,CACrE,CACI,oBAAoBua,EAAa,CAEzBA,EAAY,KAAO,MAAQA,EAAY,UAAY,OACnDA,EAAY,SAAWA,EAAY,KAInCA,EAAY,IAAM9E,EAAU,KAAK8E,EAAY,EAAE,EAAE,WACjDA,EAAY,GAAK,8CAGjBA,EAAY,OAAS,MAAQA,EAAY,MAAQ,OACjDA,EAAY,KAAOA,EAAY,OAG/BA,EAAY,IAAM,MAAQA,EAAY,SAAW,OACjDA,EAAY,QAAU,KAAK,gBAAgBA,CAAW,IAErDA,EAAY,OAAS,GAAKA,EAAY,OAAS,IAAMA,EAAY,YAAc,OAChFA,EAAY,WAAa,CAAE,GAE/B,MAAMtU,EAASub,EAAU,MAAM,KAAK,QAAQ,YAAajH,CAAW,EACpE,GAAIA,EAAY,SAAW,KAAM,CAC7B,IAAI3O,EAAU2O,EAAY,QACtB5B,GAAY/M,CAAO,IACnBA,EAAU6J,EAAU,KAAK7J,CAAO,EAAE,SAAU,GAEhD3F,EAAO,QAAU2F,CAC7B,KACa,CACD,IAAIA,EAAU2O,EAAY,UAEtB3O,GAAW,MAAQ3F,EAAO,GAAK,OAC/B2F,EAAU2O,EAAY,SAEtB5B,GAAY/M,CAAO,IACnBA,EAAU6J,EAAU,KAAK7J,CAAO,EAAE,SAAU,GAE5C,OAAQA,GAAa,UAAY3F,EAAO,GAAK,OAC7C2F,GAAW3F,EAAO,EAAI,IAAM,EACxB2F,EAAU,IACVA,EAAU,GAEdA,EAAU,SAASA,CAAO,GAE1B,OAAQA,GAAa,WACrBA,EAAU,GAEd3F,EAAO,QAAU2F,CAC7B,CAEQ,OAAI3F,EAAO,WAAaA,EAAO,UAAU,QAAQ,KAAM,EAAE,IAAM,MAC3DA,EAAO,UAAY,MAEhBA,CACf,CACI,YAAYjG,EAAO,CACf,OAAOuiB,GAAiBviB,CAAK,CACrC,CACI,WAAWA,EAAO,CACd,OAAOwhB,EAAU,MAAM,KAAK,QAAQ,WAAYxhB,CAAK,CAC7D,CACI,QAAQA,EAAO,CACX,MAAMiG,EAASub,EAAU,MAAM,KAAK,QAAQ,QAASxhB,CAAK,EAE1D,GAAIiG,EAAO,MAAQ,KACf,GAAIA,EAAO,KAAK,QAAU,EAAG,CAEzB,MAAMjG,EAAQyV,EAAU,KAAKxP,EAAO,IAAI,EAAE,SAAU,EAChDjG,IAAU,GAAKA,IAAU,GAErBiG,EAAO,QAAU,MAASA,EAAO,SAAWjG,GAC5CgU,GAAO,mBAAmB,kCAAmC,QAAS,CAAE,KAAM/N,EAAO,KAAM,OAAQA,EAAO,MAAM,CAAE,EAEtHA,EAAO,OAASjG,EAChB,OAAOiG,EAAO,MAGd+N,GAAO,mBAAmB,0BAA2B,aAAc/N,EAAO,IAAI,CAElG,MACqBA,EAAO,KAAK,SAAW,IAE5B+N,GAAO,mBAAmB,oBAAqB,aAAc/N,EAAO,IAAI,EAGhF,OAAIA,EAAO,QAAU,OACjBA,EAAO,UAAY,IAEhBA,CACf,CACI,OAAOjG,EAAO,CACV,OAAI,MAAM,QAAQA,CAAK,EACZA,EAAM,IAAKgQ,GAAM,KAAK,OAAOA,CAAC,CAAC,EAEjChQ,GAAS,KACP,KAAK,KAAKA,EAAO,EAAI,EAEzB,IACf,CACI,OAAOA,EAAO,CACV,OAAOwhB,EAAU,MAAM,KAAK,QAAQ,OAAQxhB,CAAK,CACzD,CACI,UAAUA,EAAO,CACb,OAAOwhB,EAAU,MAAM,KAAK,QAAQ,UAAWxhB,CAAK,CAC5D,CACI,OAAO,MAAMqiB,EAAQG,EAAQ,CACzB,MAAMvc,EAAS,CAAE,EACjB,UAAWI,KAAOgc,EACd,GAAI,CACA,MAAMriB,EAAQqiB,EAAOhc,CAAG,EAAEmc,EAAOnc,CAAG,CAAC,EACjCrG,IAAU,SACViG,EAAOI,CAAG,EAAIrG,EAElC,OACmB4H,EAAO,CACV,MAAAA,EAAM,SAAWvB,EACjBuB,EAAM,WAAa4a,EAAOnc,CAAG,EACvBuB,CACtB,CAEQ,OAAO3B,CACf,CAEI,OAAO,UAAUoc,EAAQI,EAAW,CAChC,OAAQ,SAAUziB,EAAO,CACrB,OAAIA,GAAS,KACFyiB,EAEJJ,EAAOriB,CAAK,CACtB,CACT,CAEI,OAAO,aAAaqiB,EAAQK,EAAc,CACtC,OAAQ,SAAU1iB,EAAO,CACrB,OAAKA,EAGEqiB,EAAOriB,CAAK,EAFR0iB,CAGd,CACT,CAEI,OAAO,QAAQL,EAAQ,CACnB,OAAQ,SAAUzU,EAAO,CACrB,GAAI,CAAC,MAAM,QAAQA,CAAK,EACpB,MAAM,IAAI,MAAM,cAAc,EAElC,MAAM3H,EAAS,CAAE,EACjB,OAAA2H,EAAM,QAAQ,SAAU5N,EAAO,CAC3BiG,EAAO,KAAKoc,EAAOriB,CAAK,CAAC,CACzC,CAAa,EACMiG,CACV,CACT,CACA,CClaA,IAAI2O,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,EAAW,CACrF,SAASC,EAAMjV,EAAO,CAAE,OAAOA,aAAiB+U,EAAI/U,EAAQ,IAAI+U,EAAE,SAAUG,EAAS,CAAEA,EAAQlV,CAAK,CAAI,CAAA,CAAE,CAC1G,OAAO,IAAK+U,IAAMA,EAAI,UAAU,SAAUG,EAASC,EAAQ,CACvD,SAASC,EAAUpV,EAAO,CAAE,GAAI,CAAEqV,EAAKL,EAAU,KAAKhV,CAAK,CAAC,CAAI,OAAQsV,EAAG,CAAEH,EAAOG,CAAC,CAAI,CAAA,CACzF,SAASC,EAASvV,EAAO,CAAE,GAAI,CAAEqV,EAAKL,EAAU,MAAShV,CAAK,CAAC,CAAI,OAAQsV,EAAG,CAAEH,EAAOG,CAAC,CAAI,CAAA,CAC5F,SAASD,EAAKpP,EAAQ,CAAEA,EAAO,KAAOiP,EAAQjP,EAAO,KAAK,EAAIgP,EAAMhP,EAAO,KAAK,EAAE,KAAKmP,EAAWG,CAAQ,CAAE,CAC5GF,GAAML,EAAYA,EAAU,MAAMH,EAASC,GAAc,CAAA,CAAE,GAAG,MAAM,CAC5E,CAAK,CACL,EAgBA,MAAMd,EAAS,IAAIC,EAAO5G,EAAO,EAE3BsV,GAAqB,GAG3B,SAASC,GAAWC,EAAO,CACvB,OAAIA,GAAS,KACF,QAEPT,GAAcS,CAAK,IAAM,IACzB7O,EAAO,mBAAmB,gBAAiB,QAAS6O,CAAK,EAEtDA,EAAM,YAAa,EAC9B,CACA,SAASC,GAAgBC,EAAQ,CAG7B,IADAA,EAASA,EAAO,MAAO,EAChBA,EAAO,OAAS,GAAKA,EAAOA,EAAO,OAAS,CAAC,GAAK,MACrDA,EAAO,IAAK,EAEhB,OAAOA,EAAO,IAAKF,GAAU,CACzB,GAAI,MAAM,QAAQA,CAAK,EAAG,CAEtB,MAAMG,EAAS,CAAE,EACjBH,EAAM,QAASA,GAAU,CACrBG,EAAOJ,GAAWC,CAAK,CAAC,EAAI,EAC5C,CAAa,EAED,MAAMjR,EAAS,OAAO,KAAKoR,CAAM,EACjC,OAAApR,EAAO,KAAM,EACNA,EAAO,KAAK,GAAG,CAClC,KAEY,QAAOgR,GAAWC,CAAK,CAEnC,CAAK,EAAE,KAAK,GAAG,CACf,CACA,SAASI,GAAkBzb,EAAM,CAC7B,OAAIA,IAAS,GACF,CAAE,EAENA,EAAK,MAAM,IAAI,EAAE,IAAKqb,GAAU,CACnC,GAAIA,IAAU,GACV,MAAO,CAAE,EAEb,MAAMvO,EAAQuO,EAAM,MAAM,GAAG,EAAE,IAAKA,GACvBA,IAAU,OAAU,KAAOA,CACvC,EACD,OAASvO,EAAM,SAAW,EAAKA,EAAM,CAAC,EAAIA,CAClD,CAAK,CACL,CACA,SAAS4O,GAAYhJ,EAAW,CAC5B,GAAI,OAAQA,GAAe,SAAU,CAEjC,GADAA,EAAYA,EAAU,YAAa,EAC/BkI,GAAclI,CAAS,IAAM,GAC7B,MAAO,MAAQA,EAEnB,GAAIA,EAAU,QAAQ,GAAG,IAAM,GAC3B,OAAOA,CAEnB,KACS,IAAI,MAAM,QAAQA,CAAS,EAC5B,MAAO,YAAc4I,GAAgB5I,CAAS,EAE7C,GAAIT,GAAU,YAAYS,CAAS,EACpClG,MAAAA,EAAO,KAAK,iBAAiB,EACvB,IAAI,MAAM,iBAAiB,EAEhC,GAAIkG,GAAa,OAAQA,GAAe,SACzC,MAAO,WAAaA,EAAU,SAAW,KAAO,IAAM4I,GAAgB5I,EAAU,QAAU,EAAE,EAEhG,MAAM,IAAI,MAAM,mBAAqBA,CAAS,CAClD,CAGA,SAASiJ,IAAU,CACf,OAAQ,IAAI,KAAM,EAAE,QAAS,CACjC,CACA,SAASnE,GAAM5B,EAAU,CACrB,OAAO,IAAI,QAASlI,GAAY,CAC5B,WAAWA,EAASkI,CAAQ,CACpC,CAAK,CACL,CAeA,MAAMgG,GAAiB,CAAC,QAAS,UAAW,UAAW,MAAM,EACtD,MAAMC,EAAM,CACf,YAAY5kB,EAAK6K,EAAUga,EAAM,CAC7BrM,GAAe,KAAM,MAAOxY,CAAG,EAC/BwY,GAAe,KAAM,WAAY3N,CAAQ,EACzC2N,GAAe,KAAM,OAAQqM,CAAI,EACjC,KAAK,iBAAmB,GACxB,KAAK,UAAY,EACzB,CACI,IAAI,OAAQ,CACR,OAAQ,KAAK,KAAI,CACb,IAAK,KACD,OAAO,KAAK,KAChB,IAAK,SACD,OAAO,KAAK,MAC5B,CACQ,OAAO,KAAK,GACpB,CACI,IAAI,MAAO,CACP,OAAO,KAAK,IAAI,MAAM,GAAG,EAAE,CAAC,CACpC,CACI,IAAI,MAAO,CACP,MAAMhP,EAAQ,KAAK,IAAI,MAAM,GAAG,EAChC,OAAIA,EAAM,CAAC,IAAM,KACN,KAEJA,EAAM,CAAC,CACtB,CACI,IAAI,QAAS,CACT,MAAMA,EAAQ,KAAK,IAAI,MAAM,GAAG,EAChC,GAAIA,EAAM,CAAC,IAAM,SACb,OAAO,KAEX,MAAMqG,EAAUrG,EAAM,CAAC,EACjByO,EAASE,GAAkB3O,EAAM,CAAC,CAAC,EACnCiP,EAAS,CAAE,EACjB,OAAIR,EAAO,OAAS,IAChBQ,EAAO,OAASR,GAEhBpI,GAAWA,IAAY,MACvB4I,EAAO,QAAU5I,GAEd4I,CACf,CACI,UAAW,CACP,OAAQ,KAAK,IAAI,QAAQ,GAAG,GAAK,GAAKH,GAAe,QAAQ,KAAK,GAAG,GAAK,CAClF,CACA,CAGA,MAAMI,GAAY,CACd,EAAK,CAAE,OAAQ,MAAO,MAAO,EAAM,KAAM,EAAM,OAAQ,IAAM,EAC7D,EAAK,CAAE,OAAQ,MAAO,MAAO,GAAM,KAAM,GAAM,OAAQ,KAAO,EAC9D,EAAK,CAAE,OAAQ,OAAQ,MAAO,GAAM,KAAM,EAAM,EAChD,GAAM,CAAE,OAAQ,MAAO,IAAK,KAAO,EACnC,GAAM,CAAE,OAAQ,MAAO,IAAK,KAAO,EACnC,IAAO,CAAE,OAAQ,OAAQ,IAAK,KAAO,CACzC,EACA,SAASC,GAAWzjB,EAAO,CACvB,OAAOiW,GAAWR,EAAU,KAAKzV,CAAK,EAAE,YAAa,EAAE,EAAE,CAC7D,CAEA,SAAS0jB,GAAalc,EAAM,CACxB,OAAOiU,GAAO,OAAOhH,GAAO,CAACjN,EAAMya,GAAavG,GAAOA,GAAOlU,CAAI,CAAC,EAAG,EAAG,CAAC,CAAC,CAAC,CAAC,CACjF,CACA,MAAMmc,GAAc,IAAI,OAAO,kBAAoB,GAAG,EAChDC,GAAW,CACb,IAAI,OAAO,mBAAqB,GAAG,EACnC,IAAI,OAAO,gBAAiB,GAAG,EAC/BD,GACA,IAAI,OAAO,mCAAoC,GAAG,CACtD,EACA,SAASE,GAAa5d,EAAQuJ,EAAO,CACjC,GAAI,CACA,OAAO+N,GAAauG,GAAY7d,EAAQuJ,CAAK,CAAC,CACtD,MACkB,CAAA,CACd,OAAO,IACX,CACA,SAASsU,GAAY7d,EAAQuJ,EAAO,CAChC,GAAIvJ,IAAW,KACX,OAAO,KAEX,MAAM4J,EAAS4F,EAAU,KAAKwM,GAAahc,EAAQuJ,EAAOA,EAAQ,EAAE,CAAC,EAAE,SAAU,EAC3EyI,EAASxC,EAAU,KAAKwM,GAAahc,EAAQ4J,EAAQA,EAAS,EAAE,CAAC,EAAE,SAAU,EACnF,OAAOoS,GAAahc,EAAQ4J,EAAS,GAAIA,EAAS,GAAKoI,CAAM,CACjE,CAEA,SAAS8L,GAAYC,EAAM,CACvB,OAAIA,EAAK,MAAM,mBAAmB,EAC9BA,EAAOA,EAAK,UAAU,EAAE,EAEnBA,EAAK,MAAM,aAAa,EAC7BA,EAAOA,EAAK,UAAU,CAAC,EAGvBhQ,EAAO,mBAAmB,0BAA2B,OAAQgQ,CAAI,EAE9D,gCAAiCA,CAAI,EAChD,CACA,SAASC,GAAOjkB,EAAO,CACnB,MAAMiG,EAASwH,GAASzN,CAAK,EAC7B,GAAIiG,EAAO,OAAS,GAChB,MAAM,IAAI,MAAM,6BAA6B,EAEjD,MAAMie,EAAS,IAAI,WAAW,EAAE,EAChC,OAAAA,EAAO,IAAIje,EAAQ,GAAKA,EAAO,MAAM,EAC9Bie,CACX,CACA,SAASC,GAASnkB,EAAO,CACrB,GAAKA,EAAM,OAAS,KAAQ,EACxB,OAAOA,EAEX,MAAMiG,EAAS,IAAI,WAAW,KAAK,KAAKjG,EAAM,OAAS,EAAE,EAAI,EAAE,EAC/D,OAAAiG,EAAO,IAAIjG,CAAK,EACTiG,CACX,CAEA,SAASme,GAAYC,EAAO,CACxB,MAAMpe,EAAS,CAAE,EACjB,IAAIqe,EAAY,EAEhB,QAAS9W,EAAI,EAAGA,EAAI6W,EAAM,OAAQ7W,IAC9BvH,EAAO,KAAK,IAAI,EAChBqe,GAAa,GAEjB,QAAS9W,EAAI,EAAGA,EAAI6W,EAAM,OAAQ7W,IAAK,CACnC,MAAMhG,EAAOiG,GAAS4W,EAAM7W,CAAC,CAAC,EAE9BvH,EAAOuH,CAAC,EAAIyW,GAAOK,CAAS,EAE5Bre,EAAO,KAAKge,GAAOzc,EAAK,MAAM,CAAC,EAC/BvB,EAAO,KAAKke,GAAS3c,CAAI,CAAC,EAC1B8c,GAAa,GAAK,KAAK,KAAK9c,EAAK,OAAS,EAAE,EAAI,EACxD,CACI,OAAOuO,GAAU9P,CAAM,CAC3B,CACO,MAAMse,EAAS,CAElB,YAAYtI,EAAUtB,EAAS7H,EAAM0R,EAAiB,CAClDvN,GAAe,KAAM,WAAYgF,CAAQ,EACzChF,GAAe,KAAM,OAAQnE,CAAI,EACjCmE,GAAe,KAAM,UAAWgF,EAAS,UAAU,QAAQtB,CAAO,CAAC,EACnE1D,GAAe,KAAM,mBAAoBuN,CAAe,CAChE,CACI,kBAAmB,CACf,OAAK,KAAK,mBAEN,KAAK,iBAAmB,KAAK,SAAS,KAAK,CACvC,GAAI,KAAK,QACT,KAAM,4EACtB,CAAa,EAAE,KAAMve,GACEwP,EAAU,KAAKxP,CAAM,EAAE,GAAG,CAAC,CACrC,EAAE,MAAO2B,GAAU,CAChB,GAAIA,EAAM,OAASqM,EAAO,OAAO,eAC7B,MAAO,GAGX,WAAK,iBAAmB,KAClBrM,CACtB,CAAa,GAEE,KAAK,gBACpB,CACI,OAAO6c,EAAUC,EAAY,CACzB,OAAO9P,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAEhD,MAAM4F,EAAK,CACP,GAAI,KAAK,QACT,gBAAiB,GACjB,KAAMzE,GAAU,CAAC0O,EAAUjQ,GAAS,KAAK,IAAI,EAAIkQ,GAAc,IAAM,CAAA,CACxE,EAED,IAAIC,EAAa,IACb,MAAM,KAAK,sBACXA,EAAa,GAEbnK,EAAG,KAAOzE,GAAU,CAAC,aAAcqO,GAAY,CAACzP,GAAU,KAAK,IAAI,EAAG6F,EAAG,IAAI,CAAC,CAAC,CAAC,GAEpF,GAAI,CACA,IAAIvU,EAAS,MAAM,KAAK,SAAS,KAAKuU,CAAE,EACxC,OAAK/M,GAASxH,CAAM,EAAE,OAAS,KAAQ,GACnC+N,EAAO,WAAW,uBAAwBC,EAAO,OAAO,eAAgB,CACpE,YAAauG,EAAI,KAAMvU,CAC/C,CAAqB,EAED0e,IACA1e,EAAS6d,GAAY7d,EAAQ,CAAC,GAE3BA,CACvB,OACmB2B,EAAO,CACV,GAAIA,EAAM,OAASqM,EAAO,OAAO,eAC7B,OAAO,KAEX,MAAMrM,CACtB,CACA,CAAS,CACT,CACI,YAAY6c,EAAUC,EAAY,CAC9B,OAAO9P,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAM3O,EAAS,MAAM,KAAK,OAAOwe,EAAUC,CAAU,EACrD,OAAIze,GAAU,KACH6d,GAAY7d,EAAQ,CAAC,EAEzB,IACnB,CAAS,CACT,CACI,YAAY2e,EAAUC,EAAU,CAC5B,MAAMC,EAAWtB,GAAU,OAAOoB,CAAQ,CAAC,EAM3C,GALIE,GAAY,MACZ9Q,EAAO,WAAW,0BAA0B4Q,CAAQ,GAAI3Q,EAAO,OAAO,sBAAuB,CACzF,UAAW,cAAc2Q,CAAQ,GACjD,CAAa,EAEDE,EAAS,MAAQ,MACjB,OAAO,KAAK,SAAS,UAAU,QAAQD,CAAQ,EAEnD,MAAMzW,EAAQX,GAASoX,CAAQ,EAE/B,GAAIC,EAAS,OAAS,KAAM,CACxB,MAAMC,EAAQF,EAAS,MAAM,2CAA2C,EACxE,GAAIE,EAAO,CACP,MAAM9M,EAAS,SAAS8M,EAAM,CAAC,EAAG,EAAE,EACpC,GAAIA,EAAM,CAAC,EAAE,SAAW9M,EAAS,GAAKA,GAAU,GAAKA,GAAU,GAC3D,OAAOyL,GAAajP,GAAO,CAAC,CAACqQ,EAAS,KAAK,EAAI,KAAOC,EAAM,CAAC,CAAC,CAAE,CAAC,CAErF,CACA,CAEQ,GAAID,EAAS,MAAQ,KAAM,CACvB,MAAME,EAAOH,EAAS,MAAM,uCAAuC,EACnE,GAAIG,EAAM,CACN,MAAM/M,EAAS,SAAS+M,EAAK,CAAC,EAAG,EAAE,EACnC,GAAIA,EAAK,CAAC,EAAE,SAAW/M,EAAS,GAAKA,GAAU,GAAKA,GAAU,GAC1D,OAAOyL,GAAajP,GAAO,CAAC,CAACqQ,EAAS,IAAI,EAAI,KAAOE,EAAK,CAAC,CAAC,CAAE,CAAC,CAEnF,CACA,CAEQ,GAAIF,EAAS,QAAU,KAAM,CACzB,MAAM7M,EAAS7J,EAAM,CAAC,EAEtB,IAAIf,EAAUe,EAAM,CAAC,EASrB,GARIf,IAAY,EACR4K,IAAW,IAAMA,IAAW,KAC5B5K,EAAU,IAIdA,EAAU,GAEVA,GAAW,GAAKe,EAAM,SAAW,EAAI6J,GAAUA,GAAU,GAAKA,GAAU,GAAI,CAC5E,MAAMkI,EAAQoB,GAAO,QAAQnT,EAAM,MAAM,CAAC,CAAC,EAC3C,OAAA+R,EAAM,QAAQ9S,CAAO,EACdkU,GAAO,OAAOuD,EAAS,OAAQ3E,CAAK,CAC3D,CACA,CACQ,OAAO,IACf,CACI,WAAWyE,EAAU,CACjB,OAAOhQ,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAKhD,GAJIgQ,GAAY,OACZA,EAAW,IAGXA,IAAa,GACb,GAAI,CAEA,MAAM3e,EAAS,MAAM,KAAK,OAAO,YAAY,EAE7C,OAAIA,IAAW,MAAQA,IAAW+G,GACvB,KAEJ,KAAK,SAAS,UAAU,YAAY/G,CAAM,CACrE,OACuB2B,EAAO,CACV,GAAIA,EAAM,OAASqM,EAAO,OAAO,eAC7B,OAAO,KAEX,MAAMrM,CAC1B,CAGY,MAAMid,EAAW,MAAM,KAAK,YAAY,aAAcpB,GAAWmB,CAAQ,CAAC,EAE1E,GAAIC,GAAY,MAAQA,IAAa,KACjC,OAAO,KAGX,MAAMlK,EAAU,KAAK,YAAYiK,EAAUC,CAAQ,EACnD,OAAIlK,GAAW,MACX3G,EAAO,WAAW,mCAAoCC,EAAO,OAAO,sBAAuB,CACvF,UAAW,cAAc2Q,CAAQ,IACjC,SAAUA,EACV,KAAMC,CAC1B,CAAiB,EAEElK,CACnB,CAAS,CACT,CACI,WAAY,CACR,OAAO/F,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAMqQ,EAAU,CAAC,CAAE,KAAM,OAAQ,QAAS,KAAK,KAAM,EACrD,GAAI,CAGA,MAAMC,EAAS,MAAM,KAAK,QAAQ,QAAQ,EAC1C,GAAIA,GAAU,KACV,OAAO,KAEX,QAAS1X,EAAI,EAAGA,EAAIoW,GAAS,OAAQpW,IAAK,CACtC,MAAMiJ,EAAQyO,EAAO,MAAMtB,GAASpW,CAAC,CAAC,EACtC,GAAIiJ,GAAS,KACT,SAEJ,MAAM0O,EAAS1O,EAAM,CAAC,EAAE,YAAa,EACrC,OAAQ0O,EAAM,CACV,IAAK,QACD,OAAAF,EAAQ,KAAK,CAAE,KAAM,MAAO,QAASC,EAAQ,EACtC,CAAE,QAAAD,EAAS,IAAKC,CAAQ,EACnC,IAAK,OACD,OAAAD,EAAQ,KAAK,CAAE,KAAM,OAAQ,QAASC,EAAQ,EACvC,CAAE,QAAAD,EAAS,IAAKC,CAAQ,EACnC,IAAK,OACD,OAAAD,EAAQ,KAAK,CAAE,KAAM,OAAQ,QAASC,EAAQ,EACvC,CAAE,QAAAD,EAAS,IAAKlB,GAAYmB,CAAM,CAAG,EAChD,IAAK,SACL,IAAK,UAAW,CAEZ,MAAMT,EAAYU,IAAW,SAAY,aAAe,aACxDF,EAAQ,KAAK,CAAE,KAAME,EAAQ,QAASD,EAAQ,EAE9C,MAAME,EAAS,KAAK,mBAAqB,MAAM,KAAK,WAAU,GACxD9Q,GAASmC,EAAM,CAAC,GAAK,IAAI,MAAM,GAAG,EACxC,GAAInC,EAAM,SAAW,EACjB,OAAO,KAEX,MAAM+Q,EAAO,MAAM,KAAK,SAAS,UAAU,QAAQ/Q,EAAM,CAAC,CAAC,EACrDgR,EAAUrP,GAAWR,EAAU,KAAKnB,EAAM,CAAC,CAAC,EAAE,YAAa,EAAE,EAAE,EAErE,GAAI6Q,IAAW,SAAU,CAErB,MAAMI,EAAa,KAAK,SAAS,UAAU,YAAY,MAAM,KAAK,SAAS,KAAK,CAC5E,GAAIF,EAAM,KAAMtP,GAAU,CAAC,aAAcuP,CAAO,CAAC,CACrF,CAAiC,CAAC,EACF,GAAIF,IAAUG,EACV,OAAO,KAEXN,EAAQ,KAAK,CAAE,KAAM,QAAS,QAASM,EAAY,CACnF,SACqCJ,IAAW,UAAW,CAE3B,MAAMK,EAAU/P,EAAU,KAAK,MAAM,KAAK,SAAS,KAAK,CACpD,GAAI4P,EAAM,KAAMtP,GAAU,CAAC,aAAcE,GAAWmP,EAAO,EAAE,EAAGE,CAAO,CAAC,CAC5G,CAAiC,CAAC,EACF,GAAIE,EAAQ,SACR,OAAO,KAEXP,EAAQ,KAAK,CAAE,KAAM,UAAW,QAASO,EAAQ,SAAQ,EAAI,CAC7F,CAE4B,MAAMhL,EAAK,CACP,GAAI,KAAK,SAAS,UAAU,QAAQlG,EAAM,CAAC,CAAC,EAC5C,KAAMyB,GAAU,CAAC0O,EAAUa,CAAO,CAAC,CACtC,EACD,IAAIG,EAAc5B,GAAa,MAAM,KAAK,SAAS,KAAKrJ,CAAE,EAAG,CAAC,EAC9D,GAAIiL,GAAe,KACf,OAAO,KAEXR,EAAQ,KAAK,CAAE,KAAM,oBAAqB,QAASQ,EAAa,EAE5DN,IAAW,YACXM,EAAcA,EAAY,QAAQ,OAAQH,EAAQ,UAAU,CAAC,CAAC,EAC9DL,EAAQ,KAAK,CAAE,KAAM,wBAAyB,QAASQ,EAAa,GAGpEA,EAAY,MAAM,SAAS,IAC3BA,EAAc1B,GAAY0B,CAAW,GAEzCR,EAAQ,KAAK,CAAE,KAAM,eAAgB,QAASQ,EAAa,EAE3D,MAAMC,EAAW,MAAMxG,GAAUuG,CAAW,EAC5C,GAAI,CAACC,EACD,OAAO,KAEXT,EAAQ,KAAK,CAAE,KAAM,WAAY,QAAS,KAAK,UAAUS,CAAQ,EAAG,EAEpE,IAAIC,EAAWD,EAAS,MACxB,GAAI,OAAQC,GAAc,SACtB,OAAO,KAEX,GAAI,CAAAA,EAAS,MAAM,sBAAsB,EAGpC,CAGD,GADaA,EAAS,MAAMhC,EAAW,GAC3B,KACR,OAAO,KAEXsB,EAAQ,KAAK,CAAE,KAAM,WAAY,QAASU,EAAU,EACpDA,EAAW5B,GAAY4B,CAAQ,CAC/D,CAC4B,OAAAV,EAAQ,KAAK,CAAE,KAAM,MAAO,QAASU,EAAU,EACxC,CAAE,QAAAV,EAAS,IAAKU,CAAU,CAC7D,CACA,CACA,CACA,MAC0B,CAAA,CACd,OAAO,IACnB,CAAS,CACT,CACI,gBAAiB,CACb,OAAO/Q,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAEhD,MAAMiQ,EAAW,MAAM,KAAK,YAAY,YAAY,EAEpD,GAAIA,GAAY,MAAQA,IAAa,KACjC,OAAO,KAGX,MAAMe,EAAOf,EAAS,MAAM,+DAA+D,EAC3F,GAAIe,EAAM,CACN,MAAM3N,EAAS,SAAS2N,EAAK,CAAC,EAAG,EAAE,EACnC,GAAIA,EAAK,CAAC,EAAE,SAAW3N,EAAS,EAC5B,MAAO,UAAawD,GAAO,OAAO,KAAOmK,EAAK,CAAC,CAAC,CAEpE,CAEY,MAAMC,EAAOhB,EAAS,MAAM,+DAA+D,EAC3F,GAAIgB,EAAM,CACN,MAAM5N,EAAS,SAAS4N,EAAK,CAAC,EAAG,EAAE,EACnC,GAAIA,EAAK,CAAC,EAAE,SAAW5N,EAAS,EAC5B,MAAO,UAAawD,GAAO,OAAO,KAAOoK,EAAK,CAAC,CAAC,CAEpE,CAEY,MAAMC,EAAQjB,EAAS,MAAM,+BAA+B,EAC5D,GAAIiB,GACIA,EAAM,CAAC,EAAE,SAAY,GAAK,EAC1B,MAAO,SAAYA,EAAM,CAAC,EAGlC,MAAMC,EAASlB,EAAS,MAAM,yBAAyB,EACvD,GAAIkB,GACIA,EAAO,CAAC,EAAE,SAAY,GAAK,EAAI,CAE/B,MAAMC,EAAU,CAAE,IAAK,GAAI,IAAK,IAAK,IAAK,GAAK,EAE/C,MAAO,SADM5H,GAAa,KAAO2H,EAAO,CAAC,CAAC,EAAE,QAAQ,UAAYpW,GAAOqW,EAAQrW,CAAC,CAAE,CAEtG,CAEY,OAAOqE,EAAO,WAAW,2CAA4CC,EAAO,OAAO,sBAAuB,CACtG,UAAW,mBACX,KAAM4Q,CACtB,CAAa,CACb,CAAS,CACT,CACI,QAAQxe,EAAK,CACT,OAAOuO,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAEhD,IAAIqR,EAAW7Y,GAAY/G,CAAG,EAG9B4f,EAAWxR,GAAO,CAACgP,GAAW,EAAE,EAAGA,GAAWwC,EAAS,MAAM,EAAGA,CAAQ,CAAC,EAEpEA,EAAS,OAAS,KAAQ,IAC3BA,EAAWxR,GAAO,CAACwR,EAAUhQ,GAAW,KAAM,GAAM5P,EAAI,OAAS,EAAG,CAAC,CAAC,GAE1E,MAAMwe,EAAW,MAAM,KAAK,YAAY,aAAcnQ,GAAQuR,CAAQ,CAAC,EACvE,OAAIpB,GAAY,MAAQA,IAAa,KAC1B,KAEJtH,GAAasH,CAAQ,CACxC,CAAS,CACT,CACA,CACA,IAAIqB,GAAmB,KACnBC,GAAa,EACV,MAAMC,WAAqBzM,EAAS,CAUvC,YAAYP,EAAS,CAcjB,GAbA,MAAO,EAEP,KAAK,QAAU,CAAE,EACjB,KAAK,SAAW,CAAE,MAAO,EAAI,EAC7B,KAAK,gBAAkB,GACvB,KAAK,UAAY,WAAW,aAAc,EAI1CnC,GAAe,KAAM,aAAemC,IAAY,KAAO,EACnD,KAAK,aACLA,EAAU,KAAK,cAAe,GAE9BA,aAAmB,QACnB,KAAK,gBAAkBA,EAEvBA,EAAQ,MAAOxR,GAAU,EAAG,EAE5B,KAAK,OAAQ,EAAC,MAAOA,GAAU,CAAA,CAAG,MAEjC,CACD,MAAMye,EAAeC,GAAU,WAAY,YAAY,EAAElN,CAAO,EAC5DiN,GACApP,GAAe,KAAM,WAAYoP,CAAY,EAC7C,KAAK,KAAK,UAAWA,EAAc,IAAI,GAGvCrS,EAAO,mBAAmB,kBAAmB,UAAWoF,CAAO,CAE/E,CACQ,KAAK,wBAA0B,MAC/B,KAAK,iBAAmB,GACxB,KAAK,qBAAuB,GAC5B,KAAK,iBAAmB,IACxB,KAAK,eAAiB,CAC9B,CACI,QAAS,CACL,OAAOxE,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,GAAI,KAAK,UAAY,KAAM,CACvB,IAAIwE,EAAU,KACd,GAAI,KAAK,gBACL,GAAI,CACAA,EAAU,MAAM,KAAK,eAC7C,MACkC,CAAA,CAGdA,GAAW,OACXA,EAAU,MAAM,KAAK,cAAe,GAInCA,GACDpF,EAAO,WAAW,sBAAuBC,EAAO,OAAO,cAAe,EAAE,EAGxE,KAAK,UAAY,OACb,KAAK,WACL,KAAK,SAAWmF,EAGhBnC,GAAe,KAAM,WAAYmC,CAAO,EAE5C,KAAK,KAAK,UAAWA,EAAS,IAAI,EAEtD,CACY,OAAO,KAAK,QACxB,CAAS,CACT,CAII,IAAI,OAAQ,CACR,OAAOkG,GAAK,IACD,KAAK,OAAM,EAAG,KAAMlG,GAChBA,EACPxR,GAAU,CAEV,GAAI,EAAAA,EAAM,OAASqM,EAAO,OAAO,eAAiBrM,EAAM,QAAU,aAGlE,MAAMA,CACtB,CAAa,CACJ,CACT,CAEI,OAAO,cAAe,CAClB,OAAIse,IAAoB,OACpBA,GAAmB,IAAI1E,GAEpB0E,EACf,CAEI,OAAO,WAAW9M,EAAS,CACvB,OAAOqD,GAAYrD,GAAmB,WAAqB,CACnE,CACI,cAAcoB,EAAI+L,EAAUC,EAAM,CAC9B,OAAO5R,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,GAAI,KAAK,iBAAmB4R,EAAK,SAAW,EACxC,OAAO,KAEX,MAAMC,EAASjM,EAAG,GAAG,YAAa,EAC5BhT,EAAO+e,EAAS,YAAa,EAC7BG,EAAgB,CAAE,EACxB,QAASlZ,EAAI,EAAGA,EAAIgZ,EAAK,OAAQhZ,IAAK,CAClC,MAAM4O,EAAMoK,EAAKhZ,CAAC,EAEZqP,EAAOT,EAAI,QAAQ,WAAYqK,CAAM,EAAE,QAAQ,SAAUjf,CAAI,EAE7D2X,EAAQ/C,EAAI,QAAQ,QAAQ,GAAK,EAAK,KAAO,KAAK,UAAU,CAAE,KAAA5U,EAAM,OAAAif,CAAM,CAAE,EAC5ExgB,EAAS,MAAMiZ,GAAU,CAAE,IAAKrC,EAAM,iBAAkB,IAAQsC,EAAM,CAACnf,EAAOgd,KAChFhd,EAAM,OAASgd,EAAS,WACjBhd,EACV,EACD,GAAIiG,EAAO,KACP,OAAOA,EAAO,KAElB,MAAM0gB,EAAgB1gB,EAAO,SAAW,gBAExC,GAAIA,EAAO,QAAU,KAAOA,EAAO,OAAS,IACxC,OAAO+N,EAAO,WAAW,yCAAyC2S,CAAY,GAAI1S,EAAO,OAAO,aAAc,CAAE,IAAAmI,EAAK,aAAAuK,CAAY,CAAE,EAGvID,EAAc,KAAKC,CAAY,CAC/C,CACY,OAAO3S,EAAO,WAAW,wCAAwC0S,EAAc,IAAKtV,GAAM,KAAK,UAAUA,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,GAAI6C,EAAO,OAAO,aAAc,CACnJ,KAAAuS,EAAM,cAAAE,CACtB,CAAa,CACb,CAAS,CACT,CAGI,wBAAwBE,EAAQ,CAC5B,OAAOhS,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAGhD,GAFA,MAAM,KAAK,OAAQ,EAEfgS,EAAS,EAET,KAAO,KAAK,sBAAsB,CAE9B,MAAMC,EAAsB,KAAK,qBACjC,GAAI,CAEA,MAAM5gB,EAAS,MAAM4gB,EACrB,GAAK1D,GAAS,EAAGld,EAAO,UAAa2gB,EACjC,OAAO3gB,EAAO,YAGlB,KACxB,MACkC,CAKV,GAAI,KAAK,uBAAyB4gB,EAC9B,KAE5B,CACA,CAEY,MAAMC,EAAU3D,GAAS,EACnB4D,EAA2BjN,GAAkB,CAC/C,YAAa,KAAK,QAAQ,iBAAkB,CAAA,CAAE,EAC9C,aAAc,KAAK,WAAU,EAAG,KAAMV,GAAa,KAAQxR,GAAWA,CAAM,CAC/E,CAAA,EAAE,KAAK,CAAC,CAAE,YAAAof,EAAa,aAAAC,CAAY,IAAO,CACvC,GAAIA,EAEA,MAAI,KAAK,uBAAyBF,IAC9B,KAAK,qBAAuB,MAE1BE,EAEV,MAAMC,EAAW/D,GAAS,EAC1B,OAAA6D,EAAcvR,EAAU,KAAKuR,CAAW,EAAE,SAAU,EAChDA,EAAc,KAAK,0BACnBA,EAAc,KAAK,yBAEvB,KAAK,wBAA0BA,EAC/B,KAAK,oBAAoBA,CAAW,EAC7B,CAAE,YAAAA,EAAa,QAAAF,EAAS,SAAAI,CAAU,CACzD,CAAa,EACD,YAAK,qBAAuBH,EAE5BA,EAAyB,MAAOnf,GAAU,CAElC,KAAK,uBAAyBmf,IAC9B,KAAK,qBAAuB,KAEhD,CAAa,GACO,MAAMA,GAA0B,WACpD,CAAS,CACT,CACI,MAAO,CACH,OAAOnS,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAMuS,EAAShB,KAETiB,EAAU,CAAE,EAClB,IAAIJ,EAAc,KAClB,GAAI,CACAA,EAAc,MAAM,KAAK,wBAAwB,IAAM,KAAK,gBAAkB,CAAC,CAC/F,OACmBpf,EAAO,CACV,KAAK,KAAK,QAASA,CAAK,EACxB,MAChB,CAKY,GAJA,KAAK,oBAAoBof,CAAW,EAEpC,KAAK,KAAK,OAAQG,EAAQH,CAAW,EAEjCA,IAAgB,KAAK,iBAAkB,CACvC,KAAK,KAAK,UAAWG,CAAM,EAC3B,MAChB,CAKY,GAHI,KAAK,SAAS,QAAU,KACxB,KAAK,SAAS,MAAQH,EAAc,GAEpC,KAAK,IAAK,KAAK,SAAS,MAASA,CAAW,EAAI,IAChDhT,EAAO,KAAK,+DAA+D,KAAK,SAAS,KAAK,eAAegT,CAAW,GAAG,EAC3H,KAAK,KAAK,QAAShT,EAAO,UAAU,8BAA+BC,EAAO,OAAO,cAAe,CAC5F,YAAa+S,EACb,MAAO,YACP,oBAAqB,KAAK,SAAS,KACvD,CAAiB,CAAC,EACF,KAAK,KAAK,QAASA,CAAW,MAI9B,SAASxZ,EAAI,KAAK,SAAS,MAAQ,EAAGA,GAAKwZ,EAAaxZ,IACpD,KAAK,KAAK,QAASA,CAAC,EAIxB,KAAK,SAAS,QAAUwZ,IACxB,KAAK,SAAS,MAAQA,EACtB,OAAO,KAAK,KAAK,QAAQ,EAAE,QAAS3gB,GAAQ,CAExC,GAAIA,IAAQ,QACR,OAGJ,MAAMghB,EAAmB,KAAK,SAAShhB,CAAG,EAItCghB,IAAqB,WAKrBL,EAAcK,EAAmB,IACjC,OAAO,KAAK,SAAShhB,CAAG,CAEhD,CAAiB,GAGD,KAAK,mBAAqB,KAC1B,KAAK,iBAAmB2gB,EAAc,GAG1C,KAAK,QAAQ,QAASra,GAAU,CAC5B,OAAQA,EAAM,KAAI,CACd,IAAK,KAAM,CACP,MAAMgP,EAAOhP,EAAM,KACnB,IAAI2a,EAAS,KAAK,sBAAsB3L,CAAI,EAAE,KAAM4L,IAC5C,CAACA,GAAWA,EAAQ,aAAe,OAGvC,KAAK,SAAS,KAAO5L,CAAI,EAAI4L,EAAQ,YACrC,KAAK,KAAK5L,EAAM4L,CAAO,GAChB,KACV,EAAE,MAAO3f,GAAU,CAAE,KAAK,KAAK,QAASA,CAAK,EAAI,EAClDwf,EAAQ,KAAKE,CAAM,EACnB,KACxB,CACoB,IAAK,SAAU,CAEX,GAAI,CAAC3a,EAAM,UAAW,CAClBA,EAAM,UAAY,GAGdA,EAAM,mBAAqB,KAC3BA,EAAM,iBAAmBqa,EAAc,GAM3C,MAAMzD,EAAS5W,EAAM,OACrB4W,EAAO,UAAY5W,EAAM,iBAAmB,EAC5C4W,EAAO,QAAUyD,EAGjB,MAAMQ,EAAejE,EAAO,QAAU,KAAK,qBACvCiE,EAAejE,EAAO,YACtBA,EAAO,UAAYiE,GAEnBjE,EAAO,UAAY,IACnBA,EAAO,UAAY,GAEvB,MAAM+D,EAAS,KAAK,QAAQ/D,CAAM,EAAE,KAAMkE,GAAS,CAE/C9a,EAAM,UAAY,GACd8a,EAAK,SAAW,GAGpBA,EAAK,QAASC,GAAQ,CAGdA,EAAI,YAAc/a,EAAM,mBACxBA,EAAM,iBAAmB+a,EAAI,aAGjC,KAAK,SAAS,KAAOA,EAAI,SAAS,EAAIA,EAAI,YAC1C,KAAK,SAAS,KAAOA,EAAI,eAAe,EAAIA,EAAI,YAChD,KAAK,KAAKnE,EAAQmE,CAAG,CACzD,CAAiC,CACjC,CAA6B,EAAE,MAAO9f,GAAU,CAChB,KAAK,KAAK,QAASA,CAAK,EAExB+E,EAAM,UAAY,EAClD,CAA6B,EACDya,EAAQ,KAAKE,CAAM,CAC/C,CACwB,KACxB,CACA,CACA,CAAa,EACD,KAAK,iBAAmBN,EAExB,QAAQ,IAAII,CAAO,EAAE,KAAK,IAAM,CAC5B,KAAK,KAAK,UAAWD,CAAM,CAC3C,CAAa,EAAE,MAAOvf,GAAU,CAAE,KAAK,KAAK,QAASA,CAAK,EAAI,CAE9D,CAAS,CACT,CAEI,iBAAiBof,EAAa,CAC1B,KAAK,iBAAmBA,EAAc,EAClC,KAAK,SACL,KAAK,KAAM,CAEvB,CACI,IAAI,SAAU,CACV,OAAO,KAAK,QACpB,CAGI,eAAgB,CACZ,OAAOpS,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,OAAOZ,EAAO,WAAW,8CAA+CC,EAAO,OAAO,sBAAuB,CACzG,UAAW,wBAC3B,CAAa,CACb,CAAS,CACT,CACI,YAAa,CACT,OAAOW,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAMwE,EAAU,MAAM,KAAK,OAAQ,EAI7BuO,EAAiB,MAAM,KAAK,cAAe,EACjD,GAAIvO,EAAQ,UAAYuO,EAAe,QAAS,CAG5C,GAAI,KAAK,WACL,YAAK,SAAWA,EAEhB,KAAK,iBAAmB,GACxB,KAAK,iBAAmB,KACxB,KAAK,wBAA0B,KAC/B,KAAK,eAAiB,EACtB,KAAK,SAAS,MAAQ,GACtB,KAAK,wBAA0B,MAC/B,KAAK,qBAAuB,KAI5B,KAAK,KAAK,UAAWA,EAAgBvO,CAAO,EAC5C,MAAM4F,GAAM,CAAC,EACN,KAAK,SAEhB,MAAMpX,EAAQoM,EAAO,UAAU,6BAA8BC,EAAO,OAAO,cAAe,CACtF,MAAO,UACP,QAASmF,EACT,gBAAiBuO,CACrC,CAAiB,EACD,WAAK,KAAK,QAAS/f,CAAK,EAClBA,CACtB,CACY,OAAOwR,CACnB,CAAS,CACT,CACI,IAAI,aAAc,CACd,YAAK,wBAAwB,IAAM,KAAK,gBAAkB,CAAC,EAAE,KAAM4N,GAAgB,CAC/E,KAAK,oBAAoBA,CAAW,CAChD,EAAYpf,GAAU,EAAG,EACT,KAAK,kBAAoB,KAAQ,KAAK,iBAAmB,EACzE,CACI,IAAI,SAAU,CACV,OAAQ,KAAK,SAAW,IAChC,CACI,IAAI,QAAQ5H,EAAO,CACXA,GAAS,CAAC,KAAK,SACf,KAAK,QAAU,YAAY,IAAM,CAAE,KAAK,MAAO,EAAI,KAAK,eAAe,EAClE,KAAK,iBACN,KAAK,eAAiB,WAAW,IAAM,CACnC,KAAK,KAAM,EAGX,KAAK,eAAiB,WAAW,IAAM,CAG9B,KAAK,SACN,KAAK,KAAM,EAGf,KAAK,eAAiB,IAC9C,EAAuB,KAAK,eAAe,CAC1B,EAAE,CAAC,IAGH,CAACA,GAAS,KAAK,UACpB,cAAc,KAAK,OAAO,EAC1B,KAAK,QAAU,KAE3B,CACI,IAAI,iBAAkB,CAClB,OAAO,KAAK,gBACpB,CACI,IAAI,gBAAgBA,EAAO,CACvB,GAAI,OAAQA,GAAW,UAAYA,GAAS,GAAK,SAAS,OAAOA,CAAK,CAAC,GAAKA,EACxE,MAAM,IAAI,MAAM,0BAA0B,EAE9C,KAAK,iBAAmBA,EACpB,KAAK,UACL,cAAc,KAAK,OAAO,EAC1B,KAAK,QAAU,YAAY,IAAM,CAAE,KAAK,MAAO,EAAI,KAAK,gBAAgB,EAEpF,CACI,qBAAsB,CAClB,MAAM4nB,EAAMzE,GAAS,EAErB,OAAKyE,EAAM,KAAK,eAAkB,EAAI,KAAK,mBACvC,KAAK,eAAiBA,EACtB,KAAK,wBAA0B,KAAK,eAAc,EAAG,KAAMZ,KACnD,KAAK,kBAAoB,MAAQA,EAAc,KAAK,oBACpD,KAAK,iBAAmBA,GAErB,KAAK,iBACf,GAEE,KAAK,uBACpB,CACI,oBAAoBA,EAAa,CAEzB,KAAK,kBAAoB,MAAQA,EAAc,KAAK,mBAIxD,KAAK,eAAiB7D,GAAS,GAE3B,KAAK,kBAAoB,MAAQ6D,EAAc,KAAK,oBACpD,KAAK,iBAAmBA,EACxB,KAAK,wBAA0B,QAAQ,QAAQA,CAAW,GAEtE,CACI,mBAAmBa,EAAiBC,EAAejhB,EAAS,CACxD,OAAO+N,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,OAAO,KAAK,oBAAoBiT,EAAkBC,GAAyB,EAAmBjhB,GAAW,EAAG,IAAI,CAC5H,CAAS,CACT,CACI,oBAAoBghB,EAAiBC,EAAejhB,EAASkhB,EAAa,CACtE,OAAOnT,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAM2S,EAAU,MAAM,KAAK,sBAAsBM,CAAe,EAEhE,OAAKN,EAAUA,EAAQ,cAAgB,IAAMO,EAClCP,EAGJ,IAAI,QAAQ,CAACrS,EAASC,IAAW,CACpC,MAAM6S,EAAc,CAAE,EACtB,IAAIzI,EAAO,GACX,MAAM0I,EAAc,UAAY,CAC5B,OAAI1I,EACO,IAEXA,EAAO,GACPyI,EAAY,QAASlM,GAAS,CAAEA,EAAI,CAAG,CAAE,EAClC,GACV,EACKoM,EAAgBX,GAAY,CAC1BA,EAAQ,cAAgBO,GAGxBG,EAAW,GAGf/S,EAAQqS,CAAO,CAClB,EAGD,GAFA,KAAK,GAAGM,EAAiBK,CAAY,EACrCF,EAAY,KAAK,IAAM,CAAE,KAAK,eAAeH,EAAiBK,CAAY,EAAI,EAC1EH,EAAa,CACb,IAAII,EAAkBJ,EAAY,WAC9BK,EAAe,KACnB,MAAMC,EAAkBrB,GAAgBpS,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAC7E2K,IAMJ,MAAMP,GAAM,GAAI,EAChB,KAAK,oBAAoB+I,EAAY,IAAI,EAAE,KAAMO,GAAU1T,EAAU,KAAM,OAAQ,OAAQ,WAAa,CACpG,GAAI,CAAA2K,EAGJ,IAAI+I,GAASP,EAAY,MACrBI,EAAkBnB,MAEjB,CAED,CACI,MAAMuB,EAAQ,MAAM,KAAK,eAAeV,CAAe,EACvD,GAAIU,GAASA,EAAM,aAAe,KAC9B,MAExC,CAWgC,IANIH,GAAgB,OAChBA,EAAeD,EAAkB,EAC7BC,EAAeL,EAAY,aAC3BK,EAAeL,EAAY,aAG5BK,GAAgBpB,GAAa,CAChC,GAAIzH,EACA,OAEJ,MAAM3F,EAAQ,MAAM,KAAK,yBAAyBwO,CAAY,EAC9D,QAASI,EAAK,EAAGA,EAAK5O,EAAM,aAAa,OAAQ4O,IAAM,CACnD,MAAMhO,EAAKZ,EAAM,aAAa4O,CAAE,EAEhC,GAAIhO,EAAG,OAASqN,EACZ,OAGJ,GAAIrN,EAAG,OAASuN,EAAY,MAAQvN,EAAG,QAAUuN,EAAY,MAAO,CAChE,GAAIxI,EACA,OAGJ,MAAMgI,EAAU,MAAM,KAAK,mBAAmB/M,EAAG,KAAMsN,CAAa,EAEpE,GAAIG,EAAW,EACX,OAGJ,IAAIQ,EAAS,WACTjO,EAAG,OAASuN,EAAY,MAAQvN,EAAG,KAAOuN,EAAY,IAAMvN,EAAG,MAAM,GAAGuN,EAAY,KAAK,EACzFU,EAAS,WAEJjO,EAAG,OAAS,MAAQA,EAAG,OAASA,EAAG,IAAMA,EAAG,MAAM,OAAM,IAC7DiO,EAAS,aAGbtT,EAAOnB,EAAO,UAAU,2BAA4BC,EAAO,OAAO,qBAAsB,CACpF,UAAYwU,IAAW,YAAcA,IAAW,YAChD,OAAAA,EACA,YAAa,KAAK,iBAAiBjO,CAAE,EACrC,KAAMqN,EACN,QAAAN,CAChD,CAA6C,CAAC,EACF,MAC5C,CACA,CACoCa,GACpC,CACA,CACgC7I,GAGJ,KAAK,KAAK,QAAS8I,CAAc,EAC7D,CAAyB,EAAIzgB,GAAU,CACP2X,GAGJ,KAAK,KAAK,QAAS8I,CAAc,CAC7D,CAAyB,EACzB,CAAqB,EACD,GAAI9I,EACA,OAEJ,KAAK,KAAK,QAAS8I,CAAc,EACjCL,EAAY,KAAK,IAAM,CACnB,KAAK,eAAe,QAASK,CAAc,CACnE,CAAqB,CACrB,CACgB,GAAI,OAAQxhB,GAAa,UAAYA,EAAU,EAAG,CAC9C,MAAM8X,EAAQ,WAAW,IAAM,CACvBsJ,EAAW,GAGf9S,EAAOnB,EAAO,UAAU,mBAAoBC,EAAO,OAAO,QAAS,CAAE,QAASpN,CAAO,CAAE,CAAC,CAC3F,EAAEA,CAAO,EACN8X,EAAM,OACNA,EAAM,MAAO,EAEjBqJ,EAAY,KAAK,IAAM,CAAE,aAAarJ,CAAK,CAAE,CAAE,CACnE,CACA,CAAa,CACb,CAAS,CACT,CACI,gBAAiB,CACb,OAAO/J,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,OAAO,KAAK,wBAAwB,CAAC,CACjD,CAAS,CACT,CACI,aAAc,CACV,OAAOA,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAM,KAAK,WAAY,EACvB,MAAM3O,EAAS,MAAM,KAAK,QAAQ,cAAe,CAAA,CAAE,EACnD,GAAI,CACA,OAAOwP,EAAU,KAAKxP,CAAM,CAC5C,OACmB2B,EAAO,CACV,OAAOoM,EAAO,WAAW,0BAA2BC,EAAO,OAAO,aAAc,CAC5E,OAAQ,cACR,OAAAhO,EAAQ,MAAA2B,CAC5B,CAAiB,CACjB,CACA,CAAS,CACT,CACI,WAAW8gB,EAAepO,EAAU,CAChC,OAAO1F,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAM,KAAK,WAAY,EACvB,MAAM+T,EAAS,MAAM7O,GAAkB,CACnC,QAAS,KAAK,YAAY4O,CAAa,EACvC,SAAU,KAAK,aAAapO,CAAQ,CACpD,CAAa,EACKrU,EAAS,MAAM,KAAK,QAAQ,aAAc0iB,CAAM,EACtD,GAAI,CACA,OAAOlT,EAAU,KAAKxP,CAAM,CAC5C,OACmB2B,EAAO,CACV,OAAOoM,EAAO,WAAW,0BAA2BC,EAAO,OAAO,aAAc,CAC5E,OAAQ,aACR,OAAA0U,EAAQ,OAAA1iB,EAAQ,MAAA2B,CACpC,CAAiB,CACjB,CACA,CAAS,CACT,CACI,oBAAoB8gB,EAAepO,EAAU,CACzC,OAAO1F,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAM,KAAK,WAAY,EACvB,MAAM+T,EAAS,MAAM7O,GAAkB,CACnC,QAAS,KAAK,YAAY4O,CAAa,EACvC,SAAU,KAAK,aAAapO,CAAQ,CACpD,CAAa,EACKrU,EAAS,MAAM,KAAK,QAAQ,sBAAuB0iB,CAAM,EAC/D,GAAI,CACA,OAAOlT,EAAU,KAAKxP,CAAM,EAAE,SAAU,CACxD,OACmB2B,EAAO,CACV,OAAOoM,EAAO,WAAW,0BAA2BC,EAAO,OAAO,aAAc,CAC5E,OAAQ,sBACR,OAAA0U,EAAQ,OAAA1iB,EAAQ,MAAA2B,CACpC,CAAiB,CACjB,CACA,CAAS,CACT,CACI,QAAQ8gB,EAAepO,EAAU,CAC7B,OAAO1F,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAM,KAAK,WAAY,EACvB,MAAM+T,EAAS,MAAM7O,GAAkB,CACnC,QAAS,KAAK,YAAY4O,CAAa,EACvC,SAAU,KAAK,aAAapO,CAAQ,CACpD,CAAa,EACKrU,EAAS,MAAM,KAAK,QAAQ,UAAW0iB,CAAM,EACnD,GAAI,CACA,OAAOjU,GAAQzO,CAAM,CACrC,OACmB2B,EAAO,CACV,OAAOoM,EAAO,WAAW,0BAA2BC,EAAO,OAAO,aAAc,CAC5E,OAAQ,UACR,OAAA0U,EAAQ,OAAA1iB,EAAQ,MAAA2B,CACpC,CAAiB,CACjB,CACA,CAAS,CACT,CACI,aAAa8gB,EAAeE,EAAUtO,EAAU,CAC5C,OAAO1F,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAM,KAAK,WAAY,EACvB,MAAM+T,EAAS,MAAM7O,GAAkB,CACnC,QAAS,KAAK,YAAY4O,CAAa,EACvC,SAAU,KAAK,aAAapO,CAAQ,EACpC,SAAU,QAAQ,QAAQsO,CAAQ,EAAE,KAAMC,GAAM1G,GAAS0G,CAAC,CAAC,CAC3E,CAAa,EACK5iB,EAAS,MAAM,KAAK,QAAQ,eAAgB0iB,CAAM,EACxD,GAAI,CACA,OAAOjU,GAAQzO,CAAM,CACrC,OACmB2B,EAAO,CACV,OAAOoM,EAAO,WAAW,0BAA2BC,EAAO,OAAO,aAAc,CAC5E,OAAQ,eACR,OAAA0U,EAAQ,OAAA1iB,EAAQ,MAAA2B,CACpC,CAAiB,CACjB,CACA,CAAS,CACT,CAEI,iBAAiB4S,EAAImB,EAAMmN,EAAY,CACnC,GAAInN,GAAQ,MAAQyG,GAAczG,CAAI,IAAM,GACxC,MAAM,IAAI,MAAM,oCAAoC,EAExD,MAAM1V,EAASuU,EAEf,OAAImB,GAAQ,MAAQnB,EAAG,OAASmB,GAC5B3H,EAAO,WAAW,2DAA4DC,EAAO,OAAO,cAAe,CAAE,aAAcuG,EAAG,KAAM,aAAcmB,CAAI,CAAE,EAE5J1V,EAAO,KAAO,CAAC8iB,EAAUliB,IAAY+N,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAC1EmU,GAAY,OACZA,EAAW,GAEXliB,GAAW,OACXA,EAAU,GAGd,IAAImiB,EACAD,IAAa,GAAKD,GAAc,OAChCE,EAAc,CACV,KAAMxO,EAAG,KACT,KAAMA,EAAG,KACT,MAAOA,EAAG,MACV,GAAIA,EAAG,GACP,MAAOA,EAAG,MACV,WAAAsO,CACH,GAEL,MAAMvB,EAAU,MAAM,KAAK,oBAAoB/M,EAAG,KAAMuO,EAAUliB,EAASmiB,CAAW,EACtF,OAAIzB,GAAW,MAAQwB,IAAa,EACzB,MAGX,KAAK,SAAS,KAAOvO,EAAG,IAAI,EAAI+M,EAAQ,YACpCA,EAAQ,SAAW,GACnBvT,EAAO,WAAW,qBAAsBC,EAAO,OAAO,eAAgB,CAClE,gBAAiBuG,EAAG,KACpB,YAAaA,EACb,QAAS+M,CAC7B,CAAiB,EAEEA,EACnB,CAAS,EACMthB,CACf,CACI,gBAAgBgjB,EAAmB,CAC/B,OAAOrU,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAM,KAAK,WAAY,EACvB,MAAMsU,EAAQ,MAAM,QAAQ,QAAQD,CAAiB,EAAE,KAAKxR,GAAK/C,GAAQ+C,CAAC,CAAC,EACrE+C,EAAK,KAAK,UAAU,YAAYyO,CAAiB,EACnDzO,EAAG,eAAiB,OACpBA,EAAG,cAAgB,GAEvB,MAAMwM,EAAc,MAAM,KAAK,wBAAwB,IAAM,EAAI,KAAK,eAAe,EACrF,GAAI,CACA,MAAMrL,EAAO,MAAM,KAAK,QAAQ,kBAAmB,CAAE,kBAAmBuN,EAAO,EAC/E,OAAO,KAAK,iBAAiB1O,EAAImB,EAAMqL,CAAW,CAClE,OACmBpf,EAAO,CACV,MAAAA,EAAM,YAAc4S,EACpB5S,EAAM,gBAAkB4S,EAAG,KACrB5S,CACtB,CACA,CAAS,CACT,CACI,uBAAuB2S,EAAa,CAChC,OAAO3F,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAMuD,EAAS,MAAMoC,EACfC,EAAK,CAAE,EACb,OAAC,OAAQ,IAAI,EAAE,QAASnU,GAAQ,CACxB8R,EAAO9R,CAAG,GAAK,OAGnBmU,EAAGnU,CAAG,EAAI,QAAQ,QAAQ8R,EAAO9R,CAAG,CAAC,EAAE,KAAM2J,GAAOA,EAAI,KAAK,YAAYA,CAAC,EAAI,IAAK,EACnG,CAAa,EACD,CAAC,WAAY,WAAY,eAAgB,uBAAwB,OAAO,EAAE,QAAS3J,GAAQ,CACnF8R,EAAO9R,CAAG,GAAK,OAGnBmU,EAAGnU,CAAG,EAAI,QAAQ,QAAQ8R,EAAO9R,CAAG,CAAC,EAAE,KAAM2J,GAAOA,EAAIyF,EAAU,KAAKzF,CAAC,EAAI,IAAK,EACjG,CAAa,EACD,CAAC,MAAM,EAAE,QAAS3J,GAAQ,CAClB8R,EAAO9R,CAAG,GAAK,OAGnBmU,EAAGnU,CAAG,EAAI,QAAQ,QAAQ8R,EAAO9R,CAAG,CAAC,EAAE,KAAM2J,GAAQA,GAAiB,IAAK,EAC3F,CAAa,EACGmI,EAAO,aACPqC,EAAG,WAAa,KAAK,UAAU,WAAWrC,EAAO,UAAU,GAE/D,CAAC,MAAM,EAAE,QAAS9R,GAAQ,CAClB8R,EAAO9R,CAAG,GAAK,OAGnBmU,EAAGnU,CAAG,EAAI,QAAQ,QAAQ8R,EAAO9R,CAAG,CAAC,EAAE,KAAM2J,GAAOA,EAAI0E,GAAQ1E,CAAC,EAAI,IAAK,EAC1F,CAAa,EACM,KAAK,UAAU,mBAAmB,MAAM8J,GAAkBU,CAAE,CAAC,CAChF,CAAS,CACT,CACI,WAAW+I,EAAQ,CACf,OAAO3O,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD2O,EAAS,MAAMA,EACf,MAAMtd,EAAS,CAAE,EACjB,OAAIsd,EAAO,SAAW,OAClBtd,EAAO,QAAU,KAAK,YAAYsd,EAAO,OAAO,GAEpD,CAAC,YAAa,QAAQ,EAAE,QAASld,GAAQ,CACjCkd,EAAOld,CAAG,GAAK,OAGnBJ,EAAOI,CAAG,EAAIkd,EAAOld,CAAG,EACxC,CAAa,EACD,CAAC,YAAa,SAAS,EAAE,QAASA,GAAQ,CAClCkd,EAAOld,CAAG,GAAK,OAGnBJ,EAAOI,CAAG,EAAI,KAAK,aAAakd,EAAOld,CAAG,CAAC,EAC3D,CAAa,EACM,KAAK,UAAU,OAAO,MAAMyT,GAAkB7T,CAAM,CAAC,CACxE,CAAS,CACT,CACI,MAAMsU,EAAaD,EAAUuE,EAAS,CAClC,OAAOjK,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAC5CiK,GAAW8D,IACX3O,EAAO,WAAW,0CAA2CC,EAAO,OAAO,aAAc,CACrF,UAAW4K,EAAS,YAAAtE,CACxC,CAAiB,EAEL,MAAM4O,EAAW5O,EAAY,GACvBtU,EAAS,MAAM,KAAK,QAAQ,OAAQ,CAAE,YAAAsU,EAAa,SAAAD,EAAU,EAEnE,GAAIuE,GAAW,GAAKvE,IAAa,UAAY6O,GAAY,MAAQljB,EAAO,UAAU,EAAG,EAAE,IAAM,cAAiBmc,GAAcnc,CAAM,EAAI,KAAO,EACzI,GAAI,CACA,MAAMuB,EAAOya,GAAahc,EAAQ,CAAC,EAE7BwgB,EAASxE,GAAaza,EAAM,EAAG,EAAE,EAClCiO,EAAU,KAAKgR,CAAM,EAAE,GAAG0C,CAAQ,GACnCnV,EAAO,WAAW,iCAAkCC,EAAO,OAAO,eAAgB,CAC9E,KAAM,iBACN,UAAW,sDACX,YAAAsG,EAAa,KAAMtU,CAC/C,CAAyB,EAGL,MAAMugB,EAAO,CAAE,EACT4C,EAAa3T,EAAU,KAAKwM,GAAaza,EAAM,GAAI,EAAE,CAAC,EAAE,SAAU,EAClE6hB,EAAa5T,EAAU,KAAKwM,GAAaza,EAAM4hB,EAAYA,EAAa,EAAE,CAAC,EAAE,SAAU,EACvFE,EAAWrH,GAAaza,EAAM4hB,EAAa,EAAE,EACnD,QAASG,EAAI,EAAGA,EAAIF,EAAYE,IAAK,CACjC,MAAMnN,EAAMyH,GAAayF,EAAUC,EAAI,EAAE,EACrCnN,GAAO,MACPpI,EAAO,WAAW,yCAA0CC,EAAO,OAAO,eAAgB,CACtF,KAAM,iBACN,UAAW,sDACX,YAAAsG,EAAa,KAAMtU,CACnD,CAA6B,EAELugB,EAAK,KAAKpK,CAAG,CACrC,CAEoB,MAAMmK,EAAWzC,GAAYtc,EAAM,EAAE,EAEhCiO,EAAU,KAAKwM,GAAaza,EAAM,IAAK,GAAG,CAAC,EAAE,UAC9CwM,EAAO,WAAW,4CAA6CC,EAAO,OAAO,eAAgB,CACzF,KAAM,iBACN,UAAW,sDACX,YAAAsG,EAAa,KAAMtU,CAC/C,CAAyB,EAEL,MAAMujB,EAAmBvH,GAAaza,EAAM,GAAI,GAAG,EAE7CiiB,EAAY3F,GAAYtc,EAAM,GAAG,EACjCkiB,EAAa,MAAM,KAAK,cAAcnP,EAAagM,EAAUC,CAAI,EACnEkD,GAAc,MACd1V,EAAO,WAAW,yCAA0CC,EAAO,OAAO,eAAgB,CACtF,KAAM,iBACN,UAAW,sDACX,YAAAsG,EAAa,KAAMtU,CAC/C,CAAyB,EAEL,MAAMuU,EAAK,CACP,GAAI2O,EACJ,KAAMpT,GAAU,CAACyT,EAAkBpF,GAAY,CAACsF,EAAYD,CAAS,CAAC,CAAC,CAAC,CAC3E,EACD,OAAO,KAAK,MAAMjP,EAAIF,EAAUuE,EAAU,CAAC,CAC/D,OACuBjX,EAAO,CACV,GAAIA,EAAM,OAASqM,EAAO,OAAO,aAC7B,MAAMrM,CAE9B,CAEY,GAAI,CACA,OAAO8M,GAAQzO,CAAM,CACrC,OACmB2B,EAAO,CACV,OAAOoM,EAAO,WAAW,0BAA2BC,EAAO,OAAO,aAAc,CAC5E,OAAQ,OACR,OAAQ,CAAE,YAAAsG,EAAa,SAAAD,CAAQ,EAAI,OAAArU,EAAQ,MAAA2B,CAC/D,CAAiB,CACjB,CACA,CAAS,CACT,CACI,KAAK2S,EAAaD,EAAU,CACxB,OAAO1F,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAM,KAAK,WAAY,EACvB,MAAM+U,EAAW,MAAM7P,GAAkB,CACrC,YAAa,KAAK,uBAAuBS,CAAW,EACpD,SAAU,KAAK,aAAaD,CAAQ,EACpC,gBAAiB,QAAQ,QAAQC,EAAY,eAAe,CAC5E,CAAa,EACD,OAAO,KAAK,MAAMoP,EAAS,YAAaA,EAAS,SAAUA,EAAS,gBAAkB,EAAI,EAAE,CACxG,CAAS,CACT,CACI,YAAYpP,EAAa,CACrB,OAAO3F,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAM,KAAK,WAAY,EACvB,MAAM+T,EAAS,MAAM7O,GAAkB,CACnC,YAAa,KAAK,uBAAuBS,CAAW,CACpE,CAAa,EACKtU,EAAS,MAAM,KAAK,QAAQ,cAAe0iB,CAAM,EACvD,GAAI,CACA,OAAOlT,EAAU,KAAKxP,CAAM,CAC5C,OACmB2B,EAAO,CACV,OAAOoM,EAAO,WAAW,0BAA2BC,EAAO,OAAO,aAAc,CAC5E,OAAQ,cACR,OAAA0U,EAAQ,OAAA1iB,EAAQ,MAAA2B,CACpC,CAAiB,CACjB,CACA,CAAS,CACT,CACI,YAAY8gB,EAAe,CACvB,OAAO9T,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD8T,EAAgB,MAAMA,EAClB,OAAQA,GAAmB,UAC3B1U,EAAO,mBAAmB,8BAA+B,OAAQ0U,CAAa,EAElF,MAAM/N,EAAU,MAAM,KAAK,YAAY+N,CAAa,EACpD,OAAI/N,GAAW,MACX3G,EAAO,WAAW,0BAA2BC,EAAO,OAAO,sBAAuB,CAC9E,UAAW,eAAe,KAAK,UAAUyU,CAAa,CAAC,GAC3E,CAAiB,EAEE/N,CACnB,CAAS,CACT,CACI,UAAUiP,EAAqBC,EAAqB,CAChD,OAAOjV,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAM,KAAK,WAAY,EACvBgV,EAAsB,MAAMA,EAE5B,IAAI5C,EAAc,KAClB,MAAM2B,EAAS,CACX,oBAAqB,CAAC,CAACkB,CAC1B,EACD,GAAIlR,GAAYiR,EAAqB,EAAE,EACnCjB,EAAO,UAAYiB,MAGnB,IAAI,CACAjB,EAAO,SAAW,MAAM,KAAK,aAAaiB,CAAmB,EACzDjR,GAAYgQ,EAAO,QAAQ,IAC3B3B,EAAc,SAAS2B,EAAO,SAAS,UAAU,CAAC,EAAG,EAAE,EAE/E,MAC8B,CACV3U,EAAO,mBAAmB,kCAAmC,sBAAuB4V,CAAmB,CAC3H,CAEY,OAAOtK,GAAK,IAAM1K,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAC3D,MAAMgF,EAAQ,MAAM,KAAK,QAAQ,WAAY+O,CAAM,EAEnD,GAAI/O,GAAS,KAUT,OANI+O,EAAO,WAAa,MAChB,KAAK,SAAS,KAAOA,EAAO,SAAS,GAAK,MAK9CA,EAAO,UAAY,MACf3B,EAAc,KAAK,SAAS,MACrB,KAIf,OAGJ,GAAI6C,EAAqB,CACrB,IAAI7C,EAAc,KAClB,QAASxZ,EAAI,EAAGA,EAAIoM,EAAM,aAAa,OAAQpM,IAAK,CAChD,MAAMgN,EAAKZ,EAAM,aAAapM,CAAC,EAC/B,GAAIgN,EAAG,aAAe,KAClBA,EAAG,cAAgB,UAEdA,EAAG,eAAiB,KAAM,CAC3BwM,GAAe,OACfA,EAAc,MAAM,KAAK,wBAAwB,IAAM,EAAI,KAAK,eAAe,GAGnF,IAAIc,EAAiBd,EAAcxM,EAAG,YAAe,EACjDsN,GAAiB,IACjBA,EAAgB,GAEpBtN,EAAG,cAAgBsN,CAC/C,CACA,CACoB,MAAMgC,EAAe,KAAK,UAAU,sBAAsBlQ,CAAK,EAC/D,OAAAkQ,EAAa,aAAeA,EAAa,aAAa,IAAKtP,GAAO,KAAK,iBAAiBA,CAAE,CAAC,EACpFsP,CAC3B,CACgB,OAAO,KAAK,UAAU,MAAMlQ,CAAK,CACjD,CAAa,EAAG,CAAE,SAAU,KAAM,CAClC,CAAS,CACT,CACI,SAASgQ,EAAqB,CAC1B,OAAQ,KAAK,UAAUA,EAAqB,EAAK,CACzD,CACI,yBAAyBA,EAAqB,CAC1C,OAAQ,KAAK,UAAUA,EAAqB,EAAI,CACxD,CACI,eAAe/B,EAAiB,CAC5B,OAAOjT,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAM,KAAK,WAAY,EACvBiT,EAAkB,MAAMA,EACxB,MAAMc,EAAS,CAAE,gBAAiB,KAAK,UAAU,KAAKd,EAAiB,EAAI,CAAG,EAC9E,OAAOvI,GAAK,IAAM1K,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAC3D,MAAM3O,EAAS,MAAM,KAAK,QAAQ,iBAAkB0iB,CAAM,EAC1D,GAAI1iB,GAAU,KACV,OAAI,KAAK,SAAS,KAAO4hB,CAAe,GAAK,KAClC,KAEX,OAEJ,MAAMrN,EAAK,KAAK,UAAU,oBAAoBvU,CAAM,EACpD,GAAIuU,EAAG,aAAe,KAClBA,EAAG,cAAgB,UAEdA,EAAG,eAAiB,KAAM,CAG/B,IAAIsN,GAFgB,MAAM,KAAK,wBAAwB,IAAM,EAAI,KAAK,eAAe,GAElDtN,EAAG,YAAe,EACjDsN,GAAiB,IACjBA,EAAgB,GAEpBtN,EAAG,cAAgBsN,CACvC,CACgB,OAAO,KAAK,iBAAiBtN,CAAE,CAC/C,CAAa,EAAG,CAAE,SAAU,KAAM,CAClC,CAAS,CACT,CACI,sBAAsBqN,EAAiB,CACnC,OAAOjT,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAM,KAAK,WAAY,EACvBiT,EAAkB,MAAMA,EACxB,MAAMc,EAAS,CAAE,gBAAiB,KAAK,UAAU,KAAKd,EAAiB,EAAI,CAAG,EAC9E,OAAOvI,GAAK,IAAM1K,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAC3D,MAAM3O,EAAS,MAAM,KAAK,QAAQ,wBAAyB0iB,CAAM,EACjE,GAAI1iB,GAAU,KACV,OAAI,KAAK,SAAS,KAAO4hB,CAAe,GAAK,KAClC,KAEX,OAGJ,GAAI5hB,EAAO,WAAa,KACpB,OAEJ,MAAMshB,EAAU,KAAK,UAAU,QAAQthB,CAAM,EAC7C,GAAIshB,EAAQ,aAAe,KACvBA,EAAQ,cAAgB,UAEnBA,EAAQ,eAAiB,KAAM,CAGpC,IAAIO,GAFgB,MAAM,KAAK,wBAAwB,IAAM,EAAI,KAAK,eAAe,GAElDP,EAAQ,YAAe,EACtDO,GAAiB,IACjBA,EAAgB,GAEpBP,EAAQ,cAAgBO,CAC5C,CACgB,OAAOP,CACvB,CAAa,EAAG,CAAE,SAAU,KAAM,CAClC,CAAS,CACT,CACI,QAAQhE,EAAQ,CACZ,OAAO3O,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAM,KAAK,WAAY,EACvB,MAAM+T,EAAS,MAAM7O,GAAkB,CAAE,OAAQ,KAAK,WAAWyJ,CAAM,EAAG,EACpEkE,EAAO,MAAM,KAAK,QAAQ,UAAWkB,CAAM,EACjD,OAAAlB,EAAK,QAASC,GAAQ,CACdA,EAAI,SAAW,OACfA,EAAI,QAAU,GAElC,CAAa,EACMlG,EAAU,QAAQ,KAAK,UAAU,UAAU,KAAK,KAAK,SAAS,CAAC,EAAEiG,CAAI,CACxF,CAAS,CACT,CACI,eAAgB,CACZ,OAAO7S,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,aAAM,KAAK,WAAY,EAChB,KAAK,QAAQ,gBAAiB,EAAE,CACnD,CAAS,CACT,CACI,aAAa0F,EAAU,CACnB,OAAO1F,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAEhD,GADA0F,EAAW,MAAMA,EACb,OAAQA,GAAc,UAAYA,EAAW,EAAG,CAC5CA,EAAW,GACXtG,EAAO,mBAAmB,mBAAoB,WAAYsG,CAAQ,EAEtE,IAAI0M,EAAc,MAAM,KAAK,wBAAwB,IAAM,EAAI,KAAK,eAAe,EACnF,OAAAA,GAAe1M,EACX0M,EAAc,IACdA,EAAc,GAEX,KAAK,UAAU,SAASA,CAAW,CAC1D,CACY,OAAO,KAAK,UAAU,SAAS1M,CAAQ,CACnD,CAAS,CACT,CACI,YAAYxH,EAAM,CACd,OAAO8B,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,IAAImV,EAAcjX,EAClB,OAAa,CAMT,GALIiX,IAAgB,IAAMA,IAAgB,KAKtCjX,IAAS,OAASiX,IAAgB,MAClC,OAAO,KAGX,MAAM1E,EAAO,MAAM,KAAK,aAAa0E,EAAa,aAAa,EAE/D,GAAI1E,GAAQ,KAAM,CACd,MAAM2E,EAAW,IAAIzF,GAAS,KAAMc,EAAMvS,CAAI,EAE9C,OAAIiX,IAAgBjX,GAAQ,EAAE,MAAMkX,EAAS,iBAAkB,GACpD,KAEJA,CAC3B,CAEgBD,EAAcA,EAAY,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG,CACtE,CACA,CAAS,CACT,CACI,aAAajX,EAAMiI,EAAW,CAC1B,OAAOnG,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAC5CmG,GAAa,OACbA,EAAY,OAEhB,MAAM3B,EAAU,MAAM,KAAK,WAAY,EAElCA,EAAQ,YACTpF,EAAO,WAAW,+BAAgCC,EAAO,OAAO,sBAAuB,CAAE,UAAA8G,EAAW,QAAS3B,EAAQ,IAAI,CAAE,EAE/H,GAAI,CAEA,MAAM6Q,EAAW,MAAM,KAAK,KAAK,CAC7B,GAAI7Q,EAAQ,WACZ,KAAO,aAAe5E,GAAS1B,CAAI,EAAE,UAAU,CAAC,CACpE,CAAiB,EACD,OAAO,KAAK,UAAU,YAAYmX,CAAQ,CAC1D,MAC0B,CAE1B,CACY,OAAO,IACnB,CAAS,CACT,CACI,YAAYnX,EAAM,CACd,OAAO8B,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD9B,EAAO,MAAMA,EAEb,GAAI,CACA,OAAO,QAAQ,QAAQ,KAAK,UAAU,QAAQA,CAAI,CAAC,CACnE,OACmBlL,EAAO,CAEV,GAAI+Q,GAAY7F,CAAI,EAChB,MAAMlL,CAE1B,CACgB,OAAQkL,GAAU,UAClBkB,EAAO,mBAAmB,mBAAoB,OAAQlB,CAAI,EAG9D,MAAMkX,EAAW,MAAM,KAAK,YAAYlX,CAAI,EAC5C,OAAKkX,EAGE,MAAMA,EAAS,WAAY,EAFvB,IAGvB,CAAS,CACT,CACI,cAAcrP,EAAS,CACnB,OAAO/F,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD+F,EAAU,MAAMA,EAChBA,EAAU,KAAK,UAAU,QAAQA,CAAO,EACxC,MAAM3b,EAAO2b,EAAQ,UAAU,CAAC,EAAE,YAAW,EAAK,gBAC5CuP,EAAe,MAAM,KAAK,aAAalrB,EAAM,eAAe,EAClE,GAAIkrB,GAAgB,KAChB,OAAO,KAGX,MAAMpX,EAAO+Q,GAAa,MAAM,KAAK,KAAK,CACtC,GAAIqG,EACJ,KAAO,aAAe1V,GAASxV,CAAI,EAAE,UAAU,CAAC,CACnD,CAAA,EAAG,CAAC,EAEL,OADa,MAAM,KAAK,YAAY8T,CAAI,IAC5B6H,EACD,KAEJ7H,CACnB,CAAS,CACT,CACI,UAAUqX,EAAe,CACrB,OAAOvV,EAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,IAAIoV,EAAW,KACf,GAAIrR,GAAYwR,CAAa,EAAG,CAG5B,MAAMnrB,EADU,KAAK,UAAU,QAAQmrB,CAAa,EAC/B,UAAU,CAAC,EAAE,YAAW,EAAK,gBAC5CC,EAAkB,MAAM,KAAK,aAAaprB,EAAM,WAAW,EACjE,GAAI,CAACorB,EACD,OAAO,KAGXJ,EAAW,IAAIzF,GAAS,KAAM6F,EAAiBprB,CAAI,EACnD,GAAI,CACA,MAAMkmB,EAAS,MAAM8E,EAAS,UAAW,EACzC,GAAI9E,EACA,OAAOA,EAAO,GAEtC,OACuBtd,EAAO,CACV,GAAIA,EAAM,OAASqM,EAAO,OAAO,eAC7B,MAAMrM,CAE9B,CAEgB,GAAI,CAEA,MAAMkL,EAAO+Q,GAAa,MAAM,KAAK,KAAK,CACtC,GAAIuG,EACJ,KAAO,aAAe5V,GAASxV,CAAI,EAAE,UAAU,CAAC,CACnD,CAAA,EAAG,CAAC,EACLgrB,EAAW,MAAM,KAAK,YAAYlX,CAAI,CAC1D,OACuBlL,EAAO,CACV,GAAIA,EAAM,OAASqM,EAAO,OAAO,eAC7B,MAAMrM,EAEV,OAAO,IAC3B,CACA,SAGgBoiB,EAAW,MAAM,KAAK,YAAYG,CAAa,EAC3C,CAACH,EACD,OAAO,KAGf,MAAM9E,EAAS,MAAM8E,EAAS,UAAW,EACzC,OAAI9E,GAAU,KACH,KAEJA,EAAO,GAC1B,CAAS,CACT,CACI,QAAQmF,EAAQ1B,EAAQ,CACpB,OAAO3U,EAAO,WAAWqW,EAAS,mBAAoBpW,EAAO,OAAO,gBAAiB,CAAE,UAAWoW,EAAQ,CAClH,CACI,YAAY1d,EAAO,CACf,KAAK,QAAW,KAAK,QAAQ,OAAQ2I,GAAMA,EAAE,SAAQ,CAAE,EAAE,OAAS,CAC1E,CACI,WAAW3I,EAAO,CACd,KAAK,QAAW,KAAK,QAAQ,OAAQ2I,GAAMA,EAAE,SAAQ,CAAE,EAAE,OAAS,CAC1E,CACI,kBAAkB4E,EAAW5Q,EAAUga,EAAM,CACzC,MAAM3W,EAAQ,IAAI0W,GAAMH,GAAYhJ,CAAS,EAAG5Q,EAAUga,CAAI,EAC9D,YAAK,QAAQ,KAAK3W,CAAK,EACvB,KAAK,YAAYA,CAAK,EACf,IACf,CACI,GAAGuN,EAAW5Q,EAAU,CACpB,OAAO,KAAK,kBAAkB4Q,EAAW5Q,EAAU,EAAK,CAChE,CACI,KAAK4Q,EAAW5Q,EAAU,CACtB,OAAO,KAAK,kBAAkB4Q,EAAW5Q,EAAU,EAAI,CAC/D,CACI,KAAK4Q,KAAcoQ,EAAM,CACrB,IAAIrkB,EAAS,GACTskB,EAAU,CAAE,EACZC,EAAWtH,GAAYhJ,CAAS,EACpC,YAAK,QAAU,KAAK,QAAQ,OAAQvN,GAC5BA,EAAM,MAAQ6d,EACP,IAEX,WAAW,IAAM,CACb7d,EAAM,SAAS,MAAM,KAAM2d,CAAI,CAClC,EAAE,CAAC,EACJrkB,EAAS,GACL0G,EAAM,MACN4d,EAAQ,KAAK5d,CAAK,EACX,IAEJ,GACV,EACD4d,EAAQ,QAAS5d,GAAU,CAAE,KAAK,WAAWA,CAAK,EAAI,EAC/C1G,CACf,CACI,cAAciU,EAAW,CACrB,GAAI,CAACA,EACD,OAAO,KAAK,QAAQ,OAExB,IAAIsQ,EAAWtH,GAAYhJ,CAAS,EACpC,OAAO,KAAK,QAAQ,OAAQvN,GAChBA,EAAM,MAAQ6d,CACzB,EAAE,MACX,CACI,UAAUtQ,EAAW,CACjB,GAAIA,GAAa,KACb,OAAO,KAAK,QAAQ,IAAKvN,GAAUA,EAAM,QAAQ,EAErD,IAAI6d,EAAWtH,GAAYhJ,CAAS,EACpC,OAAO,KAAK,QACP,OAAQvN,GAAWA,EAAM,MAAQ6d,CAAS,EAC1C,IAAK7d,GAAUA,EAAM,QAAQ,CAC1C,CACI,IAAIuN,EAAW5Q,EAAU,CACrB,GAAIA,GAAY,KACZ,OAAO,KAAK,mBAAmB4Q,CAAS,EAE5C,MAAMqQ,EAAU,CAAE,EAClB,IAAI5S,EAAQ,GACR6S,EAAWtH,GAAYhJ,CAAS,EACpC,YAAK,QAAU,KAAK,QAAQ,OAAQvN,GAC5BA,EAAM,MAAQ6d,GAAY7d,EAAM,UAAYrD,GAG5CqO,EACO,IAEXA,EAAQ,GACR4S,EAAQ,KAAK5d,CAAK,EACX,GACV,EACD4d,EAAQ,QAAS5d,GAAU,CAAE,KAAK,WAAWA,CAAK,EAAI,EAC/C,IACf,CACI,mBAAmBuN,EAAW,CAC1B,IAAIqQ,EAAU,CAAE,EAChB,GAAIrQ,GAAa,KACbqQ,EAAU,KAAK,QACf,KAAK,QAAU,CAAE,MAEhB,CACD,MAAMC,EAAWtH,GAAYhJ,CAAS,EACtC,KAAK,QAAU,KAAK,QAAQ,OAAQvN,GAC5BA,EAAM,MAAQ6d,EACP,IAEXD,EAAQ,KAAK5d,CAAK,EACX,GACV,CACb,CACQ,OAAA4d,EAAQ,QAAS5d,GAAU,CAAE,KAAK,WAAWA,CAAK,EAAI,EAC/C,IACf,CACA,CCp9DA,IAAIiI,GAAwC,SAAUC,EAASC,EAAYC,EAAGC,EAAW,CACrF,SAASC,EAAMjV,EAAO,CAAE,OAAOA,aAAiB+U,EAAI/U,EAAQ,IAAI+U,EAAE,SAAUG,EAAS,CAAEA,EAAQlV,CAAK,CAAI,CAAA,CAAE,CAC1G,OAAO,IAAK+U,IAAMA,EAAI,UAAU,SAAUG,EAASC,EAAQ,CACvD,SAASC,EAAUpV,EAAO,CAAE,GAAI,CAAEqV,EAAKL,EAAU,KAAKhV,CAAK,CAAC,CAAI,OAAQsV,EAAG,CAAEH,EAAOG,CAAC,CAAI,CAAA,CACzF,SAASC,EAASvV,EAAO,CAAE,GAAI,CAAEqV,EAAKL,EAAU,MAAShV,CAAK,CAAC,CAAI,OAAQsV,EAAG,CAAEH,EAAOG,CAAC,CAAI,CAAA,CAC5F,SAASD,EAAKpP,EAAQ,CAAEA,EAAO,KAAOiP,EAAQjP,EAAO,KAAK,EAAIgP,EAAMhP,EAAO,KAAK,EAAE,KAAKmP,EAAWG,CAAQ,CAAE,CAC5GF,GAAML,EAAYA,EAAU,MAAMH,EAASC,GAAc,CAAA,CAAE,GAAG,MAAM,CAC5E,CAAK,CACL,EAWA,MAAMd,GAAS,IAAIC,EAAO5G,EAAO,EAE3Bod,GAAW,CAAC,OAAQ,aAAa,EACvC,SAASC,GAAQ1qB,EAAO2qB,EAAa,CACjC,GAAI3qB,GAAS,KACT,OAAO,KAGX,GAAI,OAAQA,EAAM,SAAa,UAAYA,EAAM,QAAQ,MAAM,UAAU,EAAG,CACxE,MAAMwH,EAAOmR,GAAY3Y,EAAM,IAAI,EAAIA,EAAM,KAAO,KACpD,GAAI,CAAC2qB,GAAenjB,EAChB,MAAO,CAAE,QAASxH,EAAM,QAAS,KAAAwH,CAAM,CAEnD,CAEI,GAAI,OAAQxH,GAAW,SAAU,CAC7B,UAAWqG,KAAOrG,EAAO,CACrB,MAAMiG,EAASykB,GAAQ1qB,EAAMqG,CAAG,EAAGskB,CAAW,EAC9C,GAAI1kB,EACA,OAAOA,CAEvB,CACQ,OAAO,IACf,CAEI,GAAI,OAAQjG,GAAW,SACnB,GAAI,CACA,OAAO0qB,GAAQ,KAAK,MAAM1qB,CAAK,EAAG2qB,CAAW,CACzD,MACsB,CAAA,CAElB,OAAO,IACX,CACA,SAASC,GAAWP,EAAQziB,EAAO+gB,EAAQ,CACvC,MAAMpO,EAAcoO,EAAO,aAAeA,EAAO,kBAGjD,GAAI0B,IAAW,OAAQ,CACnB,MAAMpkB,EAASykB,GAAQ9iB,EAAO,EAAI,EAClC,GAAI3B,EACA,OAAOA,EAAO,KAGlB+N,GAAO,WAAW,sFAAuFC,EAAO,OAAO,eAAgB,CACnI,KAAM,KAAM,YAAAsG,EAAa,MAAA3S,CACrC,CAAS,CACT,CACI,GAAIyiB,IAAW,cAAe,CAE1B,IAAIpkB,EAASykB,GAAQ9iB,EAAM,KAAM,EAAK,EAClC3B,GAAU,OACVA,EAASykB,GAAQ9iB,EAAO,EAAK,GAG7B3B,GACA+N,GAAO,WAAW,4EAA6EC,EAAO,OAAO,wBAAyB,CAClI,OAAQhO,EAAO,QAAS,OAAAokB,EAAQ,YAAA9P,EAAa,MAAA3S,CAC7D,CAAa,CAEb,CAEI,IAAIijB,EAAUjjB,EAAM,QACpB,MAAIA,EAAM,OAASqM,EAAO,OAAO,cAAgBrM,EAAM,OAAS,OAAQA,EAAM,MAAM,SAAa,SAC7FijB,EAAUjjB,EAAM,MAAM,QAEjB,OAAQA,EAAM,MAAU,SAC7BijB,EAAUjjB,EAAM,KAEX,OAAQA,EAAM,cAAkB,WACrCijB,EAAUjjB,EAAM,cAEpBijB,GAAWA,GAAW,IAAI,YAAa,EAEnCA,EAAQ,MAAM,kEAAkE,GAChF7W,GAAO,WAAW,oDAAqDC,EAAO,OAAO,mBAAoB,CACrG,MAAArM,EAAO,OAAAyiB,EAAQ,YAAA9P,CAC3B,CAAS,EAGDsQ,EAAQ,MAAM,sBAAsB,GACpC7W,GAAO,WAAW,8BAA+BC,EAAO,OAAO,cAAe,CAC1E,MAAArM,EAAO,OAAAyiB,EAAQ,YAAA9P,CAC3B,CAAS,EAGDsQ,EAAQ,MAAM,qEAAqE,GACnF7W,GAAO,WAAW,0BAA2BC,EAAO,OAAO,wBAAyB,CAChF,MAAArM,EAAO,OAAAyiB,EAAQ,YAAA9P,CAC3B,CAAS,EAGDsQ,EAAQ,MAAM,wBAAwB,GACtC7W,GAAO,WAAW,gDAAiDC,EAAO,OAAO,sBAAuB,CACpG,MAAArM,EAAO,OAAAyiB,EAAQ,YAAA9P,CAC3B,CAAS,EAEDkQ,GAAS,QAAQJ,CAAM,GAAK,GAAKQ,EAAQ,MAAM,qFAAqF,GACpI7W,GAAO,WAAW,4EAA6EC,EAAO,OAAO,wBAAyB,CAClI,MAAArM,EAAO,OAAAyiB,EAAQ,YAAA9P,CAC3B,CAAS,EAEC3S,CACV,CACA,SAAS+W,GAAM9X,EAAS,CACpB,OAAO,IAAI,QAAQ,SAAUqO,EAAS,CAClC,WAAWA,EAASrO,CAAO,CACnC,CAAK,CACL,CACA,SAASikB,GAAUC,EAAS,CACxB,GAAIA,EAAQ,MAAO,CAEf,MAAMnjB,EAAQ,IAAI,MAAMmjB,EAAQ,MAAM,OAAO,EAC7C,MAAAnjB,EAAM,KAAOmjB,EAAQ,MAAM,KAC3BnjB,EAAM,KAAOmjB,EAAQ,MAAM,KACrBnjB,CACd,CACI,OAAOmjB,EAAQ,MACnB,CACA,SAASC,GAAahrB,EAAO,CACzB,OAAIA,GACOA,EAAM,YAAa,CAGlC,CACA,MAAMirB,GAAoB,CAAE,EACrB,MAAMC,WAAsB7Q,EAAO,CACtC,YAAY8Q,EAAkBlP,EAAUmP,EAAgB,CAEpD,GADA,MAAO,EACHD,IAAqBF,GACrB,MAAM,IAAI,MAAM,4EAA4E,EAEhGhU,GAAe,KAAM,WAAYgF,CAAQ,EACrCmP,GAAkB,OAClBA,EAAiB,GAEjB,OAAQA,GAAoB,UAC5BnU,GAAe,KAAM,WAAY,KAAK,SAAS,UAAU,QAAQmU,CAAc,CAAC,EAChFnU,GAAe,KAAM,SAAU,IAAI,GAE9B,OAAQmU,GAAoB,UACjCnU,GAAe,KAAM,SAAUmU,CAAc,EAC7CnU,GAAe,KAAM,WAAY,IAAI,GAGrCjD,GAAO,mBAAmB,2BAA4B,iBAAkBoX,CAAc,CAElG,CACI,QAAQnP,EAAU,CACd,OAAOjI,GAAO,WAAW,0CAA2CC,EAAO,OAAO,sBAAuB,CACrG,UAAW,SACvB,CAAS,CACT,CACI,kBAAmB,CACf,OAAO,IAAIoX,GAAuBJ,GAAmB,KAAK,SAAU,KAAK,UAAY,KAAK,MAAM,CACxG,CACI,YAAa,CACT,OAAI,KAAK,SACE,QAAQ,QAAQ,KAAK,QAAQ,EAEjC,KAAK,SAAS,KAAK,eAAgB,CAAA,CAAE,EAAE,KAAMK,IAC5CA,EAAS,QAAU,KAAK,QACxBtX,GAAO,WAAW,oBAAsB,KAAK,OAAQC,EAAO,OAAO,sBAAuB,CACtF,UAAW,YAC/B,CAAiB,EAEE,KAAK,SAAS,UAAU,QAAQqX,EAAS,KAAK,MAAM,CAAC,EAC/D,CACT,CACI,yBAAyB/Q,EAAa,CAClCA,EAAc9B,GAAY8B,CAAW,EACrC,MAAMgR,EAAc,KAAK,WAAY,EAAC,KAAM5Q,IACpCA,IACAA,EAAUA,EAAQ,YAAa,GAE5BA,EACV,EAID,GAAIJ,EAAY,UAAY,KAAM,CAC9B,MAAMiR,EAAW/S,GAAY8B,CAAW,EACxCiR,EAAS,KAAOD,EAChBhR,EAAY,SAAW,KAAK,SAAS,YAAYiR,CAAQ,CACrE,CACQ,OAAIjR,EAAY,IAAM,OAClBA,EAAY,GAAK,QAAQ,QAAQA,EAAY,EAAE,EAAE,KAAMG,GAAO9F,GAAU,KAAM,OAAQ,OAAQ,WAAa,CACvG,GAAI8F,GAAM,KACN,OAAO,KAEX,MAAMC,EAAU,MAAM,KAAK,SAAS,YAAYD,CAAE,EAClD,OAAIC,GAAW,MACX3G,GAAO,mBAAmB,qCAAsC,QAAS0G,CAAE,EAExEC,CACvB,CAAa,CAAC,GAECb,GAAkB,CACrB,GAAIA,GAAkBS,CAAW,EACjC,OAAQgR,CACX,CAAA,EAAE,KAAK,CAAC,CAAE,GAAA/Q,EAAI,OAAAiM,CAAM,IAAO,CACpBjM,EAAG,MAAQ,KACPA,EAAG,KAAK,YAAW,IAAOiM,GAC1BzS,GAAO,mBAAmB,wBAAyB,cAAeuG,CAAW,EAIjFC,EAAG,KAAOiM,EAEd,MAAMyC,EAAQ,KAAK,SAAS,YAAY,mBAAmB1O,EAAI,CAAE,KAAM,GAAM,EAC7E,OAAO,KAAK,SAAS,KAAK,sBAAuB,CAAC0O,CAAK,CAAC,EAAE,KAAMvN,GACrDA,EACP/T,IACI,OAAQA,EAAM,SAAa,UAAYA,EAAM,QAAQ,MAAM,cAAc,GACzEoM,GAAO,WAAW,4BAA6BC,EAAO,OAAO,gBAAiB,CAC1E,OAAQ,kBACR,YAAauG,CACrC,CAAqB,EAEEoQ,GAAW,kBAAmBhjB,EAAOshB,CAAK,EACpD,CACb,CAAS,CACT,CACI,gBAAgB3O,EAAa,CACzB,OAAOvG,GAAO,WAAW,sCAAuCC,EAAO,OAAO,sBAAuB,CACjG,UAAW,iBACvB,CAAS,CACT,CACI,gBAAgBsG,EAAa,CACzB,OAAO3F,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAEhD,MAAMoS,EAAc,MAAM,KAAK,SAAS,wBAAwB,IAAM,EAAI,KAAK,SAAS,eAAe,EAEjGrL,EAAO,MAAM,KAAK,yBAAyBpB,CAAW,EAC5D,GAAI,CAIA,OAAO,MAAM+E,GAAK,IAAM1K,GAAU,KAAM,OAAQ,OAAQ,WAAa,CACjE,MAAM4F,EAAK,MAAM,KAAK,SAAS,eAAemB,CAAI,EAClD,GAAInB,IAAO,KAGX,OAAO,KAAK,SAAS,iBAAiBA,EAAImB,EAAMqL,CAAW,CAC9D,CAAA,EAAG,CAAE,SAAU,KAAK,QAAQ,CAAE,CAC/C,OACmBpf,EAAO,CACV,MAAAA,EAAM,gBAAkB+T,EAClB/T,CACtB,CACA,CAAS,CACT,CACI,YAAYijB,EAAS,CACjB,OAAOjW,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAMpN,EAAS,OAAQqjB,GAAa,SAAYzd,GAAYyd,CAAO,EAAIA,EACjElQ,EAAU,MAAM,KAAK,WAAY,EACvC,GAAI,CACA,OAAO,MAAM,KAAK,SAAS,KAAK,gBAAiB,CAACjG,GAAQlN,CAAI,EAAGmT,EAAQ,YAAa,CAAA,CAAC,CACvG,OACmB/S,EAAO,CACV,MAAI,OAAQA,EAAM,SAAa,UAAYA,EAAM,QAAQ,MAAM,cAAc,GACzEoM,GAAO,WAAW,wBAAyBC,EAAO,OAAO,gBAAiB,CACtE,OAAQ,cACR,KAAM0G,EACN,YAAakQ,CACrC,CAAqB,EAECjjB,CACtB,CACA,CAAS,CACT,CACI,mBAAmBijB,EAAS,CACxB,OAAOjW,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAMpN,EAAS,OAAQqjB,GAAa,SAAYzd,GAAYyd,CAAO,EAAIA,EACjElQ,EAAU,MAAM,KAAK,WAAY,EACvC,GAAI,CAEA,OAAO,MAAM,KAAK,SAAS,KAAK,WAAY,CAACA,EAAQ,YAAa,EAAEjG,GAAQlN,CAAI,CAAC,CAAC,CAClG,OACmBI,EAAO,CACV,MAAI,OAAQA,EAAM,SAAa,UAAYA,EAAM,QAAQ,MAAM,cAAc,GACzEoM,GAAO,WAAW,wBAAyBC,EAAO,OAAO,gBAAiB,CACtE,OAAQ,qBACR,KAAM0G,EACN,YAAakQ,CACrC,CAAqB,EAECjjB,CACtB,CACA,CAAS,CACT,CACI,eAAe0Q,EAAQtB,EAAOhX,EAAO,CACjC,OAAO4U,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAEhD,MAAM6W,EAAY,MAAMC,GAAkB,aAAapT,EAAQtB,EAAOhX,EAAQ8S,GACnE,KAAK,SAAS,YAAYA,CAAI,CACxC,EACK6H,EAAU,MAAM,KAAK,WAAY,EACvC,GAAI,CACA,OAAO,MAAM,KAAK,SAAS,KAAK,uBAAwB,CACpDA,EAAQ,YAAa,EACrB,KAAK,UAAU+Q,GAAkB,WAAWD,EAAU,OAAQzU,EAAOyU,EAAU,KAAK,CAAC,CACzG,CAAiB,CACjB,OACmB7jB,EAAO,CACV,MAAI,OAAQA,EAAM,SAAa,UAAYA,EAAM,QAAQ,MAAM,cAAc,GACzEoM,GAAO,WAAW,wBAAyBC,EAAO,OAAO,gBAAiB,CACtE,OAAQ,iBACR,KAAM0G,EACN,YAAa,CAAE,OAAQ8Q,EAAU,OAAQ,MAAAzU,EAAO,MAAOyU,EAAU,KAAK,CAC9F,CAAqB,EAEC7jB,CACtB,CACA,CAAS,CACT,CACI,OAAO+jB,EAAU,CACb,OAAO/W,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAMqH,EAAW,KAAK,SAChBtB,EAAU,MAAM,KAAK,WAAY,EACvC,OAAOsB,EAAS,KAAK,yBAA0B,CAACtB,EAAQ,YAAa,EAAEgR,EAAU,IAAI,CAAC,CAClG,CAAS,CACT,CACA,CACA,MAAMN,WAA+BH,EAAc,CAC/C,gBAAgB3Q,EAAa,CACzB,OAAO,KAAK,yBAAyBA,CAAW,EAAE,KAAMoB,IAC7C,CACH,KAAMA,EACN,MAAO,KACP,SAAU,KACV,SAAU,KACV,KAAM,KACN,MAAO,KACP,QAAS,KACT,cAAe,EACf,KAAM,KACN,KAAOmM,GAA2B,KAAK,SAAS,mBAAmBnM,EAAMmM,CAAa,CACzF,EACJ,CACT,CACA,CACA,MAAM3N,GAAyB,CAC3B,QAAS,GAAM,KAAM,GAAM,SAAU,GAAM,SAAU,GAAM,MAAO,GAAM,GAAI,GAAM,MAAO,GACzF,KAAM,GAAM,WAAY,GACxB,aAAc,GAAM,qBAAsB,EAC9C,EACO,MAAMyR,WAAwBxF,EAAa,CAC9C,YAAYhK,EAAKhD,EAAS,CACtB,IAAIyS,EAAiBzS,EAEjByS,GAAkB,OAClBA,EAAiB,IAAI,QAAQ,CAAC3W,EAASC,IAAW,CAC9C,WAAW,IAAM,CACb,KAAK,cAAa,EAAG,KAAMiE,GAAY,CACnClE,EAAQkE,CAAO,CAClB,EAAGxR,GAAU,CACVuN,EAAOvN,CAAK,CACpC,CAAqB,CACJ,EAAE,CAAC,CACpB,CAAa,GAEL,MAAMikB,CAAc,EAEfzP,IACDA,EAAMkK,GAAU,KAAK,YAAa,YAAY,EAAG,GAEjD,OAAQlK,GAAS,SACjBnF,GAAe,KAAM,aAAc,OAAO,OAAO,CAC7C,IAAKmF,CACrB,CAAa,CAAC,EAGFnF,GAAe,KAAM,aAAc,OAAO,OAAOwB,GAAY2D,CAAG,CAAC,CAAC,EAEtE,KAAK,QAAU,EACvB,CACI,IAAI,QAAS,CACT,OAAI,KAAK,iBAAmB,OACxB,KAAK,gBAAkB,CAAE,GAEtB,KAAK,eACpB,CACI,OAAO,YAAa,CAChB,MAAO,uBACf,CACI,eAAgB,CACZ,OAAK,KAAK,OAAO,gBACb,KAAK,OAAO,cAAmB,KAAK,uBAAwB,EAE5D,WAAW,IAAM,CACb,KAAK,OAAO,cAAmB,IAClC,EAAE,CAAC,GAED,KAAK,OAAO,aAC3B,CACI,wBAAyB,CACrB,OAAOxH,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAChD,MAAM+J,GAAM,CAAC,EACb,IAAI/S,EAAU,KACd,GAAI,CACAA,EAAU,MAAM,KAAK,KAAK,cAAe,CAAA,CAAE,CAC3D,MAC0B,CACV,GAAI,CACAA,EAAU,MAAM,KAAK,KAAK,cAAe,CAAA,CAAE,CAC/D,MAC8B,CAAA,CAC9B,CACY,GAAIA,GAAW,KAAM,CACjB,MAAM6Q,EAAa6J,GAAU,KAAK,YAAa,YAAY,EAC3D,GAAI,CACA,OAAO7J,EAAWhH,EAAU,KAAK7J,CAAO,EAAE,SAAQ,CAAE,CACxE,OACuBhE,EAAO,CACV,OAAOoM,GAAO,WAAW,2BAA4BC,EAAO,OAAO,cAAe,CAC9E,QAASrI,EACT,MAAO,iBACP,YAAahE,CACrC,CAAqB,CACrB,CACA,CACY,OAAOoM,GAAO,WAAW,2BAA4BC,EAAO,OAAO,cAAe,CAC9E,MAAO,WACvB,CAAa,CACb,CAAS,CACT,CACI,UAAUmX,EAAgB,CACtB,OAAO,IAAIF,GAAcD,GAAmB,KAAMG,CAAc,CACxE,CACI,mBAAmBA,EAAgB,CAC/B,OAAO,KAAK,UAAUA,CAAc,EAAE,iBAAkB,CAChE,CACI,cAAe,CACX,OAAO,KAAK,KAAK,eAAgB,CAAE,CAAA,EAAE,KAAME,GAChCA,EAAS,IAAK3b,GAAM,KAAK,UAAU,QAAQA,CAAC,CAAC,CACvD,CACT,CACI,KAAK0a,EAAQ1B,EAAQ,CACjB,MAAM7L,EAAU,CACZ,OAAQuN,EACR,OAAQ1B,EACR,GAAK,KAAK,UACV,QAAS,KACZ,EACD,KAAK,KAAK,QAAS,CACf,OAAQ,UACR,QAASzR,GAAS4F,CAAO,EACzB,SAAU,IACtB,CAAS,EAGD,MAAMgP,EAAS,CAAC,cAAe,iBAAiB,EAAE,QAAQzB,CAAM,GAAK,EACrE,GAAIyB,GAAS,KAAK,OAAOzB,CAAM,EAC3B,OAAO,KAAK,OAAOA,CAAM,EAE7B,MAAMpkB,EAASiZ,GAAU,KAAK,WAAY,KAAK,UAAUpC,CAAO,EAAGgO,EAAS,EAAE,KAAM7kB,IAChF,KAAK,KAAK,QAAS,CACf,OAAQ,WACR,QAAS6W,EACT,SAAU7W,EACV,SAAU,IAC1B,CAAa,EACMA,GACP2B,GAAU,CACV,WAAK,KAAK,QAAS,CACf,OAAQ,WACR,MAAOA,EACP,QAASkV,EACT,SAAU,IAC1B,CAAa,EACKlV,CAClB,CAAS,EAED,OAAIkkB,IACA,KAAK,OAAOzB,CAAM,EAAIpkB,EACtB,WAAW,IAAM,CACb,KAAK,OAAOokB,CAAM,EAAI,IACzB,EAAE,CAAC,GAEDpkB,CACf,CACI,eAAeokB,EAAQ1B,EAAQ,CAC3B,OAAQ0B,EAAM,CACV,IAAK,iBACD,MAAO,CAAC,kBAAmB,EAAE,EACjC,IAAK,cACD,MAAO,CAAC,eAAgB,EAAE,EAC9B,IAAK,aACD,MAAO,CAAC,iBAAkB,CAACW,GAAarC,EAAO,OAAO,EAAGA,EAAO,QAAQ,CAAC,EAC7E,IAAK,sBACD,MAAO,CAAC,0BAA2B,CAACqC,GAAarC,EAAO,OAAO,EAAGA,EAAO,QAAQ,CAAC,EACtF,IAAK,UACD,MAAO,CAAC,cAAe,CAACqC,GAAarC,EAAO,OAAO,EAAGA,EAAO,QAAQ,CAAC,EAC1E,IAAK,eACD,MAAO,CAAC,mBAAoB,CAACqC,GAAarC,EAAO,OAAO,EAAG1S,GAAW0S,EAAO,SAAU,EAAE,EAAGA,EAAO,QAAQ,CAAC,EAChH,IAAK,kBACD,MAAO,CAAC,yBAA0B,CAACA,EAAO,iBAAiB,CAAC,EAChE,IAAK,WACD,OAAIA,EAAO,SACA,CAAC,uBAAwB,CAACA,EAAO,SAAU,CAAC,CAACA,EAAO,mBAAmB,CAAC,EAE1EA,EAAO,UACL,CAAC,qBAAsB,CAACA,EAAO,UAAW,CAAC,CAACA,EAAO,mBAAmB,CAAC,EAE3E,KACX,IAAK,iBACD,MAAO,CAAC,2BAA4B,CAACA,EAAO,eAAe,CAAC,EAChE,IAAK,wBACD,MAAO,CAAC,4BAA6B,CAACA,EAAO,eAAe,CAAC,EACjE,IAAK,OAED,MAAO,CAAC,WAAY,CADOrC,GAAU,KAAK,YAAa,oBAAoB,EACnCqC,EAAO,YAAa,CAAE,KAAM,EAAM,CAAA,EAAGA,EAAO,QAAQ,CAAC,EAEjG,IAAK,cAED,MAAO,CAAC,kBAAmB,CADArC,GAAU,KAAK,YAAa,oBAAoB,EAC5BqC,EAAO,YAAa,CAAE,KAAM,EAAM,CAAA,CAAC,CAAC,EAEvF,IAAK,UACD,OAAIA,EAAO,QAAUA,EAAO,OAAO,SAAW,OAC1CA,EAAO,OAAO,QAAUqC,GAAarC,EAAO,OAAO,OAAO,GAEvD,CAAC,cAAe,CAACA,EAAO,MAAM,CAAC,CAGtD,CACQ,OAAO,IACf,CACI,QAAQ0B,EAAQ1B,EAAQ,CACpB,OAAO/T,GAAU,KAAM,OAAQ,OAAQ,WAAa,CAGhD,GAAIyV,IAAW,QAAUA,IAAW,cAAe,CAC/C,MAAM7P,EAAKmO,EAAO,YAClB,GAAInO,GAAMA,EAAG,MAAQ,MAAQ/E,EAAU,KAAK+E,EAAG,IAAI,EAAE,UAE7CA,EAAG,cAAgB,MAAQA,EAAG,sBAAwB,KAAM,CAC5D,MAAMK,EAAU,MAAM,KAAK,WAAY,EACnCA,EAAQ,cAAgB,MAAQA,EAAQ,sBAAwB,OAEhE8N,EAASlQ,GAAYkQ,CAAM,EAC3BA,EAAO,YAAclQ,GAAY+B,CAAE,EACnC,OAAOmO,EAAO,YAAY,KAEtD,CAEA,CACY,MAAM2B,EAAO,KAAK,eAAeD,EAAQ1B,CAAM,EAC3C2B,GAAQ,MACRtW,GAAO,WAAWqW,EAAS,mBAAoBpW,EAAO,OAAO,gBAAiB,CAAE,UAAWoW,EAAQ,EAEvG,GAAI,CACA,OAAO,MAAM,KAAK,KAAKC,EAAK,CAAC,EAAGA,EAAK,CAAC,CAAC,CACvD,OACmB1iB,EAAO,CACV,OAAOgjB,GAAWP,EAAQziB,EAAO+gB,CAAM,CACvD,CACA,CAAS,CACT,CACI,YAAYhc,EAAO,CACXA,EAAM,MAAQ,WACd,KAAK,cAAe,EAExB,MAAM,YAAYA,CAAK,CAC/B,CACI,eAAgB,CACZ,GAAI,KAAK,gBAAkB,KACvB,OAEJ,MAAMof,EAAO,KACPC,EAAgB,KAAK,KAAK,kCAAmC,CAAA,CAAE,EACrE,KAAK,eAAiBA,EACtBA,EAAc,KAAK,SAAUC,EAAU,CACnC,SAAS3M,GAAO,CACZyM,EAAK,KAAK,uBAAwB,CAACE,CAAQ,CAAC,EAAE,KAAK,SAAUC,EAAQ,CACjE,GAAIH,EAAK,gBAAkBC,EACvB,OAAO,KAEX,IAAIG,EAAM,QAAQ,QAAS,EAC3B,OAAAD,EAAO,QAAQ,SAAUvQ,EAAM,CAE3BoQ,EAAK,SAAS,KAAOpQ,EAAK,YAAW,CAAE,EAAI,UAC3CwQ,EAAMA,EAAI,KAAK,UAAY,CACvB,OAAOJ,EAAK,eAAepQ,CAAI,EAAE,KAAK,SAAUnB,EAAI,CAChD,OAAAuR,EAAK,KAAK,UAAWvR,CAAE,EAChB,IACvC,CAA6B,CAC7B,CAAyB,CACzB,CAAqB,EACM2R,EAAI,KAAK,UAAY,CACxB,OAAOxN,GAAM,GAAI,CACzC,CAAqB,CACrB,CAAiB,EAAE,KAAK,UAAY,CAChB,GAAIoN,EAAK,gBAAkBC,EAAe,CACtCD,EAAK,KAAK,sBAAuB,CAACE,CAAQ,CAAC,EAC3C,MACxB,CACoB,kBAAW,UAAY,CAAE3M,GAAO,EAAI,CAAC,EAC9B,IACV,CAAA,EAAE,MAAO1X,GAAU,EAAG,CACvC,CACY,OAAA0X,EAAM,EACC2M,CACV,CAAA,EAAE,MAAOrkB,GAAU,EAAG,CAC/B,CACI,WAAW+E,EAAO,CACVA,EAAM,MAAQ,WAAa,KAAK,cAAc,SAAS,IAAM,IAC7D,KAAK,eAAiB,MAE1B,MAAM,WAAWA,CAAK,CAC9B,CAUI,OAAO,mBAAmB4N,EAAa6R,EAAY,CAE/C,MAAMC,EAAU5T,GAAY0B,EAAsB,EAClD,GAAIiS,EACA,UAAW/lB,KAAO+lB,EACVA,EAAW/lB,CAAG,IACdgmB,EAAQhmB,CAAG,EAAI,IAI3BimB,GAAgB/R,EAAa8R,CAAO,EACpC,MAAMpmB,EAAS,CAAE,EAEjB,OAAC,UAAW,WAAY,WAAY,OAAQ,eAAgB,uBAAwB,QAAS,OAAO,EAAE,QAAQ,SAAUI,EAAK,CACzH,GAAIkU,EAAYlU,CAAG,GAAK,KACpB,OAEJ,MAAMrG,EAAQmiB,GAAS1M,EAAU,KAAK8E,EAAYlU,CAAG,CAAC,CAAC,EACnDA,IAAQ,aACRA,EAAM,OAEVJ,EAAOI,CAAG,EAAIrG,CAC1B,CAAS,EACD,CAAC,OAAQ,KAAM,MAAM,EAAE,QAAQ,SAAUqG,EAAK,CACtCkU,EAAYlU,CAAG,GAAK,OAGxBJ,EAAOI,CAAG,EAAIqO,GAAQ6F,EAAYlU,CAAG,CAAC,EAClD,CAAS,EACGkU,EAAY,aACZtU,EAAO,WAAgB8b,GAAcxH,EAAY,UAAU,GAExDtU,CACf,CACA,CC7pBA,MAAM+N,GAAS,IAAIC,EAAO5G,EAAO,EAEjC,IAAIkf,GAAU,EACd,SAASC,GAAuBvQ,EAAUwQ,EAAU,CAChD,MAAMC,EAAU,oBAChB,OAAO,SAAUrC,EAAQ1B,EAAQ,CAC7B,MAAM7L,EAAU,CACZ,OAAQuN,EACR,OAAQ1B,EACR,GAAK4D,KACL,QAAS,KACZ,EACD,OAAO,IAAI,QAAQ,CAACrX,EAASC,IAAW,CACpC,KAAK,KAAK,QAAS,CACf,OAAQ,UACR,QAAAuX,EACA,QAASxV,GAAS4F,CAAO,EACzB,SAAU,IAC1B,CAAa,EACD2P,EAAS3P,EAAS,CAAClV,EAAOoV,IAAa,CACnC,GAAIpV,EACA,YAAK,KAAK,QAAS,CACf,OAAQ,WACR,QAAA8kB,EACA,MAAA9kB,EACA,QAAAkV,EACA,SAAU,IAClC,CAAqB,EACM3H,EAAOvN,CAAK,EASvB,GAPA,KAAK,KAAK,QAAS,CACf,OAAQ,WACR,QAAA8kB,EACA,QAAA5P,EACA,SAAAE,EACA,SAAU,IAC9B,CAAiB,EACGA,EAAS,MAAO,CAChB,MAAMpV,EAAQ,IAAI,MAAMoV,EAAS,MAAM,OAAO,EAC9C,OAAApV,EAAM,KAAOoV,EAAS,MAAM,KAC5BpV,EAAM,KAAOoV,EAAS,MAAM,KACrB7H,EAAOvN,CAAK,CACvC,CACgBsN,EAAQ8H,EAAS,MAAM,CACvC,CAAa,CACb,CAAS,CACJ,CACL,CACA,SAAS2P,GAAoB1Q,EAAU,CACnC,OAAO,SAAUoO,EAAQ1B,EAAQ,CACzBA,GAAU,OACVA,EAAS,CAAE,GAEf,MAAM7L,EAAU,CAAE,OAAAuN,EAAQ,OAAA1B,CAAQ,EAClC,YAAK,KAAK,QAAS,CACf,OAAQ,UACR,QAAS,iBACT,QAASzR,GAAS4F,CAAO,EACzB,SAAU,IACtB,CAAS,EACMb,EAAS,QAAQa,CAAO,EAAE,KAAME,IACnC,KAAK,KAAK,QAAS,CACf,OAAQ,WACR,QAAS,iBACT,QAAAF,EACA,SAAAE,EACA,SAAU,IAC1B,CAAa,EACMA,GACPpV,GAAU,CACV,WAAK,KAAK,QAAS,CACf,OAAQ,WACR,QAAS,iBACT,QAAAkV,EACA,MAAAlV,EACA,SAAU,IAC1B,CAAa,EACKA,CAClB,CAAS,CACJ,CACL,CACO,MAAMglB,WAAqBhB,EAAgB,CAC9C,YAAY3P,EAAU7C,EAAS,CACvB6C,GAAY,MACZjI,GAAO,mBAAmB,mBAAoB,WAAYiI,CAAQ,EAEtE,IAAI5Q,EAAO,KACPwhB,EAAmB,KACnBC,EAAc,KACd,OAAQ7Q,GAAc,YACtB5Q,EAAO,WACPwhB,EAAmB5Q,IAGnB5Q,EAAO4Q,EAAS,MAAQA,EAAS,MAAQ,GACrC,CAAC5Q,GAAQ4Q,EAAS,aAClB5Q,EAAO,YAEXyhB,EAAc7Q,EACVA,EAAS,SACL5Q,IAAS,KACTA,EAAO,aAEXwhB,EAAmBF,GAAoB1Q,CAAQ,GAE1CA,EAAS,UACd4Q,EAAmBL,GAAuBvQ,EAAUA,EAAS,UAAU,KAAKA,CAAQ,CAAC,EAEhFA,EAAS,KACd4Q,EAAmBL,GAAuBvQ,EAAUA,EAAS,KAAK,KAAKA,CAAQ,CAAC,EAGhFjI,GAAO,mBAAmB,uBAAwB,WAAYiI,CAAQ,EAErE5Q,IACDA,EAAO,aAGf,MAAMA,EAAM+N,CAAO,EACnBnC,GAAe,KAAM,mBAAoB4V,CAAgB,EACzD5V,GAAe,KAAM,WAAY6V,CAAW,CACpD,CACI,KAAKzC,EAAQ1B,EAAQ,CACjB,OAAO,KAAK,iBAAiB0B,EAAQ1B,CAAM,CACnD,CACA,CC5HsB,eAAAoE,GACpBxG,EACA7L,EAC+C,CAC/C,GAAI,CAACsS,IAAyB,CAACriB,GAAIsiB,EAAoB,EACrD,OAAAC,GAAO,MAAM,oBAAoB,EAC1B,QAAQ,OAAO,oBAAoB,EACrC,CAEC,MAAAC,EADiB,IAAIC,GAA8BJ,EAAqB,EAChD,UAAU,EAClCK,EAAQ,CACZ,KAAM9G,EACN,GAAA7L,CACF,EACO,OAAAyS,EAAO,gBAAgBE,CAAK,CAAA,CAEvC,qDC8D0C,iBAAA7vB,MAAWA,EAAO,CAAA,CAAA,EAAA,CAAA,YAMhDA,EAAqB,EAAA,GAAA8vB,GAAA9vB,CAAA,mBAKf,SAAAA,EAAiB,CAAA,GAAA,CAAAA,EAAyB,EAAA,GAAAA,QAA0BA,EAAO,CAAA,UAC5EA,EAAY,CAAA,uEAIlBA,EAAqB,EAAA,GAAIA,EAAqB,EAAA,IAAKA,EAAO,CAAA,GAAA+vB,GAAA/vB,CAAA,wQAdvDA,EAAC,EAAA,EAEL,0CADA,6CACyC,4BAH/CG,EAsBKC,EAAAC,EAAAC,CAAA,kFAvBiCE,EAAA,MAAAwvB,EAAA,iBAAAhwB,MAAWA,EAAO,CAAA,CAAA,EAAA,CAAA,aAMhDA,EAAqB,EAAA,8GAKfQ,EAAA,QAAAyvB,EAAA,SAAAjwB,EAAiB,CAAA,GAAA,CAAAA,EAAyB,EAAA,GAAAA,QAA0BA,EAAO,CAAA,oBAC5EA,EAAY,CAAA,oDAIlBA,EAAqB,EAAA,GAAIA,EAAqB,EAAA,IAAKA,EAAO,CAAA,gFAdvDA,EAAC,EAAA,EAEL,0CADA,2RAfEA,EAAoB,EAAA,GAAAkwB,GAAAlwB,CAAA,0BAKd,SAAAA,OAAiBA,EAAoB,EAAA,UACtCA,EAAY,CAAA,iSAVfA,EAAC,EAAA,EAEL,6BADA,gCAC4B,4BAHlCG,EAeKC,EAAAC,EAAAC,CAAA,iDAVGN,EAAoB,EAAA,8GAKdQ,EAAA,OAAAyvB,EAAA,SAAAjwB,OAAiBA,EAAoB,EAAA,oBACtCA,EAAY,CAAA,wEAVfA,EAAC,EAAA,EAEL,6BADA,ubAdCA,EAAM,CAAA,GAAAiC,GAAAjC,CAAA,oXAhBbG,EAaKC,EAAAyO,EAAAvO,CAAA,0CAELH,EAUKC,EAAAwO,EAAAtO,CAAA,sJATEN,EAAM,CAAA,moBAoCoE,MAAI,cAAJ,MAAI,uEAOhFA,EAAe,CAAA,CAAA,cAAfA,EAAe,CAAA,CAAA,qCAAfA,EAAe,CAAA,CAAA,4CAIQmO,GAAenO,EAAqB,EAAA,CAAA,GAAK,cAAY,UACnDA,EAAe,CAAA,GAAE,KAAOmO,GAAenO,EAAO,CAAA,GAAI,CAAC,GAAK,WAAS,iCAF3B,uBACzC,aAAuD;AAAA,kCACrD,aAAkE;AAAA,mBAE3F,2EAJgE,uBACzC,iBAAuD;AAAA,kCACrD,iBAAkE;AAAA,mBAE3F,+GAJAG,EAIKC,EAAAC,EAAAC,CAAA,6DAHmB6N,GAAenO,EAAqB,EAAA,CAAA,GAAK,cAAY,KAAAmwB,GAAAC,EAAAC,CAAA,iBACnDrwB,EAAe,CAAA,GAAE,KAAOmO,GAAenO,EAAO,CAAA,GAAI,CAAC,GAAK,WAAS,KAAAmwB,GAAAG,EAAAC,CAAA,iZA9BrB,MAAI,cAAJ,MAAI,uEAOzEvwB,EAAe,CAAA,CAAA,cAAfA,EAAe,CAAA,CAAA,qCAAfA,EAAe,CAAA,CAAA,sGArCX;AAAA,sBAEP,0FAFO;AAAA,sBAEP,4CAJEG,EAEKC,EAAAC,EAAAC,CAAA,kNAMA;AAAA,sBAEP,0FAFO;AAAA,sBAEP,4CAJEH,EAEKC,EAAAC,EAAAC,CAAA,6fAYA,MAAI,cAAJ,MAAI,sGAvBT,MAAA,CAAAN,EAAmB,CAAA,GAAA,CAAAA,EAA0B,EAAA,GAAA,CAAAA,QAA0BA,EAAoB,EAAA,EAAA,EA2BvFA,MAAkBA,EAAoB,EAAA,EAAA,EAkBtCA,OAAyBA,EAAqB,EAAA,EAAA,sbA9ClBA,EAAY,CAAA,sJAAsBA,EAAK,EAAA,CAAA,uIAAvCA,EAAY,CAAA,gRAtBvC,KAAAwwB,EAAO,EAAA,EAAA9vB,EACP,CAAA,MAAA+vB,CAAA,EAAA/vB,EACA,CAAA,gBAAAgwB,CAAA,EAAAhwB,EACA,CAAA,cAAAiwB,CAAA,EAAAjwB,EACA,CAAA,qBAAAkwB,CAAA,EAAAlwB,GACA,aAAAmwB,EAAe,EAAA,EAAAnwB,GACf,OAAAowB,EAAmC,MAAA,EAAApwB,GACnC,QAAA0N,EAA8B,MAAA,EAAA1N,GAC9B,gBAAAqwB,EAA0C,MAAA,EAAArwB,EAEjDswB,EAAiB,GACjBC,EAAwB,GAEnB,SAAAC,GAAA,KACPV,EAAO,EAAA,EACFK,QACHG,EAAiB,EAAA,OACjBC,EAAwB,EAAA,GAQiB,MAAAE,EAAA,IAAAvvB,EAAA,EAAAovB,EAAiB,EAAI,EAMrBI,EAAA,IAAAxvB,EAAA,GAAAqvB,EAAwB,EAAI,SAa/DH,IAAM,EACNI,EAAK,GAaoCG,EAAA,IAAAzvB,EAAA,EAAAovB,EAAiB,EAAK,QAGnDL,EAAa,EAAG,QAAO,IAAOO,EAAK,CAAA,EAeNI,EAAA,IAAA1vB,EAAA,GAAAqvB,EAAwB,EAAK,SAG1DL,EAAoB,EAAG,QAAO,IAAOM,EAAK,CAAA,s3BCMWlxB,EAAK,CAAA,CAAA,uSAmD5E,QAEA,cAFA,QAEA,iGAIYA,EAAK,CAAA,EAAC,MAAM,OACV,SAAAA,KAAY,gBAFVA,EAAM,CAAA,IAAA,iBAANA,EAAM,CAAA,2JACVA,EAAK,CAAA,EAAC,MAAM,QACVQ,EAAA,KAAA+wB,EAAA,SAAAvxB,KAAY,gCAFVA,EAAM,CAAA,8IAO+C,QAAM,cAAN,QAAM,uEAO3E,SAEA,cAFA,SAEA,6EAlEGwxB,GAAMxxB,EAAK,CAAA,EAAC,OAAO,EAAA,2BASnBA,EAAK,CAAA,EAAC,MAAM,KAAI,yBAShByxB,EAAAzxB,KAAM,MAAK,uCAUT0xB,GAAA1xB,KAAY,iBAAgB,wCAQ5B2xB,EAAA3xB,KAAM,iBAAgB,iUAqB4BA,EAAY,CAAA,0DAA7BA,EAAK,CAAA,CAAA,oBAM9B,SAAA,CAAAA,MAAUA,EAAM,CAAA,EAAC,OAAS,EAAA,OAASA,EAAY,CAAA,21FApE9DG,EAOKC,EAAAyO,EAAAvO,CAAA,EANHsD,EAEIiL,EAAA+iB,CAAA,SACJhuB,EAEGiL,EAAAgjB,CAAA,kBAGL1xB,EAOKC,EAAAwO,EAAAtO,CAAA,EANHsD,EAEIgL,EAAAkjB,CAAA,SACJluB,EAEGgL,EAAAmjB,CAAA,kBAGL5xB,EAOKC,EAAAuO,EAAArO,CAAA,EANHsD,EAEI+K,EAAAqjB,CAAA,SACJpuB,EAEG+K,EAAAsjB,CAAA,mBAGL9xB,EAiBKC,EAAA8xB,EAAA5xB,CAAA,EAhBHsD,EAOKsuB,EAAAC,CAAA,EANHvuB,EAEIuuB,EAAAC,EAAA,UACJxuB,EAEGuuB,EAAAE,EAAA,mBAELzuB,EAOKsuB,EAAAI,EAAA,EANH1uB,EAEI0uB,GAAAC,EAAA,WACJ3uB,EAEG0uB,GAAAE,EAAA,qBAIPryB,EAcKC,EAAAqyB,GAAAnyB,CAAA,iDACLH,EAWKC,EAAAsyB,GAAApyB,CAAA,sEAnEAkxB,GAAMxxB,EAAK,CAAA,EAAC,OAAO,EAAA,KAAAmwB,GAAAwC,EAAAC,CAAA,qBASnB5yB,EAAK,CAAA,EAAC,MAAM,KAAI,KAAAmwB,GAAA0C,EAAAC,CAAA,GAShB,CAAAvyB,IAAAC,EAAA,IAAAixB,KAAAA,EAAAzxB,KAAM,MAAK,KAAAmwB,GAAA4C,EAAAtB,CAAA,GAUT,CAAAlxB,IAAAC,EAAA,KAAAkxB,MAAAA,GAAA1xB,KAAY,iBAAgB,KAAAmwB,GAAA6C,GAAAtB,EAAA,GAQ5B,CAAAnxB,IAAAC,EAAA,IAAAmxB,KAAAA,EAAA3xB,KAAM,iBAAgB,KAAAmwB,GAAA8C,GAAAtB,CAAA,8JAqB4B3xB,EAAY,CAAA,iEAMtDQ,EAAA,KAAA0yB,GAAA,SAAA,CAAAlzB,MAAUA,EAAM,CAAA,EAAC,OAAM,EAAG,OAASA,EAAY,CAAA,kXAtE5DA,EAAY,CAAA,GAAAmC,GAAAnC,CAAA,uDA+EP,QAAAA,KAAM,6HACJA,EAAY,CAAA,IAAA,gBAAZA,EAAY,CAAA,gQAhFnBA,EAAY,CAAA,uHA+EPQ,EAAA,IAAA2yB,EAAA,QAAAnzB,KAAM,sDACJA,EAAY,CAAA,gNArKjBwb,EAAgB4X,GAAA,MAEX,KAAA5C,EAAO,EAAA,EAAA9vB,EACP,CAAA,MAAA+a,CAAA,EAAA/a,EACA,CAAA,UAAA2yB,CAAA,EAAA3yB,EAEPgb,EACAmV,EAAe,GACfyC,EAAe,GACfC,EAAA,CACF,QAASvkB,GAAM,MAAM,GAAG,EAAE,MAC1B,iBAAkB,KAGX,SAAAkiB,GAAA,KACPV,EAAO,EAAA,EACFK,QACHnV,EAAS1M,GAAM,MAAM,GAAG,EAAE,KAAA,MAC1BskB,EAAe,EAAA,GAIJ,eAAA3C,GAAA,KACbE,EAAe,EAAA,YAEPtV,GAAaC,EAAeC,EAAOC,CAAM,EAC/C2X,EAAA,CACO,OAAAvb,EAAA,CACP0b,GAAoB1b,CAAC,MAEvB+Y,EAAe,EAAA,EACfK,EAAA,EAGa,eAAAN,GAAA,KACbC,EAAe,EAAA,MAEP,MAAA4C,EAAA,MAAkBhY,EAAM,aAAA,KAC1BgY,EAAU,gBACF,MAAMA,EAAU,MAAM,WAAW,MAEzCC,EAAiB1kB,GAAM,MAAMykB,EAAU,KAAK,KAC5CC,EAAe,gBACP,MAAMA,EAAe,MAAM,WAAW,KAG9CA,EAAe,MAAM,GAAGhY,CAAM,EAAE,MAAA,OAC5BqN,EAAiB,MAAAtN,EAAM,oBAAoBC,CAAM,KACnDqN,EAAS,gBACD,MAAMA,EAAS,MAAM,WAAW,EAEtC,MAAA4K,EAAA,MAAkBpE,GAAcqE,GAAW7K,EAAS,KAAK,EAAGtN,EAAM,MAAM,OAAO,EACrFiU,GAAO,QAAQ,wCAAwC,EACjD,MAAAiE,EAAU,KAAK,CAAC,QAGlB5K,EAAiB,MAAAtN,EAAM,mBAAmBC,CAAM,KAClDqN,EAAS,gBACD,MAAMA,EAAS,MAAM,WAAW,EAEtC,MAAA8K,GAAA,MAAkBtE,GAAcqE,GAAW7K,EAAS,KAAK,EAAGtN,EAAM,SAAS,EACjFiU,GAAO,QAAQ,gCAAgC,EACzC,MAAAmE,GAAU,KAAK,CAAC,EACtBR,EAAA,CACO,OAAAvb,EAAA,CACP0b,GAAoB1b,CAAC,EACrB4X,GAAO,MAAMoE,GAA6Bhc,CAAC,CAAA,MAE7C+Y,EAAe,EAAA,EACfK,EAAA,EAGa,eAAA6C,GAAA,CACP,MAAA/L,EAAA,MAAgBvM,EAAM,gBAAA,KACxBuM,EAAQ,gBACA,MAAMA,EAAQ,MAAM,WAAW,EAE3CpmB,EAAA,EAAA2xB,EAAcvL,EAAQ,KAAA,EAGxBgM,GAAA,IAAA,CACED,EAAA,kBA6DkBrY,EAAMlZ,sBAUlBZ,EAAA,EAAA0xB,EAAe,EAAI,EACnB1xB,EAAA,EAAA4uB,EAAO,EAAK,4BAaL,MAAAlS,EAAA,IAAA1c,EAAA,EAAA4uB,EAAO,EAAI,gBADf8C,EAAY9wB,gXC7GNxC,EAAY,CAAA,sJAEjBA,EAAK,CAAA,CAAA,iHAFAA,EAAY,CAAA,gNA4CzB,eAEA,cAFA,eAEA,uEAIsB,gDAEpB,cAFoB,gDAEpB,0DAFKA,EAAe,CAAA,GAAAiC,GAAA,yFAAfjC,EAAe,CAAA,yHAMuB,QAAM,cAAN,QAAM,uEAQnD,SAEA,cAFA,SAEA,6EAzDGwxB,GAAMxxB,EAAK,CAAA,EAAC,OAAO,EAAA,2BASnBA,EAAK,CAAA,EAAC,MAAM,KAAI,yBAShByxB,EAAAzxB,KAAM,MAAK,qCASX0xB,GAAA1xB,KAAM,iBAAgB,kPAWqBA,EAAK,CAAA,EAAC,MAAM,OAAkB,SAAAA,KAAM,gBAApDA,EAAM,CAAA,IAAA,kBAANA,EAAM,CAAA,kPASEA,EAAK,CAAA,CAAA,8BAO9BA,EAAM,CAAA,GAAIA,EAAO,CAAA,EAAA,SAAS,OAASA,EAAe,CAAA,GAAIA,EAAY,CAAA,iyEA3DjFG,EAOKC,EAAAyO,EAAAvO,CAAA,EANHsD,EAEIiL,EAAA+iB,CAAA,SACJhuB,EAEGiL,EAAAgjB,CAAA,kBAGL1xB,EAOKC,EAAAwO,EAAAtO,CAAA,EANHsD,EAEIgL,EAAAkjB,CAAA,SACJluB,EAEGgL,EAAAmjB,CAAA,kBAGL5xB,EAOKC,EAAAuO,EAAArO,CAAA,EANHsD,EAEI+K,EAAAqjB,CAAA,SACJpuB,EAEG+K,EAAAsjB,CAAA,mBAGL9xB,EAOKC,EAAA+xB,EAAA7xB,CAAA,EANHsD,EAEIuuB,EAAAC,CAAA,UACJxuB,EAEGuuB,EAAAE,EAAA,qBAGLlyB,EAcKC,EAAAkyB,GAAAhyB,CAAA,uEACLH,EAYKC,EAAA8xB,GAAA5xB,CAAA,wEA1DAkxB,GAAMxxB,EAAK,CAAA,EAAC,OAAO,EAAA,KAAAmwB,GAAAwC,EAAAC,CAAA,qBASnB5yB,EAAK,CAAA,EAAC,MAAM,KAAI,KAAAmwB,GAAA0C,EAAAC,CAAA,GAShB,CAAAvyB,IAAAC,EAAA,IAAAixB,KAAAA,EAAAzxB,KAAM,MAAK,KAAAmwB,GAAA4C,EAAAtB,CAAA,GASX,CAAAlxB,IAAAC,EAAA,IAAAkxB,MAAAA,GAAA1xB,KAAM,iBAAgB,KAAAmwB,GAAA6C,GAAAtB,EAAA,6FAWqB1xB,EAAK,CAAA,EAAC,MAAM,QAAkBQ,EAAA,IAAA+wB,GAAA,SAAAvxB,KAAM,mCAApDA,EAAM,CAAA,oLAgBvBA,EAAM,CAAA,GAAIA,EAAO,CAAA,EAAA,OAAM,EAAG,OAASA,EAAe,CAAA,GAAIA,EAAY,CAAA,gaAnE/EA,EAAY,CAAA,GAAAmC,GAAAnC,CAAA,uDA4EP,QAAAA,KAAM,iIACJA,EAAY,CAAA,IAAA,gBAAZA,EAAY,CAAA,gQA7EnBA,EAAY,CAAA,uHA4EPQ,EAAA,IAAA2yB,EAAA,QAAAnzB,KAAM,sDACJA,EAAY,CAAA,iNAlIjBwb,EAAgB4X,GAAA,MAEX,KAAA5C,EAAO,EAAA,EAAA9vB,EACP,CAAA,MAAA+a,CAAA,EAAA/a,EACA,CAAA,WAAAuzB,CAAA,EAAAvzB,EAEPgb,EAAgB1M,GAAM,MAAM,GAAG,EAAE,MACjCklB,EACArD,EAAe,GACfyC,EAAe,GAIV,SAAApC,GAAA,KACPV,EAAO,EAAA,EACFK,QACHnV,EAAS1M,GAAM,MAAM,GAAG,EAAE,KAAA,MAC1BskB,EAAe,EAAA,GAIJ,eAAA3C,GAAA,KACbE,EAAe,EAAA,YAEP9U,GAAcP,EAAeC,EAAOC,CAAM,EAChDuY,EAAA,CACO,OAAAnc,EAAA,CACP0b,GAAoB1b,CAAC,MAEvB+Y,EAAe,EAAA,EACfK,EAAA,EAGa,eAAAN,GAAA,KACbC,EAAe,EAAA,YAEP9H,EAAiB,MAAAtN,EAAM,oBAAoBC,CAAM,KACnDqN,EAAS,gBACD,MAAMA,EAAS,MAAM,WAAW,EAEtC,MAAA/L,EAAA,MAAWuS,GAAcqE,GAAW7K,EAAS,KAAK,EAAGtN,EAAM,SAAS,EAC1EiU,GAAO,QAAQ,gCAAgC,EACzC,MAAA1S,EAAG,KAAK,CAAC,EACfiX,EAAA,CACO,OAAAnc,EAAA,CACP0b,GAAoB1b,CAAC,EACrB4X,GAAO,MAAMoE,GAA6Bhc,CAAC,CAAA,MAE7C+Y,EAAe,EAAA,EACfK,EAAA,gBAuDgCxV,EAAMlZ,sBAahCZ,EAAA,EAAA0xB,EAAe,EAAI,EACnB1xB,EAAA,EAAA4uB,EAAO,EAAK,4BAaL,MAAAlS,EAAA,IAAA1c,EAAA,EAAA4uB,EAAO,EAAI,gBADf8C,EAAY9wB,iLAvHvBZ,EAAA,EAAGsyB,EAAkBxY,EAAW,CAAA,CAAAA,EAAO,GAAGD,EAAM,OAAO,EAAE,MAAQ,EAAA,mICb7C,eAAA0Y,GAASC,EAAiBC,EAA2B,CACzE,MAAMxY,GAAO,YAAa,CACxB,QAAAuY,EACA,WAAAC,EACA,gBAAiB,CACf,KAAMA,EAAW,MAAM,QAAQ,KAC/B,kBAAmBA,EAAW,MAAM,WAAW,QAC/C,iBAAkBlnB,GAAI2O,EAA2B,EACjD,SAAUuY,EAAW,MAAM,QAAQ,OAAA,CACrC,CACD,CACH,CAEsB,eAAAC,GAAY9Y,EAA8B+Y,EAAqB,CACnF,MAAMC,EAAYhZ,EAAc,sBAAsB+Y,EAAM,SAAS,EACrE,GAAIC,EAAU,MACZ,MAAM,IAAI,MAAMA,EAAU,MAAM,WAAW,EAG7C,MAAM3Y,GAAO,eAAgB,CAC3B,MAAA0Y,EACA,gBAAiB,CACf,KAAMC,EAAU,MAAM,QAAQ,KAC9B,kBAAmBD,EAAM,UACzB,iBAAkBpnB,GAAI2O,EAA2B,EACjD,SAAUyY,EAAM,OAClB,EACA,aAAc,CACZ,IAAKC,EAAU,MAAM,SAAS,GAAA,CAChC,CACD,CACH,CAEsB,eAAAC,GAAiBL,EAAiBC,EAA2B,CAC1E,OAAA,MAAMxY,GAAO,qBAAsB,CACxC,QAAAuY,EACA,WAAAC,EACA,gBAAiB,CACf,KAAMA,EAAW,MAAM,QAAQ,KAC/B,kBAAmBA,EAAW,MAAM,WAAW,QAC/C,iBAAkB,OAClB,SAAUA,EAAW,MAAM,QAAQ,OAAA,CACrC,CACD,CACH,CAEsB,eAAAK,GACpBN,EACAO,EACAC,EACiB,CACV,OAAA,MAAM/Y,GAAO,wBAAyB,CAC3C,QAAAuY,EACA,SAAAO,EACA,SAAAC,CAAA,CACD,CACH,CAEsB,eAAAC,GAAoBT,EAAiBO,EAAwC,CAC1F,OAAA,MAAM9Y,GAAO,wBAAyB,CAC3C,QAAAuY,EACA,SAAAO,CAAA,CACD,CACH,+ECxBW,QAAA30B,KAAM,iHACJA,EAAoB,CAAA,IAAA,gBAApBA,EAAoB,CAAA,sNADtBQ,EAAA,IAAA2yB,EAAA,QAAAnzB,KAAM,+BACJA,EAAoB,CAAA,oLAvCzBwb,EAAgB4X,GAAA,EAEX,GAAA,CAAA,MAAAmB,CAAA,EAAA7zB,EACA,CAAA,eAAAo0B,CAAA,EAAAp0B,EAEPmwB,EAAe,GACfkE,EAAuB,GAEZ,eAAApE,GAAA,KACbE,EAAe,EAAA,MAEP,MAAAyD,GAAY9Y,EAAe+Y,CAAK,EACtCO,EAAA,CACO,OAAAhd,EAAA,CACP0b,GAAoB1b,CAAC,MAEvB+Y,EAAe,EAAA,EAEF,eAAAD,GAAA,KACbC,EAAe,EAAA,MAEP,MAAA9H,EAAWwL,EAAM,kBAAA,KACnBxL,EAAS,gBACD,MAAMA,EAAS,MAAM,WAAW,EAEtC,MAAA/L,EAAA,MAAWuS,GAAcqE,GAAW7K,EAAS,KAAK,EAAGwL,EAAM,SAAS,EAC1E7E,GAAO,QAAQ,gCAAgC,EACzC,MAAA1S,EAAG,KAAK,CAAC,EACf8X,EAAA,CACO,OAAAhd,EAAA,CACP0b,GAAoB1b,CAAC,EACrB4X,GAAO,MAAMoE,GAA6Bhc,CAAC,CAAA,MAE7C+Y,EAAe,EAAA,gBAMNkE,EAAoBvyB,6OC9CpB,MAAAwyB,GAAa,MAAOC,EAAgBC,IACxC,MAAMrZ,GAA6B,cAAe,CACvD,OAAAoZ,EACA,KAAMC,CAAA,CACP,qGCWgB,YAAU,cAAV,YAAU,uEACV,OAAK,cAAL,OAAK,uEACL,KAAG,cAAH,KAAG,g0BAK4Bl1B,EAAK,CAAA,EAAC,YAAYA,EAAC,CAAA,CAAA,EAAA,2EAAnBA,EAAK,CAAA,EAAC,YAAYA,EAAC,CAAA,CAAA,EAAA,KAAAmwB,GAAA,EAAAgF,CAAA,iCAEzD,IAAAA,GAAAC,GAAMp1B,EAAK,CAAA,CAAA,EAAIq1B,GAAYC,GAAYt1B,EAAK,CAAA,CAAA,CAAA,EAAK,IAAE,+DAAnDQ,EAAA,GAAA20B,KAAAA,GAAAC,GAAMp1B,EAAK,CAAA,CAAA,EAAIq1B,GAAYC,GAAYt1B,EAAK,CAAA,CAAA,CAAA,EAAK,IAAE,KAAAmwB,GAAA,EAAAgF,CAAA,uCAETn1B,EAAK,CAAA,EAAA,2EAALA,EAAK,CAAA,EAAA,KAAAmwB,GAAA,EAAAgF,CAAA,wtCANhDn1B,EAAK,CAAA,EAAC,KAAK,CAAC,CAAA,uBAAjB,OAAIgQ,GAAA,+PAAChQ,EAAK,CAAA,EAAC,KAAK,CAAC,CAAA,oBAAjB,OAAIgQ,GAAA,EAAA,oHAAJ,OAAIA,EAAAulB,EAAA,OAAAvlB,GAAA,0CAAJ,OAAIA,GAAA,uiCAZG,GAAA,CAAA,MAAAnM,CAAA,EAAAnD,imBCiBTP,EAGKC,EAAAC,EAAAC,CAAA,qBADHsD,EAAqDvD,EAAAoO,CAAA,6cAIG,IAAA0mB,EAAAn1B,KAAY,MAAK,+DAAjBQ,EAAA,IAAA20B,KAAAA,EAAAn1B,KAAY,MAAK,KAAAmwB,GAAA,EAAAgF,CAAA,0DAGlD,MAAA,CAAA,MAAAn1B,KAAY,IAAI,4FAAhBQ,EAAA,KAAAg1B,EAAA,MAAAx1B,KAAY,mIAZgBA,EAAO,CAAA,EAAC,KAAK,IAAI,EAAA,eAEnEgC,EAAAhC,KAAY,WAASy1B,GAAA,EAMrBvzB,EAAAlC,KAAY,SAAOiC,GAAAjC,CAAA,EAGnB01B,EAAA11B,KAAY,MAAImC,GAAAnC,CAAA,wCAZ2B,qBAAmB,MAACA,EAAM,CAAA,CAAA,wBAC1B,QAAM,iKADN,qBAAmB,QAACA,EAAM,CAAA,CAAA,wEAC1B,QAAM,gQAFtDG,EAGKC,EAAAC,EAAAC,CAAA,EAFHsD,EAA+EvD,EAAAs1B,CAAA,uBAC/E/xB,EAA8EvD,EAAAu1B,CAAA,qHADZ51B,EAAM,CAAA,CAAA,oBACnBA,EAAO,CAAA,EAAC,KAAK,IAAI,EAAA,KAAAmwB,GAAA0F,EAAAC,CAAA,EAEnE91B,KAAY,wGAMZA,KAAY,kHAGZA,KAAY,2yBA9BN,GAAA,CAAA,KAAAwwB,CAAA,EAAA9vB,EACA,CAAA,OAAAu0B,CAAA,EAAAv0B,EACA,CAAA,QAAAw0B,CAAA,EAAAx0B,sKAEXq1B,EAAAn0B,EAAA,EAAGo0B,EAAatoB,IAEZ,SAAW,CAAAunB,EAASC,EAAQ,KAAK,GAAG,CAAA,EACpC,QAAA,IACSF,GAAWC,EAAQC,CAAO,EAEnC,MAAO,GAET5oB,iHCfJ,eAAsB2pB,GACpB1B,EACA2B,EACAC,EACAC,EACA5M,EACA,CACO,OAAA,MAAM3N,GAAmD,oBAAqB,CACnF,MAAA0Y,EACA,aAAc4B,EACd,cAAeC,EACf,YAAA5M,EACA,KAAA0M,CAAA,CACD,CACH,kECsCW,SAAO,MAACl2B,EAAW,CAAA,CAAA,+GAAnB,SAAO,QAACA,EAAW,CAAA,CAAA,4KAFxBG,EAIKC,EAAAC,EAAAC,CAAA,EAHHsD,EAEAvD,EAAAoO,CAAA,kCADWzO,EAAW,CAAA,CAAA,yUAMtBG,EAEAC,EAAAqO,EAAAnO,CAAA,kLAWGN,EAAW,CAAA,EAAC,KAAK,CAAC,GAAAiC,GAAAjC,CAAA,gCAGAA,EAAW,CAAA,EAAC,KAAK,CAAC,CAAA,sIAHpCA,EAAW,CAAA,EAAC,KAAK,CAAC,sIAGAA,EAAW,CAAA,EAAC,KAAK,CAAC,yfAFyBA,EAAW,CAAA,EAAC,KAAK,CAAC,EAAA,4EAAlBA,EAAW,CAAA,EAAC,KAAK,CAAC,EAAA,KAAAmwB,GAAA,EAAAgF,CAAA,uDAvBjFnzB,EAAAhC,KAAY,MAAIkwB,GAAAlwB,CAAA,EAQdkC,GAAAlC,EAAY,CAAA,EAAA,WAAaA,KAAY,aAAUy1B,GAAA,sHAS5C,KAAAz1B,EAAY,CAAA,EAAA,WAAaA,KAAY,kCAI5C,IAAA01B,EAAA11B,KAAY,MAAImC,GAAAnC,CAAA,8eAtBrBG,EAqBKC,EAAAwO,EAAAtO,CAAA,wBAbHsD,EAYKgL,EAAAC,CAAA,kEAQP1O,EAAgDC,EAAAuO,EAAArO,CAAA,eA3BzCN,KAAY,4DAQVA,EAAY,CAAA,EAAA,WAAaA,KAAY,yGASlCQ,EAAA,KAAA61B,EAAA,KAAAr2B,EAAY,CAAA,EAAA,WAAaA,KAAY,sBAI5CA,KAAY,8VAvBuBA,EAAI,CAAA,CAAA,6RAAJA,EAAI,CAAA,CAAA,iRAzCtCwb,EAAgB4X,GAAA,EAEX,GAAA,CAAA,KAAA5C,CAAA,EAAA9vB,EACA,CAAA,MAAA6zB,CAAA,EAAA7zB,EACA,CAAA,aAAAy1B,CAAA,EAAAz1B,EACA,CAAA,cAAA01B,CAAA,EAAA11B,EACA,CAAA,KAAA41B,CAAA,EAAA51B,EACA,CAAA,YAAA8oB,CAAA,EAAA9oB,EAoDW,MAAAywB,EAAA,IAAAoF,EAAY,QAAO,8RAlDzCR,EAAAn0B,EAAA,EAAGo0B,EAAatoB,IAEZ,SAAW,CAAA6mB,EAAQ+B,EAAO9M,CAAW,EACrC,QAAA,SAAA,OACQ5N,EAAUJ,EAAc,oBAAoB+Y,EAAM,OAAO,KAC3D3Y,EAAQ,gBACA,MAAMA,EAAQ,MAAM,WAAW,EAGrC,MAAA4a,EAAUjC,EAAM,iBAAA,KAClBiC,EAAQ,gBACA,MAAMA,EAAQ,MAAM,WAAW,EAUpC,OAPc,MAAAP,GACnBO,EAAQ,MACR5a,EAAQ,MAAM,KACdua,EACAC,EACA5M,EAAc,OAAOA,CAAW,EAAI,MAAA,GAIxC,MAAO,EACP,qBAAsB,GACtB,gBAAiB,GACjB,eAAgB,IAElBld,4RClCuBtM,EAAI,CAAA,CAAA,EAAA,wVAH7BG,EAEKC,EAAAwO,EAAAtO,CAAA,6BAELH,EAAgDC,EAAAuO,EAAArO,CAAA,wCADvBN,EAAI,CAAA,iNAJcA,EAAI,CAAA,CAAA,gSAAJA,EAAI,CAAA,CAAA,4LALpC,GAAA,CAAA,KAAAwwB,CAAA,EAAA9vB,EACA,CAAA,KAAA41B,CAAA,EAAA51B,EACA,CAAA,KAAAsJ,CAAA,EAAAtJ,8NCGN,MAAM+1B,GAAqB,CAChChb,EACA4X,EACAqD,IACG,CACH,IAAIC,GAAkB,CACpB,OAAQ,SAAS,KACjB,MAAO,CAAE,KAAM,GAAM,MAAAlb,EAAO,UAAA4X,CAAU,EACtC,QAAAqD,CAAA,CACD,CACH,EAEaE,GAAsB,CACjCnb,EACAwY,EACAyC,IACG,CACH,IAAIG,GAAmB,CACrB,OAAQ,SAAS,KACjB,MAAO,CAAE,KAAM,GAAM,MAAApb,EAAO,WAAAwY,CAAW,EACvC,QAAAyC,CAAA,CACD,CACH,EAEaI,GAAyB,CACpCvC,EACAO,EACA4B,IACG,CACH,IAAIK,GAAiB,CACnB,OAAQ,SAAS,KACjB,MAAO,CAAE,MAAAxC,EAAO,eAAAO,CAAe,EAC/B,QAAA4B,CAAA,CACD,CACH,EAEaM,GAAwB,CAAC/B,EAAgBC,IAAsB,CAC1E,IAAI+B,GAAgB,CAAE,OAAQ,SAAS,KAAM,MAAO,CAAE,KAAM,GAAM,OAAAhC,EAAQ,QAAAC,CAAQ,CAAA,CAAG,CACvF,EAEagC,GAAwB,CACnC3C,EACA4B,EACAC,EACAE,EACA9M,IACG,CACH,IAAI2N,GAAgB,CAClB,OAAQ,SAAS,KACjB,MAAO,CACL,KAAM,GACN,MAAA5C,EACA,aAAA4B,EACA,cAAAC,EACA,KAAAE,EACA,YAAA9M,CAAA,CACF,CACD,CACH,EAEa4N,GAA2B,CAACd,EAActsB,IAA+B,CACpF,IAAIqtB,GAAmB,CAAE,OAAQ,SAAS,KAAM,MAAO,CAAE,KAAM,GAAM,KAAAf,EAAM,KAAAtsB,CAAK,CAAA,CAAG,CACrF","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,21,22,23,24,25,26,27,28,29,30,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48]}