{"version":3,"file":"index.UKMZCmwG.js","sources":["../../../../../../../node_modules/@codemirror/commands/dist/index.js","../../../../../../../node_modules/crelt/index.js","../../../../../../../node_modules/@codemirror/search/dist/index.js","../../../../../../../node_modules/@codemirror/autocomplete/dist/index.js","../../../../../../../node_modules/@codemirror/lint/dist/index.js","../../../../../../../node_modules/codemirror/dist/index.js","../../../../../../../node_modules/svelte-codemirror-editor/dist/util.js","../../../../../../../node_modules/svelte-codemirror-editor/dist/CodeMirror.svelte","../../../../../../../node_modules/@lezer/lr/dist/index.js","../../../../../../../node_modules/@lezer/yaml/dist/index.js","../../../../../../../node_modules/@codemirror/lang-yaml/dist/index.js","../../../../../../../node_modules/vscode-languageserver-types/lib/esm/main.js","../../../../../../../node_modules/vscode-jsonrpc/lib/common/is.js","../../../../../../../node_modules/vscode-jsonrpc/lib/common/messages.js","../../../../../../../node_modules/vscode-jsonrpc/lib/common/linkedMap.js","../../../../../../../node_modules/vscode-jsonrpc/lib/common/disposable.js","../../../../../../../node_modules/vscode-jsonrpc/lib/common/ral.js","../../../../../../../node_modules/vscode-jsonrpc/lib/common/events.js","../../../../../../../node_modules/vscode-jsonrpc/lib/common/cancellation.js","../../../../../../../node_modules/vscode-jsonrpc/lib/common/sharedArrayCancellation.js","../../../../../../../node_modules/vscode-jsonrpc/lib/common/semaphore.js","../../../../../../../node_modules/vscode-jsonrpc/lib/common/messageReader.js","../../../../../../../node_modules/vscode-jsonrpc/lib/common/messageWriter.js","../../../../../../../node_modules/vscode-jsonrpc/lib/common/messageBuffer.js","../../../../../../../node_modules/vscode-jsonrpc/lib/common/connection.js","../../../../../../../node_modules/vscode-jsonrpc/lib/common/api.js","../../../../../../../node_modules/vscode-jsonrpc/lib/browser/ril.js","../../../../../../../node_modules/vscode-jsonrpc/lib/browser/main.js","../../../../../../../node_modules/vscode-jsonrpc/browser.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/messages.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/utils/is.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.implementation.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.typeDefinition.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.workspaceFolder.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.configuration.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.colorProvider.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.foldingRange.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.declaration.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.selectionRange.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.progress.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.callHierarchy.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.semanticTokens.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.showDocument.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.linkedEditingRange.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.fileOperations.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.moniker.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.typeHierarchy.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.inlineValue.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.inlayHint.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.diagnostic.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.notebook.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.inlineCompletion.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/protocol.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/connection.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/common/api.js","../../../../../../../node_modules/vscode-languageserver-protocol/lib/browser/main.js","../../../../../../../node_modules/@rainlanguage/dotrain/dist/esm/index.js","../../../../../../../node_modules/vscode-languageserver-textdocument/lib/esm/main.js","../../../../../../../node_modules/codemirror-rainlang/dist/index.js"],"sourcesContent":["import { Annotation, Facet, combineConfig, StateField, Transaction, ChangeSet, ChangeDesc, EditorSelection, StateEffect, Text, findClusterBreak, countColumn, CharCategory } from '@codemirror/state';\nimport { EditorView, Direction } from '@codemirror/view';\nimport { IndentContext, getIndentation, indentString, matchBrackets, syntaxTree, getIndentUnit, indentUnit } from '@codemirror/language';\nimport { NodeProp } from '@lezer/common';\n\n/**\nComment or uncomment the current selection. Will use line comments\nif available, otherwise falling back to block comments.\n*/\nconst toggleComment = target => {\n    let { state } = target, line = state.doc.lineAt(state.selection.main.from), config = getConfig(target.state, line.from);\n    return config.line ? toggleLineComment(target) : config.block ? toggleBlockCommentByLine(target) : false;\n};\nfunction command(f, option) {\n    return ({ state, dispatch }) => {\n        if (state.readOnly)\n            return false;\n        let tr = f(option, state);\n        if (!tr)\n            return false;\n        dispatch(state.update(tr));\n        return true;\n    };\n}\n/**\nComment or uncomment the current selection using line comments.\nThe line comment syntax is taken from the\n[`commentTokens`](https://codemirror.net/6/docs/ref/#commands.CommentTokens) [language\ndata](https://codemirror.net/6/docs/ref/#state.EditorState.languageDataAt).\n*/\nconst toggleLineComment = /*@__PURE__*/command(changeLineComment, 0 /* CommentOption.Toggle */);\n/**\nComment the current selection using line comments.\n*/\nconst lineComment = /*@__PURE__*/command(changeLineComment, 1 /* CommentOption.Comment */);\n/**\nUncomment the current selection using line comments.\n*/\nconst lineUncomment = /*@__PURE__*/command(changeLineComment, 2 /* CommentOption.Uncomment */);\n/**\nComment or uncomment the current selection using block comments.\nThe block comment syntax is taken from the\n[`commentTokens`](https://codemirror.net/6/docs/ref/#commands.CommentTokens) [language\ndata](https://codemirror.net/6/docs/ref/#state.EditorState.languageDataAt).\n*/\nconst toggleBlockComment = /*@__PURE__*/command(changeBlockComment, 0 /* CommentOption.Toggle */);\n/**\nComment the current selection using block comments.\n*/\nconst blockComment = /*@__PURE__*/command(changeBlockComment, 1 /* CommentOption.Comment */);\n/**\nUncomment the current selection using block comments.\n*/\nconst blockUncomment = /*@__PURE__*/command(changeBlockComment, 2 /* CommentOption.Uncomment */);\n/**\nComment or uncomment the lines around the current selection using\nblock comments.\n*/\nconst toggleBlockCommentByLine = /*@__PURE__*/command((o, s) => changeBlockComment(o, s, selectedLineRanges(s)), 0 /* CommentOption.Toggle */);\nfunction getConfig(state, pos) {\n    let data = state.languageDataAt(\"commentTokens\", pos);\n    return data.length ? data[0] : {};\n}\nconst SearchMargin = 50;\n/**\nDetermines if the given range is block-commented in the given\nstate.\n*/\nfunction findBlockComment(state, { open, close }, from, to) {\n    let textBefore = state.sliceDoc(from - SearchMargin, from);\n    let textAfter = state.sliceDoc(to, to + SearchMargin);\n    let spaceBefore = /\\s*$/.exec(textBefore)[0].length, spaceAfter = /^\\s*/.exec(textAfter)[0].length;\n    let beforeOff = textBefore.length - spaceBefore;\n    if (textBefore.slice(beforeOff - open.length, beforeOff) == open &&\n        textAfter.slice(spaceAfter, spaceAfter + close.length) == close) {\n        return { open: { pos: from - spaceBefore, margin: spaceBefore && 1 },\n            close: { pos: to + spaceAfter, margin: spaceAfter && 1 } };\n    }\n    let startText, endText;\n    if (to - from <= 2 * SearchMargin) {\n        startText = endText = state.sliceDoc(from, to);\n    }\n    else {\n        startText = state.sliceDoc(from, from + SearchMargin);\n        endText = state.sliceDoc(to - SearchMargin, to);\n    }\n    let startSpace = /^\\s*/.exec(startText)[0].length, endSpace = /\\s*$/.exec(endText)[0].length;\n    let endOff = endText.length - endSpace - close.length;\n    if (startText.slice(startSpace, startSpace + open.length) == open &&\n        endText.slice(endOff, endOff + close.length) == close) {\n        return { open: { pos: from + startSpace + open.length,\n                margin: /\\s/.test(startText.charAt(startSpace + open.length)) ? 1 : 0 },\n            close: { pos: to - endSpace - close.length,\n                margin: /\\s/.test(endText.charAt(endOff - 1)) ? 1 : 0 } };\n    }\n    return null;\n}\nfunction selectedLineRanges(state) {\n    let ranges = [];\n    for (let r of state.selection.ranges) {\n        let fromLine = state.doc.lineAt(r.from);\n        let toLine = r.to <= fromLine.to ? fromLine : state.doc.lineAt(r.to);\n        if (toLine.from > fromLine.from && toLine.from == r.to)\n            toLine = r.to == fromLine.to + 1 ? fromLine : state.doc.lineAt(r.to - 1);\n        let last = ranges.length - 1;\n        if (last >= 0 && ranges[last].to > fromLine.from)\n            ranges[last].to = toLine.to;\n        else\n            ranges.push({ from: fromLine.from + /^\\s*/.exec(fromLine.text)[0].length, to: toLine.to });\n    }\n    return ranges;\n}\n// Performs toggle, comment and uncomment of block comments in\n// languages that support them.\nfunction changeBlockComment(option, state, ranges = state.selection.ranges) {\n    let tokens = ranges.map(r => getConfig(state, r.from).block);\n    if (!tokens.every(c => c))\n        return null;\n    let comments = ranges.map((r, i) => findBlockComment(state, tokens[i], r.from, r.to));\n    if (option != 2 /* CommentOption.Uncomment */ && !comments.every(c => c)) {\n        return { changes: state.changes(ranges.map((range, i) => {\n                if (comments[i])\n                    return [];\n                return [{ from: range.from, insert: tokens[i].open + \" \" }, { from: range.to, insert: \" \" + tokens[i].close }];\n            })) };\n    }\n    else if (option != 1 /* CommentOption.Comment */ && comments.some(c => c)) {\n        let changes = [];\n        for (let i = 0, comment; i < comments.length; i++)\n            if (comment = comments[i]) {\n                let token = tokens[i], { open, close } = comment;\n                changes.push({ from: open.pos - token.open.length, to: open.pos + open.margin }, { from: close.pos - close.margin, to: close.pos + token.close.length });\n            }\n        return { changes };\n    }\n    return null;\n}\n// Performs toggle, comment and uncomment of line comments.\nfunction changeLineComment(option, state, ranges = state.selection.ranges) {\n    let lines = [];\n    let prevLine = -1;\n    for (let { from, to } of ranges) {\n        let startI = lines.length, minIndent = 1e9;\n        let token = getConfig(state, from).line;\n        if (!token)\n            continue;\n        for (let pos = from; pos <= to;) {\n            let line = state.doc.lineAt(pos);\n            if (line.from > prevLine && (from == to || to > line.from)) {\n                prevLine = line.from;\n                let indent = /^\\s*/.exec(line.text)[0].length;\n                let empty = indent == line.length;\n                let comment = line.text.slice(indent, indent + token.length) == token ? indent : -1;\n                if (indent < line.text.length && indent < minIndent)\n                    minIndent = indent;\n                lines.push({ line, comment, token, indent, empty, single: false });\n            }\n            pos = line.to + 1;\n        }\n        if (minIndent < 1e9)\n            for (let i = startI; i < lines.length; i++)\n                if (lines[i].indent < lines[i].line.text.length)\n                    lines[i].indent = minIndent;\n        if (lines.length == startI + 1)\n            lines[startI].single = true;\n    }\n    if (option != 2 /* CommentOption.Uncomment */ && lines.some(l => l.comment < 0 && (!l.empty || l.single))) {\n        let changes = [];\n        for (let { line, token, indent, empty, single } of lines)\n            if (single || !empty)\n                changes.push({ from: line.from + indent, insert: token + \" \" });\n        let changeSet = state.changes(changes);\n        return { changes: changeSet, selection: state.selection.map(changeSet, 1) };\n    }\n    else if (option != 1 /* CommentOption.Comment */ && lines.some(l => l.comment >= 0)) {\n        let changes = [];\n        for (let { line, comment, token } of lines)\n            if (comment >= 0) {\n                let from = line.from + comment, to = from + token.length;\n                if (line.text[to - line.from] == \" \")\n                    to++;\n                changes.push({ from, to });\n            }\n        return { changes };\n    }\n    return null;\n}\n\nconst fromHistory = /*@__PURE__*/Annotation.define();\n/**\nTransaction annotation that will prevent that transaction from\nbeing combined with other transactions in the undo history. Given\n`\"before\"`, it'll prevent merging with previous transactions. With\n`\"after\"`, subsequent transactions won't be combined with this\none. With `\"full\"`, the transaction is isolated on both sides.\n*/\nconst isolateHistory = /*@__PURE__*/Annotation.define();\n/**\nThis facet provides a way to register functions that, given a\ntransaction, provide a set of effects that the history should\nstore when inverting the transaction. This can be used to\nintegrate some kinds of effects in the history, so that they can\nbe undone (and redone again).\n*/\nconst invertedEffects = /*@__PURE__*/Facet.define();\nconst historyConfig = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            minDepth: 100,\n            newGroupDelay: 500,\n            joinToEvent: (_t, isAdjacent) => isAdjacent,\n        }, {\n            minDepth: Math.max,\n            newGroupDelay: Math.min,\n            joinToEvent: (a, b) => (tr, adj) => a(tr, adj) || b(tr, adj)\n        });\n    }\n});\nconst historyField_ = /*@__PURE__*/StateField.define({\n    create() {\n        return HistoryState.empty;\n    },\n    update(state, tr) {\n        let config = tr.state.facet(historyConfig);\n        let fromHist = tr.annotation(fromHistory);\n        if (fromHist) {\n            let item = HistEvent.fromTransaction(tr, fromHist.selection), from = fromHist.side;\n            let other = from == 0 /* BranchName.Done */ ? state.undone : state.done;\n            if (item)\n                other = updateBranch(other, other.length, config.minDepth, item);\n            else\n                other = addSelection(other, tr.startState.selection);\n            return new HistoryState(from == 0 /* BranchName.Done */ ? fromHist.rest : other, from == 0 /* BranchName.Done */ ? other : fromHist.rest);\n        }\n        let isolate = tr.annotation(isolateHistory);\n        if (isolate == \"full\" || isolate == \"before\")\n            state = state.isolate();\n        if (tr.annotation(Transaction.addToHistory) === false)\n            return !tr.changes.empty ? state.addMapping(tr.changes.desc) : state;\n        let event = HistEvent.fromTransaction(tr);\n        let time = tr.annotation(Transaction.time), userEvent = tr.annotation(Transaction.userEvent);\n        if (event)\n            state = state.addChanges(event, time, userEvent, config, tr);\n        else if (tr.selection)\n            state = state.addSelection(tr.startState.selection, time, userEvent, config.newGroupDelay);\n        if (isolate == \"full\" || isolate == \"after\")\n            state = state.isolate();\n        return state;\n    },\n    toJSON(value) {\n        return { done: value.done.map(e => e.toJSON()), undone: value.undone.map(e => e.toJSON()) };\n    },\n    fromJSON(json) {\n        return new HistoryState(json.done.map(HistEvent.fromJSON), json.undone.map(HistEvent.fromJSON));\n    }\n});\n/**\nCreate a history extension with the given configuration.\n*/\nfunction history(config = {}) {\n    return [\n        historyField_,\n        historyConfig.of(config),\n        EditorView.domEventHandlers({\n            beforeinput(e, view) {\n                let command = e.inputType == \"historyUndo\" ? undo : e.inputType == \"historyRedo\" ? redo : null;\n                if (!command)\n                    return false;\n                e.preventDefault();\n                return command(view);\n            }\n        })\n    ];\n}\n/**\nThe state field used to store the history data. Should probably\nonly be used when you want to\n[serialize](https://codemirror.net/6/docs/ref/#state.EditorState.toJSON) or\n[deserialize](https://codemirror.net/6/docs/ref/#state.EditorState^fromJSON) state objects in a way\nthat preserves history.\n*/\nconst historyField = historyField_;\nfunction cmd(side, selection) {\n    return function ({ state, dispatch }) {\n        if (!selection && state.readOnly)\n            return false;\n        let historyState = state.field(historyField_, false);\n        if (!historyState)\n            return false;\n        let tr = historyState.pop(side, state, selection);\n        if (!tr)\n            return false;\n        dispatch(tr);\n        return true;\n    };\n}\n/**\nUndo a single group of history events. Returns false if no group\nwas available.\n*/\nconst undo = /*@__PURE__*/cmd(0 /* BranchName.Done */, false);\n/**\nRedo a group of history events. Returns false if no group was\navailable.\n*/\nconst redo = /*@__PURE__*/cmd(1 /* BranchName.Undone */, false);\n/**\nUndo a change or selection change.\n*/\nconst undoSelection = /*@__PURE__*/cmd(0 /* BranchName.Done */, true);\n/**\nRedo a change or selection change.\n*/\nconst redoSelection = /*@__PURE__*/cmd(1 /* BranchName.Undone */, true);\nfunction depth(side) {\n    return function (state) {\n        let histState = state.field(historyField_, false);\n        if (!histState)\n            return 0;\n        let branch = side == 0 /* BranchName.Done */ ? histState.done : histState.undone;\n        return branch.length - (branch.length && !branch[0].changes ? 1 : 0);\n    };\n}\n/**\nThe amount of undoable change events available in a given state.\n*/\nconst undoDepth = /*@__PURE__*/depth(0 /* BranchName.Done */);\n/**\nThe amount of redoable change events available in a given state.\n*/\nconst redoDepth = /*@__PURE__*/depth(1 /* BranchName.Undone */);\n// History events store groups of changes or effects that need to be\n// undone/redone together.\nclass HistEvent {\n    constructor(\n    // The changes in this event. Normal events hold at least one\n    // change or effect. But it may be necessary to store selection\n    // events before the first change, in which case a special type of\n    // instance is created which doesn't hold any changes, with\n    // changes == startSelection == undefined\n    changes, \n    // The effects associated with this event\n    effects, \n    // Accumulated mapping (from addToHistory==false) that should be\n    // applied to events below this one.\n    mapped, \n    // The selection before this event\n    startSelection, \n    // Stores selection changes after this event, to be used for\n    // selection undo/redo.\n    selectionsAfter) {\n        this.changes = changes;\n        this.effects = effects;\n        this.mapped = mapped;\n        this.startSelection = startSelection;\n        this.selectionsAfter = selectionsAfter;\n    }\n    setSelAfter(after) {\n        return new HistEvent(this.changes, this.effects, this.mapped, this.startSelection, after);\n    }\n    toJSON() {\n        var _a, _b, _c;\n        return {\n            changes: (_a = this.changes) === null || _a === void 0 ? void 0 : _a.toJSON(),\n            mapped: (_b = this.mapped) === null || _b === void 0 ? void 0 : _b.toJSON(),\n            startSelection: (_c = this.startSelection) === null || _c === void 0 ? void 0 : _c.toJSON(),\n            selectionsAfter: this.selectionsAfter.map(s => s.toJSON())\n        };\n    }\n    static fromJSON(json) {\n        return new HistEvent(json.changes && ChangeSet.fromJSON(json.changes), [], json.mapped && ChangeDesc.fromJSON(json.mapped), json.startSelection && EditorSelection.fromJSON(json.startSelection), json.selectionsAfter.map(EditorSelection.fromJSON));\n    }\n    // This does not check `addToHistory` and such, it assumes the\n    // transaction needs to be converted to an item. Returns null when\n    // there are no changes or effects in the transaction.\n    static fromTransaction(tr, selection) {\n        let effects = none;\n        for (let invert of tr.startState.facet(invertedEffects)) {\n            let result = invert(tr);\n            if (result.length)\n                effects = effects.concat(result);\n        }\n        if (!effects.length && tr.changes.empty)\n            return null;\n        return new HistEvent(tr.changes.invert(tr.startState.doc), effects, undefined, selection || tr.startState.selection, none);\n    }\n    static selection(selections) {\n        return new HistEvent(undefined, none, undefined, undefined, selections);\n    }\n}\nfunction updateBranch(branch, to, maxLen, newEvent) {\n    let start = to + 1 > maxLen + 20 ? to - maxLen - 1 : 0;\n    let newBranch = branch.slice(start, to);\n    newBranch.push(newEvent);\n    return newBranch;\n}\nfunction isAdjacent(a, b) {\n    let ranges = [], isAdjacent = false;\n    a.iterChangedRanges((f, t) => ranges.push(f, t));\n    b.iterChangedRanges((_f, _t, f, t) => {\n        for (let i = 0; i < ranges.length;) {\n            let from = ranges[i++], to = ranges[i++];\n            if (t >= from && f <= to)\n                isAdjacent = true;\n        }\n    });\n    return isAdjacent;\n}\nfunction eqSelectionShape(a, b) {\n    return a.ranges.length == b.ranges.length &&\n        a.ranges.filter((r, i) => r.empty != b.ranges[i].empty).length === 0;\n}\nfunction conc(a, b) {\n    return !a.length ? b : !b.length ? a : a.concat(b);\n}\nconst none = [];\nconst MaxSelectionsPerEvent = 200;\nfunction addSelection(branch, selection) {\n    if (!branch.length) {\n        return [HistEvent.selection([selection])];\n    }\n    else {\n        let lastEvent = branch[branch.length - 1];\n        let sels = lastEvent.selectionsAfter.slice(Math.max(0, lastEvent.selectionsAfter.length - MaxSelectionsPerEvent));\n        if (sels.length && sels[sels.length - 1].eq(selection))\n            return branch;\n        sels.push(selection);\n        return updateBranch(branch, branch.length - 1, 1e9, lastEvent.setSelAfter(sels));\n    }\n}\n// Assumes the top item has one or more selectionAfter values\nfunction popSelection(branch) {\n    let last = branch[branch.length - 1];\n    let newBranch = branch.slice();\n    newBranch[branch.length - 1] = last.setSelAfter(last.selectionsAfter.slice(0, last.selectionsAfter.length - 1));\n    return newBranch;\n}\n// Add a mapping to the top event in the given branch. If this maps\n// away all the changes and effects in that item, drop it and\n// propagate the mapping to the next item.\nfunction addMappingToBranch(branch, mapping) {\n    if (!branch.length)\n        return branch;\n    let length = branch.length, selections = none;\n    while (length) {\n        let event = mapEvent(branch[length - 1], mapping, selections);\n        if (event.changes && !event.changes.empty || event.effects.length) { // Event survived mapping\n            let result = branch.slice(0, length);\n            result[length - 1] = event;\n            return result;\n        }\n        else { // Drop this event, since there's no changes or effects left\n            mapping = event.mapped;\n            length--;\n            selections = event.selectionsAfter;\n        }\n    }\n    return selections.length ? [HistEvent.selection(selections)] : none;\n}\nfunction mapEvent(event, mapping, extraSelections) {\n    let selections = conc(event.selectionsAfter.length ? event.selectionsAfter.map(s => s.map(mapping)) : none, extraSelections);\n    // Change-less events don't store mappings (they are always the last event in a branch)\n    if (!event.changes)\n        return HistEvent.selection(selections);\n    let mappedChanges = event.changes.map(mapping), before = mapping.mapDesc(event.changes, true);\n    let fullMapping = event.mapped ? event.mapped.composeDesc(before) : before;\n    return new HistEvent(mappedChanges, StateEffect.mapEffects(event.effects, mapping), fullMapping, event.startSelection.map(before), selections);\n}\nconst joinableUserEvent = /^(input\\.type|delete)($|\\.)/;\nclass HistoryState {\n    constructor(done, undone, prevTime = 0, prevUserEvent = undefined) {\n        this.done = done;\n        this.undone = undone;\n        this.prevTime = prevTime;\n        this.prevUserEvent = prevUserEvent;\n    }\n    isolate() {\n        return this.prevTime ? new HistoryState(this.done, this.undone) : this;\n    }\n    addChanges(event, time, userEvent, config, tr) {\n        let done = this.done, lastEvent = done[done.length - 1];\n        if (lastEvent && lastEvent.changes && !lastEvent.changes.empty && event.changes &&\n            (!userEvent || joinableUserEvent.test(userEvent)) &&\n            ((!lastEvent.selectionsAfter.length &&\n                time - this.prevTime < config.newGroupDelay &&\n                config.joinToEvent(tr, isAdjacent(lastEvent.changes, event.changes))) ||\n                // For compose (but not compose.start) events, always join with previous event\n                userEvent == \"input.type.compose\")) {\n            done = updateBranch(done, done.length - 1, config.minDepth, new HistEvent(event.changes.compose(lastEvent.changes), conc(StateEffect.mapEffects(event.effects, lastEvent.changes), lastEvent.effects), lastEvent.mapped, lastEvent.startSelection, none));\n        }\n        else {\n            done = updateBranch(done, done.length, config.minDepth, event);\n        }\n        return new HistoryState(done, none, time, userEvent);\n    }\n    addSelection(selection, time, userEvent, newGroupDelay) {\n        let last = this.done.length ? this.done[this.done.length - 1].selectionsAfter : none;\n        if (last.length > 0 &&\n            time - this.prevTime < newGroupDelay &&\n            userEvent == this.prevUserEvent && userEvent && /^select($|\\.)/.test(userEvent) &&\n            eqSelectionShape(last[last.length - 1], selection))\n            return this;\n        return new HistoryState(addSelection(this.done, selection), this.undone, time, userEvent);\n    }\n    addMapping(mapping) {\n        return new HistoryState(addMappingToBranch(this.done, mapping), addMappingToBranch(this.undone, mapping), this.prevTime, this.prevUserEvent);\n    }\n    pop(side, state, onlySelection) {\n        let branch = side == 0 /* BranchName.Done */ ? this.done : this.undone;\n        if (branch.length == 0)\n            return null;\n        let event = branch[branch.length - 1], selection = event.selectionsAfter[0] || state.selection;\n        if (onlySelection && event.selectionsAfter.length) {\n            return state.update({\n                selection: event.selectionsAfter[event.selectionsAfter.length - 1],\n                annotations: fromHistory.of({ side, rest: popSelection(branch), selection }),\n                userEvent: side == 0 /* BranchName.Done */ ? \"select.undo\" : \"select.redo\",\n                scrollIntoView: true\n            });\n        }\n        else if (!event.changes) {\n            return null;\n        }\n        else {\n            let rest = branch.length == 1 ? none : branch.slice(0, branch.length - 1);\n            if (event.mapped)\n                rest = addMappingToBranch(rest, event.mapped);\n            return state.update({\n                changes: event.changes,\n                selection: event.startSelection,\n                effects: event.effects,\n                annotations: fromHistory.of({ side, rest, selection }),\n                filter: false,\n                userEvent: side == 0 /* BranchName.Done */ ? \"undo\" : \"redo\",\n                scrollIntoView: true\n            });\n        }\n    }\n}\nHistoryState.empty = /*@__PURE__*/new HistoryState(none, none);\n/**\nDefault key bindings for the undo history.\n\n- Mod-z: [`undo`](https://codemirror.net/6/docs/ref/#commands.undo).\n- Mod-y (Mod-Shift-z on macOS) + Ctrl-Shift-z on Linux: [`redo`](https://codemirror.net/6/docs/ref/#commands.redo).\n- Mod-u: [`undoSelection`](https://codemirror.net/6/docs/ref/#commands.undoSelection).\n- Alt-u (Mod-Shift-u on macOS): [`redoSelection`](https://codemirror.net/6/docs/ref/#commands.redoSelection).\n*/\nconst historyKeymap = [\n    { key: \"Mod-z\", run: undo, preventDefault: true },\n    { key: \"Mod-y\", mac: \"Mod-Shift-z\", run: redo, preventDefault: true },\n    { linux: \"Ctrl-Shift-z\", run: redo, preventDefault: true },\n    { key: \"Mod-u\", run: undoSelection, preventDefault: true },\n    { key: \"Alt-u\", mac: \"Mod-Shift-u\", run: redoSelection, preventDefault: true }\n];\n\nfunction updateSel(sel, by) {\n    return EditorSelection.create(sel.ranges.map(by), sel.mainIndex);\n}\nfunction setSel(state, selection) {\n    return state.update({ selection, scrollIntoView: true, userEvent: \"select\" });\n}\nfunction moveSel({ state, dispatch }, how) {\n    let selection = updateSel(state.selection, how);\n    if (selection.eq(state.selection, true))\n        return false;\n    dispatch(setSel(state, selection));\n    return true;\n}\nfunction rangeEnd(range, forward) {\n    return EditorSelection.cursor(forward ? range.to : range.from);\n}\nfunction cursorByChar(view, forward) {\n    return moveSel(view, range => range.empty ? view.moveByChar(range, forward) : rangeEnd(range, forward));\n}\nfunction ltrAtCursor(view) {\n    return view.textDirectionAt(view.state.selection.main.head) == Direction.LTR;\n}\n/**\nMove the selection one character to the left (which is backward in\nleft-to-right text, forward in right-to-left text).\n*/\nconst cursorCharLeft = view => cursorByChar(view, !ltrAtCursor(view));\n/**\nMove the selection one character to the right.\n*/\nconst cursorCharRight = view => cursorByChar(view, ltrAtCursor(view));\n/**\nMove the selection one character forward.\n*/\nconst cursorCharForward = view => cursorByChar(view, true);\n/**\nMove the selection one character backward.\n*/\nconst cursorCharBackward = view => cursorByChar(view, false);\nfunction byCharLogical(state, range, forward) {\n    let pos = range.head, line = state.doc.lineAt(pos);\n    if (pos == (forward ? line.to : line.from))\n        pos = forward ? Math.min(state.doc.length, line.to + 1) : Math.max(0, line.from - 1);\n    else\n        pos = line.from + findClusterBreak(line.text, pos - line.from, forward);\n    return EditorSelection.cursor(pos, forward ? -1 : 1);\n}\nfunction moveByCharLogical(target, forward) {\n    return moveSel(target, range => range.empty ? byCharLogical(target.state, range, forward) : rangeEnd(range, forward));\n}\n/**\nMove the selection one character forward, in logical\n(non-text-direction-aware) string index order.\n*/\nconst cursorCharForwardLogical = target => moveByCharLogical(target, true);\n/**\nMove the selection one character backward, in logical string index\norder.\n*/\nconst cursorCharBackwardLogical = target => moveByCharLogical(target, false);\nfunction cursorByGroup(view, forward) {\n    return moveSel(view, range => range.empty ? view.moveByGroup(range, forward) : rangeEnd(range, forward));\n}\n/**\nMove the selection to the left across one group of word or\nnon-word (but also non-space) characters.\n*/\nconst cursorGroupLeft = view => cursorByGroup(view, !ltrAtCursor(view));\n/**\nMove the selection one group to the right.\n*/\nconst cursorGroupRight = view => cursorByGroup(view, ltrAtCursor(view));\n/**\nMove the selection one group forward.\n*/\nconst cursorGroupForward = view => cursorByGroup(view, true);\n/**\nMove the selection one group backward.\n*/\nconst cursorGroupBackward = view => cursorByGroup(view, false);\nconst segmenter = typeof Intl != \"undefined\" && Intl.Segmenter ?\n    /*@__PURE__*/new (Intl.Segmenter)(undefined, { granularity: \"word\" }) : null;\nfunction moveBySubword(view, range, forward) {\n    let categorize = view.state.charCategorizer(range.from);\n    let cat = CharCategory.Space, pos = range.from, steps = 0;\n    let done = false, sawUpper = false, sawLower = false;\n    let step = (next) => {\n        if (done)\n            return false;\n        pos += forward ? next.length : -next.length;\n        let nextCat = categorize(next), ahead;\n        if (nextCat == CharCategory.Word && next.charCodeAt(0) < 128 && /[\\W_]/.test(next))\n            nextCat = -1; // Treat word punctuation specially\n        if (cat == CharCategory.Space)\n            cat = nextCat;\n        if (cat != nextCat)\n            return false;\n        if (cat == CharCategory.Word) {\n            if (next.toLowerCase() == next) {\n                if (!forward && sawUpper)\n                    return false;\n                sawLower = true;\n            }\n            else if (sawLower) {\n                if (forward)\n                    return false;\n                done = true;\n            }\n            else {\n                if (sawUpper && forward && categorize(ahead = view.state.sliceDoc(pos, pos + 1)) == CharCategory.Word &&\n                    ahead.toLowerCase() == ahead)\n                    return false;\n                sawUpper = true;\n            }\n        }\n        steps++;\n        return true;\n    };\n    let end = view.moveByChar(range, forward, start => {\n        step(start);\n        return step;\n    });\n    if (segmenter && cat == CharCategory.Word && end.from == range.from + steps * (forward ? 1 : -1)) {\n        let from = Math.min(range.head, end.head), to = Math.max(range.head, end.head);\n        let skipped = view.state.sliceDoc(from, to);\n        if (skipped.length > 1 && /[\\u4E00-\\uffff]/.test(skipped)) {\n            let segments = Array.from(segmenter.segment(skipped));\n            if (segments.length > 1) {\n                if (forward)\n                    return EditorSelection.cursor(range.head + segments[1].index, -1);\n                return EditorSelection.cursor(end.head + segments[segments.length - 1].index, 1);\n            }\n        }\n    }\n    return end;\n}\nfunction cursorBySubword(view, forward) {\n    return moveSel(view, range => range.empty ? moveBySubword(view, range, forward) : rangeEnd(range, forward));\n}\n/**\nMove the selection one group or camel-case subword forward.\n*/\nconst cursorSubwordForward = view => cursorBySubword(view, true);\n/**\nMove the selection one group or camel-case subword backward.\n*/\nconst cursorSubwordBackward = view => cursorBySubword(view, false);\nfunction interestingNode(state, node, bracketProp) {\n    if (node.type.prop(bracketProp))\n        return true;\n    let len = node.to - node.from;\n    return len && (len > 2 || /[^\\s,.;:]/.test(state.sliceDoc(node.from, node.to))) || node.firstChild;\n}\nfunction moveBySyntax(state, start, forward) {\n    let pos = syntaxTree(state).resolveInner(start.head);\n    let bracketProp = forward ? NodeProp.closedBy : NodeProp.openedBy;\n    // Scan forward through child nodes to see if there's an interesting\n    // node ahead.\n    for (let at = start.head;;) {\n        let next = forward ? pos.childAfter(at) : pos.childBefore(at);\n        if (!next)\n            break;\n        if (interestingNode(state, next, bracketProp))\n            pos = next;\n        else\n            at = forward ? next.to : next.from;\n    }\n    let bracket = pos.type.prop(bracketProp), match, newPos;\n    if (bracket && (match = forward ? matchBrackets(state, pos.from, 1) : matchBrackets(state, pos.to, -1)) && match.matched)\n        newPos = forward ? match.end.to : match.end.from;\n    else\n        newPos = forward ? pos.to : pos.from;\n    return EditorSelection.cursor(newPos, forward ? -1 : 1);\n}\n/**\nMove the cursor over the next syntactic element to the left.\n*/\nconst cursorSyntaxLeft = view => moveSel(view, range => moveBySyntax(view.state, range, !ltrAtCursor(view)));\n/**\nMove the cursor over the next syntactic element to the right.\n*/\nconst cursorSyntaxRight = view => moveSel(view, range => moveBySyntax(view.state, range, ltrAtCursor(view)));\nfunction cursorByLine(view, forward) {\n    return moveSel(view, range => {\n        if (!range.empty)\n            return rangeEnd(range, forward);\n        let moved = view.moveVertically(range, forward);\n        return moved.head != range.head ? moved : view.moveToLineBoundary(range, forward);\n    });\n}\n/**\nMove the selection one line up.\n*/\nconst cursorLineUp = view => cursorByLine(view, false);\n/**\nMove the selection one line down.\n*/\nconst cursorLineDown = view => cursorByLine(view, true);\nfunction pageInfo(view) {\n    let selfScroll = view.scrollDOM.clientHeight < view.scrollDOM.scrollHeight - 2;\n    let marginTop = 0, marginBottom = 0, height;\n    if (selfScroll) {\n        for (let source of view.state.facet(EditorView.scrollMargins)) {\n            let margins = source(view);\n            if (margins === null || margins === void 0 ? void 0 : margins.top)\n                marginTop = Math.max(margins === null || margins === void 0 ? void 0 : margins.top, marginTop);\n            if (margins === null || margins === void 0 ? void 0 : margins.bottom)\n                marginBottom = Math.max(margins === null || margins === void 0 ? void 0 : margins.bottom, marginBottom);\n        }\n        height = view.scrollDOM.clientHeight - marginTop - marginBottom;\n    }\n    else {\n        height = (view.dom.ownerDocument.defaultView || window).innerHeight;\n    }\n    return { marginTop, marginBottom, selfScroll,\n        height: Math.max(view.defaultLineHeight, height - 5) };\n}\nfunction cursorByPage(view, forward) {\n    let page = pageInfo(view);\n    let { state } = view, selection = updateSel(state.selection, range => {\n        return range.empty ? view.moveVertically(range, forward, page.height)\n            : rangeEnd(range, forward);\n    });\n    if (selection.eq(state.selection))\n        return false;\n    let effect;\n    if (page.selfScroll) {\n        let startPos = view.coordsAtPos(state.selection.main.head);\n        let scrollRect = view.scrollDOM.getBoundingClientRect();\n        let scrollTop = scrollRect.top + page.marginTop, scrollBottom = scrollRect.bottom - page.marginBottom;\n        if (startPos && startPos.top > scrollTop && startPos.bottom < scrollBottom)\n            effect = EditorView.scrollIntoView(selection.main.head, { y: \"start\", yMargin: startPos.top - scrollTop });\n    }\n    view.dispatch(setSel(state, selection), { effects: effect });\n    return true;\n}\n/**\nMove the selection one page up.\n*/\nconst cursorPageUp = view => cursorByPage(view, false);\n/**\nMove the selection one page down.\n*/\nconst cursorPageDown = view => cursorByPage(view, true);\nfunction moveByLineBoundary(view, start, forward) {\n    let line = view.lineBlockAt(start.head), moved = view.moveToLineBoundary(start, forward);\n    if (moved.head == start.head && moved.head != (forward ? line.to : line.from))\n        moved = view.moveToLineBoundary(start, forward, false);\n    if (!forward && moved.head == line.from && line.length) {\n        let space = /^\\s*/.exec(view.state.sliceDoc(line.from, Math.min(line.from + 100, line.to)))[0].length;\n        if (space && start.head != line.from + space)\n            moved = EditorSelection.cursor(line.from + space);\n    }\n    return moved;\n}\n/**\nMove the selection to the next line wrap point, or to the end of\nthe line if there isn't one left on this line.\n*/\nconst cursorLineBoundaryForward = view => moveSel(view, range => moveByLineBoundary(view, range, true));\n/**\nMove the selection to previous line wrap point, or failing that to\nthe start of the line. If the line is indented, and the cursor\nisn't already at the end of the indentation, this will move to the\nend of the indentation instead of the start of the line.\n*/\nconst cursorLineBoundaryBackward = view => moveSel(view, range => moveByLineBoundary(view, range, false));\n/**\nMove the selection one line wrap point to the left.\n*/\nconst cursorLineBoundaryLeft = view => moveSel(view, range => moveByLineBoundary(view, range, !ltrAtCursor(view)));\n/**\nMove the selection one line wrap point to the right.\n*/\nconst cursorLineBoundaryRight = view => moveSel(view, range => moveByLineBoundary(view, range, ltrAtCursor(view)));\n/**\nMove the selection to the start of the line.\n*/\nconst cursorLineStart = view => moveSel(view, range => EditorSelection.cursor(view.lineBlockAt(range.head).from, 1));\n/**\nMove the selection to the end of the line.\n*/\nconst cursorLineEnd = view => moveSel(view, range => EditorSelection.cursor(view.lineBlockAt(range.head).to, -1));\nfunction toMatchingBracket(state, dispatch, extend) {\n    let found = false, selection = updateSel(state.selection, range => {\n        let matching = matchBrackets(state, range.head, -1)\n            || matchBrackets(state, range.head, 1)\n            || (range.head > 0 && matchBrackets(state, range.head - 1, 1))\n            || (range.head < state.doc.length && matchBrackets(state, range.head + 1, -1));\n        if (!matching || !matching.end)\n            return range;\n        found = true;\n        let head = matching.start.from == range.head ? matching.end.to : matching.end.from;\n        return extend ? EditorSelection.range(range.anchor, head) : EditorSelection.cursor(head);\n    });\n    if (!found)\n        return false;\n    dispatch(setSel(state, selection));\n    return true;\n}\n/**\nMove the selection to the bracket matching the one it is currently\non, if any.\n*/\nconst cursorMatchingBracket = ({ state, dispatch }) => toMatchingBracket(state, dispatch, false);\n/**\nExtend the selection to the bracket matching the one the selection\nhead is currently on, if any.\n*/\nconst selectMatchingBracket = ({ state, dispatch }) => toMatchingBracket(state, dispatch, true);\nfunction extendSel(target, how) {\n    let selection = updateSel(target.state.selection, range => {\n        let head = how(range);\n        return EditorSelection.range(range.anchor, head.head, head.goalColumn, head.bidiLevel || undefined);\n    });\n    if (selection.eq(target.state.selection))\n        return false;\n    target.dispatch(setSel(target.state, selection));\n    return true;\n}\nfunction selectByChar(view, forward) {\n    return extendSel(view, range => view.moveByChar(range, forward));\n}\n/**\nMove the selection head one character to the left, while leaving\nthe anchor in place.\n*/\nconst selectCharLeft = view => selectByChar(view, !ltrAtCursor(view));\n/**\nMove the selection head one character to the right.\n*/\nconst selectCharRight = view => selectByChar(view, ltrAtCursor(view));\n/**\nMove the selection head one character forward.\n*/\nconst selectCharForward = view => selectByChar(view, true);\n/**\nMove the selection head one character backward.\n*/\nconst selectCharBackward = view => selectByChar(view, false);\n/**\nMove the selection head one character forward by logical\n(non-direction aware) string index order.\n*/\nconst selectCharForwardLogical = target => extendSel(target, range => byCharLogical(target.state, range, true));\n/**\nMove the selection head one character backward by logical string\nindex order.\n*/\nconst selectCharBackwardLogical = target => extendSel(target, range => byCharLogical(target.state, range, false));\nfunction selectByGroup(view, forward) {\n    return extendSel(view, range => view.moveByGroup(range, forward));\n}\n/**\nMove the selection head one [group](https://codemirror.net/6/docs/ref/#commands.cursorGroupLeft) to\nthe left.\n*/\nconst selectGroupLeft = view => selectByGroup(view, !ltrAtCursor(view));\n/**\nMove the selection head one group to the right.\n*/\nconst selectGroupRight = view => selectByGroup(view, ltrAtCursor(view));\n/**\nMove the selection head one group forward.\n*/\nconst selectGroupForward = view => selectByGroup(view, true);\n/**\nMove the selection head one group backward.\n*/\nconst selectGroupBackward = view => selectByGroup(view, false);\nfunction selectBySubword(view, forward) {\n    return extendSel(view, range => moveBySubword(view, range, forward));\n}\n/**\nMove the selection head one group or camel-case subword forward.\n*/\nconst selectSubwordForward = view => selectBySubword(view, true);\n/**\nMove the selection head one group or subword backward.\n*/\nconst selectSubwordBackward = view => selectBySubword(view, false);\n/**\nMove the selection head over the next syntactic element to the left.\n*/\nconst selectSyntaxLeft = view => extendSel(view, range => moveBySyntax(view.state, range, !ltrAtCursor(view)));\n/**\nMove the selection head over the next syntactic element to the right.\n*/\nconst selectSyntaxRight = view => extendSel(view, range => moveBySyntax(view.state, range, ltrAtCursor(view)));\nfunction selectByLine(view, forward) {\n    return extendSel(view, range => view.moveVertically(range, forward));\n}\n/**\nMove the selection head one line up.\n*/\nconst selectLineUp = view => selectByLine(view, false);\n/**\nMove the selection head one line down.\n*/\nconst selectLineDown = view => selectByLine(view, true);\nfunction selectByPage(view, forward) {\n    return extendSel(view, range => view.moveVertically(range, forward, pageInfo(view).height));\n}\n/**\nMove the selection head one page up.\n*/\nconst selectPageUp = view => selectByPage(view, false);\n/**\nMove the selection head one page down.\n*/\nconst selectPageDown = view => selectByPage(view, true);\n/**\nMove the selection head to the next line boundary.\n*/\nconst selectLineBoundaryForward = view => extendSel(view, range => moveByLineBoundary(view, range, true));\n/**\nMove the selection head to the previous line boundary.\n*/\nconst selectLineBoundaryBackward = view => extendSel(view, range => moveByLineBoundary(view, range, false));\n/**\nMove the selection head one line boundary to the left.\n*/\nconst selectLineBoundaryLeft = view => extendSel(view, range => moveByLineBoundary(view, range, !ltrAtCursor(view)));\n/**\nMove the selection head one line boundary to the right.\n*/\nconst selectLineBoundaryRight = view => extendSel(view, range => moveByLineBoundary(view, range, ltrAtCursor(view)));\n/**\nMove the selection head to the start of the line.\n*/\nconst selectLineStart = view => extendSel(view, range => EditorSelection.cursor(view.lineBlockAt(range.head).from));\n/**\nMove the selection head to the end of the line.\n*/\nconst selectLineEnd = view => extendSel(view, range => EditorSelection.cursor(view.lineBlockAt(range.head).to));\n/**\nMove the selection to the start of the document.\n*/\nconst cursorDocStart = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: 0 }));\n    return true;\n};\n/**\nMove the selection to the end of the document.\n*/\nconst cursorDocEnd = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: state.doc.length }));\n    return true;\n};\n/**\nMove the selection head to the start of the document.\n*/\nconst selectDocStart = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: state.selection.main.anchor, head: 0 }));\n    return true;\n};\n/**\nMove the selection head to the end of the document.\n*/\nconst selectDocEnd = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: state.selection.main.anchor, head: state.doc.length }));\n    return true;\n};\n/**\nSelect the entire document.\n*/\nconst selectAll = ({ state, dispatch }) => {\n    dispatch(state.update({ selection: { anchor: 0, head: state.doc.length }, userEvent: \"select\" }));\n    return true;\n};\n/**\nExpand the selection to cover entire lines.\n*/\nconst selectLine = ({ state, dispatch }) => {\n    let ranges = selectedLineBlocks(state).map(({ from, to }) => EditorSelection.range(from, Math.min(to + 1, state.doc.length)));\n    dispatch(state.update({ selection: EditorSelection.create(ranges), userEvent: \"select\" }));\n    return true;\n};\n/**\nSelect the next syntactic construct that is larger than the\nselection. Note that this will only work insofar as the language\n[provider](https://codemirror.net/6/docs/ref/#language.language) you use builds up a full\nsyntax tree.\n*/\nconst selectParentSyntax = ({ state, dispatch }) => {\n    let selection = updateSel(state.selection, range => {\n        let tree = syntaxTree(state), stack = tree.resolveStack(range.from, 1);\n        if (range.empty) {\n            let stackBefore = tree.resolveStack(range.from, -1);\n            if (stackBefore.node.from >= stack.node.from && stackBefore.node.to <= stack.node.to)\n                stack = stackBefore;\n        }\n        for (let cur = stack; cur; cur = cur.next) {\n            let { node } = cur;\n            if (((node.from < range.from && node.to >= range.to) ||\n                (node.to > range.to && node.from <= range.from)) &&\n                cur.next)\n                return EditorSelection.range(node.to, node.from);\n        }\n        return range;\n    });\n    if (selection.eq(state.selection))\n        return false;\n    dispatch(setSel(state, selection));\n    return true;\n};\n/**\nSimplify the current selection. When multiple ranges are selected,\nreduce it to its main range. Otherwise, if the selection is\nnon-empty, convert it to a cursor selection.\n*/\nconst simplifySelection = ({ state, dispatch }) => {\n    let cur = state.selection, selection = null;\n    if (cur.ranges.length > 1)\n        selection = EditorSelection.create([cur.main]);\n    else if (!cur.main.empty)\n        selection = EditorSelection.create([EditorSelection.cursor(cur.main.head)]);\n    if (!selection)\n        return false;\n    dispatch(setSel(state, selection));\n    return true;\n};\nfunction deleteBy(target, by) {\n    if (target.state.readOnly)\n        return false;\n    let event = \"delete.selection\", { state } = target;\n    let changes = state.changeByRange(range => {\n        let { from, to } = range;\n        if (from == to) {\n            let towards = by(range);\n            if (towards < from) {\n                event = \"delete.backward\";\n                towards = skipAtomic(target, towards, false);\n            }\n            else if (towards > from) {\n                event = \"delete.forward\";\n                towards = skipAtomic(target, towards, true);\n            }\n            from = Math.min(from, towards);\n            to = Math.max(to, towards);\n        }\n        else {\n            from = skipAtomic(target, from, false);\n            to = skipAtomic(target, to, true);\n        }\n        return from == to ? { range } : { changes: { from, to }, range: EditorSelection.cursor(from, from < range.head ? -1 : 1) };\n    });\n    if (changes.changes.empty)\n        return false;\n    target.dispatch(state.update(changes, {\n        scrollIntoView: true,\n        userEvent: event,\n        effects: event == \"delete.selection\" ? EditorView.announce.of(state.phrase(\"Selection deleted\")) : undefined\n    }));\n    return true;\n}\nfunction skipAtomic(target, pos, forward) {\n    if (target instanceof EditorView)\n        for (let ranges of target.state.facet(EditorView.atomicRanges).map(f => f(target)))\n            ranges.between(pos, pos, (from, to) => {\n                if (from < pos && to > pos)\n                    pos = forward ? to : from;\n            });\n    return pos;\n}\nconst deleteByChar = (target, forward, byIndentUnit) => deleteBy(target, range => {\n    let pos = range.from, { state } = target, line = state.doc.lineAt(pos), before, targetPos;\n    if (byIndentUnit && !forward && pos > line.from && pos < line.from + 200 &&\n        !/[^ \\t]/.test(before = line.text.slice(0, pos - line.from))) {\n        if (before[before.length - 1] == \"\\t\")\n            return pos - 1;\n        let col = countColumn(before, state.tabSize), drop = col % getIndentUnit(state) || getIndentUnit(state);\n        for (let i = 0; i < drop && before[before.length - 1 - i] == \" \"; i++)\n            pos--;\n        targetPos = pos;\n    }\n    else {\n        targetPos = findClusterBreak(line.text, pos - line.from, forward, forward) + line.from;\n        if (targetPos == pos && line.number != (forward ? state.doc.lines : 1))\n            targetPos += forward ? 1 : -1;\n        else if (!forward && /[\\ufe00-\\ufe0f]/.test(line.text.slice(targetPos - line.from, pos - line.from)))\n            targetPos = findClusterBreak(line.text, targetPos - line.from, false, false) + line.from;\n    }\n    return targetPos;\n});\n/**\nDelete the selection, or, for cursor selections, the character or\nindentation unit before the cursor.\n*/\nconst deleteCharBackward = view => deleteByChar(view, false, true);\n/**\nDelete the selection or the character before the cursor. Does not\nimplement any extended behavior like deleting whole indentation\nunits in one go.\n*/\nconst deleteCharBackwardStrict = view => deleteByChar(view, false, false);\n/**\nDelete the selection or the character after the cursor.\n*/\nconst deleteCharForward = view => deleteByChar(view, true, false);\nconst deleteByGroup = (target, forward) => deleteBy(target, range => {\n    let pos = range.head, { state } = target, line = state.doc.lineAt(pos);\n    let categorize = state.charCategorizer(pos);\n    for (let cat = null;;) {\n        if (pos == (forward ? line.to : line.from)) {\n            if (pos == range.head && line.number != (forward ? state.doc.lines : 1))\n                pos += forward ? 1 : -1;\n            break;\n        }\n        let next = findClusterBreak(line.text, pos - line.from, forward) + line.from;\n        let nextChar = line.text.slice(Math.min(pos, next) - line.from, Math.max(pos, next) - line.from);\n        let nextCat = categorize(nextChar);\n        if (cat != null && nextCat != cat)\n            break;\n        if (nextChar != \" \" || pos != range.head)\n            cat = nextCat;\n        pos = next;\n    }\n    return pos;\n});\n/**\nDelete the selection or backward until the end of the next\n[group](https://codemirror.net/6/docs/ref/#view.EditorView.moveByGroup), only skipping groups of\nwhitespace when they consist of a single space.\n*/\nconst deleteGroupBackward = target => deleteByGroup(target, false);\n/**\nDelete the selection or forward until the end of the next group.\n*/\nconst deleteGroupForward = target => deleteByGroup(target, true);\n/**\nDelete the selection, or, if it is a cursor selection, delete to\nthe end of the line. If the cursor is directly at the end of the\nline, delete the line break after it.\n*/\nconst deleteToLineEnd = view => deleteBy(view, range => {\n    let lineEnd = view.lineBlockAt(range.head).to;\n    return range.head < lineEnd ? lineEnd : Math.min(view.state.doc.length, range.head + 1);\n});\n/**\nDelete the selection, or, if it is a cursor selection, delete to\nthe start of the line. If the cursor is directly at the start of the\nline, delete the line break before it.\n*/\nconst deleteToLineStart = view => deleteBy(view, range => {\n    let lineStart = view.lineBlockAt(range.head).from;\n    return range.head > lineStart ? lineStart : Math.max(0, range.head - 1);\n});\n/**\nDelete the selection, or, if it is a cursor selection, delete to\nthe start of the line or the next line wrap before the cursor.\n*/\nconst deleteLineBoundaryBackward = view => deleteBy(view, range => {\n    let lineStart = view.moveToLineBoundary(range, false).head;\n    return range.head > lineStart ? lineStart : Math.max(0, range.head - 1);\n});\n/**\nDelete the selection, or, if it is a cursor selection, delete to\nthe end of the line or the next line wrap after the cursor.\n*/\nconst deleteLineBoundaryForward = view => deleteBy(view, range => {\n    let lineStart = view.moveToLineBoundary(range, true).head;\n    return range.head < lineStart ? lineStart : Math.min(view.state.doc.length, range.head + 1);\n});\n/**\nDelete all whitespace directly before a line end from the\ndocument.\n*/\nconst deleteTrailingWhitespace = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    let changes = [];\n    for (let pos = 0, prev = \"\", iter = state.doc.iter();;) {\n        iter.next();\n        if (iter.lineBreak || iter.done) {\n            let trailing = prev.search(/\\s+$/);\n            if (trailing > -1)\n                changes.push({ from: pos - (prev.length - trailing), to: pos });\n            if (iter.done)\n                break;\n            prev = \"\";\n        }\n        else {\n            prev = iter.value;\n        }\n        pos += iter.value.length;\n    }\n    if (!changes.length)\n        return false;\n    dispatch(state.update({ changes, userEvent: \"delete\" }));\n    return true;\n};\n/**\nReplace each selection range with a line break, leaving the cursor\non the line before the break.\n*/\nconst splitLine = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    let changes = state.changeByRange(range => {\n        return { changes: { from: range.from, to: range.to, insert: Text.of([\"\", \"\"]) },\n            range: EditorSelection.cursor(range.from) };\n    });\n    dispatch(state.update(changes, { scrollIntoView: true, userEvent: \"input\" }));\n    return true;\n};\n/**\nFlip the characters before and after the cursor(s).\n*/\nconst transposeChars = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    let changes = state.changeByRange(range => {\n        if (!range.empty || range.from == 0 || range.from == state.doc.length)\n            return { range };\n        let pos = range.from, line = state.doc.lineAt(pos);\n        let from = pos == line.from ? pos - 1 : findClusterBreak(line.text, pos - line.from, false) + line.from;\n        let to = pos == line.to ? pos + 1 : findClusterBreak(line.text, pos - line.from, true) + line.from;\n        return { changes: { from, to, insert: state.doc.slice(pos, to).append(state.doc.slice(from, pos)) },\n            range: EditorSelection.cursor(to) };\n    });\n    if (changes.changes.empty)\n        return false;\n    dispatch(state.update(changes, { scrollIntoView: true, userEvent: \"move.character\" }));\n    return true;\n};\nfunction selectedLineBlocks(state) {\n    let blocks = [], upto = -1;\n    for (let range of state.selection.ranges) {\n        let startLine = state.doc.lineAt(range.from), endLine = state.doc.lineAt(range.to);\n        if (!range.empty && range.to == endLine.from)\n            endLine = state.doc.lineAt(range.to - 1);\n        if (upto >= startLine.number) {\n            let prev = blocks[blocks.length - 1];\n            prev.to = endLine.to;\n            prev.ranges.push(range);\n        }\n        else {\n            blocks.push({ from: startLine.from, to: endLine.to, ranges: [range] });\n        }\n        upto = endLine.number + 1;\n    }\n    return blocks;\n}\nfunction moveLine(state, dispatch, forward) {\n    if (state.readOnly)\n        return false;\n    let changes = [], ranges = [];\n    for (let block of selectedLineBlocks(state)) {\n        if (forward ? block.to == state.doc.length : block.from == 0)\n            continue;\n        let nextLine = state.doc.lineAt(forward ? block.to + 1 : block.from - 1);\n        let size = nextLine.length + 1;\n        if (forward) {\n            changes.push({ from: block.to, to: nextLine.to }, { from: block.from, insert: nextLine.text + state.lineBreak });\n            for (let r of block.ranges)\n                ranges.push(EditorSelection.range(Math.min(state.doc.length, r.anchor + size), Math.min(state.doc.length, r.head + size)));\n        }\n        else {\n            changes.push({ from: nextLine.from, to: block.from }, { from: block.to, insert: state.lineBreak + nextLine.text });\n            for (let r of block.ranges)\n                ranges.push(EditorSelection.range(r.anchor - size, r.head - size));\n        }\n    }\n    if (!changes.length)\n        return false;\n    dispatch(state.update({\n        changes,\n        scrollIntoView: true,\n        selection: EditorSelection.create(ranges, state.selection.mainIndex),\n        userEvent: \"move.line\"\n    }));\n    return true;\n}\n/**\nMove the selected lines up one line.\n*/\nconst moveLineUp = ({ state, dispatch }) => moveLine(state, dispatch, false);\n/**\nMove the selected lines down one line.\n*/\nconst moveLineDown = ({ state, dispatch }) => moveLine(state, dispatch, true);\nfunction copyLine(state, dispatch, forward) {\n    if (state.readOnly)\n        return false;\n    let changes = [];\n    for (let block of selectedLineBlocks(state)) {\n        if (forward)\n            changes.push({ from: block.from, insert: state.doc.slice(block.from, block.to) + state.lineBreak });\n        else\n            changes.push({ from: block.to, insert: state.lineBreak + state.doc.slice(block.from, block.to) });\n    }\n    dispatch(state.update({ changes, scrollIntoView: true, userEvent: \"input.copyline\" }));\n    return true;\n}\n/**\nCreate a copy of the selected lines. Keep the selection in the top copy.\n*/\nconst copyLineUp = ({ state, dispatch }) => copyLine(state, dispatch, false);\n/**\nCreate a copy of the selected lines. Keep the selection in the bottom copy.\n*/\nconst copyLineDown = ({ state, dispatch }) => copyLine(state, dispatch, true);\n/**\nDelete selected lines.\n*/\nconst deleteLine = view => {\n    if (view.state.readOnly)\n        return false;\n    let { state } = view, changes = state.changes(selectedLineBlocks(state).map(({ from, to }) => {\n        if (from > 0)\n            from--;\n        else if (to < state.doc.length)\n            to++;\n        return { from, to };\n    }));\n    let selection = updateSel(state.selection, range => {\n        let dist = undefined;\n        if (view.lineWrapping) {\n            let block = view.lineBlockAt(range.head), pos = view.coordsAtPos(range.head, range.assoc || 1);\n            if (pos)\n                dist = (block.bottom + view.documentTop) - pos.bottom + view.defaultLineHeight / 2;\n        }\n        return view.moveVertically(range, true, dist);\n    }).map(changes);\n    view.dispatch({ changes, selection, scrollIntoView: true, userEvent: \"delete.line\" });\n    return true;\n};\n/**\nReplace the selection with a newline.\n*/\nconst insertNewline = ({ state, dispatch }) => {\n    dispatch(state.update(state.replaceSelection(state.lineBreak), { scrollIntoView: true, userEvent: \"input\" }));\n    return true;\n};\n/**\nReplace the selection with a newline and the same amount of\nindentation as the line above.\n*/\nconst insertNewlineKeepIndent = ({ state, dispatch }) => {\n    dispatch(state.update(state.changeByRange(range => {\n        let indent = /^\\s*/.exec(state.doc.lineAt(range.from).text)[0];\n        return {\n            changes: { from: range.from, to: range.to, insert: state.lineBreak + indent },\n            range: EditorSelection.cursor(range.from + indent.length + 1)\n        };\n    }), { scrollIntoView: true, userEvent: \"input\" }));\n    return true;\n};\nfunction isBetweenBrackets(state, pos) {\n    if (/\\(\\)|\\[\\]|\\{\\}/.test(state.sliceDoc(pos - 1, pos + 1)))\n        return { from: pos, to: pos };\n    let context = syntaxTree(state).resolveInner(pos);\n    let before = context.childBefore(pos), after = context.childAfter(pos), closedBy;\n    if (before && after && before.to <= pos && after.from >= pos &&\n        (closedBy = before.type.prop(NodeProp.closedBy)) && closedBy.indexOf(after.name) > -1 &&\n        state.doc.lineAt(before.to).from == state.doc.lineAt(after.from).from &&\n        !/\\S/.test(state.sliceDoc(before.to, after.from)))\n        return { from: before.to, to: after.from };\n    return null;\n}\n/**\nReplace the selection with a newline and indent the newly created\nline(s). If the current line consists only of whitespace, this\nwill also delete that whitespace. When the cursor is between\nmatching brackets, an additional newline will be inserted after\nthe cursor.\n*/\nconst insertNewlineAndIndent = /*@__PURE__*/newlineAndIndent(false);\n/**\nCreate a blank, indented line below the current line.\n*/\nconst insertBlankLine = /*@__PURE__*/newlineAndIndent(true);\nfunction newlineAndIndent(atEof) {\n    return ({ state, dispatch }) => {\n        if (state.readOnly)\n            return false;\n        let changes = state.changeByRange(range => {\n            let { from, to } = range, line = state.doc.lineAt(from);\n            let explode = !atEof && from == to && isBetweenBrackets(state, from);\n            if (atEof)\n                from = to = (to <= line.to ? line : state.doc.lineAt(to)).to;\n            let cx = new IndentContext(state, { simulateBreak: from, simulateDoubleBreak: !!explode });\n            let indent = getIndentation(cx, from);\n            if (indent == null)\n                indent = countColumn(/^\\s*/.exec(state.doc.lineAt(from).text)[0], state.tabSize);\n            while (to < line.to && /\\s/.test(line.text[to - line.from]))\n                to++;\n            if (explode)\n                ({ from, to } = explode);\n            else if (from > line.from && from < line.from + 100 && !/\\S/.test(line.text.slice(0, from)))\n                from = line.from;\n            let insert = [\"\", indentString(state, indent)];\n            if (explode)\n                insert.push(indentString(state, cx.lineIndent(line.from, -1)));\n            return { changes: { from, to, insert: Text.of(insert) },\n                range: EditorSelection.cursor(from + 1 + insert[1].length) };\n        });\n        dispatch(state.update(changes, { scrollIntoView: true, userEvent: \"input\" }));\n        return true;\n    };\n}\nfunction changeBySelectedLine(state, f) {\n    let atLine = -1;\n    return state.changeByRange(range => {\n        let changes = [];\n        for (let pos = range.from; pos <= range.to;) {\n            let line = state.doc.lineAt(pos);\n            if (line.number > atLine && (range.empty || range.to > line.from)) {\n                f(line, changes, range);\n                atLine = line.number;\n            }\n            pos = line.to + 1;\n        }\n        let changeSet = state.changes(changes);\n        return { changes,\n            range: EditorSelection.range(changeSet.mapPos(range.anchor, 1), changeSet.mapPos(range.head, 1)) };\n    });\n}\n/**\nAuto-indent the selected lines. This uses the [indentation service\nfacet](https://codemirror.net/6/docs/ref/#language.indentService) as source for auto-indent\ninformation.\n*/\nconst indentSelection = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    let updated = Object.create(null);\n    let context = new IndentContext(state, { overrideIndentation: start => {\n            let found = updated[start];\n            return found == null ? -1 : found;\n        } });\n    let changes = changeBySelectedLine(state, (line, changes, range) => {\n        let indent = getIndentation(context, line.from);\n        if (indent == null)\n            return;\n        if (!/\\S/.test(line.text))\n            indent = 0;\n        let cur = /^\\s*/.exec(line.text)[0];\n        let norm = indentString(state, indent);\n        if (cur != norm || range.from < line.from + cur.length) {\n            updated[line.from] = indent;\n            changes.push({ from: line.from, to: line.from + cur.length, insert: norm });\n        }\n    });\n    if (!changes.changes.empty)\n        dispatch(state.update(changes, { userEvent: \"indent\" }));\n    return true;\n};\n/**\nAdd a [unit](https://codemirror.net/6/docs/ref/#language.indentUnit) of indentation to all selected\nlines.\n*/\nconst indentMore = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    dispatch(state.update(changeBySelectedLine(state, (line, changes) => {\n        changes.push({ from: line.from, insert: state.facet(indentUnit) });\n    }), { userEvent: \"input.indent\" }));\n    return true;\n};\n/**\nRemove a [unit](https://codemirror.net/6/docs/ref/#language.indentUnit) of indentation from all\nselected lines.\n*/\nconst indentLess = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    dispatch(state.update(changeBySelectedLine(state, (line, changes) => {\n        let space = /^\\s*/.exec(line.text)[0];\n        if (!space)\n            return;\n        let col = countColumn(space, state.tabSize), keep = 0;\n        let insert = indentString(state, Math.max(0, col - getIndentUnit(state)));\n        while (keep < space.length && keep < insert.length && space.charCodeAt(keep) == insert.charCodeAt(keep))\n            keep++;\n        changes.push({ from: line.from + keep, to: line.from + space.length, insert: insert.slice(keep) });\n    }), { userEvent: \"delete.dedent\" }));\n    return true;\n};\n/**\nEnables or disables\n[tab-focus mode](https://codemirror.net/6/docs/ref/#view.EditorView.setTabFocusMode). While on, this\nprevents the editor's key bindings from capturing Tab or\nShift-Tab, making it possible for the user to move focus out of\nthe editor with the keyboard.\n*/\nconst toggleTabFocusMode = view => {\n    view.setTabFocusMode();\n    return true;\n};\n/**\nTemporarily enables [tab-focus\nmode](https://codemirror.net/6/docs/ref/#view.EditorView.setTabFocusMode) for two seconds or until\nanother key is pressed.\n*/\nconst temporarilySetTabFocusMode = view => {\n    view.setTabFocusMode(2000);\n    return true;\n};\n/**\nInsert a tab character at the cursor or, if something is selected,\nuse [`indentMore`](https://codemirror.net/6/docs/ref/#commands.indentMore) to indent the entire\nselection.\n*/\nconst insertTab = ({ state, dispatch }) => {\n    if (state.selection.ranges.some(r => !r.empty))\n        return indentMore({ state, dispatch });\n    dispatch(state.update(state.replaceSelection(\"\\t\"), { scrollIntoView: true, userEvent: \"input\" }));\n    return true;\n};\n/**\nArray of key bindings containing the Emacs-style bindings that are\navailable on macOS by default.\n\n - Ctrl-b: [`cursorCharLeft`](https://codemirror.net/6/docs/ref/#commands.cursorCharLeft) ([`selectCharLeft`](https://codemirror.net/6/docs/ref/#commands.selectCharLeft) with Shift)\n - Ctrl-f: [`cursorCharRight`](https://codemirror.net/6/docs/ref/#commands.cursorCharRight) ([`selectCharRight`](https://codemirror.net/6/docs/ref/#commands.selectCharRight) with Shift)\n - Ctrl-p: [`cursorLineUp`](https://codemirror.net/6/docs/ref/#commands.cursorLineUp) ([`selectLineUp`](https://codemirror.net/6/docs/ref/#commands.selectLineUp) with Shift)\n - Ctrl-n: [`cursorLineDown`](https://codemirror.net/6/docs/ref/#commands.cursorLineDown) ([`selectLineDown`](https://codemirror.net/6/docs/ref/#commands.selectLineDown) with Shift)\n - Ctrl-a: [`cursorLineStart`](https://codemirror.net/6/docs/ref/#commands.cursorLineStart) ([`selectLineStart`](https://codemirror.net/6/docs/ref/#commands.selectLineStart) with Shift)\n - Ctrl-e: [`cursorLineEnd`](https://codemirror.net/6/docs/ref/#commands.cursorLineEnd) ([`selectLineEnd`](https://codemirror.net/6/docs/ref/#commands.selectLineEnd) with Shift)\n - Ctrl-d: [`deleteCharForward`](https://codemirror.net/6/docs/ref/#commands.deleteCharForward)\n - Ctrl-h: [`deleteCharBackward`](https://codemirror.net/6/docs/ref/#commands.deleteCharBackward)\n - Ctrl-k: [`deleteToLineEnd`](https://codemirror.net/6/docs/ref/#commands.deleteToLineEnd)\n - Ctrl-Alt-h: [`deleteGroupBackward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupBackward)\n - Ctrl-o: [`splitLine`](https://codemirror.net/6/docs/ref/#commands.splitLine)\n - Ctrl-t: [`transposeChars`](https://codemirror.net/6/docs/ref/#commands.transposeChars)\n - Ctrl-v: [`cursorPageDown`](https://codemirror.net/6/docs/ref/#commands.cursorPageDown)\n - Alt-v: [`cursorPageUp`](https://codemirror.net/6/docs/ref/#commands.cursorPageUp)\n*/\nconst emacsStyleKeymap = [\n    { key: \"Ctrl-b\", run: cursorCharLeft, shift: selectCharLeft, preventDefault: true },\n    { key: \"Ctrl-f\", run: cursorCharRight, shift: selectCharRight },\n    { key: \"Ctrl-p\", run: cursorLineUp, shift: selectLineUp },\n    { key: \"Ctrl-n\", run: cursorLineDown, shift: selectLineDown },\n    { key: \"Ctrl-a\", run: cursorLineStart, shift: selectLineStart },\n    { key: \"Ctrl-e\", run: cursorLineEnd, shift: selectLineEnd },\n    { key: \"Ctrl-d\", run: deleteCharForward },\n    { key: \"Ctrl-h\", run: deleteCharBackward },\n    { key: \"Ctrl-k\", run: deleteToLineEnd },\n    { key: \"Ctrl-Alt-h\", run: deleteGroupBackward },\n    { key: \"Ctrl-o\", run: splitLine },\n    { key: \"Ctrl-t\", run: transposeChars },\n    { key: \"Ctrl-v\", run: cursorPageDown },\n];\n/**\nAn array of key bindings closely sticking to platform-standard or\nwidely used bindings. (This includes the bindings from\n[`emacsStyleKeymap`](https://codemirror.net/6/docs/ref/#commands.emacsStyleKeymap), with their `key`\nproperty changed to `mac`.)\n\n - ArrowLeft: [`cursorCharLeft`](https://codemirror.net/6/docs/ref/#commands.cursorCharLeft) ([`selectCharLeft`](https://codemirror.net/6/docs/ref/#commands.selectCharLeft) with Shift)\n - ArrowRight: [`cursorCharRight`](https://codemirror.net/6/docs/ref/#commands.cursorCharRight) ([`selectCharRight`](https://codemirror.net/6/docs/ref/#commands.selectCharRight) with Shift)\n - Ctrl-ArrowLeft (Alt-ArrowLeft on macOS): [`cursorGroupLeft`](https://codemirror.net/6/docs/ref/#commands.cursorGroupLeft) ([`selectGroupLeft`](https://codemirror.net/6/docs/ref/#commands.selectGroupLeft) with Shift)\n - Ctrl-ArrowRight (Alt-ArrowRight on macOS): [`cursorGroupRight`](https://codemirror.net/6/docs/ref/#commands.cursorGroupRight) ([`selectGroupRight`](https://codemirror.net/6/docs/ref/#commands.selectGroupRight) with Shift)\n - Cmd-ArrowLeft (on macOS): [`cursorLineStart`](https://codemirror.net/6/docs/ref/#commands.cursorLineStart) ([`selectLineStart`](https://codemirror.net/6/docs/ref/#commands.selectLineStart) with Shift)\n - Cmd-ArrowRight (on macOS): [`cursorLineEnd`](https://codemirror.net/6/docs/ref/#commands.cursorLineEnd) ([`selectLineEnd`](https://codemirror.net/6/docs/ref/#commands.selectLineEnd) with Shift)\n - ArrowUp: [`cursorLineUp`](https://codemirror.net/6/docs/ref/#commands.cursorLineUp) ([`selectLineUp`](https://codemirror.net/6/docs/ref/#commands.selectLineUp) with Shift)\n - ArrowDown: [`cursorLineDown`](https://codemirror.net/6/docs/ref/#commands.cursorLineDown) ([`selectLineDown`](https://codemirror.net/6/docs/ref/#commands.selectLineDown) with Shift)\n - Cmd-ArrowUp (on macOS): [`cursorDocStart`](https://codemirror.net/6/docs/ref/#commands.cursorDocStart) ([`selectDocStart`](https://codemirror.net/6/docs/ref/#commands.selectDocStart) with Shift)\n - Cmd-ArrowDown (on macOS): [`cursorDocEnd`](https://codemirror.net/6/docs/ref/#commands.cursorDocEnd) ([`selectDocEnd`](https://codemirror.net/6/docs/ref/#commands.selectDocEnd) with Shift)\n - Ctrl-ArrowUp (on macOS): [`cursorPageUp`](https://codemirror.net/6/docs/ref/#commands.cursorPageUp) ([`selectPageUp`](https://codemirror.net/6/docs/ref/#commands.selectPageUp) with Shift)\n - Ctrl-ArrowDown (on macOS): [`cursorPageDown`](https://codemirror.net/6/docs/ref/#commands.cursorPageDown) ([`selectPageDown`](https://codemirror.net/6/docs/ref/#commands.selectPageDown) with Shift)\n - PageUp: [`cursorPageUp`](https://codemirror.net/6/docs/ref/#commands.cursorPageUp) ([`selectPageUp`](https://codemirror.net/6/docs/ref/#commands.selectPageUp) with Shift)\n - PageDown: [`cursorPageDown`](https://codemirror.net/6/docs/ref/#commands.cursorPageDown) ([`selectPageDown`](https://codemirror.net/6/docs/ref/#commands.selectPageDown) with Shift)\n - Home: [`cursorLineBoundaryBackward`](https://codemirror.net/6/docs/ref/#commands.cursorLineBoundaryBackward) ([`selectLineBoundaryBackward`](https://codemirror.net/6/docs/ref/#commands.selectLineBoundaryBackward) with Shift)\n - End: [`cursorLineBoundaryForward`](https://codemirror.net/6/docs/ref/#commands.cursorLineBoundaryForward) ([`selectLineBoundaryForward`](https://codemirror.net/6/docs/ref/#commands.selectLineBoundaryForward) with Shift)\n - Ctrl-Home (Cmd-Home on macOS): [`cursorDocStart`](https://codemirror.net/6/docs/ref/#commands.cursorDocStart) ([`selectDocStart`](https://codemirror.net/6/docs/ref/#commands.selectDocStart) with Shift)\n - Ctrl-End (Cmd-Home on macOS): [`cursorDocEnd`](https://codemirror.net/6/docs/ref/#commands.cursorDocEnd) ([`selectDocEnd`](https://codemirror.net/6/docs/ref/#commands.selectDocEnd) with Shift)\n - Enter and Shift-Enter: [`insertNewlineAndIndent`](https://codemirror.net/6/docs/ref/#commands.insertNewlineAndIndent)\n - Ctrl-a (Cmd-a on macOS): [`selectAll`](https://codemirror.net/6/docs/ref/#commands.selectAll)\n - Backspace: [`deleteCharBackward`](https://codemirror.net/6/docs/ref/#commands.deleteCharBackward)\n - Delete: [`deleteCharForward`](https://codemirror.net/6/docs/ref/#commands.deleteCharForward)\n - Ctrl-Backspace (Alt-Backspace on macOS): [`deleteGroupBackward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupBackward)\n - Ctrl-Delete (Alt-Delete on macOS): [`deleteGroupForward`](https://codemirror.net/6/docs/ref/#commands.deleteGroupForward)\n - Cmd-Backspace (macOS): [`deleteLineBoundaryBackward`](https://codemirror.net/6/docs/ref/#commands.deleteLineBoundaryBackward).\n - Cmd-Delete (macOS): [`deleteLineBoundaryForward`](https://codemirror.net/6/docs/ref/#commands.deleteLineBoundaryForward).\n*/\nconst standardKeymap = /*@__PURE__*/[\n    { key: \"ArrowLeft\", run: cursorCharLeft, shift: selectCharLeft, preventDefault: true },\n    { key: \"Mod-ArrowLeft\", mac: \"Alt-ArrowLeft\", run: cursorGroupLeft, shift: selectGroupLeft, preventDefault: true },\n    { mac: \"Cmd-ArrowLeft\", run: cursorLineBoundaryLeft, shift: selectLineBoundaryLeft, preventDefault: true },\n    { key: \"ArrowRight\", run: cursorCharRight, shift: selectCharRight, preventDefault: true },\n    { key: \"Mod-ArrowRight\", mac: \"Alt-ArrowRight\", run: cursorGroupRight, shift: selectGroupRight, preventDefault: true },\n    { mac: \"Cmd-ArrowRight\", run: cursorLineBoundaryRight, shift: selectLineBoundaryRight, preventDefault: true },\n    { key: \"ArrowUp\", run: cursorLineUp, shift: selectLineUp, preventDefault: true },\n    { mac: \"Cmd-ArrowUp\", run: cursorDocStart, shift: selectDocStart },\n    { mac: \"Ctrl-ArrowUp\", run: cursorPageUp, shift: selectPageUp },\n    { key: \"ArrowDown\", run: cursorLineDown, shift: selectLineDown, preventDefault: true },\n    { mac: \"Cmd-ArrowDown\", run: cursorDocEnd, shift: selectDocEnd },\n    { mac: \"Ctrl-ArrowDown\", run: cursorPageDown, shift: selectPageDown },\n    { key: \"PageUp\", run: cursorPageUp, shift: selectPageUp },\n    { key: \"PageDown\", run: cursorPageDown, shift: selectPageDown },\n    { key: \"Home\", run: cursorLineBoundaryBackward, shift: selectLineBoundaryBackward, preventDefault: true },\n    { key: \"Mod-Home\", run: cursorDocStart, shift: selectDocStart },\n    { key: \"End\", run: cursorLineBoundaryForward, shift: selectLineBoundaryForward, preventDefault: true },\n    { key: \"Mod-End\", run: cursorDocEnd, shift: selectDocEnd },\n    { key: \"Enter\", run: insertNewlineAndIndent, shift: insertNewlineAndIndent },\n    { key: \"Mod-a\", run: selectAll },\n    { key: \"Backspace\", run: deleteCharBackward, shift: deleteCharBackward },\n    { key: \"Delete\", run: deleteCharForward },\n    { key: \"Mod-Backspace\", mac: \"Alt-Backspace\", run: deleteGroupBackward },\n    { key: \"Mod-Delete\", mac: \"Alt-Delete\", run: deleteGroupForward },\n    { mac: \"Mod-Backspace\", run: deleteLineBoundaryBackward },\n    { mac: \"Mod-Delete\", run: deleteLineBoundaryForward }\n].concat(/*@__PURE__*/emacsStyleKeymap.map(b => ({ mac: b.key, run: b.run, shift: b.shift })));\n/**\nThe default keymap. Includes all bindings from\n[`standardKeymap`](https://codemirror.net/6/docs/ref/#commands.standardKeymap) plus the following:\n\n- Alt-ArrowLeft (Ctrl-ArrowLeft on macOS): [`cursorSyntaxLeft`](https://codemirror.net/6/docs/ref/#commands.cursorSyntaxLeft) ([`selectSyntaxLeft`](https://codemirror.net/6/docs/ref/#commands.selectSyntaxLeft) with Shift)\n- Alt-ArrowRight (Ctrl-ArrowRight on macOS): [`cursorSyntaxRight`](https://codemirror.net/6/docs/ref/#commands.cursorSyntaxRight) ([`selectSyntaxRight`](https://codemirror.net/6/docs/ref/#commands.selectSyntaxRight) with Shift)\n- Alt-ArrowUp: [`moveLineUp`](https://codemirror.net/6/docs/ref/#commands.moveLineUp)\n- Alt-ArrowDown: [`moveLineDown`](https://codemirror.net/6/docs/ref/#commands.moveLineDown)\n- Shift-Alt-ArrowUp: [`copyLineUp`](https://codemirror.net/6/docs/ref/#commands.copyLineUp)\n- Shift-Alt-ArrowDown: [`copyLineDown`](https://codemirror.net/6/docs/ref/#commands.copyLineDown)\n- Escape: [`simplifySelection`](https://codemirror.net/6/docs/ref/#commands.simplifySelection)\n- Ctrl-Enter (Cmd-Enter on macOS): [`insertBlankLine`](https://codemirror.net/6/docs/ref/#commands.insertBlankLine)\n- Alt-l (Ctrl-l on macOS): [`selectLine`](https://codemirror.net/6/docs/ref/#commands.selectLine)\n- Ctrl-i (Cmd-i on macOS): [`selectParentSyntax`](https://codemirror.net/6/docs/ref/#commands.selectParentSyntax)\n- Ctrl-[ (Cmd-[ on macOS): [`indentLess`](https://codemirror.net/6/docs/ref/#commands.indentLess)\n- Ctrl-] (Cmd-] on macOS): [`indentMore`](https://codemirror.net/6/docs/ref/#commands.indentMore)\n- Ctrl-Alt-\\\\ (Cmd-Alt-\\\\ on macOS): [`indentSelection`](https://codemirror.net/6/docs/ref/#commands.indentSelection)\n- Shift-Ctrl-k (Shift-Cmd-k on macOS): [`deleteLine`](https://codemirror.net/6/docs/ref/#commands.deleteLine)\n- Shift-Ctrl-\\\\ (Shift-Cmd-\\\\ on macOS): [`cursorMatchingBracket`](https://codemirror.net/6/docs/ref/#commands.cursorMatchingBracket)\n- Ctrl-/ (Cmd-/ on macOS): [`toggleComment`](https://codemirror.net/6/docs/ref/#commands.toggleComment).\n- Shift-Alt-a: [`toggleBlockComment`](https://codemirror.net/6/docs/ref/#commands.toggleBlockComment).\n- Ctrl-m (Alt-Shift-m on macOS): [`toggleTabFocusMode`](https://codemirror.net/6/docs/ref/#commands.toggleTabFocusMode).\n*/\nconst defaultKeymap = /*@__PURE__*/[\n    { key: \"Alt-ArrowLeft\", mac: \"Ctrl-ArrowLeft\", run: cursorSyntaxLeft, shift: selectSyntaxLeft },\n    { key: \"Alt-ArrowRight\", mac: \"Ctrl-ArrowRight\", run: cursorSyntaxRight, shift: selectSyntaxRight },\n    { key: \"Alt-ArrowUp\", run: moveLineUp },\n    { key: \"Shift-Alt-ArrowUp\", run: copyLineUp },\n    { key: \"Alt-ArrowDown\", run: moveLineDown },\n    { key: \"Shift-Alt-ArrowDown\", run: copyLineDown },\n    { key: \"Escape\", run: simplifySelection },\n    { key: \"Mod-Enter\", run: insertBlankLine },\n    { key: \"Alt-l\", mac: \"Ctrl-l\", run: selectLine },\n    { key: \"Mod-i\", run: selectParentSyntax, preventDefault: true },\n    { key: \"Mod-[\", run: indentLess },\n    { key: \"Mod-]\", run: indentMore },\n    { key: \"Mod-Alt-\\\\\", run: indentSelection },\n    { key: \"Shift-Mod-k\", run: deleteLine },\n    { key: \"Shift-Mod-\\\\\", run: cursorMatchingBracket },\n    { key: \"Mod-/\", run: toggleComment },\n    { key: \"Alt-A\", run: toggleBlockComment },\n    { key: \"Ctrl-m\", mac: \"Shift-Alt-m\", run: toggleTabFocusMode },\n].concat(standardKeymap);\n/**\nA binding that binds Tab to [`indentMore`](https://codemirror.net/6/docs/ref/#commands.indentMore) and\nShift-Tab to [`indentLess`](https://codemirror.net/6/docs/ref/#commands.indentLess).\nPlease see the [Tab example](../../examples/tab/) before using\nthis.\n*/\nconst indentWithTab = { key: \"Tab\", run: indentMore, shift: indentLess };\n\nexport { blockComment, blockUncomment, copyLineDown, copyLineUp, cursorCharBackward, cursorCharBackwardLogical, cursorCharForward, cursorCharForwardLogical, cursorCharLeft, cursorCharRight, cursorDocEnd, cursorDocStart, cursorGroupBackward, cursorGroupForward, cursorGroupLeft, cursorGroupRight, cursorLineBoundaryBackward, cursorLineBoundaryForward, cursorLineBoundaryLeft, cursorLineBoundaryRight, cursorLineDown, cursorLineEnd, cursorLineStart, cursorLineUp, cursorMatchingBracket, cursorPageDown, cursorPageUp, cursorSubwordBackward, cursorSubwordForward, cursorSyntaxLeft, cursorSyntaxRight, defaultKeymap, deleteCharBackward, deleteCharBackwardStrict, deleteCharForward, deleteGroupBackward, deleteGroupForward, deleteLine, deleteLineBoundaryBackward, deleteLineBoundaryForward, deleteToLineEnd, deleteToLineStart, deleteTrailingWhitespace, emacsStyleKeymap, history, historyField, historyKeymap, indentLess, indentMore, indentSelection, indentWithTab, insertBlankLine, insertNewline, insertNewlineAndIndent, insertNewlineKeepIndent, insertTab, invertedEffects, isolateHistory, lineComment, lineUncomment, moveLineDown, moveLineUp, redo, redoDepth, redoSelection, selectAll, selectCharBackward, selectCharBackwardLogical, selectCharForward, selectCharForwardLogical, selectCharLeft, selectCharRight, selectDocEnd, selectDocStart, selectGroupBackward, selectGroupForward, selectGroupLeft, selectGroupRight, selectLine, selectLineBoundaryBackward, selectLineBoundaryForward, selectLineBoundaryLeft, selectLineBoundaryRight, selectLineDown, selectLineEnd, selectLineStart, selectLineUp, selectMatchingBracket, selectPageDown, selectPageUp, selectParentSyntax, selectSubwordBackward, selectSubwordForward, selectSyntaxLeft, selectSyntaxRight, simplifySelection, splitLine, standardKeymap, temporarilySetTabFocusMode, toggleBlockComment, toggleBlockCommentByLine, toggleComment, toggleLineComment, toggleTabFocusMode, transposeChars, undo, undoDepth, undoSelection };\n","export default function crelt() {\n  var elt = arguments[0]\n  if (typeof elt == \"string\") elt = document.createElement(elt)\n  var i = 1, next = arguments[1]\n  if (next && typeof next == \"object\" && next.nodeType == null && !Array.isArray(next)) {\n    for (var name in next) if (Object.prototype.hasOwnProperty.call(next, name)) {\n      var value = next[name]\n      if (typeof value == \"string\") elt.setAttribute(name, value)\n      else if (value != null) elt[name] = value\n    }\n    i++\n  }\n  for (; i < arguments.length; i++) add(elt, arguments[i])\n  return elt\n}\n\nfunction add(elt, child) {\n  if (typeof child == \"string\") {\n    elt.appendChild(document.createTextNode(child))\n  } else if (child == null) {\n  } else if (child.nodeType != null) {\n    elt.appendChild(child)\n  } else if (Array.isArray(child)) {\n    for (var i = 0; i < child.length; i++) add(elt, child[i])\n  } else {\n    throw new RangeError(\"Unsupported child node: \" + child)\n  }\n}\n","import { showPanel, EditorView, getPanel, Decoration, ViewPlugin, runScopeHandlers } from '@codemirror/view';\nimport { codePointAt, fromCodePoint, codePointSize, StateEffect, StateField, EditorSelection, Facet, combineConfig, CharCategory, RangeSetBuilder, Prec, EditorState, findClusterBreak } from '@codemirror/state';\nimport elt from 'crelt';\n\nconst basicNormalize = typeof String.prototype.normalize == \"function\"\n    ? x => x.normalize(\"NFKD\") : x => x;\n/**\nA search cursor provides an iterator over text matches in a\ndocument.\n*/\nclass SearchCursor {\n    /**\n    Create a text cursor. The query is the search string, `from` to\n    `to` provides the region to search.\n    \n    When `normalize` is given, it will be called, on both the query\n    string and the content it is matched against, before comparing.\n    You can, for example, create a case-insensitive search by\n    passing `s => s.toLowerCase()`.\n    \n    Text is always normalized with\n    [`.normalize(\"NFKD\")`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize)\n    (when supported).\n    */\n    constructor(text, query, from = 0, to = text.length, normalize, test) {\n        this.test = test;\n        /**\n        The current match (only holds a meaningful value after\n        [`next`](https://codemirror.net/6/docs/ref/#search.SearchCursor.next) has been called and when\n        `done` is false).\n        */\n        this.value = { from: 0, to: 0 };\n        /**\n        Whether the end of the iterated region has been reached.\n        */\n        this.done = false;\n        this.matches = [];\n        this.buffer = \"\";\n        this.bufferPos = 0;\n        this.iter = text.iterRange(from, to);\n        this.bufferStart = from;\n        this.normalize = normalize ? x => normalize(basicNormalize(x)) : basicNormalize;\n        this.query = this.normalize(query);\n    }\n    peek() {\n        if (this.bufferPos == this.buffer.length) {\n            this.bufferStart += this.buffer.length;\n            this.iter.next();\n            if (this.iter.done)\n                return -1;\n            this.bufferPos = 0;\n            this.buffer = this.iter.value;\n        }\n        return codePointAt(this.buffer, this.bufferPos);\n    }\n    /**\n    Look for the next match. Updates the iterator's\n    [`value`](https://codemirror.net/6/docs/ref/#search.SearchCursor.value) and\n    [`done`](https://codemirror.net/6/docs/ref/#search.SearchCursor.done) properties. Should be called\n    at least once before using the cursor.\n    */\n    next() {\n        while (this.matches.length)\n            this.matches.pop();\n        return this.nextOverlapping();\n    }\n    /**\n    The `next` method will ignore matches that partially overlap a\n    previous match. This method behaves like `next`, but includes\n    such matches.\n    */\n    nextOverlapping() {\n        for (;;) {\n            let next = this.peek();\n            if (next < 0) {\n                this.done = true;\n                return this;\n            }\n            let str = fromCodePoint(next), start = this.bufferStart + this.bufferPos;\n            this.bufferPos += codePointSize(next);\n            let norm = this.normalize(str);\n            if (norm.length)\n                for (let i = 0, pos = start;; i++) {\n                    let code = norm.charCodeAt(i);\n                    let match = this.match(code, pos, this.bufferPos + this.bufferStart);\n                    if (i == norm.length - 1) {\n                        if (match) {\n                            this.value = match;\n                            return this;\n                        }\n                        break;\n                    }\n                    if (pos == start && i < str.length && str.charCodeAt(i) == code)\n                        pos++;\n                }\n        }\n    }\n    match(code, pos, end) {\n        let match = null;\n        for (let i = 0; i < this.matches.length; i += 2) {\n            let index = this.matches[i], keep = false;\n            if (this.query.charCodeAt(index) == code) {\n                if (index == this.query.length - 1) {\n                    match = { from: this.matches[i + 1], to: end };\n                }\n                else {\n                    this.matches[i]++;\n                    keep = true;\n                }\n            }\n            if (!keep) {\n                this.matches.splice(i, 2);\n                i -= 2;\n            }\n        }\n        if (this.query.charCodeAt(0) == code) {\n            if (this.query.length == 1)\n                match = { from: pos, to: end };\n            else\n                this.matches.push(1, pos);\n        }\n        if (match && this.test && !this.test(match.from, match.to, this.buffer, this.bufferStart))\n            match = null;\n        return match;\n    }\n}\nif (typeof Symbol != \"undefined\")\n    SearchCursor.prototype[Symbol.iterator] = function () { return this; };\n\nconst empty = { from: -1, to: -1, match: /*@__PURE__*//.*/.exec(\"\") };\nconst baseFlags = \"gm\" + (/x/.unicode == null ? \"\" : \"u\");\n/**\nThis class is similar to [`SearchCursor`](https://codemirror.net/6/docs/ref/#search.SearchCursor)\nbut searches for a regular expression pattern instead of a plain\nstring.\n*/\nclass RegExpCursor {\n    /**\n    Create a cursor that will search the given range in the given\n    document. `query` should be the raw pattern (as you'd pass it to\n    `new RegExp`).\n    */\n    constructor(text, query, options, from = 0, to = text.length) {\n        this.text = text;\n        this.to = to;\n        this.curLine = \"\";\n        /**\n        Set to `true` when the cursor has reached the end of the search\n        range.\n        */\n        this.done = false;\n        /**\n        Will contain an object with the extent of the match and the\n        match object when [`next`](https://codemirror.net/6/docs/ref/#search.RegExpCursor.next)\n        sucessfully finds a match.\n        */\n        this.value = empty;\n        if (/\\\\[sWDnr]|\\n|\\r|\\[\\^/.test(query))\n            return new MultilineRegExpCursor(text, query, options, from, to);\n        this.re = new RegExp(query, baseFlags + ((options === null || options === void 0 ? void 0 : options.ignoreCase) ? \"i\" : \"\"));\n        this.test = options === null || options === void 0 ? void 0 : options.test;\n        this.iter = text.iter();\n        let startLine = text.lineAt(from);\n        this.curLineStart = startLine.from;\n        this.matchPos = toCharEnd(text, from);\n        this.getLine(this.curLineStart);\n    }\n    getLine(skip) {\n        this.iter.next(skip);\n        if (this.iter.lineBreak) {\n            this.curLine = \"\";\n        }\n        else {\n            this.curLine = this.iter.value;\n            if (this.curLineStart + this.curLine.length > this.to)\n                this.curLine = this.curLine.slice(0, this.to - this.curLineStart);\n            this.iter.next();\n        }\n    }\n    nextLine() {\n        this.curLineStart = this.curLineStart + this.curLine.length + 1;\n        if (this.curLineStart > this.to)\n            this.curLine = \"\";\n        else\n            this.getLine(0);\n    }\n    /**\n    Move to the next match, if there is one.\n    */\n    next() {\n        for (let off = this.matchPos - this.curLineStart;;) {\n            this.re.lastIndex = off;\n            let match = this.matchPos <= this.to && this.re.exec(this.curLine);\n            if (match) {\n                let from = this.curLineStart + match.index, to = from + match[0].length;\n                this.matchPos = toCharEnd(this.text, to + (from == to ? 1 : 0));\n                if (from == this.curLineStart + this.curLine.length)\n                    this.nextLine();\n                if ((from < to || from > this.value.to) && (!this.test || this.test(from, to, match))) {\n                    this.value = { from, to, match };\n                    return this;\n                }\n                off = this.matchPos - this.curLineStart;\n            }\n            else if (this.curLineStart + this.curLine.length < this.to) {\n                this.nextLine();\n                off = 0;\n            }\n            else {\n                this.done = true;\n                return this;\n            }\n        }\n    }\n}\nconst flattened = /*@__PURE__*/new WeakMap();\n// Reusable (partially) flattened document strings\nclass FlattenedDoc {\n    constructor(from, text) {\n        this.from = from;\n        this.text = text;\n    }\n    get to() { return this.from + this.text.length; }\n    static get(doc, from, to) {\n        let cached = flattened.get(doc);\n        if (!cached || cached.from >= to || cached.to <= from) {\n            let flat = new FlattenedDoc(from, doc.sliceString(from, to));\n            flattened.set(doc, flat);\n            return flat;\n        }\n        if (cached.from == from && cached.to == to)\n            return cached;\n        let { text, from: cachedFrom } = cached;\n        if (cachedFrom > from) {\n            text = doc.sliceString(from, cachedFrom) + text;\n            cachedFrom = from;\n        }\n        if (cached.to < to)\n            text += doc.sliceString(cached.to, to);\n        flattened.set(doc, new FlattenedDoc(cachedFrom, text));\n        return new FlattenedDoc(from, text.slice(from - cachedFrom, to - cachedFrom));\n    }\n}\nclass MultilineRegExpCursor {\n    constructor(text, query, options, from, to) {\n        this.text = text;\n        this.to = to;\n        this.done = false;\n        this.value = empty;\n        this.matchPos = toCharEnd(text, from);\n        this.re = new RegExp(query, baseFlags + ((options === null || options === void 0 ? void 0 : options.ignoreCase) ? \"i\" : \"\"));\n        this.test = options === null || options === void 0 ? void 0 : options.test;\n        this.flat = FlattenedDoc.get(text, from, this.chunkEnd(from + 5000 /* Chunk.Base */));\n    }\n    chunkEnd(pos) {\n        return pos >= this.to ? this.to : this.text.lineAt(pos).to;\n    }\n    next() {\n        for (;;) {\n            let off = this.re.lastIndex = this.matchPos - this.flat.from;\n            let match = this.re.exec(this.flat.text);\n            // Skip empty matches directly after the last match\n            if (match && !match[0] && match.index == off) {\n                this.re.lastIndex = off + 1;\n                match = this.re.exec(this.flat.text);\n            }\n            if (match) {\n                let from = this.flat.from + match.index, to = from + match[0].length;\n                // If a match goes almost to the end of a noncomplete chunk, try\n                // again, since it'll likely be able to match more\n                if ((this.flat.to >= this.to || match.index + match[0].length <= this.flat.text.length - 10) &&\n                    (!this.test || this.test(from, to, match))) {\n                    this.value = { from, to, match };\n                    this.matchPos = toCharEnd(this.text, to + (from == to ? 1 : 0));\n                    return this;\n                }\n            }\n            if (this.flat.to == this.to) {\n                this.done = true;\n                return this;\n            }\n            // Grow the flattened doc\n            this.flat = FlattenedDoc.get(this.text, this.flat.from, this.chunkEnd(this.flat.from + this.flat.text.length * 2));\n        }\n    }\n}\nif (typeof Symbol != \"undefined\") {\n    RegExpCursor.prototype[Symbol.iterator] = MultilineRegExpCursor.prototype[Symbol.iterator] =\n        function () { return this; };\n}\nfunction validRegExp(source) {\n    try {\n        new RegExp(source, baseFlags);\n        return true;\n    }\n    catch (_a) {\n        return false;\n    }\n}\nfunction toCharEnd(text, pos) {\n    if (pos >= text.length)\n        return pos;\n    let line = text.lineAt(pos), next;\n    while (pos < line.to && (next = line.text.charCodeAt(pos - line.from)) >= 0xDC00 && next < 0xE000)\n        pos++;\n    return pos;\n}\n\nfunction createLineDialog(view) {\n    let line = String(view.state.doc.lineAt(view.state.selection.main.head).number);\n    let input = elt(\"input\", { class: \"cm-textfield\", name: \"line\", value: line });\n    let dom = elt(\"form\", {\n        class: \"cm-gotoLine\",\n        onkeydown: (event) => {\n            if (event.keyCode == 27) { // Escape\n                event.preventDefault();\n                view.dispatch({ effects: dialogEffect.of(false) });\n                view.focus();\n            }\n            else if (event.keyCode == 13) { // Enter\n                event.preventDefault();\n                go();\n            }\n        },\n        onsubmit: (event) => {\n            event.preventDefault();\n            go();\n        }\n    }, elt(\"label\", view.state.phrase(\"Go to line\"), \": \", input), \" \", elt(\"button\", { class: \"cm-button\", type: \"submit\" }, view.state.phrase(\"go\")));\n    function go() {\n        let match = /^([+-])?(\\d+)?(:\\d+)?(%)?$/.exec(input.value);\n        if (!match)\n            return;\n        let { state } = view, startLine = state.doc.lineAt(state.selection.main.head);\n        let [, sign, ln, cl, percent] = match;\n        let col = cl ? +cl.slice(1) : 0;\n        let line = ln ? +ln : startLine.number;\n        if (ln && percent) {\n            let pc = line / 100;\n            if (sign)\n                pc = pc * (sign == \"-\" ? -1 : 1) + (startLine.number / state.doc.lines);\n            line = Math.round(state.doc.lines * pc);\n        }\n        else if (ln && sign) {\n            line = line * (sign == \"-\" ? -1 : 1) + startLine.number;\n        }\n        let docLine = state.doc.line(Math.max(1, Math.min(state.doc.lines, line)));\n        let selection = EditorSelection.cursor(docLine.from + Math.max(0, Math.min(col, docLine.length)));\n        view.dispatch({\n            effects: [dialogEffect.of(false), EditorView.scrollIntoView(selection.from, { y: 'center' })],\n            selection,\n        });\n        view.focus();\n    }\n    return { dom };\n}\nconst dialogEffect = /*@__PURE__*/StateEffect.define();\nconst dialogField = /*@__PURE__*/StateField.define({\n    create() { return true; },\n    update(value, tr) {\n        for (let e of tr.effects)\n            if (e.is(dialogEffect))\n                value = e.value;\n        return value;\n    },\n    provide: f => showPanel.from(f, val => val ? createLineDialog : null)\n});\n/**\nCommand that shows a dialog asking the user for a line number, and\nwhen a valid position is provided, moves the cursor to that line.\n\nSupports line numbers, relative line offsets prefixed with `+` or\n`-`, document percentages suffixed with `%`, and an optional\ncolumn position by adding `:` and a second number after the line\nnumber.\n*/\nconst gotoLine = view => {\n    let panel = getPanel(view, createLineDialog);\n    if (!panel) {\n        let effects = [dialogEffect.of(true)];\n        if (view.state.field(dialogField, false) == null)\n            effects.push(StateEffect.appendConfig.of([dialogField, baseTheme$1]));\n        view.dispatch({ effects });\n        panel = getPanel(view, createLineDialog);\n    }\n    if (panel)\n        panel.dom.querySelector(\"input\").select();\n    return true;\n};\nconst baseTheme$1 = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-panel.cm-gotoLine\": {\n        padding: \"2px 6px 4px\",\n        \"& label\": { fontSize: \"80%\" }\n    }\n});\n\nconst defaultHighlightOptions = {\n    highlightWordAroundCursor: false,\n    minSelectionLength: 1,\n    maxMatches: 100,\n    wholeWords: false\n};\nconst highlightConfig = /*@__PURE__*/Facet.define({\n    combine(options) {\n        return combineConfig(options, defaultHighlightOptions, {\n            highlightWordAroundCursor: (a, b) => a || b,\n            minSelectionLength: Math.min,\n            maxMatches: Math.min\n        });\n    }\n});\n/**\nThis extension highlights text that matches the selection. It uses\nthe `\"cm-selectionMatch\"` class for the highlighting. When\n`highlightWordAroundCursor` is enabled, the word at the cursor\nitself will be highlighted with `\"cm-selectionMatch-main\"`.\n*/\nfunction highlightSelectionMatches(options) {\n    let ext = [defaultTheme, matchHighlighter];\n    if (options)\n        ext.push(highlightConfig.of(options));\n    return ext;\n}\nconst matchDeco = /*@__PURE__*/Decoration.mark({ class: \"cm-selectionMatch\" });\nconst mainMatchDeco = /*@__PURE__*/Decoration.mark({ class: \"cm-selectionMatch cm-selectionMatch-main\" });\n// Whether the characters directly outside the given positions are non-word characters\nfunction insideWordBoundaries(check, state, from, to) {\n    return (from == 0 || check(state.sliceDoc(from - 1, from)) != CharCategory.Word) &&\n        (to == state.doc.length || check(state.sliceDoc(to, to + 1)) != CharCategory.Word);\n}\n// Whether the characters directly at the given positions are word characters\nfunction insideWord(check, state, from, to) {\n    return check(state.sliceDoc(from, from + 1)) == CharCategory.Word\n        && check(state.sliceDoc(to - 1, to)) == CharCategory.Word;\n}\nconst matchHighlighter = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.decorations = this.getDeco(view);\n    }\n    update(update) {\n        if (update.selectionSet || update.docChanged || update.viewportChanged)\n            this.decorations = this.getDeco(update.view);\n    }\n    getDeco(view) {\n        let conf = view.state.facet(highlightConfig);\n        let { state } = view, sel = state.selection;\n        if (sel.ranges.length > 1)\n            return Decoration.none;\n        let range = sel.main, query, check = null;\n        if (range.empty) {\n            if (!conf.highlightWordAroundCursor)\n                return Decoration.none;\n            let word = state.wordAt(range.head);\n            if (!word)\n                return Decoration.none;\n            check = state.charCategorizer(range.head);\n            query = state.sliceDoc(word.from, word.to);\n        }\n        else {\n            let len = range.to - range.from;\n            if (len < conf.minSelectionLength || len > 200)\n                return Decoration.none;\n            if (conf.wholeWords) {\n                query = state.sliceDoc(range.from, range.to); // TODO: allow and include leading/trailing space?\n                check = state.charCategorizer(range.head);\n                if (!(insideWordBoundaries(check, state, range.from, range.to) &&\n                    insideWord(check, state, range.from, range.to)))\n                    return Decoration.none;\n            }\n            else {\n                query = state.sliceDoc(range.from, range.to);\n                if (!query)\n                    return Decoration.none;\n            }\n        }\n        let deco = [];\n        for (let part of view.visibleRanges) {\n            let cursor = new SearchCursor(state.doc, query, part.from, part.to);\n            while (!cursor.next().done) {\n                let { from, to } = cursor.value;\n                if (!check || insideWordBoundaries(check, state, from, to)) {\n                    if (range.empty && from <= range.from && to >= range.to)\n                        deco.push(mainMatchDeco.range(from, to));\n                    else if (from >= range.to || to <= range.from)\n                        deco.push(matchDeco.range(from, to));\n                    if (deco.length > conf.maxMatches)\n                        return Decoration.none;\n                }\n            }\n        }\n        return Decoration.set(deco);\n    }\n}, {\n    decorations: v => v.decorations\n});\nconst defaultTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-selectionMatch\": { backgroundColor: \"#99ff7780\" },\n    \".cm-searchMatch .cm-selectionMatch\": { backgroundColor: \"transparent\" }\n});\n// Select the words around the cursors.\nconst selectWord = ({ state, dispatch }) => {\n    let { selection } = state;\n    let newSel = EditorSelection.create(selection.ranges.map(range => state.wordAt(range.head) || EditorSelection.cursor(range.head)), selection.mainIndex);\n    if (newSel.eq(selection))\n        return false;\n    dispatch(state.update({ selection: newSel }));\n    return true;\n};\n// Find next occurrence of query relative to last cursor. Wrap around\n// the document if there are no more matches.\nfunction findNextOccurrence(state, query) {\n    let { main, ranges } = state.selection;\n    let word = state.wordAt(main.head), fullWord = word && word.from == main.from && word.to == main.to;\n    for (let cycled = false, cursor = new SearchCursor(state.doc, query, ranges[ranges.length - 1].to);;) {\n        cursor.next();\n        if (cursor.done) {\n            if (cycled)\n                return null;\n            cursor = new SearchCursor(state.doc, query, 0, Math.max(0, ranges[ranges.length - 1].from - 1));\n            cycled = true;\n        }\n        else {\n            if (cycled && ranges.some(r => r.from == cursor.value.from))\n                continue;\n            if (fullWord) {\n                let word = state.wordAt(cursor.value.from);\n                if (!word || word.from != cursor.value.from || word.to != cursor.value.to)\n                    continue;\n            }\n            return cursor.value;\n        }\n    }\n}\n/**\nSelect next occurrence of the current selection. Expand selection\nto the surrounding word when the selection is empty.\n*/\nconst selectNextOccurrence = ({ state, dispatch }) => {\n    let { ranges } = state.selection;\n    if (ranges.some(sel => sel.from === sel.to))\n        return selectWord({ state, dispatch });\n    let searchedText = state.sliceDoc(ranges[0].from, ranges[0].to);\n    if (state.selection.ranges.some(r => state.sliceDoc(r.from, r.to) != searchedText))\n        return false;\n    let range = findNextOccurrence(state, searchedText);\n    if (!range)\n        return false;\n    dispatch(state.update({\n        selection: state.selection.addRange(EditorSelection.range(range.from, range.to), false),\n        effects: EditorView.scrollIntoView(range.to)\n    }));\n    return true;\n};\n\nconst searchConfigFacet = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            top: false,\n            caseSensitive: false,\n            literal: false,\n            regexp: false,\n            wholeWord: false,\n            createPanel: view => new SearchPanel(view),\n            scrollToMatch: range => EditorView.scrollIntoView(range)\n        });\n    }\n});\n/**\nAdd search state to the editor configuration, and optionally\nconfigure the search extension.\n([`openSearchPanel`](https://codemirror.net/6/docs/ref/#search.openSearchPanel) will automatically\nenable this if it isn't already on).\n*/\nfunction search(config) {\n    return config ? [searchConfigFacet.of(config), searchExtensions] : searchExtensions;\n}\n/**\nA search query. Part of the editor's search state.\n*/\nclass SearchQuery {\n    /**\n    Create a query object.\n    */\n    constructor(config) {\n        this.search = config.search;\n        this.caseSensitive = !!config.caseSensitive;\n        this.literal = !!config.literal;\n        this.regexp = !!config.regexp;\n        this.replace = config.replace || \"\";\n        this.valid = !!this.search && (!this.regexp || validRegExp(this.search));\n        this.unquoted = this.unquote(this.search);\n        this.wholeWord = !!config.wholeWord;\n    }\n    /**\n    @internal\n    */\n    unquote(text) {\n        return this.literal ? text :\n            text.replace(/\\\\([nrt\\\\])/g, (_, ch) => ch == \"n\" ? \"\\n\" : ch == \"r\" ? \"\\r\" : ch == \"t\" ? \"\\t\" : \"\\\\\");\n    }\n    /**\n    Compare this query to another query.\n    */\n    eq(other) {\n        return this.search == other.search && this.replace == other.replace &&\n            this.caseSensitive == other.caseSensitive && this.regexp == other.regexp &&\n            this.wholeWord == other.wholeWord;\n    }\n    /**\n    @internal\n    */\n    create() {\n        return this.regexp ? new RegExpQuery(this) : new StringQuery(this);\n    }\n    /**\n    Get a search cursor for this query, searching through the given\n    range in the given state.\n    */\n    getCursor(state, from = 0, to) {\n        let st = state.doc ? state : EditorState.create({ doc: state });\n        if (to == null)\n            to = st.doc.length;\n        return this.regexp ? regexpCursor(this, st, from, to) : stringCursor(this, st, from, to);\n    }\n}\nclass QueryType {\n    constructor(spec) {\n        this.spec = spec;\n    }\n}\nfunction stringCursor(spec, state, from, to) {\n    return new SearchCursor(state.doc, spec.unquoted, from, to, spec.caseSensitive ? undefined : x => x.toLowerCase(), spec.wholeWord ? stringWordTest(state.doc, state.charCategorizer(state.selection.main.head)) : undefined);\n}\nfunction stringWordTest(doc, categorizer) {\n    return (from, to, buf, bufPos) => {\n        if (bufPos > from || bufPos + buf.length < to) {\n            bufPos = Math.max(0, from - 2);\n            buf = doc.sliceString(bufPos, Math.min(doc.length, to + 2));\n        }\n        return (categorizer(charBefore(buf, from - bufPos)) != CharCategory.Word ||\n            categorizer(charAfter(buf, from - bufPos)) != CharCategory.Word) &&\n            (categorizer(charAfter(buf, to - bufPos)) != CharCategory.Word ||\n                categorizer(charBefore(buf, to - bufPos)) != CharCategory.Word);\n    };\n}\nclass StringQuery extends QueryType {\n    constructor(spec) {\n        super(spec);\n    }\n    nextMatch(state, curFrom, curTo) {\n        let cursor = stringCursor(this.spec, state, curTo, state.doc.length).nextOverlapping();\n        if (cursor.done) {\n            let end = Math.min(state.doc.length, curFrom + this.spec.unquoted.length);\n            cursor = stringCursor(this.spec, state, 0, end).nextOverlapping();\n        }\n        return cursor.done || cursor.value.from == curFrom && cursor.value.to == curTo ? null : cursor.value;\n    }\n    // Searching in reverse is, rather than implementing an inverted search\n    // cursor, done by scanning chunk after chunk forward.\n    prevMatchInRange(state, from, to) {\n        for (let pos = to;;) {\n            let start = Math.max(from, pos - 10000 /* FindPrev.ChunkSize */ - this.spec.unquoted.length);\n            let cursor = stringCursor(this.spec, state, start, pos), range = null;\n            while (!cursor.nextOverlapping().done)\n                range = cursor.value;\n            if (range)\n                return range;\n            if (start == from)\n                return null;\n            pos -= 10000 /* FindPrev.ChunkSize */;\n        }\n    }\n    prevMatch(state, curFrom, curTo) {\n        let found = this.prevMatchInRange(state, 0, curFrom);\n        if (!found)\n            found = this.prevMatchInRange(state, Math.max(0, curTo - this.spec.unquoted.length), state.doc.length);\n        return found && (found.from != curFrom || found.to != curTo) ? found : null;\n    }\n    getReplacement(_result) { return this.spec.unquote(this.spec.replace); }\n    matchAll(state, limit) {\n        let cursor = stringCursor(this.spec, state, 0, state.doc.length), ranges = [];\n        while (!cursor.next().done) {\n            if (ranges.length >= limit)\n                return null;\n            ranges.push(cursor.value);\n        }\n        return ranges;\n    }\n    highlight(state, from, to, add) {\n        let cursor = stringCursor(this.spec, state, Math.max(0, from - this.spec.unquoted.length), Math.min(to + this.spec.unquoted.length, state.doc.length));\n        while (!cursor.next().done)\n            add(cursor.value.from, cursor.value.to);\n    }\n}\nfunction regexpCursor(spec, state, from, to) {\n    return new RegExpCursor(state.doc, spec.search, {\n        ignoreCase: !spec.caseSensitive,\n        test: spec.wholeWord ? regexpWordTest(state.charCategorizer(state.selection.main.head)) : undefined\n    }, from, to);\n}\nfunction charBefore(str, index) {\n    return str.slice(findClusterBreak(str, index, false), index);\n}\nfunction charAfter(str, index) {\n    return str.slice(index, findClusterBreak(str, index));\n}\nfunction regexpWordTest(categorizer) {\n    return (_from, _to, match) => !match[0].length ||\n        (categorizer(charBefore(match.input, match.index)) != CharCategory.Word ||\n            categorizer(charAfter(match.input, match.index)) != CharCategory.Word) &&\n            (categorizer(charAfter(match.input, match.index + match[0].length)) != CharCategory.Word ||\n                categorizer(charBefore(match.input, match.index + match[0].length)) != CharCategory.Word);\n}\nclass RegExpQuery extends QueryType {\n    nextMatch(state, curFrom, curTo) {\n        let cursor = regexpCursor(this.spec, state, curTo, state.doc.length).next();\n        if (cursor.done)\n            cursor = regexpCursor(this.spec, state, 0, curFrom).next();\n        return cursor.done ? null : cursor.value;\n    }\n    prevMatchInRange(state, from, to) {\n        for (let size = 1;; size++) {\n            let start = Math.max(from, to - size * 10000 /* FindPrev.ChunkSize */);\n            let cursor = regexpCursor(this.spec, state, start, to), range = null;\n            while (!cursor.next().done)\n                range = cursor.value;\n            if (range && (start == from || range.from > start + 10))\n                return range;\n            if (start == from)\n                return null;\n        }\n    }\n    prevMatch(state, curFrom, curTo) {\n        return this.prevMatchInRange(state, 0, curFrom) ||\n            this.prevMatchInRange(state, curTo, state.doc.length);\n    }\n    getReplacement(result) {\n        return this.spec.unquote(this.spec.replace).replace(/\\$([$&\\d+])/g, (m, i) => i == \"$\" ? \"$\"\n            : i == \"&\" ? result.match[0]\n                : i != \"0\" && +i < result.match.length ? result.match[i]\n                    : m);\n    }\n    matchAll(state, limit) {\n        let cursor = regexpCursor(this.spec, state, 0, state.doc.length), ranges = [];\n        while (!cursor.next().done) {\n            if (ranges.length >= limit)\n                return null;\n            ranges.push(cursor.value);\n        }\n        return ranges;\n    }\n    highlight(state, from, to, add) {\n        let cursor = regexpCursor(this.spec, state, Math.max(0, from - 250 /* RegExp.HighlightMargin */), Math.min(to + 250 /* RegExp.HighlightMargin */, state.doc.length));\n        while (!cursor.next().done)\n            add(cursor.value.from, cursor.value.to);\n    }\n}\n/**\nA state effect that updates the current search query. Note that\nthis only has an effect if the search state has been initialized\n(by including [`search`](https://codemirror.net/6/docs/ref/#search.search) in your configuration or\nby running [`openSearchPanel`](https://codemirror.net/6/docs/ref/#search.openSearchPanel) at least\nonce).\n*/\nconst setSearchQuery = /*@__PURE__*/StateEffect.define();\nconst togglePanel = /*@__PURE__*/StateEffect.define();\nconst searchState = /*@__PURE__*/StateField.define({\n    create(state) {\n        return new SearchState(defaultQuery(state).create(), null);\n    },\n    update(value, tr) {\n        for (let effect of tr.effects) {\n            if (effect.is(setSearchQuery))\n                value = new SearchState(effect.value.create(), value.panel);\n            else if (effect.is(togglePanel))\n                value = new SearchState(value.query, effect.value ? createSearchPanel : null);\n        }\n        return value;\n    },\n    provide: f => showPanel.from(f, val => val.panel)\n});\n/**\nGet the current search query from an editor state.\n*/\nfunction getSearchQuery(state) {\n    let curState = state.field(searchState, false);\n    return curState ? curState.query.spec : defaultQuery(state);\n}\n/**\nQuery whether the search panel is open in the given editor state.\n*/\nfunction searchPanelOpen(state) {\n    var _a;\n    return ((_a = state.field(searchState, false)) === null || _a === void 0 ? void 0 : _a.panel) != null;\n}\nclass SearchState {\n    constructor(query, panel) {\n        this.query = query;\n        this.panel = panel;\n    }\n}\nconst matchMark = /*@__PURE__*/Decoration.mark({ class: \"cm-searchMatch\" }), selectedMatchMark = /*@__PURE__*/Decoration.mark({ class: \"cm-searchMatch cm-searchMatch-selected\" });\nconst searchHighlighter = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.decorations = this.highlight(view.state.field(searchState));\n    }\n    update(update) {\n        let state = update.state.field(searchState);\n        if (state != update.startState.field(searchState) || update.docChanged || update.selectionSet || update.viewportChanged)\n            this.decorations = this.highlight(state);\n    }\n    highlight({ query, panel }) {\n        if (!panel || !query.spec.valid)\n            return Decoration.none;\n        let { view } = this;\n        let builder = new RangeSetBuilder();\n        for (let i = 0, ranges = view.visibleRanges, l = ranges.length; i < l; i++) {\n            let { from, to } = ranges[i];\n            while (i < l - 1 && to > ranges[i + 1].from - 2 * 250 /* RegExp.HighlightMargin */)\n                to = ranges[++i].to;\n            query.highlight(view.state, from, to, (from, to) => {\n                let selected = view.state.selection.ranges.some(r => r.from == from && r.to == to);\n                builder.add(from, to, selected ? selectedMatchMark : matchMark);\n            });\n        }\n        return builder.finish();\n    }\n}, {\n    decorations: v => v.decorations\n});\nfunction searchCommand(f) {\n    return view => {\n        let state = view.state.field(searchState, false);\n        return state && state.query.spec.valid ? f(view, state) : openSearchPanel(view);\n    };\n}\n/**\nOpen the search panel if it isn't already open, and move the\nselection to the first match after the current main selection.\nWill wrap around to the start of the document when it reaches the\nend.\n*/\nconst findNext = /*@__PURE__*/searchCommand((view, { query }) => {\n    let { to } = view.state.selection.main;\n    let next = query.nextMatch(view.state, to, to);\n    if (!next)\n        return false;\n    let selection = EditorSelection.single(next.from, next.to);\n    let config = view.state.facet(searchConfigFacet);\n    view.dispatch({\n        selection,\n        effects: [announceMatch(view, next), config.scrollToMatch(selection.main, view)],\n        userEvent: \"select.search\"\n    });\n    selectSearchInput(view);\n    return true;\n});\n/**\nMove the selection to the previous instance of the search query,\nbefore the current main selection. Will wrap past the start\nof the document to start searching at the end again.\n*/\nconst findPrevious = /*@__PURE__*/searchCommand((view, { query }) => {\n    let { state } = view, { from } = state.selection.main;\n    let prev = query.prevMatch(state, from, from);\n    if (!prev)\n        return false;\n    let selection = EditorSelection.single(prev.from, prev.to);\n    let config = view.state.facet(searchConfigFacet);\n    view.dispatch({\n        selection,\n        effects: [announceMatch(view, prev), config.scrollToMatch(selection.main, view)],\n        userEvent: \"select.search\"\n    });\n    selectSearchInput(view);\n    return true;\n});\n/**\nSelect all instances of the search query.\n*/\nconst selectMatches = /*@__PURE__*/searchCommand((view, { query }) => {\n    let ranges = query.matchAll(view.state, 1000);\n    if (!ranges || !ranges.length)\n        return false;\n    view.dispatch({\n        selection: EditorSelection.create(ranges.map(r => EditorSelection.range(r.from, r.to))),\n        userEvent: \"select.search.matches\"\n    });\n    return true;\n});\n/**\nSelect all instances of the currently selected text.\n*/\nconst selectSelectionMatches = ({ state, dispatch }) => {\n    let sel = state.selection;\n    if (sel.ranges.length > 1 || sel.main.empty)\n        return false;\n    let { from, to } = sel.main;\n    let ranges = [], main = 0;\n    for (let cur = new SearchCursor(state.doc, state.sliceDoc(from, to)); !cur.next().done;) {\n        if (ranges.length > 1000)\n            return false;\n        if (cur.value.from == from)\n            main = ranges.length;\n        ranges.push(EditorSelection.range(cur.value.from, cur.value.to));\n    }\n    dispatch(state.update({\n        selection: EditorSelection.create(ranges, main),\n        userEvent: \"select.search.matches\"\n    }));\n    return true;\n};\n/**\nReplace the current match of the search query.\n*/\nconst replaceNext = /*@__PURE__*/searchCommand((view, { query }) => {\n    let { state } = view, { from, to } = state.selection.main;\n    if (state.readOnly)\n        return false;\n    let next = query.nextMatch(state, from, from);\n    if (!next)\n        return false;\n    let changes = [], selection, replacement;\n    let effects = [];\n    if (next.from == from && next.to == to) {\n        replacement = state.toText(query.getReplacement(next));\n        changes.push({ from: next.from, to: next.to, insert: replacement });\n        next = query.nextMatch(state, next.from, next.to);\n        effects.push(EditorView.announce.of(state.phrase(\"replaced match on line $\", state.doc.lineAt(from).number) + \".\"));\n    }\n    if (next) {\n        let off = changes.length == 0 || changes[0].from >= next.to ? 0 : next.to - next.from - replacement.length;\n        selection = EditorSelection.single(next.from - off, next.to - off);\n        effects.push(announceMatch(view, next));\n        effects.push(state.facet(searchConfigFacet).scrollToMatch(selection.main, view));\n    }\n    view.dispatch({\n        changes, selection, effects,\n        userEvent: \"input.replace\"\n    });\n    return true;\n});\n/**\nReplace all instances of the search query with the given\nreplacement.\n*/\nconst replaceAll = /*@__PURE__*/searchCommand((view, { query }) => {\n    if (view.state.readOnly)\n        return false;\n    let changes = query.matchAll(view.state, 1e9).map(match => {\n        let { from, to } = match;\n        return { from, to, insert: query.getReplacement(match) };\n    });\n    if (!changes.length)\n        return false;\n    let announceText = view.state.phrase(\"replaced $ matches\", changes.length) + \".\";\n    view.dispatch({\n        changes,\n        effects: EditorView.announce.of(announceText),\n        userEvent: \"input.replace.all\"\n    });\n    return true;\n});\nfunction createSearchPanel(view) {\n    return view.state.facet(searchConfigFacet).createPanel(view);\n}\nfunction defaultQuery(state, fallback) {\n    var _a, _b, _c, _d, _e;\n    let sel = state.selection.main;\n    let selText = sel.empty || sel.to > sel.from + 100 ? \"\" : state.sliceDoc(sel.from, sel.to);\n    if (fallback && !selText)\n        return fallback;\n    let config = state.facet(searchConfigFacet);\n    return new SearchQuery({\n        search: ((_a = fallback === null || fallback === void 0 ? void 0 : fallback.literal) !== null && _a !== void 0 ? _a : config.literal) ? selText : selText.replace(/\\n/g, \"\\\\n\"),\n        caseSensitive: (_b = fallback === null || fallback === void 0 ? void 0 : fallback.caseSensitive) !== null && _b !== void 0 ? _b : config.caseSensitive,\n        literal: (_c = fallback === null || fallback === void 0 ? void 0 : fallback.literal) !== null && _c !== void 0 ? _c : config.literal,\n        regexp: (_d = fallback === null || fallback === void 0 ? void 0 : fallback.regexp) !== null && _d !== void 0 ? _d : config.regexp,\n        wholeWord: (_e = fallback === null || fallback === void 0 ? void 0 : fallback.wholeWord) !== null && _e !== void 0 ? _e : config.wholeWord\n    });\n}\nfunction getSearchInput(view) {\n    let panel = getPanel(view, createSearchPanel);\n    return panel && panel.dom.querySelector(\"[main-field]\");\n}\nfunction selectSearchInput(view) {\n    let input = getSearchInput(view);\n    if (input && input == view.root.activeElement)\n        input.select();\n}\n/**\nMake sure the search panel is open and focused.\n*/\nconst openSearchPanel = view => {\n    let state = view.state.field(searchState, false);\n    if (state && state.panel) {\n        let searchInput = getSearchInput(view);\n        if (searchInput && searchInput != view.root.activeElement) {\n            let query = defaultQuery(view.state, state.query.spec);\n            if (query.valid)\n                view.dispatch({ effects: setSearchQuery.of(query) });\n            searchInput.focus();\n            searchInput.select();\n        }\n    }\n    else {\n        view.dispatch({ effects: [\n                togglePanel.of(true),\n                state ? setSearchQuery.of(defaultQuery(view.state, state.query.spec)) : StateEffect.appendConfig.of(searchExtensions)\n            ] });\n    }\n    return true;\n};\n/**\nClose the search panel.\n*/\nconst closeSearchPanel = view => {\n    let state = view.state.field(searchState, false);\n    if (!state || !state.panel)\n        return false;\n    let panel = getPanel(view, createSearchPanel);\n    if (panel && panel.dom.contains(view.root.activeElement))\n        view.focus();\n    view.dispatch({ effects: togglePanel.of(false) });\n    return true;\n};\n/**\nDefault search-related key bindings.\n\n - Mod-f: [`openSearchPanel`](https://codemirror.net/6/docs/ref/#search.openSearchPanel)\n - F3, Mod-g: [`findNext`](https://codemirror.net/6/docs/ref/#search.findNext)\n - Shift-F3, Shift-Mod-g: [`findPrevious`](https://codemirror.net/6/docs/ref/#search.findPrevious)\n - Mod-Alt-g: [`gotoLine`](https://codemirror.net/6/docs/ref/#search.gotoLine)\n - Mod-d: [`selectNextOccurrence`](https://codemirror.net/6/docs/ref/#search.selectNextOccurrence)\n*/\nconst searchKeymap = [\n    { key: \"Mod-f\", run: openSearchPanel, scope: \"editor search-panel\" },\n    { key: \"F3\", run: findNext, shift: findPrevious, scope: \"editor search-panel\", preventDefault: true },\n    { key: \"Mod-g\", run: findNext, shift: findPrevious, scope: \"editor search-panel\", preventDefault: true },\n    { key: \"Escape\", run: closeSearchPanel, scope: \"editor search-panel\" },\n    { key: \"Mod-Shift-l\", run: selectSelectionMatches },\n    { key: \"Mod-Alt-g\", run: gotoLine },\n    { key: \"Mod-d\", run: selectNextOccurrence, preventDefault: true },\n];\nclass SearchPanel {\n    constructor(view) {\n        this.view = view;\n        let query = this.query = view.state.field(searchState).query.spec;\n        this.commit = this.commit.bind(this);\n        this.searchField = elt(\"input\", {\n            value: query.search,\n            placeholder: phrase(view, \"Find\"),\n            \"aria-label\": phrase(view, \"Find\"),\n            class: \"cm-textfield\",\n            name: \"search\",\n            form: \"\",\n            \"main-field\": \"true\",\n            onchange: this.commit,\n            onkeyup: this.commit\n        });\n        this.replaceField = elt(\"input\", {\n            value: query.replace,\n            placeholder: phrase(view, \"Replace\"),\n            \"aria-label\": phrase(view, \"Replace\"),\n            class: \"cm-textfield\",\n            name: \"replace\",\n            form: \"\",\n            onchange: this.commit,\n            onkeyup: this.commit\n        });\n        this.caseField = elt(\"input\", {\n            type: \"checkbox\",\n            name: \"case\",\n            form: \"\",\n            checked: query.caseSensitive,\n            onchange: this.commit\n        });\n        this.reField = elt(\"input\", {\n            type: \"checkbox\",\n            name: \"re\",\n            form: \"\",\n            checked: query.regexp,\n            onchange: this.commit\n        });\n        this.wordField = elt(\"input\", {\n            type: \"checkbox\",\n            name: \"word\",\n            form: \"\",\n            checked: query.wholeWord,\n            onchange: this.commit\n        });\n        function button(name, onclick, content) {\n            return elt(\"button\", { class: \"cm-button\", name, onclick, type: \"button\" }, content);\n        }\n        this.dom = elt(\"div\", { onkeydown: (e) => this.keydown(e), class: \"cm-search\" }, [\n            this.searchField,\n            button(\"next\", () => findNext(view), [phrase(view, \"next\")]),\n            button(\"prev\", () => findPrevious(view), [phrase(view, \"previous\")]),\n            button(\"select\", () => selectMatches(view), [phrase(view, \"all\")]),\n            elt(\"label\", null, [this.caseField, phrase(view, \"match case\")]),\n            elt(\"label\", null, [this.reField, phrase(view, \"regexp\")]),\n            elt(\"label\", null, [this.wordField, phrase(view, \"by word\")]),\n            ...view.state.readOnly ? [] : [\n                elt(\"br\"),\n                this.replaceField,\n                button(\"replace\", () => replaceNext(view), [phrase(view, \"replace\")]),\n                button(\"replaceAll\", () => replaceAll(view), [phrase(view, \"replace all\")])\n            ],\n            elt(\"button\", {\n                name: \"close\",\n                onclick: () => closeSearchPanel(view),\n                \"aria-label\": phrase(view, \"close\"),\n                type: \"button\"\n            }, [\"\"])\n        ]);\n    }\n    commit() {\n        let query = new SearchQuery({\n            search: this.searchField.value,\n            caseSensitive: this.caseField.checked,\n            regexp: this.reField.checked,\n            wholeWord: this.wordField.checked,\n            replace: this.replaceField.value,\n        });\n        if (!query.eq(this.query)) {\n            this.query = query;\n            this.view.dispatch({ effects: setSearchQuery.of(query) });\n        }\n    }\n    keydown(e) {\n        if (runScopeHandlers(this.view, e, \"search-panel\")) {\n            e.preventDefault();\n        }\n        else if (e.keyCode == 13 && e.target == this.searchField) {\n            e.preventDefault();\n            (e.shiftKey ? findPrevious : findNext)(this.view);\n        }\n        else if (e.keyCode == 13 && e.target == this.replaceField) {\n            e.preventDefault();\n            replaceNext(this.view);\n        }\n    }\n    update(update) {\n        for (let tr of update.transactions)\n            for (let effect of tr.effects) {\n                if (effect.is(setSearchQuery) && !effect.value.eq(this.query))\n                    this.setQuery(effect.value);\n            }\n    }\n    setQuery(query) {\n        this.query = query;\n        this.searchField.value = query.search;\n        this.replaceField.value = query.replace;\n        this.caseField.checked = query.caseSensitive;\n        this.reField.checked = query.regexp;\n        this.wordField.checked = query.wholeWord;\n    }\n    mount() {\n        this.searchField.select();\n    }\n    get pos() { return 80; }\n    get top() { return this.view.state.facet(searchConfigFacet).top; }\n}\nfunction phrase(view, phrase) { return view.state.phrase(phrase); }\nconst AnnounceMargin = 30;\nconst Break = /[\\s\\.,:;?!]/;\nfunction announceMatch(view, { from, to }) {\n    let line = view.state.doc.lineAt(from), lineEnd = view.state.doc.lineAt(to).to;\n    let start = Math.max(line.from, from - AnnounceMargin), end = Math.min(lineEnd, to + AnnounceMargin);\n    let text = view.state.sliceDoc(start, end);\n    if (start != line.from) {\n        for (let i = 0; i < AnnounceMargin; i++)\n            if (!Break.test(text[i + 1]) && Break.test(text[i])) {\n                text = text.slice(i);\n                break;\n            }\n    }\n    if (end != lineEnd) {\n        for (let i = text.length - 1; i > text.length - AnnounceMargin; i--)\n            if (!Break.test(text[i - 1]) && Break.test(text[i])) {\n                text = text.slice(0, i);\n                break;\n            }\n    }\n    return EditorView.announce.of(`${view.state.phrase(\"current match\")}. ${text} ${view.state.phrase(\"on line\")} ${line.number}.`);\n}\nconst baseTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-panel.cm-search\": {\n        padding: \"2px 6px 4px\",\n        position: \"relative\",\n        \"& [name=close]\": {\n            position: \"absolute\",\n            top: \"0\",\n            right: \"4px\",\n            backgroundColor: \"inherit\",\n            border: \"none\",\n            font: \"inherit\",\n            padding: 0,\n            margin: 0\n        },\n        \"& input, & button, & label\": {\n            margin: \".2em .6em .2em 0\"\n        },\n        \"& input[type=checkbox]\": {\n            marginRight: \".2em\"\n        },\n        \"& label\": {\n            fontSize: \"80%\",\n            whiteSpace: \"pre\"\n        }\n    },\n    \"&light .cm-searchMatch\": { backgroundColor: \"#ffff0054\" },\n    \"&dark .cm-searchMatch\": { backgroundColor: \"#00ffff8a\" },\n    \"&light .cm-searchMatch-selected\": { backgroundColor: \"#ff6a0054\" },\n    \"&dark .cm-searchMatch-selected\": { backgroundColor: \"#ff00ff8a\" }\n});\nconst searchExtensions = [\n    searchState,\n    /*@__PURE__*/Prec.low(searchHighlighter),\n    baseTheme\n];\n\nexport { RegExpCursor, SearchCursor, SearchQuery, closeSearchPanel, findNext, findPrevious, getSearchQuery, gotoLine, highlightSelectionMatches, openSearchPanel, replaceAll, replaceNext, search, searchKeymap, searchPanelOpen, selectMatches, selectNextOccurrence, selectSelectionMatches, setSearchQuery };\n","import { Annotation, StateEffect, EditorSelection, codePointAt, codePointSize, fromCodePoint, Facet, combineConfig, StateField, Prec, Text, Transaction, MapMode, RangeValue, RangeSet, CharCategory } from '@codemirror/state';\nimport { Direction, logException, showTooltip, EditorView, ViewPlugin, getTooltip, Decoration, WidgetType, keymap } from '@codemirror/view';\nimport { syntaxTree, indentUnit } from '@codemirror/language';\n\n/**\nAn instance of this is passed to completion source functions.\n*/\nclass CompletionContext {\n    /**\n    Create a new completion context. (Mostly useful for testing\n    completion sourcesin the editor, the extension will create\n    these for you.)\n    */\n    constructor(\n    /**\n    The editor state that the completion happens in.\n    */\n    state, \n    /**\n    The position at which the completion is happening.\n    */\n    pos, \n    /**\n    Indicates whether completion was activated explicitly, or\n    implicitly by typing. The usual way to respond to this is to\n    only return completions when either there is part of a\n    completable entity before the cursor, or `explicit` is true.\n    */\n    explicit, \n    /**\n    The editor view. May be undefined if the context was created\n    in a situation where there is no such view available, such as\n    in synchronous updates via\n    [`CompletionResult.update`](https://codemirror.net/6/docs/ref/#autocomplete.CompletionResult.update)\n    or when called by test code.\n    */\n    view) {\n        this.state = state;\n        this.pos = pos;\n        this.explicit = explicit;\n        this.view = view;\n        /**\n        @internal\n        */\n        this.abortListeners = [];\n        /**\n        @internal\n        */\n        this.abortOnDocChange = false;\n    }\n    /**\n    Get the extent, content, and (if there is a token) type of the\n    token before `this.pos`.\n    */\n    tokenBefore(types) {\n        let token = syntaxTree(this.state).resolveInner(this.pos, -1);\n        while (token && types.indexOf(token.name) < 0)\n            token = token.parent;\n        return token ? { from: token.from, to: this.pos,\n            text: this.state.sliceDoc(token.from, this.pos),\n            type: token.type } : null;\n    }\n    /**\n    Get the match of the given expression directly before the\n    cursor.\n    */\n    matchBefore(expr) {\n        let line = this.state.doc.lineAt(this.pos);\n        let start = Math.max(line.from, this.pos - 250);\n        let str = line.text.slice(start - line.from, this.pos - line.from);\n        let found = str.search(ensureAnchor(expr, false));\n        return found < 0 ? null : { from: start + found, to: this.pos, text: str.slice(found) };\n    }\n    /**\n    Yields true when the query has been aborted. Can be useful in\n    asynchronous queries to avoid doing work that will be ignored.\n    */\n    get aborted() { return this.abortListeners == null; }\n    /**\n    Allows you to register abort handlers, which will be called when\n    the query is\n    [aborted](https://codemirror.net/6/docs/ref/#autocomplete.CompletionContext.aborted).\n    \n    By default, running queries will not be aborted for regular\n    typing or backspacing, on the assumption that they are likely to\n    return a result with a\n    [`validFor`](https://codemirror.net/6/docs/ref/#autocomplete.CompletionResult.validFor) field that\n    allows the result to be used after all. Passing `onDocChange:\n    true` will cause this query to be aborted for any document\n    change.\n    */\n    addEventListener(type, listener, options) {\n        if (type == \"abort\" && this.abortListeners) {\n            this.abortListeners.push(listener);\n            if (options && options.onDocChange)\n                this.abortOnDocChange = true;\n        }\n    }\n}\nfunction toSet(chars) {\n    let flat = Object.keys(chars).join(\"\");\n    let words = /\\w/.test(flat);\n    if (words)\n        flat = flat.replace(/\\w/g, \"\");\n    return `[${words ? \"\\\\w\" : \"\"}${flat.replace(/[^\\w\\s]/g, \"\\\\$&\")}]`;\n}\nfunction prefixMatch(options) {\n    let first = Object.create(null), rest = Object.create(null);\n    for (let { label } of options) {\n        first[label[0]] = true;\n        for (let i = 1; i < label.length; i++)\n            rest[label[i]] = true;\n    }\n    let source = toSet(first) + toSet(rest) + \"*$\";\n    return [new RegExp(\"^\" + source), new RegExp(source)];\n}\n/**\nGiven a a fixed array of options, return an autocompleter that\ncompletes them.\n*/\nfunction completeFromList(list) {\n    let options = list.map(o => typeof o == \"string\" ? { label: o } : o);\n    let [validFor, match] = options.every(o => /^\\w+$/.test(o.label)) ? [/\\w*$/, /\\w+$/] : prefixMatch(options);\n    return (context) => {\n        let token = context.matchBefore(match);\n        return token || context.explicit ? { from: token ? token.from : context.pos, options, validFor } : null;\n    };\n}\n/**\nWrap the given completion source so that it will only fire when the\ncursor is in a syntax node with one of the given names.\n*/\nfunction ifIn(nodes, source) {\n    return (context) => {\n        for (let pos = syntaxTree(context.state).resolveInner(context.pos, -1); pos; pos = pos.parent) {\n            if (nodes.indexOf(pos.name) > -1)\n                return source(context);\n            if (pos.type.isTop)\n                break;\n        }\n        return null;\n    };\n}\n/**\nWrap the given completion source so that it will not fire when the\ncursor is in a syntax node with one of the given names.\n*/\nfunction ifNotIn(nodes, source) {\n    return (context) => {\n        for (let pos = syntaxTree(context.state).resolveInner(context.pos, -1); pos; pos = pos.parent) {\n            if (nodes.indexOf(pos.name) > -1)\n                return null;\n            if (pos.type.isTop)\n                break;\n        }\n        return source(context);\n    };\n}\nclass Option {\n    constructor(completion, source, match, score) {\n        this.completion = completion;\n        this.source = source;\n        this.match = match;\n        this.score = score;\n    }\n}\nfunction cur(state) { return state.selection.main.from; }\n// Make sure the given regexp has a $ at its end and, if `start` is\n// true, a ^ at its start.\nfunction ensureAnchor(expr, start) {\n    var _a;\n    let { source } = expr;\n    let addStart = start && source[0] != \"^\", addEnd = source[source.length - 1] != \"$\";\n    if (!addStart && !addEnd)\n        return expr;\n    return new RegExp(`${addStart ? \"^\" : \"\"}(?:${source})${addEnd ? \"$\" : \"\"}`, (_a = expr.flags) !== null && _a !== void 0 ? _a : (expr.ignoreCase ? \"i\" : \"\"));\n}\n/**\nThis annotation is added to transactions that are produced by\npicking a completion.\n*/\nconst pickedCompletion = /*@__PURE__*/Annotation.define();\n/**\nHelper function that returns a transaction spec which inserts a\ncompletion's text in the main selection range, and any other\nselection range that has the same text in front of it.\n*/\nfunction insertCompletionText(state, text, from, to) {\n    let { main } = state.selection, fromOff = from - main.from, toOff = to - main.from;\n    return Object.assign(Object.assign({}, state.changeByRange(range => {\n        if (range != main && from != to &&\n            state.sliceDoc(range.from + fromOff, range.from + toOff) != state.sliceDoc(from, to))\n            return { range };\n        let lines = state.toText(text);\n        return {\n            changes: { from: range.from + fromOff, to: to == main.from ? range.to : range.from + toOff, insert: lines },\n            range: EditorSelection.cursor(range.from + fromOff + lines.length)\n        };\n    })), { scrollIntoView: true, userEvent: \"input.complete\" });\n}\nconst SourceCache = /*@__PURE__*/new WeakMap();\nfunction asSource(source) {\n    if (!Array.isArray(source))\n        return source;\n    let known = SourceCache.get(source);\n    if (!known)\n        SourceCache.set(source, known = completeFromList(source));\n    return known;\n}\nconst startCompletionEffect = /*@__PURE__*/StateEffect.define();\nconst closeCompletionEffect = /*@__PURE__*/StateEffect.define();\n\n// A pattern matcher for fuzzy completion matching. Create an instance\n// once for a pattern, and then use that to match any number of\n// completions.\nclass FuzzyMatcher {\n    constructor(pattern) {\n        this.pattern = pattern;\n        this.chars = [];\n        this.folded = [];\n        // Buffers reused by calls to `match` to track matched character\n        // positions.\n        this.any = [];\n        this.precise = [];\n        this.byWord = [];\n        this.score = 0;\n        this.matched = [];\n        for (let p = 0; p < pattern.length;) {\n            let char = codePointAt(pattern, p), size = codePointSize(char);\n            this.chars.push(char);\n            let part = pattern.slice(p, p + size), upper = part.toUpperCase();\n            this.folded.push(codePointAt(upper == part ? part.toLowerCase() : upper, 0));\n            p += size;\n        }\n        this.astral = pattern.length != this.chars.length;\n    }\n    ret(score, matched) {\n        this.score = score;\n        this.matched = matched;\n        return this;\n    }\n    // Matches a given word (completion) against the pattern (input).\n    // Will return a boolean indicating whether there was a match and,\n    // on success, set `this.score` to the score, `this.matched` to an\n    // array of `from, to` pairs indicating the matched parts of `word`.\n    //\n    // The score is a number that is more negative the worse the match\n    // is. See `Penalty` above.\n    match(word) {\n        if (this.pattern.length == 0)\n            return this.ret(-100 /* Penalty.NotFull */, []);\n        if (word.length < this.pattern.length)\n            return null;\n        let { chars, folded, any, precise, byWord } = this;\n        // For single-character queries, only match when they occur right\n        // at the start\n        if (chars.length == 1) {\n            let first = codePointAt(word, 0), firstSize = codePointSize(first);\n            let score = firstSize == word.length ? 0 : -100 /* Penalty.NotFull */;\n            if (first == chars[0]) ;\n            else if (first == folded[0])\n                score += -200 /* Penalty.CaseFold */;\n            else\n                return null;\n            return this.ret(score, [0, firstSize]);\n        }\n        let direct = word.indexOf(this.pattern);\n        if (direct == 0)\n            return this.ret(word.length == this.pattern.length ? 0 : -100 /* Penalty.NotFull */, [0, this.pattern.length]);\n        let len = chars.length, anyTo = 0;\n        if (direct < 0) {\n            for (let i = 0, e = Math.min(word.length, 200); i < e && anyTo < len;) {\n                let next = codePointAt(word, i);\n                if (next == chars[anyTo] || next == folded[anyTo])\n                    any[anyTo++] = i;\n                i += codePointSize(next);\n            }\n            // No match, exit immediately\n            if (anyTo < len)\n                return null;\n        }\n        // This tracks the extent of the precise (non-folded, not\n        // necessarily adjacent) match\n        let preciseTo = 0;\n        // Tracks whether there is a match that hits only characters that\n        // appear to be starting words. `byWordFolded` is set to true when\n        // a case folded character is encountered in such a match\n        let byWordTo = 0, byWordFolded = false;\n        // If we've found a partial adjacent match, these track its state\n        let adjacentTo = 0, adjacentStart = -1, adjacentEnd = -1;\n        let hasLower = /[a-z]/.test(word), wordAdjacent = true;\n        // Go over the option's text, scanning for the various kinds of matches\n        for (let i = 0, e = Math.min(word.length, 200), prevType = 0 /* Tp.NonWord */; i < e && byWordTo < len;) {\n            let next = codePointAt(word, i);\n            if (direct < 0) {\n                if (preciseTo < len && next == chars[preciseTo])\n                    precise[preciseTo++] = i;\n                if (adjacentTo < len) {\n                    if (next == chars[adjacentTo] || next == folded[adjacentTo]) {\n                        if (adjacentTo == 0)\n                            adjacentStart = i;\n                        adjacentEnd = i + 1;\n                        adjacentTo++;\n                    }\n                    else {\n                        adjacentTo = 0;\n                    }\n                }\n            }\n            let ch, type = next < 0xff\n                ? (next >= 48 && next <= 57 || next >= 97 && next <= 122 ? 2 /* Tp.Lower */ : next >= 65 && next <= 90 ? 1 /* Tp.Upper */ : 0 /* Tp.NonWord */)\n                : ((ch = fromCodePoint(next)) != ch.toLowerCase() ? 1 /* Tp.Upper */ : ch != ch.toUpperCase() ? 2 /* Tp.Lower */ : 0 /* Tp.NonWord */);\n            if (!i || type == 1 /* Tp.Upper */ && hasLower || prevType == 0 /* Tp.NonWord */ && type != 0 /* Tp.NonWord */) {\n                if (chars[byWordTo] == next || (folded[byWordTo] == next && (byWordFolded = true)))\n                    byWord[byWordTo++] = i;\n                else if (byWord.length)\n                    wordAdjacent = false;\n            }\n            prevType = type;\n            i += codePointSize(next);\n        }\n        if (byWordTo == len && byWord[0] == 0 && wordAdjacent)\n            return this.result(-100 /* Penalty.ByWord */ + (byWordFolded ? -200 /* Penalty.CaseFold */ : 0), byWord, word);\n        if (adjacentTo == len && adjacentStart == 0)\n            return this.ret(-200 /* Penalty.CaseFold */ - word.length + (adjacentEnd == word.length ? 0 : -100 /* Penalty.NotFull */), [0, adjacentEnd]);\n        if (direct > -1)\n            return this.ret(-700 /* Penalty.NotStart */ - word.length, [direct, direct + this.pattern.length]);\n        if (adjacentTo == len)\n            return this.ret(-200 /* Penalty.CaseFold */ + -700 /* Penalty.NotStart */ - word.length, [adjacentStart, adjacentEnd]);\n        if (byWordTo == len)\n            return this.result(-100 /* Penalty.ByWord */ + (byWordFolded ? -200 /* Penalty.CaseFold */ : 0) + -700 /* Penalty.NotStart */ +\n                (wordAdjacent ? 0 : -1100 /* Penalty.Gap */), byWord, word);\n        return chars.length == 2 ? null\n            : this.result((any[0] ? -700 /* Penalty.NotStart */ : 0) + -200 /* Penalty.CaseFold */ + -1100 /* Penalty.Gap */, any, word);\n    }\n    result(score, positions, word) {\n        let result = [], i = 0;\n        for (let pos of positions) {\n            let to = pos + (this.astral ? codePointSize(codePointAt(word, pos)) : 1);\n            if (i && result[i - 1] == pos)\n                result[i - 1] = to;\n            else {\n                result[i++] = pos;\n                result[i++] = to;\n            }\n        }\n        return this.ret(score - word.length, result);\n    }\n}\nclass StrictMatcher {\n    constructor(pattern) {\n        this.pattern = pattern;\n        this.matched = [];\n        this.score = 0;\n        this.folded = pattern.toLowerCase();\n    }\n    match(word) {\n        if (word.length < this.pattern.length)\n            return null;\n        let start = word.slice(0, this.pattern.length);\n        let match = start == this.pattern ? 0 : start.toLowerCase() == this.folded ? -200 /* Penalty.CaseFold */ : null;\n        if (match == null)\n            return null;\n        this.matched = [0, start.length];\n        this.score = match + (word.length == this.pattern.length ? 0 : -100 /* Penalty.NotFull */);\n        return this;\n    }\n}\n\nconst completionConfig = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            activateOnTyping: true,\n            activateOnCompletion: () => false,\n            activateOnTypingDelay: 100,\n            selectOnOpen: true,\n            override: null,\n            closeOnBlur: true,\n            maxRenderedOptions: 100,\n            defaultKeymap: true,\n            tooltipClass: () => \"\",\n            optionClass: () => \"\",\n            aboveCursor: false,\n            icons: true,\n            addToOptions: [],\n            positionInfo: defaultPositionInfo,\n            filterStrict: false,\n            compareCompletions: (a, b) => a.label.localeCompare(b.label),\n            interactionDelay: 75,\n            updateSyncTime: 100\n        }, {\n            defaultKeymap: (a, b) => a && b,\n            closeOnBlur: (a, b) => a && b,\n            icons: (a, b) => a && b,\n            tooltipClass: (a, b) => c => joinClass(a(c), b(c)),\n            optionClass: (a, b) => c => joinClass(a(c), b(c)),\n            addToOptions: (a, b) => a.concat(b),\n            filterStrict: (a, b) => a || b,\n        });\n    }\n});\nfunction joinClass(a, b) {\n    return a ? b ? a + \" \" + b : a : b;\n}\nfunction defaultPositionInfo(view, list, option, info, space, tooltip) {\n    let rtl = view.textDirection == Direction.RTL, left = rtl, narrow = false;\n    let side = \"top\", offset, maxWidth;\n    let spaceLeft = list.left - space.left, spaceRight = space.right - list.right;\n    let infoWidth = info.right - info.left, infoHeight = info.bottom - info.top;\n    if (left && spaceLeft < Math.min(infoWidth, spaceRight))\n        left = false;\n    else if (!left && spaceRight < Math.min(infoWidth, spaceLeft))\n        left = true;\n    if (infoWidth <= (left ? spaceLeft : spaceRight)) {\n        offset = Math.max(space.top, Math.min(option.top, space.bottom - infoHeight)) - list.top;\n        maxWidth = Math.min(400 /* Info.Width */, left ? spaceLeft : spaceRight);\n    }\n    else {\n        narrow = true;\n        maxWidth = Math.min(400 /* Info.Width */, (rtl ? list.right : space.right - list.left) - 30 /* Info.Margin */);\n        let spaceBelow = space.bottom - list.bottom;\n        if (spaceBelow >= infoHeight || spaceBelow > list.top) { // Below the completion\n            offset = option.bottom - list.top;\n        }\n        else { // Above it\n            side = \"bottom\";\n            offset = list.bottom - option.top;\n        }\n    }\n    let scaleY = (list.bottom - list.top) / tooltip.offsetHeight;\n    let scaleX = (list.right - list.left) / tooltip.offsetWidth;\n    return {\n        style: `${side}: ${offset / scaleY}px; max-width: ${maxWidth / scaleX}px`,\n        class: \"cm-completionInfo-\" + (narrow ? (rtl ? \"left-narrow\" : \"right-narrow\") : left ? \"left\" : \"right\")\n    };\n}\n\nfunction optionContent(config) {\n    let content = config.addToOptions.slice();\n    if (config.icons)\n        content.push({\n            render(completion) {\n                let icon = document.createElement(\"div\");\n                icon.classList.add(\"cm-completionIcon\");\n                if (completion.type)\n                    icon.classList.add(...completion.type.split(/\\s+/g).map(cls => \"cm-completionIcon-\" + cls));\n                icon.setAttribute(\"aria-hidden\", \"true\");\n                return icon;\n            },\n            position: 20\n        });\n    content.push({\n        render(completion, _s, _v, match) {\n            let labelElt = document.createElement(\"span\");\n            labelElt.className = \"cm-completionLabel\";\n            let label = completion.displayLabel || completion.label, off = 0;\n            for (let j = 0; j < match.length;) {\n                let from = match[j++], to = match[j++];\n                if (from > off)\n                    labelElt.appendChild(document.createTextNode(label.slice(off, from)));\n                let span = labelElt.appendChild(document.createElement(\"span\"));\n                span.appendChild(document.createTextNode(label.slice(from, to)));\n                span.className = \"cm-completionMatchedText\";\n                off = to;\n            }\n            if (off < label.length)\n                labelElt.appendChild(document.createTextNode(label.slice(off)));\n            return labelElt;\n        },\n        position: 50\n    }, {\n        render(completion) {\n            if (!completion.detail)\n                return null;\n            let detailElt = document.createElement(\"span\");\n            detailElt.className = \"cm-completionDetail\";\n            detailElt.textContent = completion.detail;\n            return detailElt;\n        },\n        position: 80\n    });\n    return content.sort((a, b) => a.position - b.position).map(a => a.render);\n}\nfunction rangeAroundSelected(total, selected, max) {\n    if (total <= max)\n        return { from: 0, to: total };\n    if (selected < 0)\n        selected = 0;\n    if (selected <= (total >> 1)) {\n        let off = Math.floor(selected / max);\n        return { from: off * max, to: (off + 1) * max };\n    }\n    let off = Math.floor((total - selected) / max);\n    return { from: total - (off + 1) * max, to: total - off * max };\n}\nclass CompletionTooltip {\n    constructor(view, stateField, applyCompletion) {\n        this.view = view;\n        this.stateField = stateField;\n        this.applyCompletion = applyCompletion;\n        this.info = null;\n        this.infoDestroy = null;\n        this.placeInfoReq = {\n            read: () => this.measureInfo(),\n            write: (pos) => this.placeInfo(pos),\n            key: this\n        };\n        this.space = null;\n        this.currentClass = \"\";\n        let cState = view.state.field(stateField);\n        let { options, selected } = cState.open;\n        let config = view.state.facet(completionConfig);\n        this.optionContent = optionContent(config);\n        this.optionClass = config.optionClass;\n        this.tooltipClass = config.tooltipClass;\n        this.range = rangeAroundSelected(options.length, selected, config.maxRenderedOptions);\n        this.dom = document.createElement(\"div\");\n        this.dom.className = \"cm-tooltip-autocomplete\";\n        this.updateTooltipClass(view.state);\n        this.dom.addEventListener(\"mousedown\", (e) => {\n            let { options } = view.state.field(stateField).open;\n            for (let dom = e.target, match; dom && dom != this.dom; dom = dom.parentNode) {\n                if (dom.nodeName == \"LI\" && (match = /-(\\d+)$/.exec(dom.id)) && +match[1] < options.length) {\n                    this.applyCompletion(view, options[+match[1]]);\n                    e.preventDefault();\n                    return;\n                }\n            }\n        });\n        this.dom.addEventListener(\"focusout\", (e) => {\n            let state = view.state.field(this.stateField, false);\n            if (state && state.tooltip && view.state.facet(completionConfig).closeOnBlur &&\n                e.relatedTarget != view.contentDOM)\n                view.dispatch({ effects: closeCompletionEffect.of(null) });\n        });\n        this.showOptions(options, cState.id);\n    }\n    mount() { this.updateSel(); }\n    showOptions(options, id) {\n        if (this.list)\n            this.list.remove();\n        this.list = this.dom.appendChild(this.createListBox(options, id, this.range));\n        this.list.addEventListener(\"scroll\", () => {\n            if (this.info)\n                this.view.requestMeasure(this.placeInfoReq);\n        });\n    }\n    update(update) {\n        var _a;\n        let cState = update.state.field(this.stateField);\n        let prevState = update.startState.field(this.stateField);\n        this.updateTooltipClass(update.state);\n        if (cState != prevState) {\n            let { options, selected, disabled } = cState.open;\n            if (!prevState.open || prevState.open.options != options) {\n                this.range = rangeAroundSelected(options.length, selected, update.state.facet(completionConfig).maxRenderedOptions);\n                this.showOptions(options, cState.id);\n            }\n            this.updateSel();\n            if (disabled != ((_a = prevState.open) === null || _a === void 0 ? void 0 : _a.disabled))\n                this.dom.classList.toggle(\"cm-tooltip-autocomplete-disabled\", !!disabled);\n        }\n    }\n    updateTooltipClass(state) {\n        let cls = this.tooltipClass(state);\n        if (cls != this.currentClass) {\n            for (let c of this.currentClass.split(\" \"))\n                if (c)\n                    this.dom.classList.remove(c);\n            for (let c of cls.split(\" \"))\n                if (c)\n                    this.dom.classList.add(c);\n            this.currentClass = cls;\n        }\n    }\n    positioned(space) {\n        this.space = space;\n        if (this.info)\n            this.view.requestMeasure(this.placeInfoReq);\n    }\n    updateSel() {\n        let cState = this.view.state.field(this.stateField), open = cState.open;\n        if (open.selected > -1 && open.selected < this.range.from || open.selected >= this.range.to) {\n            this.range = rangeAroundSelected(open.options.length, open.selected, this.view.state.facet(completionConfig).maxRenderedOptions);\n            this.showOptions(open.options, cState.id);\n        }\n        if (this.updateSelectedOption(open.selected)) {\n            this.destroyInfo();\n            let { completion } = open.options[open.selected];\n            let { info } = completion;\n            if (!info)\n                return;\n            let infoResult = typeof info === \"string\" ? document.createTextNode(info) : info(completion);\n            if (!infoResult)\n                return;\n            if (\"then\" in infoResult) {\n                infoResult.then(obj => {\n                    if (obj && this.view.state.field(this.stateField, false) == cState)\n                        this.addInfoPane(obj, completion);\n                }).catch(e => logException(this.view.state, e, \"completion info\"));\n            }\n            else {\n                this.addInfoPane(infoResult, completion);\n            }\n        }\n    }\n    addInfoPane(content, completion) {\n        this.destroyInfo();\n        let wrap = this.info = document.createElement(\"div\");\n        wrap.className = \"cm-tooltip cm-completionInfo\";\n        if (content.nodeType != null) {\n            wrap.appendChild(content);\n            this.infoDestroy = null;\n        }\n        else {\n            let { dom, destroy } = content;\n            wrap.appendChild(dom);\n            this.infoDestroy = destroy || null;\n        }\n        this.dom.appendChild(wrap);\n        this.view.requestMeasure(this.placeInfoReq);\n    }\n    updateSelectedOption(selected) {\n        let set = null;\n        for (let opt = this.list.firstChild, i = this.range.from; opt; opt = opt.nextSibling, i++) {\n            if (opt.nodeName != \"LI\" || !opt.id) {\n                i--; // A section header\n            }\n            else if (i == selected) {\n                if (!opt.hasAttribute(\"aria-selected\")) {\n                    opt.setAttribute(\"aria-selected\", \"true\");\n                    set = opt;\n                }\n            }\n            else {\n                if (opt.hasAttribute(\"aria-selected\"))\n                    opt.removeAttribute(\"aria-selected\");\n            }\n        }\n        if (set)\n            scrollIntoView(this.list, set);\n        return set;\n    }\n    measureInfo() {\n        let sel = this.dom.querySelector(\"[aria-selected]\");\n        if (!sel || !this.info)\n            return null;\n        let listRect = this.dom.getBoundingClientRect();\n        let infoRect = this.info.getBoundingClientRect();\n        let selRect = sel.getBoundingClientRect();\n        let space = this.space;\n        if (!space) {\n            let win = this.dom.ownerDocument.defaultView || window;\n            space = { left: 0, top: 0, right: win.innerWidth, bottom: win.innerHeight };\n        }\n        if (selRect.top > Math.min(space.bottom, listRect.bottom) - 10 ||\n            selRect.bottom < Math.max(space.top, listRect.top) + 10)\n            return null;\n        return this.view.state.facet(completionConfig).positionInfo(this.view, listRect, selRect, infoRect, space, this.dom);\n    }\n    placeInfo(pos) {\n        if (this.info) {\n            if (pos) {\n                if (pos.style)\n                    this.info.style.cssText = pos.style;\n                this.info.className = \"cm-tooltip cm-completionInfo \" + (pos.class || \"\");\n            }\n            else {\n                this.info.style.cssText = \"top: -1e6px\";\n            }\n        }\n    }\n    createListBox(options, id, range) {\n        const ul = document.createElement(\"ul\");\n        ul.id = id;\n        ul.setAttribute(\"role\", \"listbox\");\n        ul.setAttribute(\"aria-expanded\", \"true\");\n        ul.setAttribute(\"aria-label\", this.view.state.phrase(\"Completions\"));\n        let curSection = null;\n        for (let i = range.from; i < range.to; i++) {\n            let { completion, match } = options[i], { section } = completion;\n            if (section) {\n                let name = typeof section == \"string\" ? section : section.name;\n                if (name != curSection && (i > range.from || range.from == 0)) {\n                    curSection = name;\n                    if (typeof section != \"string\" && section.header) {\n                        ul.appendChild(section.header(section));\n                    }\n                    else {\n                        let header = ul.appendChild(document.createElement(\"completion-section\"));\n                        header.textContent = name;\n                    }\n                }\n            }\n            const li = ul.appendChild(document.createElement(\"li\"));\n            li.id = id + \"-\" + i;\n            li.setAttribute(\"role\", \"option\");\n            let cls = this.optionClass(completion);\n            if (cls)\n                li.className = cls;\n            for (let source of this.optionContent) {\n                let node = source(completion, this.view.state, this.view, match);\n                if (node)\n                    li.appendChild(node);\n            }\n        }\n        if (range.from)\n            ul.classList.add(\"cm-completionListIncompleteTop\");\n        if (range.to < options.length)\n            ul.classList.add(\"cm-completionListIncompleteBottom\");\n        return ul;\n    }\n    destroyInfo() {\n        if (this.info) {\n            if (this.infoDestroy)\n                this.infoDestroy();\n            this.info.remove();\n            this.info = null;\n        }\n    }\n    destroy() {\n        this.destroyInfo();\n    }\n}\nfunction completionTooltip(stateField, applyCompletion) {\n    return (view) => new CompletionTooltip(view, stateField, applyCompletion);\n}\nfunction scrollIntoView(container, element) {\n    let parent = container.getBoundingClientRect();\n    let self = element.getBoundingClientRect();\n    let scaleY = parent.height / container.offsetHeight;\n    if (self.top < parent.top)\n        container.scrollTop -= (parent.top - self.top) / scaleY;\n    else if (self.bottom > parent.bottom)\n        container.scrollTop += (self.bottom - parent.bottom) / scaleY;\n}\n\n// Used to pick a preferred option when two options with the same\n// label occur in the result.\nfunction score(option) {\n    return (option.boost || 0) * 100 + (option.apply ? 10 : 0) + (option.info ? 5 : 0) +\n        (option.type ? 1 : 0);\n}\nfunction sortOptions(active, state) {\n    let options = [];\n    let sections = null;\n    let addOption = (option) => {\n        options.push(option);\n        let { section } = option.completion;\n        if (section) {\n            if (!sections)\n                sections = [];\n            let name = typeof section == \"string\" ? section : section.name;\n            if (!sections.some(s => s.name == name))\n                sections.push(typeof section == \"string\" ? { name } : section);\n        }\n    };\n    let conf = state.facet(completionConfig);\n    for (let a of active)\n        if (a.hasResult()) {\n            let getMatch = a.result.getMatch;\n            if (a.result.filter === false) {\n                for (let option of a.result.options) {\n                    addOption(new Option(option, a.source, getMatch ? getMatch(option) : [], 1e9 - options.length));\n                }\n            }\n            else {\n                let pattern = state.sliceDoc(a.from, a.to), match;\n                let matcher = conf.filterStrict ? new StrictMatcher(pattern) : new FuzzyMatcher(pattern);\n                for (let option of a.result.options)\n                    if (match = matcher.match(option.label)) {\n                        let matched = !option.displayLabel ? match.matched : getMatch ? getMatch(option, match.matched) : [];\n                        addOption(new Option(option, a.source, matched, match.score + (option.boost || 0)));\n                    }\n            }\n        }\n    if (sections) {\n        let sectionOrder = Object.create(null), pos = 0;\n        let cmp = (a, b) => { var _a, _b; return ((_a = a.rank) !== null && _a !== void 0 ? _a : 1e9) - ((_b = b.rank) !== null && _b !== void 0 ? _b : 1e9) || (a.name < b.name ? -1 : 1); };\n        for (let s of sections.sort(cmp)) {\n            pos -= 1e5;\n            sectionOrder[s.name] = pos;\n        }\n        for (let option of options) {\n            let { section } = option.completion;\n            if (section)\n                option.score += sectionOrder[typeof section == \"string\" ? section : section.name];\n        }\n    }\n    let result = [], prev = null;\n    let compare = conf.compareCompletions;\n    for (let opt of options.sort((a, b) => (b.score - a.score) || compare(a.completion, b.completion))) {\n        let cur = opt.completion;\n        if (!prev || prev.label != cur.label || prev.detail != cur.detail ||\n            (prev.type != null && cur.type != null && prev.type != cur.type) ||\n            prev.apply != cur.apply || prev.boost != cur.boost)\n            result.push(opt);\n        else if (score(opt.completion) > score(prev))\n            result[result.length - 1] = opt;\n        prev = opt.completion;\n    }\n    return result;\n}\nclass CompletionDialog {\n    constructor(options, attrs, tooltip, timestamp, selected, disabled) {\n        this.options = options;\n        this.attrs = attrs;\n        this.tooltip = tooltip;\n        this.timestamp = timestamp;\n        this.selected = selected;\n        this.disabled = disabled;\n    }\n    setSelected(selected, id) {\n        return selected == this.selected || selected >= this.options.length ? this\n            : new CompletionDialog(this.options, makeAttrs(id, selected), this.tooltip, this.timestamp, selected, this.disabled);\n    }\n    static build(active, state, id, prev, conf, didSetActive) {\n        if (prev && !didSetActive && active.some(s => s.isPending))\n            return prev.setDisabled();\n        let options = sortOptions(active, state);\n        if (!options.length)\n            return prev && active.some(a => a.isPending) ? prev.setDisabled() : null;\n        let selected = state.facet(completionConfig).selectOnOpen ? 0 : -1;\n        if (prev && prev.selected != selected && prev.selected != -1) {\n            let selectedValue = prev.options[prev.selected].completion;\n            for (let i = 0; i < options.length; i++)\n                if (options[i].completion == selectedValue) {\n                    selected = i;\n                    break;\n                }\n        }\n        return new CompletionDialog(options, makeAttrs(id, selected), {\n            pos: active.reduce((a, b) => b.hasResult() ? Math.min(a, b.from) : a, 1e8),\n            create: createTooltip,\n            above: conf.aboveCursor,\n        }, prev ? prev.timestamp : Date.now(), selected, false);\n    }\n    map(changes) {\n        return new CompletionDialog(this.options, this.attrs, Object.assign(Object.assign({}, this.tooltip), { pos: changes.mapPos(this.tooltip.pos) }), this.timestamp, this.selected, this.disabled);\n    }\n    setDisabled() {\n        return new CompletionDialog(this.options, this.attrs, this.tooltip, this.timestamp, this.selected, true);\n    }\n}\nclass CompletionState {\n    constructor(active, id, open) {\n        this.active = active;\n        this.id = id;\n        this.open = open;\n    }\n    static start() {\n        return new CompletionState(none, \"cm-ac-\" + Math.floor(Math.random() * 2e6).toString(36), null);\n    }\n    update(tr) {\n        let { state } = tr, conf = state.facet(completionConfig);\n        let sources = conf.override ||\n            state.languageDataAt(\"autocomplete\", cur(state)).map(asSource);\n        let active = sources.map(source => {\n            let value = this.active.find(s => s.source == source) ||\n                new ActiveSource(source, this.active.some(a => a.state != 0 /* State.Inactive */) ? 1 /* State.Pending */ : 0 /* State.Inactive */);\n            return value.update(tr, conf);\n        });\n        if (active.length == this.active.length && active.every((a, i) => a == this.active[i]))\n            active = this.active;\n        let open = this.open, didSet = tr.effects.some(e => e.is(setActiveEffect));\n        if (open && tr.docChanged)\n            open = open.map(tr.changes);\n        if (tr.selection || active.some(a => a.hasResult() && tr.changes.touchesRange(a.from, a.to)) ||\n            !sameResults(active, this.active) || didSet)\n            open = CompletionDialog.build(active, state, this.id, open, conf, didSet);\n        else if (open && open.disabled && !active.some(a => a.isPending))\n            open = null;\n        if (!open && active.every(a => !a.isPending) && active.some(a => a.hasResult()))\n            active = active.map(a => a.hasResult() ? new ActiveSource(a.source, 0 /* State.Inactive */) : a);\n        for (let effect of tr.effects)\n            if (effect.is(setSelectedEffect))\n                open = open && open.setSelected(effect.value, this.id);\n        return active == this.active && open == this.open ? this : new CompletionState(active, this.id, open);\n    }\n    get tooltip() { return this.open ? this.open.tooltip : null; }\n    get attrs() { return this.open ? this.open.attrs : this.active.length ? baseAttrs : noAttrs; }\n}\nfunction sameResults(a, b) {\n    if (a == b)\n        return true;\n    for (let iA = 0, iB = 0;;) {\n        while (iA < a.length && !a[iA].hasResult())\n            iA++;\n        while (iB < b.length && !b[iB].hasResult())\n            iB++;\n        let endA = iA == a.length, endB = iB == b.length;\n        if (endA || endB)\n            return endA == endB;\n        if (a[iA++].result != b[iB++].result)\n            return false;\n    }\n}\nconst baseAttrs = {\n    \"aria-autocomplete\": \"list\"\n};\nconst noAttrs = {};\nfunction makeAttrs(id, selected) {\n    let result = {\n        \"aria-autocomplete\": \"list\",\n        \"aria-haspopup\": \"listbox\",\n        \"aria-controls\": id\n    };\n    if (selected > -1)\n        result[\"aria-activedescendant\"] = id + \"-\" + selected;\n    return result;\n}\nconst none = [];\nfunction getUpdateType(tr, conf) {\n    if (tr.isUserEvent(\"input.complete\")) {\n        let completion = tr.annotation(pickedCompletion);\n        if (completion && conf.activateOnCompletion(completion))\n            return 4 /* UpdateType.Activate */ | 8 /* UpdateType.Reset */;\n    }\n    let typing = tr.isUserEvent(\"input.type\");\n    return typing && conf.activateOnTyping ? 4 /* UpdateType.Activate */ | 1 /* UpdateType.Typing */\n        : typing ? 1 /* UpdateType.Typing */\n            : tr.isUserEvent(\"delete.backward\") ? 2 /* UpdateType.Backspacing */\n                : tr.selection ? 8 /* UpdateType.Reset */\n                    : tr.docChanged ? 16 /* UpdateType.ResetIfTouching */ : 0 /* UpdateType.None */;\n}\nclass ActiveSource {\n    constructor(source, state, explicit = false) {\n        this.source = source;\n        this.state = state;\n        this.explicit = explicit;\n    }\n    hasResult() { return false; }\n    get isPending() { return this.state == 1 /* State.Pending */; }\n    update(tr, conf) {\n        let type = getUpdateType(tr, conf), value = this;\n        if ((type & 8 /* UpdateType.Reset */) || (type & 16 /* UpdateType.ResetIfTouching */) && this.touches(tr))\n            value = new ActiveSource(value.source, 0 /* State.Inactive */);\n        if ((type & 4 /* UpdateType.Activate */) && value.state == 0 /* State.Inactive */)\n            value = new ActiveSource(this.source, 1 /* State.Pending */);\n        value = value.updateFor(tr, type);\n        for (let effect of tr.effects) {\n            if (effect.is(startCompletionEffect))\n                value = new ActiveSource(value.source, 1 /* State.Pending */, effect.value);\n            else if (effect.is(closeCompletionEffect))\n                value = new ActiveSource(value.source, 0 /* State.Inactive */);\n            else if (effect.is(setActiveEffect))\n                for (let active of effect.value)\n                    if (active.source == value.source)\n                        value = active;\n        }\n        return value;\n    }\n    updateFor(tr, type) { return this.map(tr.changes); }\n    map(changes) { return this; }\n    touches(tr) {\n        return tr.changes.touchesRange(cur(tr.state));\n    }\n}\nclass ActiveResult extends ActiveSource {\n    constructor(source, explicit, limit, result, from, to) {\n        super(source, 3 /* State.Result */, explicit);\n        this.limit = limit;\n        this.result = result;\n        this.from = from;\n        this.to = to;\n    }\n    hasResult() { return true; }\n    updateFor(tr, type) {\n        var _a;\n        if (!(type & 3 /* UpdateType.SimpleInteraction */))\n            return this.map(tr.changes);\n        let result = this.result;\n        if (result.map && !tr.changes.empty)\n            result = result.map(result, tr.changes);\n        let from = tr.changes.mapPos(this.from), to = tr.changes.mapPos(this.to, 1);\n        let pos = cur(tr.state);\n        if (pos > to || !result ||\n            (type & 2 /* UpdateType.Backspacing */) && (cur(tr.startState) == this.from || pos < this.limit))\n            return new ActiveSource(this.source, type & 4 /* UpdateType.Activate */ ? 1 /* State.Pending */ : 0 /* State.Inactive */);\n        let limit = tr.changes.mapPos(this.limit);\n        if (checkValid(result.validFor, tr.state, from, to))\n            return new ActiveResult(this.source, this.explicit, limit, result, from, to);\n        if (result.update &&\n            (result = result.update(result, from, to, new CompletionContext(tr.state, pos, false))))\n            return new ActiveResult(this.source, this.explicit, limit, result, result.from, (_a = result.to) !== null && _a !== void 0 ? _a : cur(tr.state));\n        return new ActiveSource(this.source, 1 /* State.Pending */, this.explicit);\n    }\n    map(mapping) {\n        if (mapping.empty)\n            return this;\n        let result = this.result.map ? this.result.map(this.result, mapping) : this.result;\n        if (!result)\n            return new ActiveSource(this.source, 0 /* State.Inactive */);\n        return new ActiveResult(this.source, this.explicit, mapping.mapPos(this.limit), this.result, mapping.mapPos(this.from), mapping.mapPos(this.to, 1));\n    }\n    touches(tr) {\n        return tr.changes.touchesRange(this.from, this.to);\n    }\n}\nfunction checkValid(validFor, state, from, to) {\n    if (!validFor)\n        return false;\n    let text = state.sliceDoc(from, to);\n    return typeof validFor == \"function\" ? validFor(text, from, to, state) : ensureAnchor(validFor, true).test(text);\n}\nconst setActiveEffect = /*@__PURE__*/StateEffect.define({\n    map(sources, mapping) { return sources.map(s => s.map(mapping)); }\n});\nconst setSelectedEffect = /*@__PURE__*/StateEffect.define();\nconst completionState = /*@__PURE__*/StateField.define({\n    create() { return CompletionState.start(); },\n    update(value, tr) { return value.update(tr); },\n    provide: f => [\n        showTooltip.from(f, val => val.tooltip),\n        EditorView.contentAttributes.from(f, state => state.attrs)\n    ]\n});\nfunction applyCompletion(view, option) {\n    const apply = option.completion.apply || option.completion.label;\n    let result = view.state.field(completionState).active.find(a => a.source == option.source);\n    if (!(result instanceof ActiveResult))\n        return false;\n    if (typeof apply == \"string\")\n        view.dispatch(Object.assign(Object.assign({}, insertCompletionText(view.state, apply, result.from, result.to)), { annotations: pickedCompletion.of(option.completion) }));\n    else\n        apply(view, option.completion, result.from, result.to);\n    return true;\n}\nconst createTooltip = /*@__PURE__*/completionTooltip(completionState, applyCompletion);\n\n/**\nReturns a command that moves the completion selection forward or\nbackward by the given amount.\n*/\nfunction moveCompletionSelection(forward, by = \"option\") {\n    return (view) => {\n        let cState = view.state.field(completionState, false);\n        if (!cState || !cState.open || cState.open.disabled ||\n            Date.now() - cState.open.timestamp < view.state.facet(completionConfig).interactionDelay)\n            return false;\n        let step = 1, tooltip;\n        if (by == \"page\" && (tooltip = getTooltip(view, cState.open.tooltip)))\n            step = Math.max(2, Math.floor(tooltip.dom.offsetHeight /\n                tooltip.dom.querySelector(\"li\").offsetHeight) - 1);\n        let { length } = cState.open.options;\n        let selected = cState.open.selected > -1 ? cState.open.selected + step * (forward ? 1 : -1) : forward ? 0 : length - 1;\n        if (selected < 0)\n            selected = by == \"page\" ? 0 : length - 1;\n        else if (selected >= length)\n            selected = by == \"page\" ? length - 1 : 0;\n        view.dispatch({ effects: setSelectedEffect.of(selected) });\n        return true;\n    };\n}\n/**\nAccept the current completion.\n*/\nconst acceptCompletion = (view) => {\n    let cState = view.state.field(completionState, false);\n    if (view.state.readOnly || !cState || !cState.open || cState.open.selected < 0 || cState.open.disabled ||\n        Date.now() - cState.open.timestamp < view.state.facet(completionConfig).interactionDelay)\n        return false;\n    return applyCompletion(view, cState.open.options[cState.open.selected]);\n};\n/**\nExplicitly start autocompletion.\n*/\nconst startCompletion = (view) => {\n    let cState = view.state.field(completionState, false);\n    if (!cState)\n        return false;\n    view.dispatch({ effects: startCompletionEffect.of(true) });\n    return true;\n};\n/**\nClose the currently active completion.\n*/\nconst closeCompletion = (view) => {\n    let cState = view.state.field(completionState, false);\n    if (!cState || !cState.active.some(a => a.state != 0 /* State.Inactive */))\n        return false;\n    view.dispatch({ effects: closeCompletionEffect.of(null) });\n    return true;\n};\nclass RunningQuery {\n    constructor(active, context) {\n        this.active = active;\n        this.context = context;\n        this.time = Date.now();\n        this.updates = [];\n        // Note that 'undefined' means 'not done yet', whereas 'null' means\n        // 'query returned null'.\n        this.done = undefined;\n    }\n}\nconst MaxUpdateCount = 50, MinAbortTime = 1000;\nconst completionPlugin = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.debounceUpdate = -1;\n        this.running = [];\n        this.debounceAccept = -1;\n        this.pendingStart = false;\n        this.composing = 0 /* CompositionState.None */;\n        for (let active of view.state.field(completionState).active)\n            if (active.isPending)\n                this.startQuery(active);\n    }\n    update(update) {\n        let cState = update.state.field(completionState);\n        let conf = update.state.facet(completionConfig);\n        if (!update.selectionSet && !update.docChanged && update.startState.field(completionState) == cState)\n            return;\n        let doesReset = update.transactions.some(tr => {\n            let type = getUpdateType(tr, conf);\n            return (type & 8 /* UpdateType.Reset */) || (tr.selection || tr.docChanged) && !(type & 3 /* UpdateType.SimpleInteraction */);\n        });\n        for (let i = 0; i < this.running.length; i++) {\n            let query = this.running[i];\n            if (doesReset ||\n                query.context.abortOnDocChange && update.docChanged ||\n                query.updates.length + update.transactions.length > MaxUpdateCount && Date.now() - query.time > MinAbortTime) {\n                for (let handler of query.context.abortListeners) {\n                    try {\n                        handler();\n                    }\n                    catch (e) {\n                        logException(this.view.state, e);\n                    }\n                }\n                query.context.abortListeners = null;\n                this.running.splice(i--, 1);\n            }\n            else {\n                query.updates.push(...update.transactions);\n            }\n        }\n        if (this.debounceUpdate > -1)\n            clearTimeout(this.debounceUpdate);\n        if (update.transactions.some(tr => tr.effects.some(e => e.is(startCompletionEffect))))\n            this.pendingStart = true;\n        let delay = this.pendingStart ? 50 : conf.activateOnTypingDelay;\n        this.debounceUpdate = cState.active.some(a => a.isPending && !this.running.some(q => q.active.source == a.source))\n            ? setTimeout(() => this.startUpdate(), delay) : -1;\n        if (this.composing != 0 /* CompositionState.None */)\n            for (let tr of update.transactions) {\n                if (tr.isUserEvent(\"input.type\"))\n                    this.composing = 2 /* CompositionState.Changed */;\n                else if (this.composing == 2 /* CompositionState.Changed */ && tr.selection)\n                    this.composing = 3 /* CompositionState.ChangedAndMoved */;\n            }\n    }\n    startUpdate() {\n        this.debounceUpdate = -1;\n        this.pendingStart = false;\n        let { state } = this.view, cState = state.field(completionState);\n        for (let active of cState.active) {\n            if (active.isPending && !this.running.some(r => r.active.source == active.source))\n                this.startQuery(active);\n        }\n        if (this.running.length && cState.open && cState.open.disabled)\n            this.debounceAccept = setTimeout(() => this.accept(), this.view.state.facet(completionConfig).updateSyncTime);\n    }\n    startQuery(active) {\n        let { state } = this.view, pos = cur(state);\n        let context = new CompletionContext(state, pos, active.explicit, this.view);\n        let pending = new RunningQuery(active, context);\n        this.running.push(pending);\n        Promise.resolve(active.source(context)).then(result => {\n            if (!pending.context.aborted) {\n                pending.done = result || null;\n                this.scheduleAccept();\n            }\n        }, err => {\n            this.view.dispatch({ effects: closeCompletionEffect.of(null) });\n            logException(this.view.state, err);\n        });\n    }\n    scheduleAccept() {\n        if (this.running.every(q => q.done !== undefined))\n            this.accept();\n        else if (this.debounceAccept < 0)\n            this.debounceAccept = setTimeout(() => this.accept(), this.view.state.facet(completionConfig).updateSyncTime);\n    }\n    // For each finished query in this.running, try to create a result\n    // or, if appropriate, restart the query.\n    accept() {\n        var _a;\n        if (this.debounceAccept > -1)\n            clearTimeout(this.debounceAccept);\n        this.debounceAccept = -1;\n        let updated = [];\n        let conf = this.view.state.facet(completionConfig), cState = this.view.state.field(completionState);\n        for (let i = 0; i < this.running.length; i++) {\n            let query = this.running[i];\n            if (query.done === undefined)\n                continue;\n            this.running.splice(i--, 1);\n            if (query.done) {\n                let pos = cur(query.updates.length ? query.updates[0].startState : this.view.state);\n                let limit = Math.min(pos, query.done.from + (query.active.explicit ? 0 : 1));\n                let active = new ActiveResult(query.active.source, query.active.explicit, limit, query.done, query.done.from, (_a = query.done.to) !== null && _a !== void 0 ? _a : pos);\n                // Replay the transactions that happened since the start of\n                // the request and see if that preserves the result\n                for (let tr of query.updates)\n                    active = active.update(tr, conf);\n                if (active.hasResult()) {\n                    updated.push(active);\n                    continue;\n                }\n            }\n            let current = cState.active.find(a => a.source == query.active.source);\n            if (current && current.isPending) {\n                if (query.done == null) {\n                    // Explicitly failed. Should clear the pending status if it\n                    // hasn't been re-set in the meantime.\n                    let active = new ActiveSource(query.active.source, 0 /* State.Inactive */);\n                    for (let tr of query.updates)\n                        active = active.update(tr, conf);\n                    if (!active.isPending)\n                        updated.push(active);\n                }\n                else {\n                    // Cleared by subsequent transactions. Restart.\n                    this.startQuery(current);\n                }\n            }\n        }\n        if (updated.length || cState.open && cState.open.disabled)\n            this.view.dispatch({ effects: setActiveEffect.of(updated) });\n    }\n}, {\n    eventHandlers: {\n        blur(event) {\n            let state = this.view.state.field(completionState, false);\n            if (state && state.tooltip && this.view.state.facet(completionConfig).closeOnBlur) {\n                let dialog = state.open && getTooltip(this.view, state.open.tooltip);\n                if (!dialog || !dialog.dom.contains(event.relatedTarget))\n                    setTimeout(() => this.view.dispatch({ effects: closeCompletionEffect.of(null) }), 10);\n            }\n        },\n        compositionstart() {\n            this.composing = 1 /* CompositionState.Started */;\n        },\n        compositionend() {\n            if (this.composing == 3 /* CompositionState.ChangedAndMoved */) {\n                // Safari fires compositionend events synchronously, possibly\n                // from inside an update, so dispatch asynchronously to avoid reentrancy\n                setTimeout(() => this.view.dispatch({ effects: startCompletionEffect.of(false) }), 20);\n            }\n            this.composing = 0 /* CompositionState.None */;\n        }\n    }\n});\nconst windows = typeof navigator == \"object\" && /*@__PURE__*//Win/.test(navigator.platform);\nconst commitCharacters = /*@__PURE__*/Prec.highest(/*@__PURE__*/EditorView.domEventHandlers({\n    keydown(event, view) {\n        let field = view.state.field(completionState, false);\n        if (!field || !field.open || field.open.disabled || field.open.selected < 0 ||\n            event.key.length > 1 || event.ctrlKey && !(windows && event.altKey) || event.metaKey)\n            return false;\n        let option = field.open.options[field.open.selected];\n        let result = field.active.find(a => a.source == option.source);\n        let commitChars = option.completion.commitCharacters || result.result.commitCharacters;\n        if (commitChars && commitChars.indexOf(event.key) > -1)\n            applyCompletion(view, option);\n        return false;\n    }\n}));\n\nconst baseTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-tooltip.cm-tooltip-autocomplete\": {\n        \"& > ul\": {\n            fontFamily: \"monospace\",\n            whiteSpace: \"nowrap\",\n            overflow: \"hidden auto\",\n            maxWidth_fallback: \"700px\",\n            maxWidth: \"min(700px, 95vw)\",\n            minWidth: \"250px\",\n            maxHeight: \"10em\",\n            height: \"100%\",\n            listStyle: \"none\",\n            margin: 0,\n            padding: 0,\n            \"& > li, & > completion-section\": {\n                padding: \"1px 3px\",\n                lineHeight: 1.2\n            },\n            \"& > li\": {\n                overflowX: \"hidden\",\n                textOverflow: \"ellipsis\",\n                cursor: \"pointer\"\n            },\n            \"& > completion-section\": {\n                display: \"list-item\",\n                borderBottom: \"1px solid silver\",\n                paddingLeft: \"0.5em\",\n                opacity: 0.7\n            }\n        }\n    },\n    \"&light .cm-tooltip-autocomplete ul li[aria-selected]\": {\n        background: \"#17c\",\n        color: \"white\",\n    },\n    \"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]\": {\n        background: \"#777\",\n    },\n    \"&dark .cm-tooltip-autocomplete ul li[aria-selected]\": {\n        background: \"#347\",\n        color: \"white\",\n    },\n    \"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]\": {\n        background: \"#444\",\n    },\n    \".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after\": {\n        content: '\"\"',\n        opacity: 0.5,\n        display: \"block\",\n        textAlign: \"center\"\n    },\n    \".cm-tooltip.cm-completionInfo\": {\n        position: \"absolute\",\n        padding: \"3px 9px\",\n        width: \"max-content\",\n        maxWidth: `${400 /* Info.Width */}px`,\n        boxSizing: \"border-box\",\n        whiteSpace: \"pre-line\"\n    },\n    \".cm-completionInfo.cm-completionInfo-left\": { right: \"100%\" },\n    \".cm-completionInfo.cm-completionInfo-right\": { left: \"100%\" },\n    \".cm-completionInfo.cm-completionInfo-left-narrow\": { right: `${30 /* Info.Margin */}px` },\n    \".cm-completionInfo.cm-completionInfo-right-narrow\": { left: `${30 /* Info.Margin */}px` },\n    \"&light .cm-snippetField\": { backgroundColor: \"#00000022\" },\n    \"&dark .cm-snippetField\": { backgroundColor: \"#ffffff22\" },\n    \".cm-snippetFieldPosition\": {\n        verticalAlign: \"text-top\",\n        width: 0,\n        height: \"1.15em\",\n        display: \"inline-block\",\n        margin: \"0 -0.7px -.7em\",\n        borderLeft: \"1.4px dotted #888\"\n    },\n    \".cm-completionMatchedText\": {\n        textDecoration: \"underline\"\n    },\n    \".cm-completionDetail\": {\n        marginLeft: \"0.5em\",\n        fontStyle: \"italic\"\n    },\n    \".cm-completionIcon\": {\n        fontSize: \"90%\",\n        width: \".8em\",\n        display: \"inline-block\",\n        textAlign: \"center\",\n        paddingRight: \".6em\",\n        opacity: \"0.6\",\n        boxSizing: \"content-box\"\n    },\n    \".cm-completionIcon-function, .cm-completionIcon-method\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \".cm-completionIcon-class\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \".cm-completionIcon-interface\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \".cm-completionIcon-variable\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \".cm-completionIcon-constant\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \".cm-completionIcon-type\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \".cm-completionIcon-enum\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \".cm-completionIcon-property\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \".cm-completionIcon-keyword\": {\n        \"&:after\": { content: \"'\\uFE0E'\" } // Disable emoji rendering\n    },\n    \".cm-completionIcon-namespace\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \".cm-completionIcon-text\": {\n        \"&:after\": { content: \"'abc'\", fontSize: \"50%\", verticalAlign: \"middle\" }\n    }\n});\n\nclass FieldPos {\n    constructor(field, line, from, to) {\n        this.field = field;\n        this.line = line;\n        this.from = from;\n        this.to = to;\n    }\n}\nclass FieldRange {\n    constructor(field, from, to) {\n        this.field = field;\n        this.from = from;\n        this.to = to;\n    }\n    map(changes) {\n        let from = changes.mapPos(this.from, -1, MapMode.TrackDel);\n        let to = changes.mapPos(this.to, 1, MapMode.TrackDel);\n        return from == null || to == null ? null : new FieldRange(this.field, from, to);\n    }\n}\nclass Snippet {\n    constructor(lines, fieldPositions) {\n        this.lines = lines;\n        this.fieldPositions = fieldPositions;\n    }\n    instantiate(state, pos) {\n        let text = [], lineStart = [pos];\n        let lineObj = state.doc.lineAt(pos), baseIndent = /^\\s*/.exec(lineObj.text)[0];\n        for (let line of this.lines) {\n            if (text.length) {\n                let indent = baseIndent, tabs = /^\\t*/.exec(line)[0].length;\n                for (let i = 0; i < tabs; i++)\n                    indent += state.facet(indentUnit);\n                lineStart.push(pos + indent.length - tabs);\n                line = indent + line.slice(tabs);\n            }\n            text.push(line);\n            pos += line.length + 1;\n        }\n        let ranges = this.fieldPositions.map(pos => new FieldRange(pos.field, lineStart[pos.line] + pos.from, lineStart[pos.line] + pos.to));\n        return { text, ranges };\n    }\n    static parse(template) {\n        let fields = [];\n        let lines = [], positions = [], m;\n        for (let line of template.split(/\\r\\n?|\\n/)) {\n            while (m = /[#$]\\{(?:(\\d+)(?::([^}]*))?|((?:\\\\[{}]|[^}])*))\\}/.exec(line)) {\n                let seq = m[1] ? +m[1] : null, rawName = m[2] || m[3] || \"\", found = -1;\n                let name = rawName.replace(/\\\\[{}]/g, m => m[1]);\n                for (let i = 0; i < fields.length; i++) {\n                    if (seq != null ? fields[i].seq == seq : name ? fields[i].name == name : false)\n                        found = i;\n                }\n                if (found < 0) {\n                    let i = 0;\n                    while (i < fields.length && (seq == null || (fields[i].seq != null && fields[i].seq < seq)))\n                        i++;\n                    fields.splice(i, 0, { seq, name });\n                    found = i;\n                    for (let pos of positions)\n                        if (pos.field >= found)\n                            pos.field++;\n                }\n                positions.push(new FieldPos(found, lines.length, m.index, m.index + name.length));\n                line = line.slice(0, m.index) + rawName + line.slice(m.index + m[0].length);\n            }\n            line = line.replace(/\\\\([{}])/g, (_, brace, index) => {\n                for (let pos of positions)\n                    if (pos.line == lines.length && pos.from > index) {\n                        pos.from--;\n                        pos.to--;\n                    }\n                return brace;\n            });\n            lines.push(line);\n        }\n        return new Snippet(lines, positions);\n    }\n}\nlet fieldMarker = /*@__PURE__*/Decoration.widget({ widget: /*@__PURE__*/new class extends WidgetType {\n        toDOM() {\n            let span = document.createElement(\"span\");\n            span.className = \"cm-snippetFieldPosition\";\n            return span;\n        }\n        ignoreEvent() { return false; }\n    } });\nlet fieldRange = /*@__PURE__*/Decoration.mark({ class: \"cm-snippetField\" });\nclass ActiveSnippet {\n    constructor(ranges, active) {\n        this.ranges = ranges;\n        this.active = active;\n        this.deco = Decoration.set(ranges.map(r => (r.from == r.to ? fieldMarker : fieldRange).range(r.from, r.to)));\n    }\n    map(changes) {\n        let ranges = [];\n        for (let r of this.ranges) {\n            let mapped = r.map(changes);\n            if (!mapped)\n                return null;\n            ranges.push(mapped);\n        }\n        return new ActiveSnippet(ranges, this.active);\n    }\n    selectionInsideField(sel) {\n        return sel.ranges.every(range => this.ranges.some(r => r.field == this.active && r.from <= range.from && r.to >= range.to));\n    }\n}\nconst setActive = /*@__PURE__*/StateEffect.define({\n    map(value, changes) { return value && value.map(changes); }\n});\nconst moveToField = /*@__PURE__*/StateEffect.define();\nconst snippetState = /*@__PURE__*/StateField.define({\n    create() { return null; },\n    update(value, tr) {\n        for (let effect of tr.effects) {\n            if (effect.is(setActive))\n                return effect.value;\n            if (effect.is(moveToField) && value)\n                return new ActiveSnippet(value.ranges, effect.value);\n        }\n        if (value && tr.docChanged)\n            value = value.map(tr.changes);\n        if (value && tr.selection && !value.selectionInsideField(tr.selection))\n            value = null;\n        return value;\n    },\n    provide: f => EditorView.decorations.from(f, val => val ? val.deco : Decoration.none)\n});\nfunction fieldSelection(ranges, field) {\n    return EditorSelection.create(ranges.filter(r => r.field == field).map(r => EditorSelection.range(r.from, r.to)));\n}\n/**\nConvert a snippet template to a function that can\n[apply](https://codemirror.net/6/docs/ref/#autocomplete.Completion.apply) it. Snippets are written\nusing syntax like this:\n\n    \"for (let ${index} = 0; ${index} < ${end}; ${index}++) {\\n\\t${}\\n}\"\n\nEach `${}` placeholder (you may also use `#{}`) indicates a field\nthat the user can fill in. Its name, if any, will be the default\ncontent for the field.\n\nWhen the snippet is activated by calling the returned function,\nthe code is inserted at the given position. Newlines in the\ntemplate are indented by the indentation of the start line, plus\none [indent unit](https://codemirror.net/6/docs/ref/#language.indentUnit) per tab character after\nthe newline.\n\nOn activation, (all instances of) the first field are selected.\nThe user can move between fields with Tab and Shift-Tab as long as\nthe fields are active. Moving to the last field or moving the\ncursor out of the current field deactivates the fields.\n\nThe order of fields defaults to textual order, but you can add\nnumbers to placeholders (`${1}` or `${1:defaultText}`) to provide\na custom order.\n\nTo include a literal `{` or `}` in your template, put a backslash\nin front of it. This will be removed and the brace will not be\ninterpreted as indicating a placeholder.\n*/\nfunction snippet(template) {\n    let snippet = Snippet.parse(template);\n    return (editor, completion, from, to) => {\n        let { text, ranges } = snippet.instantiate(editor.state, from);\n        let spec = {\n            changes: { from, to, insert: Text.of(text) },\n            scrollIntoView: true,\n            annotations: completion ? [pickedCompletion.of(completion), Transaction.userEvent.of(\"input.complete\")] : undefined\n        };\n        if (ranges.length)\n            spec.selection = fieldSelection(ranges, 0);\n        if (ranges.some(r => r.field > 0)) {\n            let active = new ActiveSnippet(ranges, 0);\n            let effects = spec.effects = [setActive.of(active)];\n            if (editor.state.field(snippetState, false) === undefined)\n                effects.push(StateEffect.appendConfig.of([snippetState, addSnippetKeymap, snippetPointerHandler, baseTheme]));\n        }\n        editor.dispatch(editor.state.update(spec));\n    };\n}\nfunction moveField(dir) {\n    return ({ state, dispatch }) => {\n        let active = state.field(snippetState, false);\n        if (!active || dir < 0 && active.active == 0)\n            return false;\n        let next = active.active + dir, last = dir > 0 && !active.ranges.some(r => r.field == next + dir);\n        dispatch(state.update({\n            selection: fieldSelection(active.ranges, next),\n            effects: setActive.of(last ? null : new ActiveSnippet(active.ranges, next)),\n            scrollIntoView: true\n        }));\n        return true;\n    };\n}\n/**\nA command that clears the active snippet, if any.\n*/\nconst clearSnippet = ({ state, dispatch }) => {\n    let active = state.field(snippetState, false);\n    if (!active)\n        return false;\n    dispatch(state.update({ effects: setActive.of(null) }));\n    return true;\n};\n/**\nMove to the next snippet field, if available.\n*/\nconst nextSnippetField = /*@__PURE__*/moveField(1);\n/**\nMove to the previous snippet field, if available.\n*/\nconst prevSnippetField = /*@__PURE__*/moveField(-1);\n/**\nCheck if there is an active snippet with a next field for\n`nextSnippetField` to move to.\n*/\nfunction hasNextSnippetField(state) {\n    let active = state.field(snippetState, false);\n    return !!(active && active.ranges.some(r => r.field == active.active + 1));\n}\n/**\nReturns true if there is an active snippet and a previous field\nfor `prevSnippetField` to move to.\n*/\nfunction hasPrevSnippetField(state) {\n    let active = state.field(snippetState, false);\n    return !!(active && active.active > 0);\n}\nconst defaultSnippetKeymap = [\n    { key: \"Tab\", run: nextSnippetField, shift: prevSnippetField },\n    { key: \"Escape\", run: clearSnippet }\n];\n/**\nA facet that can be used to configure the key bindings used by\nsnippets. The default binds Tab to\n[`nextSnippetField`](https://codemirror.net/6/docs/ref/#autocomplete.nextSnippetField), Shift-Tab to\n[`prevSnippetField`](https://codemirror.net/6/docs/ref/#autocomplete.prevSnippetField), and Escape\nto [`clearSnippet`](https://codemirror.net/6/docs/ref/#autocomplete.clearSnippet).\n*/\nconst snippetKeymap = /*@__PURE__*/Facet.define({\n    combine(maps) { return maps.length ? maps[0] : defaultSnippetKeymap; }\n});\nconst addSnippetKeymap = /*@__PURE__*/Prec.highest(/*@__PURE__*/keymap.compute([snippetKeymap], state => state.facet(snippetKeymap)));\n/**\nCreate a completion from a snippet. Returns an object with the\nproperties from `completion`, plus an `apply` function that\napplies the snippet.\n*/\nfunction snippetCompletion(template, completion) {\n    return Object.assign(Object.assign({}, completion), { apply: snippet(template) });\n}\nconst snippetPointerHandler = /*@__PURE__*/EditorView.domEventHandlers({\n    mousedown(event, view) {\n        let active = view.state.field(snippetState, false), pos;\n        if (!active || (pos = view.posAtCoords({ x: event.clientX, y: event.clientY })) == null)\n            return false;\n        let match = active.ranges.find(r => r.from <= pos && r.to >= pos);\n        if (!match || match.field == active.active)\n            return false;\n        view.dispatch({\n            selection: fieldSelection(active.ranges, match.field),\n            effects: setActive.of(active.ranges.some(r => r.field > match.field)\n                ? new ActiveSnippet(active.ranges, match.field) : null),\n            scrollIntoView: true\n        });\n        return true;\n    }\n});\n\nfunction wordRE(wordChars) {\n    let escaped = wordChars.replace(/[\\]\\-\\\\]/g, \"\\\\$&\");\n    try {\n        return new RegExp(`[\\\\p{Alphabetic}\\\\p{Number}_${escaped}]+`, \"ug\");\n    }\n    catch (_a) {\n        return new RegExp(`[\\w${escaped}]`, \"g\");\n    }\n}\nfunction mapRE(re, f) {\n    return new RegExp(f(re.source), re.unicode ? \"u\" : \"\");\n}\nconst wordCaches = /*@__PURE__*/Object.create(null);\nfunction wordCache(wordChars) {\n    return wordCaches[wordChars] || (wordCaches[wordChars] = new WeakMap);\n}\nfunction storeWords(doc, wordRE, result, seen, ignoreAt) {\n    for (let lines = doc.iterLines(), pos = 0; !lines.next().done;) {\n        let { value } = lines, m;\n        wordRE.lastIndex = 0;\n        while (m = wordRE.exec(value)) {\n            if (!seen[m[0]] && pos + m.index != ignoreAt) {\n                result.push({ type: \"text\", label: m[0] });\n                seen[m[0]] = true;\n                if (result.length >= 2000 /* C.MaxList */)\n                    return;\n            }\n        }\n        pos += value.length + 1;\n    }\n}\nfunction collectWords(doc, cache, wordRE, to, ignoreAt) {\n    let big = doc.length >= 1000 /* C.MinCacheLen */;\n    let cached = big && cache.get(doc);\n    if (cached)\n        return cached;\n    let result = [], seen = Object.create(null);\n    if (doc.children) {\n        let pos = 0;\n        for (let ch of doc.children) {\n            if (ch.length >= 1000 /* C.MinCacheLen */) {\n                for (let c of collectWords(ch, cache, wordRE, to - pos, ignoreAt - pos)) {\n                    if (!seen[c.label]) {\n                        seen[c.label] = true;\n                        result.push(c);\n                    }\n                }\n            }\n            else {\n                storeWords(ch, wordRE, result, seen, ignoreAt - pos);\n            }\n            pos += ch.length + 1;\n        }\n    }\n    else {\n        storeWords(doc, wordRE, result, seen, ignoreAt);\n    }\n    if (big && result.length < 2000 /* C.MaxList */)\n        cache.set(doc, result);\n    return result;\n}\n/**\nA completion source that will scan the document for words (using a\n[character categorizer](https://codemirror.net/6/docs/ref/#state.EditorState.charCategorizer)), and\nreturn those as completions.\n*/\nconst completeAnyWord = context => {\n    let wordChars = context.state.languageDataAt(\"wordChars\", context.pos).join(\"\");\n    let re = wordRE(wordChars);\n    let token = context.matchBefore(mapRE(re, s => s + \"$\"));\n    if (!token && !context.explicit)\n        return null;\n    let from = token ? token.from : context.pos;\n    let options = collectWords(context.state.doc, wordCache(wordChars), re, 50000 /* C.Range */, from);\n    return { from, options, validFor: mapRE(re, s => \"^\" + s) };\n};\n\nconst defaults = {\n    brackets: [\"(\", \"[\", \"{\", \"'\", '\"'],\n    before: \")]}:;>\",\n    stringPrefixes: []\n};\nconst closeBracketEffect = /*@__PURE__*/StateEffect.define({\n    map(value, mapping) {\n        let mapped = mapping.mapPos(value, -1, MapMode.TrackAfter);\n        return mapped == null ? undefined : mapped;\n    }\n});\nconst closedBracket = /*@__PURE__*/new class extends RangeValue {\n};\nclosedBracket.startSide = 1;\nclosedBracket.endSide = -1;\nconst bracketState = /*@__PURE__*/StateField.define({\n    create() { return RangeSet.empty; },\n    update(value, tr) {\n        value = value.map(tr.changes);\n        if (tr.selection) {\n            let line = tr.state.doc.lineAt(tr.selection.main.head);\n            value = value.update({ filter: from => from >= line.from && from <= line.to });\n        }\n        for (let effect of tr.effects)\n            if (effect.is(closeBracketEffect))\n                value = value.update({ add: [closedBracket.range(effect.value, effect.value + 1)] });\n        return value;\n    }\n});\n/**\nExtension to enable bracket-closing behavior. When a closeable\nbracket is typed, its closing bracket is immediately inserted\nafter the cursor. When closing a bracket directly in front of a\nclosing bracket inserted by the extension, the cursor moves over\nthat bracket.\n*/\nfunction closeBrackets() {\n    return [inputHandler, bracketState];\n}\nconst definedClosing = \"()[]{}<>\";\nfunction closing(ch) {\n    for (let i = 0; i < definedClosing.length; i += 2)\n        if (definedClosing.charCodeAt(i) == ch)\n            return definedClosing.charAt(i + 1);\n    return fromCodePoint(ch < 128 ? ch : ch + 1);\n}\nfunction config(state, pos) {\n    return state.languageDataAt(\"closeBrackets\", pos)[0] || defaults;\n}\nconst android = typeof navigator == \"object\" && /*@__PURE__*//Android\\b/.test(navigator.userAgent);\nconst inputHandler = /*@__PURE__*/EditorView.inputHandler.of((view, from, to, insert) => {\n    if ((android ? view.composing : view.compositionStarted) || view.state.readOnly)\n        return false;\n    let sel = view.state.selection.main;\n    if (insert.length > 2 || insert.length == 2 && codePointSize(codePointAt(insert, 0)) == 1 ||\n        from != sel.from || to != sel.to)\n        return false;\n    let tr = insertBracket(view.state, insert);\n    if (!tr)\n        return false;\n    view.dispatch(tr);\n    return true;\n});\n/**\nCommand that implements deleting a pair of matching brackets when\nthe cursor is between them.\n*/\nconst deleteBracketPair = ({ state, dispatch }) => {\n    if (state.readOnly)\n        return false;\n    let conf = config(state, state.selection.main.head);\n    let tokens = conf.brackets || defaults.brackets;\n    let dont = null, changes = state.changeByRange(range => {\n        if (range.empty) {\n            let before = prevChar(state.doc, range.head);\n            for (let token of tokens) {\n                if (token == before && nextChar(state.doc, range.head) == closing(codePointAt(token, 0)))\n                    return { changes: { from: range.head - token.length, to: range.head + token.length },\n                        range: EditorSelection.cursor(range.head - token.length) };\n            }\n        }\n        return { range: dont = range };\n    });\n    if (!dont)\n        dispatch(state.update(changes, { scrollIntoView: true, userEvent: \"delete.backward\" }));\n    return !dont;\n};\n/**\nClose-brackets related key bindings. Binds Backspace to\n[`deleteBracketPair`](https://codemirror.net/6/docs/ref/#autocomplete.deleteBracketPair).\n*/\nconst closeBracketsKeymap = [\n    { key: \"Backspace\", run: deleteBracketPair }\n];\n/**\nImplements the extension's behavior on text insertion. If the\ngiven string counts as a bracket in the language around the\nselection, and replacing the selection with it requires custom\nbehavior (inserting a closing version or skipping past a\npreviously-closed bracket), this function returns a transaction\nrepresenting that custom behavior. (You only need this if you want\nto programmatically insert bracketsthe\n[`closeBrackets`](https://codemirror.net/6/docs/ref/#autocomplete.closeBrackets) extension will\ntake care of running this for user input.)\n*/\nfunction insertBracket(state, bracket) {\n    let conf = config(state, state.selection.main.head);\n    let tokens = conf.brackets || defaults.brackets;\n    for (let tok of tokens) {\n        let closed = closing(codePointAt(tok, 0));\n        if (bracket == tok)\n            return closed == tok ? handleSame(state, tok, tokens.indexOf(tok + tok + tok) > -1, conf)\n                : handleOpen(state, tok, closed, conf.before || defaults.before);\n        if (bracket == closed && closedBracketAt(state, state.selection.main.from))\n            return handleClose(state, tok, closed);\n    }\n    return null;\n}\nfunction closedBracketAt(state, pos) {\n    let found = false;\n    state.field(bracketState).between(0, state.doc.length, from => {\n        if (from == pos)\n            found = true;\n    });\n    return found;\n}\nfunction nextChar(doc, pos) {\n    let next = doc.sliceString(pos, pos + 2);\n    return next.slice(0, codePointSize(codePointAt(next, 0)));\n}\nfunction prevChar(doc, pos) {\n    let prev = doc.sliceString(pos - 2, pos);\n    return codePointSize(codePointAt(prev, 0)) == prev.length ? prev : prev.slice(1);\n}\nfunction handleOpen(state, open, close, closeBefore) {\n    let dont = null, changes = state.changeByRange(range => {\n        if (!range.empty)\n            return { changes: [{ insert: open, from: range.from }, { insert: close, from: range.to }],\n                effects: closeBracketEffect.of(range.to + open.length),\n                range: EditorSelection.range(range.anchor + open.length, range.head + open.length) };\n        let next = nextChar(state.doc, range.head);\n        if (!next || /\\s/.test(next) || closeBefore.indexOf(next) > -1)\n            return { changes: { insert: open + close, from: range.head },\n                effects: closeBracketEffect.of(range.head + open.length),\n                range: EditorSelection.cursor(range.head + open.length) };\n        return { range: dont = range };\n    });\n    return dont ? null : state.update(changes, {\n        scrollIntoView: true,\n        userEvent: \"input.type\"\n    });\n}\nfunction handleClose(state, _open, close) {\n    let dont = null, changes = state.changeByRange(range => {\n        if (range.empty && nextChar(state.doc, range.head) == close)\n            return { changes: { from: range.head, to: range.head + close.length, insert: close },\n                range: EditorSelection.cursor(range.head + close.length) };\n        return dont = { range };\n    });\n    return dont ? null : state.update(changes, {\n        scrollIntoView: true,\n        userEvent: \"input.type\"\n    });\n}\n// Handles cases where the open and close token are the same, and\n// possibly triple quotes (as in `\"\"\"abc\"\"\"`-style quoting).\nfunction handleSame(state, token, allowTriple, config) {\n    let stringPrefixes = config.stringPrefixes || defaults.stringPrefixes;\n    let dont = null, changes = state.changeByRange(range => {\n        if (!range.empty)\n            return { changes: [{ insert: token, from: range.from }, { insert: token, from: range.to }],\n                effects: closeBracketEffect.of(range.to + token.length),\n                range: EditorSelection.range(range.anchor + token.length, range.head + token.length) };\n        let pos = range.head, next = nextChar(state.doc, pos), start;\n        if (next == token) {\n            if (nodeStart(state, pos)) {\n                return { changes: { insert: token + token, from: pos },\n                    effects: closeBracketEffect.of(pos + token.length),\n                    range: EditorSelection.cursor(pos + token.length) };\n            }\n            else if (closedBracketAt(state, pos)) {\n                let isTriple = allowTriple && state.sliceDoc(pos, pos + token.length * 3) == token + token + token;\n                let content = isTriple ? token + token + token : token;\n                return { changes: { from: pos, to: pos + content.length, insert: content },\n                    range: EditorSelection.cursor(pos + content.length) };\n            }\n        }\n        else if (allowTriple && state.sliceDoc(pos - 2 * token.length, pos) == token + token &&\n            (start = canStartStringAt(state, pos - 2 * token.length, stringPrefixes)) > -1 &&\n            nodeStart(state, start)) {\n            return { changes: { insert: token + token + token + token, from: pos },\n                effects: closeBracketEffect.of(pos + token.length),\n                range: EditorSelection.cursor(pos + token.length) };\n        }\n        else if (state.charCategorizer(pos)(next) != CharCategory.Word) {\n            if (canStartStringAt(state, pos, stringPrefixes) > -1 && !probablyInString(state, pos, token, stringPrefixes))\n                return { changes: { insert: token + token, from: pos },\n                    effects: closeBracketEffect.of(pos + token.length),\n                    range: EditorSelection.cursor(pos + token.length) };\n        }\n        return { range: dont = range };\n    });\n    return dont ? null : state.update(changes, {\n        scrollIntoView: true,\n        userEvent: \"input.type\"\n    });\n}\nfunction nodeStart(state, pos) {\n    let tree = syntaxTree(state).resolveInner(pos + 1);\n    return tree.parent && tree.from == pos;\n}\nfunction probablyInString(state, pos, quoteToken, prefixes) {\n    let node = syntaxTree(state).resolveInner(pos, -1);\n    let maxPrefix = prefixes.reduce((m, p) => Math.max(m, p.length), 0);\n    for (let i = 0; i < 5; i++) {\n        let start = state.sliceDoc(node.from, Math.min(node.to, node.from + quoteToken.length + maxPrefix));\n        let quotePos = start.indexOf(quoteToken);\n        if (!quotePos || quotePos > -1 && prefixes.indexOf(start.slice(0, quotePos)) > -1) {\n            let first = node.firstChild;\n            while (first && first.from == node.from && first.to - first.from > quoteToken.length + quotePos) {\n                if (state.sliceDoc(first.to - quoteToken.length, first.to) == quoteToken)\n                    return false;\n                first = first.firstChild;\n            }\n            return true;\n        }\n        let parent = node.to == pos && node.parent;\n        if (!parent)\n            break;\n        node = parent;\n    }\n    return false;\n}\nfunction canStartStringAt(state, pos, prefixes) {\n    let charCat = state.charCategorizer(pos);\n    if (charCat(state.sliceDoc(pos - 1, pos)) != CharCategory.Word)\n        return pos;\n    for (let prefix of prefixes) {\n        let start = pos - prefix.length;\n        if (state.sliceDoc(start, pos) == prefix && charCat(state.sliceDoc(start - 1, start)) != CharCategory.Word)\n            return start;\n    }\n    return -1;\n}\n\n/**\nReturns an extension that enables autocompletion.\n*/\nfunction autocompletion(config = {}) {\n    return [\n        commitCharacters,\n        completionState,\n        completionConfig.of(config),\n        completionPlugin,\n        completionKeymapExt,\n        baseTheme\n    ];\n}\n/**\nBasic keybindings for autocompletion.\n\n - Ctrl-Space (and Alt-\\` on macOS): [`startCompletion`](https://codemirror.net/6/docs/ref/#autocomplete.startCompletion)\n - Escape: [`closeCompletion`](https://codemirror.net/6/docs/ref/#autocomplete.closeCompletion)\n - ArrowDown: [`moveCompletionSelection`](https://codemirror.net/6/docs/ref/#autocomplete.moveCompletionSelection)`(true)`\n - ArrowUp: [`moveCompletionSelection`](https://codemirror.net/6/docs/ref/#autocomplete.moveCompletionSelection)`(false)`\n - PageDown: [`moveCompletionSelection`](https://codemirror.net/6/docs/ref/#autocomplete.moveCompletionSelection)`(true, \"page\")`\n - PageDown: [`moveCompletionSelection`](https://codemirror.net/6/docs/ref/#autocomplete.moveCompletionSelection)`(true, \"page\")`\n - Enter: [`acceptCompletion`](https://codemirror.net/6/docs/ref/#autocomplete.acceptCompletion)\n*/\nconst completionKeymap = [\n    { key: \"Ctrl-Space\", run: startCompletion },\n    { mac: \"Alt-`\", run: startCompletion },\n    { key: \"Escape\", run: closeCompletion },\n    { key: \"ArrowDown\", run: /*@__PURE__*/moveCompletionSelection(true) },\n    { key: \"ArrowUp\", run: /*@__PURE__*/moveCompletionSelection(false) },\n    { key: \"PageDown\", run: /*@__PURE__*/moveCompletionSelection(true, \"page\") },\n    { key: \"PageUp\", run: /*@__PURE__*/moveCompletionSelection(false, \"page\") },\n    { key: \"Enter\", run: acceptCompletion }\n];\nconst completionKeymapExt = /*@__PURE__*/Prec.highest(/*@__PURE__*/keymap.computeN([completionConfig], state => state.facet(completionConfig).defaultKeymap ? [completionKeymap] : []));\n/**\nGet the current completion status. When completions are available,\nthis will return `\"active\"`. When completions are pending (in the\nprocess of being queried), this returns `\"pending\"`. Otherwise, it\nreturns `null`.\n*/\nfunction completionStatus(state) {\n    let cState = state.field(completionState, false);\n    return cState && cState.active.some(a => a.isPending) ? \"pending\"\n        : cState && cState.active.some(a => a.state != 0 /* State.Inactive */) ? \"active\" : null;\n}\nconst completionArrayCache = /*@__PURE__*/new WeakMap;\n/**\nReturns the available completions as an array.\n*/\nfunction currentCompletions(state) {\n    var _a;\n    let open = (_a = state.field(completionState, false)) === null || _a === void 0 ? void 0 : _a.open;\n    if (!open || open.disabled)\n        return [];\n    let completions = completionArrayCache.get(open.options);\n    if (!completions)\n        completionArrayCache.set(open.options, completions = open.options.map(o => o.completion));\n    return completions;\n}\n/**\nReturn the currently selected completion, if any.\n*/\nfunction selectedCompletion(state) {\n    var _a;\n    let open = (_a = state.field(completionState, false)) === null || _a === void 0 ? void 0 : _a.open;\n    return open && !open.disabled && open.selected >= 0 ? open.options[open.selected].completion : null;\n}\n/**\nReturns the currently selected position in the active completion\nlist, or null if no completions are active.\n*/\nfunction selectedCompletionIndex(state) {\n    var _a;\n    let open = (_a = state.field(completionState, false)) === null || _a === void 0 ? void 0 : _a.open;\n    return open && !open.disabled && open.selected >= 0 ? open.selected : null;\n}\n/**\nCreate an effect that can be attached to a transaction to change\nthe currently selected completion.\n*/\nfunction setSelectedCompletion(index) {\n    return setSelectedEffect.of(index);\n}\n\nexport { CompletionContext, acceptCompletion, autocompletion, clearSnippet, closeBrackets, closeBracketsKeymap, closeCompletion, completeAnyWord, completeFromList, completionKeymap, completionStatus, currentCompletions, deleteBracketPair, hasNextSnippetField, hasPrevSnippetField, ifIn, ifNotIn, insertBracket, insertCompletionText, moveCompletionSelection, nextSnippetField, pickedCompletion, prevSnippetField, selectedCompletion, selectedCompletionIndex, setSelectedCompletion, snippet, snippetCompletion, snippetKeymap, startCompletion };\n","import { Decoration, showPanel, EditorView, ViewPlugin, gutter, showTooltip, hoverTooltip, getPanel, logException, WidgetType, GutterMarker } from '@codemirror/view';\nimport { StateEffect, StateField, Facet, combineConfig, RangeSet } from '@codemirror/state';\nimport elt from 'crelt';\n\nclass SelectedDiagnostic {\n    constructor(from, to, diagnostic) {\n        this.from = from;\n        this.to = to;\n        this.diagnostic = diagnostic;\n    }\n}\nclass LintState {\n    constructor(diagnostics, panel, selected) {\n        this.diagnostics = diagnostics;\n        this.panel = panel;\n        this.selected = selected;\n    }\n    static init(diagnostics, panel, state) {\n        // Filter the list of diagnostics for which to create markers\n        let markedDiagnostics = diagnostics;\n        let diagnosticFilter = state.facet(lintConfig).markerFilter;\n        if (diagnosticFilter)\n            markedDiagnostics = diagnosticFilter(markedDiagnostics, state);\n        let ranges = Decoration.set(markedDiagnostics.map((d) => {\n            // For zero-length ranges or ranges covering only a line break, create a widget\n            return d.from == d.to || (d.from == d.to - 1 && state.doc.lineAt(d.from).to == d.from)\n                ? Decoration.widget({\n                    widget: new DiagnosticWidget(d),\n                    diagnostic: d\n                }).range(d.from)\n                : Decoration.mark({\n                    attributes: { class: \"cm-lintRange cm-lintRange-\" + d.severity + (d.markClass ? \" \" + d.markClass : \"\") },\n                    diagnostic: d\n                }).range(d.from, d.to);\n        }), true);\n        return new LintState(ranges, panel, findDiagnostic(ranges));\n    }\n}\nfunction findDiagnostic(diagnostics, diagnostic = null, after = 0) {\n    let found = null;\n    diagnostics.between(after, 1e9, (from, to, { spec }) => {\n        if (diagnostic && spec.diagnostic != diagnostic)\n            return;\n        found = new SelectedDiagnostic(from, to, spec.diagnostic);\n        return false;\n    });\n    return found;\n}\nfunction hideTooltip(tr, tooltip) {\n    let from = tooltip.pos, to = tooltip.end || from;\n    let result = tr.state.facet(lintConfig).hideOn(tr, from, to);\n    if (result != null)\n        return result;\n    let line = tr.startState.doc.lineAt(tooltip.pos);\n    return !!(tr.effects.some(e => e.is(setDiagnosticsEffect)) || tr.changes.touchesRange(line.from, Math.max(line.to, to)));\n}\nfunction maybeEnableLint(state, effects) {\n    return state.field(lintState, false) ? effects : effects.concat(StateEffect.appendConfig.of(lintExtensions));\n}\n/**\nReturns a transaction spec which updates the current set of\ndiagnostics, and enables the lint extension if if wasn't already\nactive.\n*/\nfunction setDiagnostics(state, diagnostics) {\n    return {\n        effects: maybeEnableLint(state, [setDiagnosticsEffect.of(diagnostics)])\n    };\n}\n/**\nThe state effect that updates the set of active diagnostics. Can\nbe useful when writing an extension that needs to track these.\n*/\nconst setDiagnosticsEffect = /*@__PURE__*/StateEffect.define();\nconst togglePanel = /*@__PURE__*/StateEffect.define();\nconst movePanelSelection = /*@__PURE__*/StateEffect.define();\nconst lintState = /*@__PURE__*/StateField.define({\n    create() {\n        return new LintState(Decoration.none, null, null);\n    },\n    update(value, tr) {\n        if (tr.docChanged && value.diagnostics.size) {\n            let mapped = value.diagnostics.map(tr.changes), selected = null, panel = value.panel;\n            if (value.selected) {\n                let selPos = tr.changes.mapPos(value.selected.from, 1);\n                selected = findDiagnostic(mapped, value.selected.diagnostic, selPos) || findDiagnostic(mapped, null, selPos);\n            }\n            if (!mapped.size && panel && tr.state.facet(lintConfig).autoPanel)\n                panel = null;\n            value = new LintState(mapped, panel, selected);\n        }\n        for (let effect of tr.effects) {\n            if (effect.is(setDiagnosticsEffect)) {\n                let panel = !tr.state.facet(lintConfig).autoPanel ? value.panel : effect.value.length ? LintPanel.open : null;\n                value = LintState.init(effect.value, panel, tr.state);\n            }\n            else if (effect.is(togglePanel)) {\n                value = new LintState(value.diagnostics, effect.value ? LintPanel.open : null, value.selected);\n            }\n            else if (effect.is(movePanelSelection)) {\n                value = new LintState(value.diagnostics, value.panel, effect.value);\n            }\n        }\n        return value;\n    },\n    provide: f => [showPanel.from(f, val => val.panel),\n        EditorView.decorations.from(f, s => s.diagnostics)]\n});\n/**\nReturns the number of active lint diagnostics in the given state.\n*/\nfunction diagnosticCount(state) {\n    let lint = state.field(lintState, false);\n    return lint ? lint.diagnostics.size : 0;\n}\nconst activeMark = /*@__PURE__*/Decoration.mark({ class: \"cm-lintRange cm-lintRange-active\" });\nfunction lintTooltip(view, pos, side) {\n    let { diagnostics } = view.state.field(lintState);\n    let found = [], stackStart = 2e8, stackEnd = 0;\n    diagnostics.between(pos - (side < 0 ? 1 : 0), pos + (side > 0 ? 1 : 0), (from, to, { spec }) => {\n        if (pos >= from && pos <= to &&\n            (from == to || ((pos > from || side > 0) && (pos < to || side < 0)))) {\n            found.push(spec.diagnostic);\n            stackStart = Math.min(from, stackStart);\n            stackEnd = Math.max(to, stackEnd);\n        }\n    });\n    let diagnosticFilter = view.state.facet(lintConfig).tooltipFilter;\n    if (diagnosticFilter)\n        found = diagnosticFilter(found, view.state);\n    if (!found.length)\n        return null;\n    return {\n        pos: stackStart,\n        end: stackEnd,\n        above: view.state.doc.lineAt(stackStart).to < stackEnd,\n        create() {\n            return { dom: diagnosticsTooltip(view, found) };\n        }\n    };\n}\nfunction diagnosticsTooltip(view, diagnostics) {\n    return elt(\"ul\", { class: \"cm-tooltip-lint\" }, diagnostics.map(d => renderDiagnostic(view, d, false)));\n}\n/**\nCommand to open and focus the lint panel.\n*/\nconst openLintPanel = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field || !field.panel)\n        view.dispatch({ effects: maybeEnableLint(view.state, [togglePanel.of(true)]) });\n    let panel = getPanel(view, LintPanel.open);\n    if (panel)\n        panel.dom.querySelector(\".cm-panel-lint ul\").focus();\n    return true;\n};\n/**\nCommand to close the lint panel, when open.\n*/\nconst closeLintPanel = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field || !field.panel)\n        return false;\n    view.dispatch({ effects: togglePanel.of(false) });\n    return true;\n};\n/**\nMove the selection to the next diagnostic.\n*/\nconst nextDiagnostic = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field)\n        return false;\n    let sel = view.state.selection.main, next = field.diagnostics.iter(sel.to + 1);\n    if (!next.value) {\n        next = field.diagnostics.iter(0);\n        if (!next.value || next.from == sel.from && next.to == sel.to)\n            return false;\n    }\n    view.dispatch({ selection: { anchor: next.from, head: next.to }, scrollIntoView: true });\n    return true;\n};\n/**\nMove the selection to the previous diagnostic.\n*/\nconst previousDiagnostic = (view) => {\n    let { state } = view, field = state.field(lintState, false);\n    if (!field)\n        return false;\n    let sel = state.selection.main;\n    let prevFrom, prevTo, lastFrom, lastTo;\n    field.diagnostics.between(0, state.doc.length, (from, to) => {\n        if (to < sel.to && (prevFrom == null || prevFrom < from)) {\n            prevFrom = from;\n            prevTo = to;\n        }\n        if (lastFrom == null || from > lastFrom) {\n            lastFrom = from;\n            lastTo = to;\n        }\n    });\n    if (lastFrom == null || prevFrom == null && lastFrom == sel.from)\n        return false;\n    view.dispatch({ selection: { anchor: prevFrom !== null && prevFrom !== void 0 ? prevFrom : lastFrom, head: prevTo !== null && prevTo !== void 0 ? prevTo : lastTo }, scrollIntoView: true });\n    return true;\n};\n/**\nA set of default key bindings for the lint functionality.\n\n- Ctrl-Shift-m (Cmd-Shift-m on macOS): [`openLintPanel`](https://codemirror.net/6/docs/ref/#lint.openLintPanel)\n- F8: [`nextDiagnostic`](https://codemirror.net/6/docs/ref/#lint.nextDiagnostic)\n*/\nconst lintKeymap = [\n    { key: \"Mod-Shift-m\", run: openLintPanel, preventDefault: true },\n    { key: \"F8\", run: nextDiagnostic }\n];\nconst lintPlugin = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.timeout = -1;\n        this.set = true;\n        let { delay } = view.state.facet(lintConfig);\n        this.lintTime = Date.now() + delay;\n        this.run = this.run.bind(this);\n        this.timeout = setTimeout(this.run, delay);\n    }\n    run() {\n        clearTimeout(this.timeout);\n        let now = Date.now();\n        if (now < this.lintTime - 10) {\n            this.timeout = setTimeout(this.run, this.lintTime - now);\n        }\n        else {\n            this.set = false;\n            let { state } = this.view, { sources } = state.facet(lintConfig);\n            if (sources.length)\n                batchResults(sources.map(s => Promise.resolve(s(this.view))), annotations => {\n                    if (this.view.state.doc == state.doc)\n                        this.view.dispatch(setDiagnostics(this.view.state, annotations.reduce((a, b) => a.concat(b))));\n                }, error => { logException(this.view.state, error); });\n        }\n    }\n    update(update) {\n        let config = update.state.facet(lintConfig);\n        if (update.docChanged || config != update.startState.facet(lintConfig) ||\n            config.needsRefresh && config.needsRefresh(update)) {\n            this.lintTime = Date.now() + config.delay;\n            if (!this.set) {\n                this.set = true;\n                this.timeout = setTimeout(this.run, config.delay);\n            }\n        }\n    }\n    force() {\n        if (this.set) {\n            this.lintTime = Date.now();\n            this.run();\n        }\n    }\n    destroy() {\n        clearTimeout(this.timeout);\n    }\n});\nfunction batchResults(promises, sink, error) {\n    let collected = [], timeout = -1;\n    for (let p of promises)\n        p.then(value => {\n            collected.push(value);\n            clearTimeout(timeout);\n            if (collected.length == promises.length)\n                sink(collected);\n            else\n                setTimeout(() => sink(collected), 200);\n        }, error);\n}\nconst lintConfig = /*@__PURE__*/Facet.define({\n    combine(input) {\n        return Object.assign({ sources: input.map(i => i.source).filter(x => x != null) }, combineConfig(input.map(i => i.config), {\n            delay: 750,\n            markerFilter: null,\n            tooltipFilter: null,\n            needsRefresh: null,\n            hideOn: () => null,\n        }, {\n            needsRefresh: (a, b) => !a ? b : !b ? a : u => a(u) || b(u)\n        }));\n    }\n});\n/**\nGiven a diagnostic source, this function returns an extension that\nenables linting with that source. It will be called whenever the\neditor is idle (after its content changed). If `null` is given as\nsource, this only configures the lint extension.\n*/\nfunction linter(source, config = {}) {\n    return [\n        lintConfig.of({ source, config }),\n        lintPlugin,\n        lintExtensions\n    ];\n}\n/**\nForces any linters [configured](https://codemirror.net/6/docs/ref/#lint.linter) to run when the\neditor is idle to run right away.\n*/\nfunction forceLinting(view) {\n    let plugin = view.plugin(lintPlugin);\n    if (plugin)\n        plugin.force();\n}\nfunction assignKeys(actions) {\n    let assigned = [];\n    if (actions)\n        actions: for (let { name } of actions) {\n            for (let i = 0; i < name.length; i++) {\n                let ch = name[i];\n                if (/[a-zA-Z]/.test(ch) && !assigned.some(c => c.toLowerCase() == ch.toLowerCase())) {\n                    assigned.push(ch);\n                    continue actions;\n                }\n            }\n            assigned.push(\"\");\n        }\n    return assigned;\n}\nfunction renderDiagnostic(view, diagnostic, inPanel) {\n    var _a;\n    let keys = inPanel ? assignKeys(diagnostic.actions) : [];\n    return elt(\"li\", { class: \"cm-diagnostic cm-diagnostic-\" + diagnostic.severity }, elt(\"span\", { class: \"cm-diagnosticText\" }, diagnostic.renderMessage ? diagnostic.renderMessage(view) : diagnostic.message), (_a = diagnostic.actions) === null || _a === void 0 ? void 0 : _a.map((action, i) => {\n        let fired = false, click = (e) => {\n            e.preventDefault();\n            if (fired)\n                return;\n            fired = true;\n            let found = findDiagnostic(view.state.field(lintState).diagnostics, diagnostic);\n            if (found)\n                action.apply(view, found.from, found.to);\n        };\n        let { name } = action, keyIndex = keys[i] ? name.indexOf(keys[i]) : -1;\n        let nameElt = keyIndex < 0 ? name : [name.slice(0, keyIndex),\n            elt(\"u\", name.slice(keyIndex, keyIndex + 1)),\n            name.slice(keyIndex + 1)];\n        return elt(\"button\", {\n            type: \"button\",\n            class: \"cm-diagnosticAction\",\n            onclick: click,\n            onmousedown: click,\n            \"aria-label\": ` Action: ${name}${keyIndex < 0 ? \"\" : ` (access key \"${keys[i]})\"`}.`\n        }, nameElt);\n    }), diagnostic.source && elt(\"div\", { class: \"cm-diagnosticSource\" }, diagnostic.source));\n}\nclass DiagnosticWidget extends WidgetType {\n    constructor(diagnostic) {\n        super();\n        this.diagnostic = diagnostic;\n    }\n    eq(other) { return other.diagnostic == this.diagnostic; }\n    toDOM() {\n        return elt(\"span\", { class: \"cm-lintPoint cm-lintPoint-\" + this.diagnostic.severity });\n    }\n}\nclass PanelItem {\n    constructor(view, diagnostic) {\n        this.diagnostic = diagnostic;\n        this.id = \"item_\" + Math.floor(Math.random() * 0xffffffff).toString(16);\n        this.dom = renderDiagnostic(view, diagnostic, true);\n        this.dom.id = this.id;\n        this.dom.setAttribute(\"role\", \"option\");\n    }\n}\nclass LintPanel {\n    constructor(view) {\n        this.view = view;\n        this.items = [];\n        let onkeydown = (event) => {\n            if (event.keyCode == 27) { // Escape\n                closeLintPanel(this.view);\n                this.view.focus();\n            }\n            else if (event.keyCode == 38 || event.keyCode == 33) { // ArrowUp, PageUp\n                this.moveSelection((this.selectedIndex - 1 + this.items.length) % this.items.length);\n            }\n            else if (event.keyCode == 40 || event.keyCode == 34) { // ArrowDown, PageDown\n                this.moveSelection((this.selectedIndex + 1) % this.items.length);\n            }\n            else if (event.keyCode == 36) { // Home\n                this.moveSelection(0);\n            }\n            else if (event.keyCode == 35) { // End\n                this.moveSelection(this.items.length - 1);\n            }\n            else if (event.keyCode == 13) { // Enter\n                this.view.focus();\n            }\n            else if (event.keyCode >= 65 && event.keyCode <= 90 && this.selectedIndex >= 0) { // A-Z\n                let { diagnostic } = this.items[this.selectedIndex], keys = assignKeys(diagnostic.actions);\n                for (let i = 0; i < keys.length; i++)\n                    if (keys[i].toUpperCase().charCodeAt(0) == event.keyCode) {\n                        let found = findDiagnostic(this.view.state.field(lintState).diagnostics, diagnostic);\n                        if (found)\n                            diagnostic.actions[i].apply(view, found.from, found.to);\n                    }\n            }\n            else {\n                return;\n            }\n            event.preventDefault();\n        };\n        let onclick = (event) => {\n            for (let i = 0; i < this.items.length; i++) {\n                if (this.items[i].dom.contains(event.target))\n                    this.moveSelection(i);\n            }\n        };\n        this.list = elt(\"ul\", {\n            tabIndex: 0,\n            role: \"listbox\",\n            \"aria-label\": this.view.state.phrase(\"Diagnostics\"),\n            onkeydown,\n            onclick\n        });\n        this.dom = elt(\"div\", { class: \"cm-panel-lint\" }, this.list, elt(\"button\", {\n            type: \"button\",\n            name: \"close\",\n            \"aria-label\": this.view.state.phrase(\"close\"),\n            onclick: () => closeLintPanel(this.view)\n        }, \"\"));\n        this.update();\n    }\n    get selectedIndex() {\n        let selected = this.view.state.field(lintState).selected;\n        if (!selected)\n            return -1;\n        for (let i = 0; i < this.items.length; i++)\n            if (this.items[i].diagnostic == selected.diagnostic)\n                return i;\n        return -1;\n    }\n    update() {\n        let { diagnostics, selected } = this.view.state.field(lintState);\n        let i = 0, needsSync = false, newSelectedItem = null;\n        diagnostics.between(0, this.view.state.doc.length, (_start, _end, { spec }) => {\n            let found = -1, item;\n            for (let j = i; j < this.items.length; j++)\n                if (this.items[j].diagnostic == spec.diagnostic) {\n                    found = j;\n                    break;\n                }\n            if (found < 0) {\n                item = new PanelItem(this.view, spec.diagnostic);\n                this.items.splice(i, 0, item);\n                needsSync = true;\n            }\n            else {\n                item = this.items[found];\n                if (found > i) {\n                    this.items.splice(i, found - i);\n                    needsSync = true;\n                }\n            }\n            if (selected && item.diagnostic == selected.diagnostic) {\n                if (!item.dom.hasAttribute(\"aria-selected\")) {\n                    item.dom.setAttribute(\"aria-selected\", \"true\");\n                    newSelectedItem = item;\n                }\n            }\n            else if (item.dom.hasAttribute(\"aria-selected\")) {\n                item.dom.removeAttribute(\"aria-selected\");\n            }\n            i++;\n        });\n        while (i < this.items.length && !(this.items.length == 1 && this.items[0].diagnostic.from < 0)) {\n            needsSync = true;\n            this.items.pop();\n        }\n        if (this.items.length == 0) {\n            this.items.push(new PanelItem(this.view, {\n                from: -1, to: -1,\n                severity: \"info\",\n                message: this.view.state.phrase(\"No diagnostics\")\n            }));\n            needsSync = true;\n        }\n        if (newSelectedItem) {\n            this.list.setAttribute(\"aria-activedescendant\", newSelectedItem.id);\n            this.view.requestMeasure({\n                key: this,\n                read: () => ({ sel: newSelectedItem.dom.getBoundingClientRect(), panel: this.list.getBoundingClientRect() }),\n                write: ({ sel, panel }) => {\n                    let scaleY = panel.height / this.list.offsetHeight;\n                    if (sel.top < panel.top)\n                        this.list.scrollTop -= (panel.top - sel.top) / scaleY;\n                    else if (sel.bottom > panel.bottom)\n                        this.list.scrollTop += (sel.bottom - panel.bottom) / scaleY;\n                }\n            });\n        }\n        else if (this.selectedIndex < 0) {\n            this.list.removeAttribute(\"aria-activedescendant\");\n        }\n        if (needsSync)\n            this.sync();\n    }\n    sync() {\n        let domPos = this.list.firstChild;\n        function rm() {\n            let prev = domPos;\n            domPos = prev.nextSibling;\n            prev.remove();\n        }\n        for (let item of this.items) {\n            if (item.dom.parentNode == this.list) {\n                while (domPos != item.dom)\n                    rm();\n                domPos = item.dom.nextSibling;\n            }\n            else {\n                this.list.insertBefore(item.dom, domPos);\n            }\n        }\n        while (domPos)\n            rm();\n    }\n    moveSelection(selectedIndex) {\n        if (this.selectedIndex < 0)\n            return;\n        let field = this.view.state.field(lintState);\n        let selection = findDiagnostic(field.diagnostics, this.items[selectedIndex].diagnostic);\n        if (!selection)\n            return;\n        this.view.dispatch({\n            selection: { anchor: selection.from, head: selection.to },\n            scrollIntoView: true,\n            effects: movePanelSelection.of(selection)\n        });\n    }\n    static open(view) { return new LintPanel(view); }\n}\nfunction svg(content, attrs = `viewBox=\"0 0 40 40\"`) {\n    return `url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" ${attrs}>${encodeURIComponent(content)}</svg>')`;\n}\nfunction underline(color) {\n    return svg(`<path d=\"m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0\" stroke=\"${color}\" fill=\"none\" stroke-width=\".7\"/>`, `width=\"6\" height=\"3\"`);\n}\nconst baseTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-diagnostic\": {\n        padding: \"3px 6px 3px 8px\",\n        marginLeft: \"-1px\",\n        display: \"block\",\n        whiteSpace: \"pre-wrap\"\n    },\n    \".cm-diagnostic-error\": { borderLeft: \"5px solid #d11\" },\n    \".cm-diagnostic-warning\": { borderLeft: \"5px solid orange\" },\n    \".cm-diagnostic-info\": { borderLeft: \"5px solid #999\" },\n    \".cm-diagnostic-hint\": { borderLeft: \"5px solid #66d\" },\n    \".cm-diagnosticAction\": {\n        font: \"inherit\",\n        border: \"none\",\n        padding: \"2px 4px\",\n        backgroundColor: \"#444\",\n        color: \"white\",\n        borderRadius: \"3px\",\n        marginLeft: \"8px\",\n        cursor: \"pointer\"\n    },\n    \".cm-diagnosticSource\": {\n        fontSize: \"70%\",\n        opacity: .7\n    },\n    \".cm-lintRange\": {\n        backgroundPosition: \"left bottom\",\n        backgroundRepeat: \"repeat-x\",\n        paddingBottom: \"0.7px\",\n    },\n    \".cm-lintRange-error\": { backgroundImage: /*@__PURE__*/underline(\"#d11\") },\n    \".cm-lintRange-warning\": { backgroundImage: /*@__PURE__*/underline(\"orange\") },\n    \".cm-lintRange-info\": { backgroundImage: /*@__PURE__*/underline(\"#999\") },\n    \".cm-lintRange-hint\": { backgroundImage: /*@__PURE__*/underline(\"#66d\") },\n    \".cm-lintRange-active\": { backgroundColor: \"#ffdd9980\" },\n    \".cm-tooltip-lint\": {\n        padding: 0,\n        margin: 0\n    },\n    \".cm-lintPoint\": {\n        position: \"relative\",\n        \"&:after\": {\n            content: '\"\"',\n            position: \"absolute\",\n            bottom: 0,\n            left: \"-2px\",\n            borderLeft: \"3px solid transparent\",\n            borderRight: \"3px solid transparent\",\n            borderBottom: \"4px solid #d11\"\n        }\n    },\n    \".cm-lintPoint-warning\": {\n        \"&:after\": { borderBottomColor: \"orange\" }\n    },\n    \".cm-lintPoint-info\": {\n        \"&:after\": { borderBottomColor: \"#999\" }\n    },\n    \".cm-lintPoint-hint\": {\n        \"&:after\": { borderBottomColor: \"#66d\" }\n    },\n    \".cm-panel.cm-panel-lint\": {\n        position: \"relative\",\n        \"& ul\": {\n            maxHeight: \"100px\",\n            overflowY: \"auto\",\n            \"& [aria-selected]\": {\n                backgroundColor: \"#ddd\",\n                \"& u\": { textDecoration: \"underline\" }\n            },\n            \"&:focus [aria-selected]\": {\n                background_fallback: \"#bdf\",\n                backgroundColor: \"Highlight\",\n                color_fallback: \"white\",\n                color: \"HighlightText\"\n            },\n            \"& u\": { textDecoration: \"none\" },\n            padding: 0,\n            margin: 0\n        },\n        \"& [name=close]\": {\n            position: \"absolute\",\n            top: \"0\",\n            right: \"2px\",\n            background: \"inherit\",\n            border: \"none\",\n            font: \"inherit\",\n            padding: 0,\n            margin: 0\n        }\n    }\n});\nfunction severityWeight(sev) {\n    return sev == \"error\" ? 4 : sev == \"warning\" ? 3 : sev == \"info\" ? 2 : 1;\n}\nclass LintGutterMarker extends GutterMarker {\n    constructor(diagnostics) {\n        super();\n        this.diagnostics = diagnostics;\n        this.severity = diagnostics.reduce((max, d) => severityWeight(max) < severityWeight(d.severity) ? d.severity : max, \"hint\");\n    }\n    toDOM(view) {\n        let elt = document.createElement(\"div\");\n        elt.className = \"cm-lint-marker cm-lint-marker-\" + this.severity;\n        let diagnostics = this.diagnostics;\n        let diagnosticsFilter = view.state.facet(lintGutterConfig).tooltipFilter;\n        if (diagnosticsFilter)\n            diagnostics = diagnosticsFilter(diagnostics, view.state);\n        if (diagnostics.length)\n            elt.onmouseover = () => gutterMarkerMouseOver(view, elt, diagnostics);\n        return elt;\n    }\n}\nfunction trackHoverOn(view, marker) {\n    let mousemove = (event) => {\n        let rect = marker.getBoundingClientRect();\n        if (event.clientX > rect.left - 10 /* Hover.Margin */ && event.clientX < rect.right + 10 /* Hover.Margin */ &&\n            event.clientY > rect.top - 10 /* Hover.Margin */ && event.clientY < rect.bottom + 10 /* Hover.Margin */)\n            return;\n        for (let target = event.target; target; target = target.parentNode) {\n            if (target.nodeType == 1 && target.classList.contains(\"cm-tooltip-lint\"))\n                return;\n        }\n        window.removeEventListener(\"mousemove\", mousemove);\n        if (view.state.field(lintGutterTooltip))\n            view.dispatch({ effects: setLintGutterTooltip.of(null) });\n    };\n    window.addEventListener(\"mousemove\", mousemove);\n}\nfunction gutterMarkerMouseOver(view, marker, diagnostics) {\n    function hovered() {\n        let line = view.elementAtHeight(marker.getBoundingClientRect().top + 5 - view.documentTop);\n        const linePos = view.coordsAtPos(line.from);\n        if (linePos) {\n            view.dispatch({ effects: setLintGutterTooltip.of({\n                    pos: line.from,\n                    above: false,\n                    create() {\n                        return {\n                            dom: diagnosticsTooltip(view, diagnostics),\n                            getCoords: () => marker.getBoundingClientRect()\n                        };\n                    }\n                }) });\n        }\n        marker.onmouseout = marker.onmousemove = null;\n        trackHoverOn(view, marker);\n    }\n    let { hoverTime } = view.state.facet(lintGutterConfig);\n    let hoverTimeout = setTimeout(hovered, hoverTime);\n    marker.onmouseout = () => {\n        clearTimeout(hoverTimeout);\n        marker.onmouseout = marker.onmousemove = null;\n    };\n    marker.onmousemove = () => {\n        clearTimeout(hoverTimeout);\n        hoverTimeout = setTimeout(hovered, hoverTime);\n    };\n}\nfunction markersForDiagnostics(doc, diagnostics) {\n    let byLine = Object.create(null);\n    for (let diagnostic of diagnostics) {\n        let line = doc.lineAt(diagnostic.from);\n        (byLine[line.from] || (byLine[line.from] = [])).push(diagnostic);\n    }\n    let markers = [];\n    for (let line in byLine) {\n        markers.push(new LintGutterMarker(byLine[line]).range(+line));\n    }\n    return RangeSet.of(markers, true);\n}\nconst lintGutterExtension = /*@__PURE__*/gutter({\n    class: \"cm-gutter-lint\",\n    markers: view => view.state.field(lintGutterMarkers),\n    widgetMarker: (view, widget, block) => {\n        let diagnostics = [];\n        view.state.field(lintGutterMarkers).between(block.from, block.to, (from, to, value) => {\n            diagnostics.push(...value.diagnostics);\n        });\n        return diagnostics.length ? new LintGutterMarker(diagnostics) : null;\n    }\n});\nconst lintGutterMarkers = /*@__PURE__*/StateField.define({\n    create() {\n        return RangeSet.empty;\n    },\n    update(markers, tr) {\n        markers = markers.map(tr.changes);\n        let diagnosticFilter = tr.state.facet(lintGutterConfig).markerFilter;\n        for (let effect of tr.effects) {\n            if (effect.is(setDiagnosticsEffect)) {\n                let diagnostics = effect.value;\n                if (diagnosticFilter)\n                    diagnostics = diagnosticFilter(diagnostics || [], tr.state);\n                markers = markersForDiagnostics(tr.state.doc, diagnostics.slice(0));\n            }\n        }\n        return markers;\n    }\n});\nconst setLintGutterTooltip = /*@__PURE__*/StateEffect.define();\nconst lintGutterTooltip = /*@__PURE__*/StateField.define({\n    create() { return null; },\n    update(tooltip, tr) {\n        if (tooltip && tr.docChanged)\n            tooltip = hideTooltip(tr, tooltip) ? null : Object.assign(Object.assign({}, tooltip), { pos: tr.changes.mapPos(tooltip.pos) });\n        return tr.effects.reduce((t, e) => e.is(setLintGutterTooltip) ? e.value : t, tooltip);\n    },\n    provide: field => showTooltip.from(field)\n});\nconst lintGutterTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-gutter-lint\": {\n        width: \"1.4em\",\n        \"& .cm-gutterElement\": {\n            padding: \".2em\"\n        }\n    },\n    \".cm-lint-marker\": {\n        width: \"1em\",\n        height: \"1em\"\n    },\n    \".cm-lint-marker-info\": {\n        content: /*@__PURE__*/svg(`<path fill=\"#aaf\" stroke=\"#77e\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M5 5L35 5L35 35L5 35Z\"/>`)\n    },\n    \".cm-lint-marker-warning\": {\n        content: /*@__PURE__*/svg(`<path fill=\"#fe8\" stroke=\"#fd7\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M20 6L37 35L3 35Z\"/>`),\n    },\n    \".cm-lint-marker-error\": {\n        content: /*@__PURE__*/svg(`<circle cx=\"20\" cy=\"20\" r=\"15\" fill=\"#f87\" stroke=\"#f43\" stroke-width=\"6\"/>`)\n    },\n});\nconst lintExtensions = [\n    lintState,\n    /*@__PURE__*/EditorView.decorations.compute([lintState], state => {\n        let { selected, panel } = state.field(lintState);\n        return !selected || !panel || selected.from == selected.to ? Decoration.none : Decoration.set([\n            activeMark.range(selected.from, selected.to)\n        ]);\n    }),\n    /*@__PURE__*/hoverTooltip(lintTooltip, { hideOn: hideTooltip }),\n    baseTheme\n];\nconst lintGutterConfig = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            hoverTime: 300 /* Hover.Time */,\n            markerFilter: null,\n            tooltipFilter: null\n        });\n    }\n});\n/**\nReturns an extension that installs a gutter showing markers for\neach line that has diagnostics, which can be hovered over to see\nthe diagnostics.\n*/\nfunction lintGutter(config = {}) {\n    return [lintGutterConfig.of(config), lintGutterMarkers, lintGutterExtension, lintGutterTheme, lintGutterTooltip];\n}\n/**\nIterate over the marked diagnostics for the given editor state,\ncalling `f` for each of them. Note that, if the document changed\nsince the diagnostics were created, the `Diagnostic` object will\nhold the original outdated position, whereas the `to` and `from`\narguments hold the diagnostic's current position.\n*/\nfunction forEachDiagnostic(state, f) {\n    let lState = state.field(lintState, false);\n    if (lState && lState.diagnostics.size)\n        for (let iter = RangeSet.iter([lState.diagnostics]); iter.value; iter.next())\n            f(iter.value.spec.diagnostic, iter.from, iter.to);\n}\n\nexport { closeLintPanel, diagnosticCount, forEachDiagnostic, forceLinting, lintGutter, lintKeymap, linter, nextDiagnostic, openLintPanel, previousDiagnostic, setDiagnostics, setDiagnosticsEffect };\n","import { lineNumbers, highlightActiveLineGutter, highlightSpecialChars, drawSelection, dropCursor, rectangularSelection, crosshairCursor, highlightActiveLine, keymap } from '@codemirror/view';\nexport { EditorView } from '@codemirror/view';\nimport { EditorState } from '@codemirror/state';\nimport { foldGutter, indentOnInput, syntaxHighlighting, defaultHighlightStyle, bracketMatching, foldKeymap } from '@codemirror/language';\nimport { history, defaultKeymap, historyKeymap } from '@codemirror/commands';\nimport { highlightSelectionMatches, searchKeymap } from '@codemirror/search';\nimport { closeBrackets, autocompletion, closeBracketsKeymap, completionKeymap } from '@codemirror/autocomplete';\nimport { lintKeymap } from '@codemirror/lint';\n\n// (The superfluous function calls around the list of extensions work\n// around current limitations in tree-shaking software.)\n/**\nThis is an extension value that just pulls together a number of\nextensions that you might want in a basic editor. It is meant as a\nconvenient helper to quickly set up CodeMirror without installing\nand importing a lot of separate packages.\n\nSpecifically, it includes...\n\n - [the default command bindings](https://codemirror.net/6/docs/ref/#commands.defaultKeymap)\n - [line numbers](https://codemirror.net/6/docs/ref/#view.lineNumbers)\n - [special character highlighting](https://codemirror.net/6/docs/ref/#view.highlightSpecialChars)\n - [the undo history](https://codemirror.net/6/docs/ref/#commands.history)\n - [a fold gutter](https://codemirror.net/6/docs/ref/#language.foldGutter)\n - [custom selection drawing](https://codemirror.net/6/docs/ref/#view.drawSelection)\n - [drop cursor](https://codemirror.net/6/docs/ref/#view.dropCursor)\n - [multiple selections](https://codemirror.net/6/docs/ref/#state.EditorState^allowMultipleSelections)\n - [reindentation on input](https://codemirror.net/6/docs/ref/#language.indentOnInput)\n - [the default highlight style](https://codemirror.net/6/docs/ref/#language.defaultHighlightStyle) (as fallback)\n - [bracket matching](https://codemirror.net/6/docs/ref/#language.bracketMatching)\n - [bracket closing](https://codemirror.net/6/docs/ref/#autocomplete.closeBrackets)\n - [autocompletion](https://codemirror.net/6/docs/ref/#autocomplete.autocompletion)\n - [rectangular selection](https://codemirror.net/6/docs/ref/#view.rectangularSelection) and [crosshair cursor](https://codemirror.net/6/docs/ref/#view.crosshairCursor)\n - [active line highlighting](https://codemirror.net/6/docs/ref/#view.highlightActiveLine)\n - [active line gutter highlighting](https://codemirror.net/6/docs/ref/#view.highlightActiveLineGutter)\n - [selection match highlighting](https://codemirror.net/6/docs/ref/#search.highlightSelectionMatches)\n - [search](https://codemirror.net/6/docs/ref/#search.searchKeymap)\n - [linting](https://codemirror.net/6/docs/ref/#lint.lintKeymap)\n\n(You'll probably want to add some language package to your setup\ntoo.)\n\nThis extension does not allow customization. The idea is that,\nonce you decide you want to configure your editor more precisely,\nyou take this package's source (which is just a bunch of imports\nand an array literal), copy it into your own code, and adjust it\nas desired.\n*/\nconst basicSetup = /*@__PURE__*/(() => [\n    lineNumbers(),\n    highlightActiveLineGutter(),\n    highlightSpecialChars(),\n    history(),\n    foldGutter(),\n    drawSelection(),\n    dropCursor(),\n    EditorState.allowMultipleSelections.of(true),\n    indentOnInput(),\n    syntaxHighlighting(defaultHighlightStyle, { fallback: true }),\n    bracketMatching(),\n    closeBrackets(),\n    autocompletion(),\n    rectangularSelection(),\n    crosshairCursor(),\n    highlightActiveLine(),\n    highlightSelectionMatches(),\n    keymap.of([\n        ...closeBracketsKeymap,\n        ...defaultKeymap,\n        ...searchKeymap,\n        ...historyKeymap,\n        ...foldKeymap,\n        ...completionKeymap,\n        ...lintKeymap\n    ])\n])();\n/**\nA minimal set of extensions to create a functional editor. Only\nincludes [the default keymap](https://codemirror.net/6/docs/ref/#commands.defaultKeymap), [undo\nhistory](https://codemirror.net/6/docs/ref/#commands.history), [special character\nhighlighting](https://codemirror.net/6/docs/ref/#view.highlightSpecialChars), [custom selection\ndrawing](https://codemirror.net/6/docs/ref/#view.drawSelection), and [default highlight\nstyle](https://codemirror.net/6/docs/ref/#language.defaultHighlightStyle).\n*/\nconst minimalSetup = /*@__PURE__*/(() => [\n    highlightSpecialChars(),\n    history(),\n    drawSelection(),\n    syntaxHighlighting(defaultHighlightStyle, { fallback: true }),\n    keymap.of([\n        ...defaultKeymap,\n        ...historyKeymap,\n    ])\n])();\n\nexport { basicSetup, minimalSetup };\n","/* eslint-disable @typescript-eslint/no-explicit-any, @typescript-eslint/no-this-alias */\n/**\n * Reduce calls to the passed function.\n *\n * @param func - Function to debounce.\n * @param threshold - The delay to avoid recalling the function.\n * @param execAsap - If true, the Function is called at the start of the threshold, otherwise the Function is called at the end of the threshold.\n */\nexport function debounce(func, threshold, execAsap = false) {\n    let timeout;\n    return function debounced(...args) {\n        const self = this;\n        if (timeout)\n            clearTimeout(timeout);\n        else if (execAsap)\n            func.apply(self, args);\n        timeout = setTimeout(delayed, threshold || 100);\n        function delayed() {\n            if (!execAsap)\n                func.apply(self, args);\n            timeout = null;\n        }\n    };\n}\n","<script context=\"module\"></script>\n\n<script>import { createEventDispatcher, onDestroy, onMount } from \"svelte\";\nimport { basicSetup } from \"codemirror\";\nimport { EditorView, keymap, placeholder as placeholderExt } from \"@codemirror/view\";\nimport { EditorState, StateEffect } from \"@codemirror/state\";\nimport { indentWithTab } from \"@codemirror/commands\";\nimport { indentUnit } from \"@codemirror/language\";\nimport { debounce } from \"./util\";\nlet classes = \"\";\nexport { classes as class };\nexport let value = \"\";\nexport let basic = true;\nexport let lang = void 0;\nexport let theme = void 0;\nexport let extensions = [];\nexport let useTab = true;\nexport let tabSize = 2;\nexport let styles = void 0;\nexport let lineWrapping = false;\nexport let editable = true;\nexport let readonly = false;\nexport let placeholder = void 0;\nexport let nodebounce = false;\nconst is_browser = typeof window !== \"undefined\";\nconst dispatch = createEventDispatcher();\nlet element;\nlet view;\nlet update_from_prop = false;\nlet update_from_state = false;\nlet first_config = true;\nlet first_update = true;\n$: state_extensions = [\n  ...get_base_extensions(basic, useTab, tabSize, lineWrapping, placeholder, editable, readonly, lang),\n  ...get_theme(theme, styles),\n  ...extensions\n];\n$: view && update(value);\n$: view && state_extensions && reconfigure();\n$: on_change = nodebounce ? handle_change : debounce(handle_change, 300);\nonMount(() => {\n  view = create_editor_view();\n  dispatch(\"ready\", view);\n});\nonDestroy(() => view?.destroy());\nfunction create_editor_view() {\n  return new EditorView({\n    parent: element,\n    state: create_editor_state(value),\n    dispatch(transaction) {\n      view.update([transaction]);\n      if (!update_from_prop && transaction.docChanged) {\n        on_change();\n      }\n    }\n  });\n}\nfunction reconfigure() {\n  if (first_config) {\n    first_config = false;\n    return;\n  }\n  view.dispatch({\n    effects: StateEffect.reconfigure.of(state_extensions)\n  });\n  dispatch(\"reconfigure\", view);\n}\nfunction update(value2) {\n  if (first_update) {\n    first_update = false;\n    return;\n  }\n  if (update_from_state) {\n    update_from_state = false;\n    return;\n  }\n  update_from_prop = true;\n  view.setState(create_editor_state(value2));\n  update_from_prop = false;\n}\nfunction handle_change() {\n  const new_value = view.state.doc.toString();\n  if (new_value === value) return;\n  update_from_state = true;\n  value = new_value;\n  dispatch(\"change\", value);\n}\nfunction create_editor_state(value2) {\n  return EditorState.create({\n    doc: value2 ?? void 0,\n    extensions: state_extensions\n  });\n}\nfunction get_base_extensions(basic2, useTab2, tabSize2, lineWrapping2, placeholder2, editable2, readonly2, lang2) {\n  const extensions2 = [\n    indentUnit.of(\" \".repeat(tabSize2)),\n    EditorView.editable.of(editable2),\n    EditorState.readOnly.of(readonly2)\n  ];\n  if (basic2) extensions2.push(basicSetup);\n  if (useTab2) extensions2.push(keymap.of([indentWithTab]));\n  if (placeholder2) extensions2.push(placeholderExt(placeholder2));\n  if (lang2) extensions2.push(lang2);\n  if (lineWrapping2) extensions2.push(EditorView.lineWrapping);\n  return extensions2;\n}\nfunction get_theme(theme2, styles2) {\n  const extensions2 = [];\n  if (styles2) extensions2.push(EditorView.theme(styles2));\n  if (theme2) extensions2.push(theme2);\n  return extensions2;\n}\n</script>\n\n{#if is_browser}\n    <div class=\"codemirror-wrapper {classes}\" bind:this={element} />\n{:else}\n    <div class=\"scm-waiting {classes}\">\n        <div class=\"scm-waiting__loading scm-loading\">\n            <div class=\"scm-loading__spinner\" />\n            <p class=\"scm-loading__text\">Loading editor...</p>\n        </div>\n\n        <pre class=\"scm-pre cm-editor\">{value}</pre>\n    </div>\n{/if}\n\n<style>\n    .codemirror-wrapper :global(.cm-focused) {\n        outline: none;\n    }\n\n    .scm-waiting {\n        position: relative;\n    }\n    .scm-waiting__loading {\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        background-color: rgba(255, 255, 255, 0.5);\n    }\n\n    .scm-loading {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n    .scm-loading__spinner {\n        width: 1rem;\n        height: 1rem;\n        border-radius: 100%;\n        border: solid 2px #000;\n        border-top-color: transparent;\n        margin-right: 0.75rem;\n        animation: spin 1s linear infinite;\n    }\n    .scm-loading__text {\n        font-family: sans-serif;\n    }\n    .scm-pre {\n        font-size: 0.85rem;\n        font-family: monospace;\n        tab-size: 2;\n        -moz-tab-size: 2;\n        resize: none;\n        pointer-events: none;\n        user-select: none;\n        overflow: auto;\n    }\n\n    @keyframes spin {\n        0% {\n            transform: rotate(0deg);\n        }\n        100% {\n            transform: rotate(360deg);\n        }\n    }\n</style>\n","import { Parser, NodeProp, NodeSet, NodeType, DefaultBufferLength, Tree, IterMode } from '@lezer/common';\n\n/**\nA parse stack. These are used internally by the parser to track\nparsing progress. They also provide some properties and methods\nthat external code such as a tokenizer can use to get information\nabout the parse state.\n*/\nclass Stack {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The parse that this stack is part of @internal\n    */\n    p, \n    /**\n    Holds state, input pos, buffer index triplets for all but the\n    top state @internal\n    */\n    stack, \n    /**\n    The current parse state @internal\n    */\n    state, \n    // The position at which the next reduce should take place. This\n    // can be less than `this.pos` when skipped expressions have been\n    // added to the stack (which should be moved outside of the next\n    // reduction)\n    /**\n    @internal\n    */\n    reducePos, \n    /**\n    The input position up to which this stack has parsed.\n    */\n    pos, \n    /**\n    The dynamic score of the stack, including dynamic precedence\n    and error-recovery penalties\n    @internal\n    */\n    score, \n    // The output buffer. Holds (type, start, end, size) quads\n    // representing nodes created by the parser, where `size` is\n    // amount of buffer array entries covered by this node.\n    /**\n    @internal\n    */\n    buffer, \n    // The base offset of the buffer. When stacks are split, the split\n    // instance shared the buffer history with its parent up to\n    // `bufferBase`, which is the absolute offset (including the\n    // offset of previous splits) into the buffer at which this stack\n    // starts writing.\n    /**\n    @internal\n    */\n    bufferBase, \n    /**\n    @internal\n    */\n    curContext, \n    /**\n    @internal\n    */\n    lookAhead = 0, \n    // A parent stack from which this was split off, if any. This is\n    // set up so that it always points to a stack that has some\n    // additional buffer content, never to a stack with an equal\n    // `bufferBase`.\n    /**\n    @internal\n    */\n    parent) {\n        this.p = p;\n        this.stack = stack;\n        this.state = state;\n        this.reducePos = reducePos;\n        this.pos = pos;\n        this.score = score;\n        this.buffer = buffer;\n        this.bufferBase = bufferBase;\n        this.curContext = curContext;\n        this.lookAhead = lookAhead;\n        this.parent = parent;\n    }\n    /**\n    @internal\n    */\n    toString() {\n        return `[${this.stack.filter((_, i) => i % 3 == 0).concat(this.state)}]@${this.pos}${this.score ? \"!\" + this.score : \"\"}`;\n    }\n    // Start an empty stack\n    /**\n    @internal\n    */\n    static start(p, state, pos = 0) {\n        let cx = p.parser.context;\n        return new Stack(p, [], state, pos, pos, 0, [], 0, cx ? new StackContext(cx, cx.start) : null, 0, null);\n    }\n    /**\n    The stack's current [context](#lr.ContextTracker) value, if\n    any. Its type will depend on the context tracker's type\n    parameter, or it will be `null` if there is no context\n    tracker.\n    */\n    get context() { return this.curContext ? this.curContext.context : null; }\n    // Push a state onto the stack, tracking its start position as well\n    // as the buffer base at that point.\n    /**\n    @internal\n    */\n    pushState(state, start) {\n        this.stack.push(this.state, start, this.bufferBase + this.buffer.length);\n        this.state = state;\n    }\n    // Apply a reduce action\n    /**\n    @internal\n    */\n    reduce(action) {\n        var _a;\n        let depth = action >> 19 /* Action.ReduceDepthShift */, type = action & 65535 /* Action.ValueMask */;\n        let { parser } = this.p;\n        let lookaheadRecord = this.reducePos < this.pos - 25 /* Lookahead.Margin */;\n        if (lookaheadRecord)\n            this.setLookAhead(this.pos);\n        let dPrec = parser.dynamicPrecedence(type);\n        if (dPrec)\n            this.score += dPrec;\n        if (depth == 0) {\n            this.pushState(parser.getGoto(this.state, type, true), this.reducePos);\n            // Zero-depth reductions are a special casethey add stuff to\n            // the stack without popping anything off.\n            if (type < parser.minRepeatTerm)\n                this.storeNode(type, this.reducePos, this.reducePos, lookaheadRecord ? 8 : 4, true);\n            this.reduceContext(type, this.reducePos);\n            return;\n        }\n        // Find the base index into `this.stack`, content after which will\n        // be dropped. Note that with `StayFlag` reductions we need to\n        // consume two extra frames (the dummy parent node for the skipped\n        // expression and the state that we'll be staying in, which should\n        // be moved to `this.state`).\n        let base = this.stack.length - ((depth - 1) * 3) - (action & 262144 /* Action.StayFlag */ ? 6 : 0);\n        let start = base ? this.stack[base - 2] : this.p.ranges[0].from, size = this.reducePos - start;\n        // This is a kludge to try and detect overly deep left-associative\n        // trees, which will not increase the parse stack depth and thus\n        // won't be caught by the regular stack-depth limit check.\n        if (size >= 2000 /* Recover.MinBigReduction */ && !((_a = this.p.parser.nodeSet.types[type]) === null || _a === void 0 ? void 0 : _a.isAnonymous)) {\n            if (start == this.p.lastBigReductionStart) {\n                this.p.bigReductionCount++;\n                this.p.lastBigReductionSize = size;\n            }\n            else if (this.p.lastBigReductionSize < size) {\n                this.p.bigReductionCount = 1;\n                this.p.lastBigReductionStart = start;\n                this.p.lastBigReductionSize = size;\n            }\n        }\n        let bufferBase = base ? this.stack[base - 1] : 0, count = this.bufferBase + this.buffer.length - bufferBase;\n        // Store normal terms or `R -> R R` repeat reductions\n        if (type < parser.minRepeatTerm || (action & 131072 /* Action.RepeatFlag */)) {\n            let pos = parser.stateFlag(this.state, 1 /* StateFlag.Skipped */) ? this.pos : this.reducePos;\n            this.storeNode(type, start, pos, count + 4, true);\n        }\n        if (action & 262144 /* Action.StayFlag */) {\n            this.state = this.stack[base];\n        }\n        else {\n            let baseStateID = this.stack[base - 3];\n            this.state = parser.getGoto(baseStateID, type, true);\n        }\n        while (this.stack.length > base)\n            this.stack.pop();\n        this.reduceContext(type, start);\n    }\n    // Shift a value into the buffer\n    /**\n    @internal\n    */\n    storeNode(term, start, end, size = 4, mustSink = false) {\n        if (term == 0 /* Term.Err */ &&\n            (!this.stack.length || this.stack[this.stack.length - 1] < this.buffer.length + this.bufferBase)) {\n            // Try to omit/merge adjacent error nodes\n            let cur = this, top = this.buffer.length;\n            if (top == 0 && cur.parent) {\n                top = cur.bufferBase - cur.parent.bufferBase;\n                cur = cur.parent;\n            }\n            if (top > 0 && cur.buffer[top - 4] == 0 /* Term.Err */ && cur.buffer[top - 1] > -1) {\n                if (start == end)\n                    return;\n                if (cur.buffer[top - 2] >= start) {\n                    cur.buffer[top - 2] = end;\n                    return;\n                }\n            }\n        }\n        if (!mustSink || this.pos == end) { // Simple case, just append\n            this.buffer.push(term, start, end, size);\n        }\n        else { // There may be skipped nodes that have to be moved forward\n            let index = this.buffer.length;\n            if (index > 0 && this.buffer[index - 4] != 0 /* Term.Err */) {\n                let mustMove = false;\n                for (let scan = index; scan > 0 && this.buffer[scan - 2] > end; scan -= 4) {\n                    if (this.buffer[scan - 1] >= 0) {\n                        mustMove = true;\n                        break;\n                    }\n                }\n                if (mustMove)\n                    while (index > 0 && this.buffer[index - 2] > end) {\n                        // Move this record forward\n                        this.buffer[index] = this.buffer[index - 4];\n                        this.buffer[index + 1] = this.buffer[index - 3];\n                        this.buffer[index + 2] = this.buffer[index - 2];\n                        this.buffer[index + 3] = this.buffer[index - 1];\n                        index -= 4;\n                        if (size > 4)\n                            size -= 4;\n                    }\n            }\n            this.buffer[index] = term;\n            this.buffer[index + 1] = start;\n            this.buffer[index + 2] = end;\n            this.buffer[index + 3] = size;\n        }\n    }\n    // Apply a shift action\n    /**\n    @internal\n    */\n    shift(action, type, start, end) {\n        if (action & 131072 /* Action.GotoFlag */) {\n            this.pushState(action & 65535 /* Action.ValueMask */, this.pos);\n        }\n        else if ((action & 262144 /* Action.StayFlag */) == 0) { // Regular shift\n            let nextState = action, { parser } = this.p;\n            if (end > this.pos || type <= parser.maxNode) {\n                this.pos = end;\n                if (!parser.stateFlag(nextState, 1 /* StateFlag.Skipped */))\n                    this.reducePos = end;\n            }\n            this.pushState(nextState, start);\n            this.shiftContext(type, start);\n            if (type <= parser.maxNode)\n                this.buffer.push(type, start, end, 4);\n        }\n        else { // Shift-and-stay, which means this is a skipped token\n            this.pos = end;\n            this.shiftContext(type, start);\n            if (type <= this.p.parser.maxNode)\n                this.buffer.push(type, start, end, 4);\n        }\n    }\n    // Apply an action\n    /**\n    @internal\n    */\n    apply(action, next, nextStart, nextEnd) {\n        if (action & 65536 /* Action.ReduceFlag */)\n            this.reduce(action);\n        else\n            this.shift(action, next, nextStart, nextEnd);\n    }\n    // Add a prebuilt (reused) node into the buffer.\n    /**\n    @internal\n    */\n    useNode(value, next) {\n        let index = this.p.reused.length - 1;\n        if (index < 0 || this.p.reused[index] != value) {\n            this.p.reused.push(value);\n            index++;\n        }\n        let start = this.pos;\n        this.reducePos = this.pos = start + value.length;\n        this.pushState(next, start);\n        this.buffer.push(index, start, this.reducePos, -1 /* size == -1 means this is a reused value */);\n        if (this.curContext)\n            this.updateContext(this.curContext.tracker.reuse(this.curContext.context, value, this, this.p.stream.reset(this.pos - value.length)));\n    }\n    // Split the stack. Due to the buffer sharing and the fact\n    // that `this.stack` tends to stay quite shallow, this isn't very\n    // expensive.\n    /**\n    @internal\n    */\n    split() {\n        let parent = this;\n        let off = parent.buffer.length;\n        // Because the top of the buffer (after this.pos) may be mutated\n        // to reorder reductions and skipped tokens, and shared buffers\n        // should be immutable, this copies any outstanding skipped tokens\n        // to the new buffer, and puts the base pointer before them.\n        while (off > 0 && parent.buffer[off - 2] > parent.reducePos)\n            off -= 4;\n        let buffer = parent.buffer.slice(off), base = parent.bufferBase + off;\n        // Make sure parent points to an actual parent with content, if there is such a parent.\n        while (parent && base == parent.bufferBase)\n            parent = parent.parent;\n        return new Stack(this.p, this.stack.slice(), this.state, this.reducePos, this.pos, this.score, buffer, base, this.curContext, this.lookAhead, parent);\n    }\n    // Try to recover from an error by 'deleting' (ignoring) one token.\n    /**\n    @internal\n    */\n    recoverByDelete(next, nextEnd) {\n        let isNode = next <= this.p.parser.maxNode;\n        if (isNode)\n            this.storeNode(next, this.pos, nextEnd, 4);\n        this.storeNode(0 /* Term.Err */, this.pos, nextEnd, isNode ? 8 : 4);\n        this.pos = this.reducePos = nextEnd;\n        this.score -= 190 /* Recover.Delete */;\n    }\n    /**\n    Check if the given term would be able to be shifted (optionally\n    after some reductions) on this stack. This can be useful for\n    external tokenizers that want to make sure they only provide a\n    given token when it applies.\n    */\n    canShift(term) {\n        for (let sim = new SimulatedStack(this);;) {\n            let action = this.p.parser.stateSlot(sim.state, 4 /* ParseState.DefaultReduce */) || this.p.parser.hasAction(sim.state, term);\n            if (action == 0)\n                return false;\n            if ((action & 65536 /* Action.ReduceFlag */) == 0)\n                return true;\n            sim.reduce(action);\n        }\n    }\n    // Apply up to Recover.MaxNext recovery actions that conceptually\n    // inserts some missing token or rule.\n    /**\n    @internal\n    */\n    recoverByInsert(next) {\n        if (this.stack.length >= 300 /* Recover.MaxInsertStackDepth */)\n            return [];\n        let nextStates = this.p.parser.nextStates(this.state);\n        if (nextStates.length > 4 /* Recover.MaxNext */ << 1 || this.stack.length >= 120 /* Recover.DampenInsertStackDepth */) {\n            let best = [];\n            for (let i = 0, s; i < nextStates.length; i += 2) {\n                if ((s = nextStates[i + 1]) != this.state && this.p.parser.hasAction(s, next))\n                    best.push(nextStates[i], s);\n            }\n            if (this.stack.length < 120 /* Recover.DampenInsertStackDepth */)\n                for (let i = 0; best.length < 4 /* Recover.MaxNext */ << 1 && i < nextStates.length; i += 2) {\n                    let s = nextStates[i + 1];\n                    if (!best.some((v, i) => (i & 1) && v == s))\n                        best.push(nextStates[i], s);\n                }\n            nextStates = best;\n        }\n        let result = [];\n        for (let i = 0; i < nextStates.length && result.length < 4 /* Recover.MaxNext */; i += 2) {\n            let s = nextStates[i + 1];\n            if (s == this.state)\n                continue;\n            let stack = this.split();\n            stack.pushState(s, this.pos);\n            stack.storeNode(0 /* Term.Err */, stack.pos, stack.pos, 4, true);\n            stack.shiftContext(nextStates[i], this.pos);\n            stack.reducePos = this.pos;\n            stack.score -= 200 /* Recover.Insert */;\n            result.push(stack);\n        }\n        return result;\n    }\n    // Force a reduce, if possible. Return false if that can't\n    // be done.\n    /**\n    @internal\n    */\n    forceReduce() {\n        let { parser } = this.p;\n        let reduce = parser.stateSlot(this.state, 5 /* ParseState.ForcedReduce */);\n        if ((reduce & 65536 /* Action.ReduceFlag */) == 0)\n            return false;\n        if (!parser.validAction(this.state, reduce)) {\n            let depth = reduce >> 19 /* Action.ReduceDepthShift */, term = reduce & 65535 /* Action.ValueMask */;\n            let target = this.stack.length - depth * 3;\n            if (target < 0 || parser.getGoto(this.stack[target], term, false) < 0) {\n                let backup = this.findForcedReduction();\n                if (backup == null)\n                    return false;\n                reduce = backup;\n            }\n            this.storeNode(0 /* Term.Err */, this.pos, this.pos, 4, true);\n            this.score -= 100 /* Recover.Reduce */;\n        }\n        this.reducePos = this.pos;\n        this.reduce(reduce);\n        return true;\n    }\n    /**\n    Try to scan through the automaton to find some kind of reduction\n    that can be applied. Used when the regular ForcedReduce field\n    isn't a valid action. @internal\n    */\n    findForcedReduction() {\n        let { parser } = this.p, seen = [];\n        let explore = (state, depth) => {\n            if (seen.includes(state))\n                return;\n            seen.push(state);\n            return parser.allActions(state, (action) => {\n                if (action & (262144 /* Action.StayFlag */ | 131072 /* Action.GotoFlag */)) ;\n                else if (action & 65536 /* Action.ReduceFlag */) {\n                    let rDepth = (action >> 19 /* Action.ReduceDepthShift */) - depth;\n                    if (rDepth > 1) {\n                        let term = action & 65535 /* Action.ValueMask */, target = this.stack.length - rDepth * 3;\n                        if (target >= 0 && parser.getGoto(this.stack[target], term, false) >= 0)\n                            return (rDepth << 19 /* Action.ReduceDepthShift */) | 65536 /* Action.ReduceFlag */ | term;\n                    }\n                }\n                else {\n                    let found = explore(action, depth + 1);\n                    if (found != null)\n                        return found;\n                }\n            });\n        };\n        return explore(this.state, 0);\n    }\n    /**\n    @internal\n    */\n    forceAll() {\n        while (!this.p.parser.stateFlag(this.state, 2 /* StateFlag.Accepting */)) {\n            if (!this.forceReduce()) {\n                this.storeNode(0 /* Term.Err */, this.pos, this.pos, 4, true);\n                break;\n            }\n        }\n        return this;\n    }\n    /**\n    Check whether this state has no further actions (assumed to be a direct descendant of the\n    top state, since any other states must be able to continue\n    somehow). @internal\n    */\n    get deadEnd() {\n        if (this.stack.length != 3)\n            return false;\n        let { parser } = this.p;\n        return parser.data[parser.stateSlot(this.state, 1 /* ParseState.Actions */)] == 65535 /* Seq.End */ &&\n            !parser.stateSlot(this.state, 4 /* ParseState.DefaultReduce */);\n    }\n    /**\n    Restart the stack (put it back in its start state). Only safe\n    when this.stack.length == 3 (state is directly below the top\n    state). @internal\n    */\n    restart() {\n        this.storeNode(0 /* Term.Err */, this.pos, this.pos, 4, true);\n        this.state = this.stack[0];\n        this.stack.length = 0;\n    }\n    /**\n    @internal\n    */\n    sameState(other) {\n        if (this.state != other.state || this.stack.length != other.stack.length)\n            return false;\n        for (let i = 0; i < this.stack.length; i += 3)\n            if (this.stack[i] != other.stack[i])\n                return false;\n        return true;\n    }\n    /**\n    Get the parser used by this stack.\n    */\n    get parser() { return this.p.parser; }\n    /**\n    Test whether a given dialect (by numeric ID, as exported from\n    the terms file) is enabled.\n    */\n    dialectEnabled(dialectID) { return this.p.parser.dialect.flags[dialectID]; }\n    shiftContext(term, start) {\n        if (this.curContext)\n            this.updateContext(this.curContext.tracker.shift(this.curContext.context, term, this, this.p.stream.reset(start)));\n    }\n    reduceContext(term, start) {\n        if (this.curContext)\n            this.updateContext(this.curContext.tracker.reduce(this.curContext.context, term, this, this.p.stream.reset(start)));\n    }\n    /**\n    @internal\n    */\n    emitContext() {\n        let last = this.buffer.length - 1;\n        if (last < 0 || this.buffer[last] != -3)\n            this.buffer.push(this.curContext.hash, this.pos, this.pos, -3);\n    }\n    /**\n    @internal\n    */\n    emitLookAhead() {\n        let last = this.buffer.length - 1;\n        if (last < 0 || this.buffer[last] != -4)\n            this.buffer.push(this.lookAhead, this.pos, this.pos, -4);\n    }\n    updateContext(context) {\n        if (context != this.curContext.context) {\n            let newCx = new StackContext(this.curContext.tracker, context);\n            if (newCx.hash != this.curContext.hash)\n                this.emitContext();\n            this.curContext = newCx;\n        }\n    }\n    /**\n    @internal\n    */\n    setLookAhead(lookAhead) {\n        if (lookAhead > this.lookAhead) {\n            this.emitLookAhead();\n            this.lookAhead = lookAhead;\n        }\n    }\n    /**\n    @internal\n    */\n    close() {\n        if (this.curContext && this.curContext.tracker.strict)\n            this.emitContext();\n        if (this.lookAhead > 0)\n            this.emitLookAhead();\n    }\n}\nclass StackContext {\n    constructor(tracker, context) {\n        this.tracker = tracker;\n        this.context = context;\n        this.hash = tracker.strict ? tracker.hash(context) : 0;\n    }\n}\n// Used to cheaply run some reductions to scan ahead without mutating\n// an entire stack\nclass SimulatedStack {\n    constructor(start) {\n        this.start = start;\n        this.state = start.state;\n        this.stack = start.stack;\n        this.base = this.stack.length;\n    }\n    reduce(action) {\n        let term = action & 65535 /* Action.ValueMask */, depth = action >> 19 /* Action.ReduceDepthShift */;\n        if (depth == 0) {\n            if (this.stack == this.start.stack)\n                this.stack = this.stack.slice();\n            this.stack.push(this.state, 0, 0);\n            this.base += 3;\n        }\n        else {\n            this.base -= (depth - 1) * 3;\n        }\n        let goto = this.start.p.parser.getGoto(this.stack[this.base - 3], term, true);\n        this.state = goto;\n    }\n}\n// This is given to `Tree.build` to build a buffer, and encapsulates\n// the parent-stack-walking necessary to read the nodes.\nclass StackBufferCursor {\n    constructor(stack, pos, index) {\n        this.stack = stack;\n        this.pos = pos;\n        this.index = index;\n        this.buffer = stack.buffer;\n        if (this.index == 0)\n            this.maybeNext();\n    }\n    static create(stack, pos = stack.bufferBase + stack.buffer.length) {\n        return new StackBufferCursor(stack, pos, pos - stack.bufferBase);\n    }\n    maybeNext() {\n        let next = this.stack.parent;\n        if (next != null) {\n            this.index = this.stack.bufferBase - next.bufferBase;\n            this.stack = next;\n            this.buffer = next.buffer;\n        }\n    }\n    get id() { return this.buffer[this.index - 4]; }\n    get start() { return this.buffer[this.index - 3]; }\n    get end() { return this.buffer[this.index - 2]; }\n    get size() { return this.buffer[this.index - 1]; }\n    next() {\n        this.index -= 4;\n        this.pos -= 4;\n        if (this.index == 0)\n            this.maybeNext();\n    }\n    fork() {\n        return new StackBufferCursor(this.stack, this.pos, this.index);\n    }\n}\n\n// See lezer-generator/src/encode.ts for comments about the encoding\n// used here\nfunction decodeArray(input, Type = Uint16Array) {\n    if (typeof input != \"string\")\n        return input;\n    let array = null;\n    for (let pos = 0, out = 0; pos < input.length;) {\n        let value = 0;\n        for (;;) {\n            let next = input.charCodeAt(pos++), stop = false;\n            if (next == 126 /* Encode.BigValCode */) {\n                value = 65535 /* Encode.BigVal */;\n                break;\n            }\n            if (next >= 92 /* Encode.Gap2 */)\n                next--;\n            if (next >= 34 /* Encode.Gap1 */)\n                next--;\n            let digit = next - 32 /* Encode.Start */;\n            if (digit >= 46 /* Encode.Base */) {\n                digit -= 46 /* Encode.Base */;\n                stop = true;\n            }\n            value += digit;\n            if (stop)\n                break;\n            value *= 46 /* Encode.Base */;\n        }\n        if (array)\n            array[out++] = value;\n        else\n            array = new Type(value);\n    }\n    return array;\n}\n\nclass CachedToken {\n    constructor() {\n        this.start = -1;\n        this.value = -1;\n        this.end = -1;\n        this.extended = -1;\n        this.lookAhead = 0;\n        this.mask = 0;\n        this.context = 0;\n    }\n}\nconst nullToken = new CachedToken;\n/**\n[Tokenizers](#lr.ExternalTokenizer) interact with the input\nthrough this interface. It presents the input as a stream of\ncharacters, tracking lookahead and hiding the complexity of\n[ranges](#common.Parser.parse^ranges) from tokenizer code.\n*/\nclass InputStream {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    @internal\n    */\n    input, \n    /**\n    @internal\n    */\n    ranges) {\n        this.input = input;\n        this.ranges = ranges;\n        /**\n        @internal\n        */\n        this.chunk = \"\";\n        /**\n        @internal\n        */\n        this.chunkOff = 0;\n        /**\n        Backup chunk\n        */\n        this.chunk2 = \"\";\n        this.chunk2Pos = 0;\n        /**\n        The character code of the next code unit in the input, or -1\n        when the stream is at the end of the input.\n        */\n        this.next = -1;\n        /**\n        @internal\n        */\n        this.token = nullToken;\n        this.rangeIndex = 0;\n        this.pos = this.chunkPos = ranges[0].from;\n        this.range = ranges[0];\n        this.end = ranges[ranges.length - 1].to;\n        this.readNext();\n    }\n    /**\n    @internal\n    */\n    resolveOffset(offset, assoc) {\n        let range = this.range, index = this.rangeIndex;\n        let pos = this.pos + offset;\n        while (pos < range.from) {\n            if (!index)\n                return null;\n            let next = this.ranges[--index];\n            pos -= range.from - next.to;\n            range = next;\n        }\n        while (assoc < 0 ? pos > range.to : pos >= range.to) {\n            if (index == this.ranges.length - 1)\n                return null;\n            let next = this.ranges[++index];\n            pos += next.from - range.to;\n            range = next;\n        }\n        return pos;\n    }\n    /**\n    @internal\n    */\n    clipPos(pos) {\n        if (pos >= this.range.from && pos < this.range.to)\n            return pos;\n        for (let range of this.ranges)\n            if (range.to > pos)\n                return Math.max(pos, range.from);\n        return this.end;\n    }\n    /**\n    Look at a code unit near the stream position. `.peek(0)` equals\n    `.next`, `.peek(-1)` gives you the previous character, and so\n    on.\n    \n    Note that looking around during tokenizing creates dependencies\n    on potentially far-away content, which may reduce the\n    effectiveness incremental parsingwhen looking forwardor even\n    cause invalid reparses when looking backward more than 25 code\n    units, since the library does not track lookbehind.\n    */\n    peek(offset) {\n        let idx = this.chunkOff + offset, pos, result;\n        if (idx >= 0 && idx < this.chunk.length) {\n            pos = this.pos + offset;\n            result = this.chunk.charCodeAt(idx);\n        }\n        else {\n            let resolved = this.resolveOffset(offset, 1);\n            if (resolved == null)\n                return -1;\n            pos = resolved;\n            if (pos >= this.chunk2Pos && pos < this.chunk2Pos + this.chunk2.length) {\n                result = this.chunk2.charCodeAt(pos - this.chunk2Pos);\n            }\n            else {\n                let i = this.rangeIndex, range = this.range;\n                while (range.to <= pos)\n                    range = this.ranges[++i];\n                this.chunk2 = this.input.chunk(this.chunk2Pos = pos);\n                if (pos + this.chunk2.length > range.to)\n                    this.chunk2 = this.chunk2.slice(0, range.to - pos);\n                result = this.chunk2.charCodeAt(0);\n            }\n        }\n        if (pos >= this.token.lookAhead)\n            this.token.lookAhead = pos + 1;\n        return result;\n    }\n    /**\n    Accept a token. By default, the end of the token is set to the\n    current stream position, but you can pass an offset (relative to\n    the stream position) to change that.\n    */\n    acceptToken(token, endOffset = 0) {\n        let end = endOffset ? this.resolveOffset(endOffset, -1) : this.pos;\n        if (end == null || end < this.token.start)\n            throw new RangeError(\"Token end out of bounds\");\n        this.token.value = token;\n        this.token.end = end;\n    }\n    /**\n    Accept a token ending at a specific given position.\n    */\n    acceptTokenTo(token, endPos) {\n        this.token.value = token;\n        this.token.end = endPos;\n    }\n    getChunk() {\n        if (this.pos >= this.chunk2Pos && this.pos < this.chunk2Pos + this.chunk2.length) {\n            let { chunk, chunkPos } = this;\n            this.chunk = this.chunk2;\n            this.chunkPos = this.chunk2Pos;\n            this.chunk2 = chunk;\n            this.chunk2Pos = chunkPos;\n            this.chunkOff = this.pos - this.chunkPos;\n        }\n        else {\n            this.chunk2 = this.chunk;\n            this.chunk2Pos = this.chunkPos;\n            let nextChunk = this.input.chunk(this.pos);\n            let end = this.pos + nextChunk.length;\n            this.chunk = end > this.range.to ? nextChunk.slice(0, this.range.to - this.pos) : nextChunk;\n            this.chunkPos = this.pos;\n            this.chunkOff = 0;\n        }\n    }\n    readNext() {\n        if (this.chunkOff >= this.chunk.length) {\n            this.getChunk();\n            if (this.chunkOff == this.chunk.length)\n                return this.next = -1;\n        }\n        return this.next = this.chunk.charCodeAt(this.chunkOff);\n    }\n    /**\n    Move the stream forward N (defaults to 1) code units. Returns\n    the new value of [`next`](#lr.InputStream.next).\n    */\n    advance(n = 1) {\n        this.chunkOff += n;\n        while (this.pos + n >= this.range.to) {\n            if (this.rangeIndex == this.ranges.length - 1)\n                return this.setDone();\n            n -= this.range.to - this.pos;\n            this.range = this.ranges[++this.rangeIndex];\n            this.pos = this.range.from;\n        }\n        this.pos += n;\n        if (this.pos >= this.token.lookAhead)\n            this.token.lookAhead = this.pos + 1;\n        return this.readNext();\n    }\n    setDone() {\n        this.pos = this.chunkPos = this.end;\n        this.range = this.ranges[this.rangeIndex = this.ranges.length - 1];\n        this.chunk = \"\";\n        return this.next = -1;\n    }\n    /**\n    @internal\n    */\n    reset(pos, token) {\n        if (token) {\n            this.token = token;\n            token.start = pos;\n            token.lookAhead = pos + 1;\n            token.value = token.extended = -1;\n        }\n        else {\n            this.token = nullToken;\n        }\n        if (this.pos != pos) {\n            this.pos = pos;\n            if (pos == this.end) {\n                this.setDone();\n                return this;\n            }\n            while (pos < this.range.from)\n                this.range = this.ranges[--this.rangeIndex];\n            while (pos >= this.range.to)\n                this.range = this.ranges[++this.rangeIndex];\n            if (pos >= this.chunkPos && pos < this.chunkPos + this.chunk.length) {\n                this.chunkOff = pos - this.chunkPos;\n            }\n            else {\n                this.chunk = \"\";\n                this.chunkOff = 0;\n            }\n            this.readNext();\n        }\n        return this;\n    }\n    /**\n    @internal\n    */\n    read(from, to) {\n        if (from >= this.chunkPos && to <= this.chunkPos + this.chunk.length)\n            return this.chunk.slice(from - this.chunkPos, to - this.chunkPos);\n        if (from >= this.chunk2Pos && to <= this.chunk2Pos + this.chunk2.length)\n            return this.chunk2.slice(from - this.chunk2Pos, to - this.chunk2Pos);\n        if (from >= this.range.from && to <= this.range.to)\n            return this.input.read(from, to);\n        let result = \"\";\n        for (let r of this.ranges) {\n            if (r.from >= to)\n                break;\n            if (r.to > from)\n                result += this.input.read(Math.max(r.from, from), Math.min(r.to, to));\n        }\n        return result;\n    }\n}\n/**\n@internal\n*/\nclass TokenGroup {\n    constructor(data, id) {\n        this.data = data;\n        this.id = id;\n    }\n    token(input, stack) {\n        let { parser } = stack.p;\n        readToken(this.data, input, stack, this.id, parser.data, parser.tokenPrecTable);\n    }\n}\nTokenGroup.prototype.contextual = TokenGroup.prototype.fallback = TokenGroup.prototype.extend = false;\n/**\n@hide\n*/\nclass LocalTokenGroup {\n    constructor(data, precTable, elseToken) {\n        this.precTable = precTable;\n        this.elseToken = elseToken;\n        this.data = typeof data == \"string\" ? decodeArray(data) : data;\n    }\n    token(input, stack) {\n        let start = input.pos, skipped = 0;\n        for (;;) {\n            let atEof = input.next < 0, nextPos = input.resolveOffset(1, 1);\n            readToken(this.data, input, stack, 0, this.data, this.precTable);\n            if (input.token.value > -1)\n                break;\n            if (this.elseToken == null)\n                return;\n            if (!atEof)\n                skipped++;\n            if (nextPos == null)\n                break;\n            input.reset(nextPos, input.token);\n        }\n        if (skipped) {\n            input.reset(start, input.token);\n            input.acceptToken(this.elseToken, skipped);\n        }\n    }\n}\nLocalTokenGroup.prototype.contextual = TokenGroup.prototype.fallback = TokenGroup.prototype.extend = false;\n/**\n`@external tokens` declarations in the grammar should resolve to\nan instance of this class.\n*/\nclass ExternalTokenizer {\n    /**\n    Create a tokenizer. The first argument is the function that,\n    given an input stream, scans for the types of tokens it\n    recognizes at the stream's position, and calls\n    [`acceptToken`](#lr.InputStream.acceptToken) when it finds\n    one.\n    */\n    constructor(\n    /**\n    @internal\n    */\n    token, options = {}) {\n        this.token = token;\n        this.contextual = !!options.contextual;\n        this.fallback = !!options.fallback;\n        this.extend = !!options.extend;\n    }\n}\n// Tokenizer data is stored a big uint16 array containing, for each\n// state:\n//\n//  - A group bitmask, indicating what token groups are reachable from\n//    this state, so that paths that can only lead to tokens not in\n//    any of the current groups can be cut off early.\n//\n//  - The position of the end of the state's sequence of accepting\n//    tokens\n//\n//  - The number of outgoing edges for the state\n//\n//  - The accepting tokens, as (token id, group mask) pairs\n//\n//  - The outgoing edges, as (start character, end character, state\n//    index) triples, with end character being exclusive\n//\n// This function interprets that data, running through a stream as\n// long as new states with the a matching group mask can be reached,\n// and updating `input.token` when it matches a token.\nfunction readToken(data, input, stack, group, precTable, precOffset) {\n    let state = 0, groupMask = 1 << group, { dialect } = stack.p.parser;\n    scan: for (;;) {\n        if ((groupMask & data[state]) == 0)\n            break;\n        let accEnd = data[state + 1];\n        // Check whether this state can lead to a token in the current group\n        // Accept tokens in this state, possibly overwriting\n        // lower-precedence / shorter tokens\n        for (let i = state + 3; i < accEnd; i += 2)\n            if ((data[i + 1] & groupMask) > 0) {\n                let term = data[i];\n                if (dialect.allows(term) &&\n                    (input.token.value == -1 || input.token.value == term ||\n                        overrides(term, input.token.value, precTable, precOffset))) {\n                    input.acceptToken(term);\n                    break;\n                }\n            }\n        let next = input.next, low = 0, high = data[state + 2];\n        // Special case for EOF\n        if (input.next < 0 && high > low && data[accEnd + high * 3 - 3] == 65535 /* Seq.End */) {\n            state = data[accEnd + high * 3 - 1];\n            continue scan;\n        }\n        // Do a binary search on the state's edges\n        for (; low < high;) {\n            let mid = (low + high) >> 1;\n            let index = accEnd + mid + (mid << 1);\n            let from = data[index], to = data[index + 1] || 0x10000;\n            if (next < from)\n                high = mid;\n            else if (next >= to)\n                low = mid + 1;\n            else {\n                state = data[index + 2];\n                input.advance();\n                continue scan;\n            }\n        }\n        break;\n    }\n}\nfunction findOffset(data, start, term) {\n    for (let i = start, next; (next = data[i]) != 65535 /* Seq.End */; i++)\n        if (next == term)\n            return i - start;\n    return -1;\n}\nfunction overrides(token, prev, tableData, tableOffset) {\n    let iPrev = findOffset(tableData, tableOffset, prev);\n    return iPrev < 0 || findOffset(tableData, tableOffset, token) < iPrev;\n}\n\n// Environment variable used to control console output\nconst verbose = typeof process != \"undefined\" && process.env && /\\bparse\\b/.test(process.env.LOG);\nlet stackIDs = null;\nfunction cutAt(tree, pos, side) {\n    let cursor = tree.cursor(IterMode.IncludeAnonymous);\n    cursor.moveTo(pos);\n    for (;;) {\n        if (!(side < 0 ? cursor.childBefore(pos) : cursor.childAfter(pos)))\n            for (;;) {\n                if ((side < 0 ? cursor.to < pos : cursor.from > pos) && !cursor.type.isError)\n                    return side < 0 ? Math.max(0, Math.min(cursor.to - 1, pos - 25 /* Lookahead.Margin */))\n                        : Math.min(tree.length, Math.max(cursor.from + 1, pos + 25 /* Lookahead.Margin */));\n                if (side < 0 ? cursor.prevSibling() : cursor.nextSibling())\n                    break;\n                if (!cursor.parent())\n                    return side < 0 ? 0 : tree.length;\n            }\n    }\n}\nclass FragmentCursor {\n    constructor(fragments, nodeSet) {\n        this.fragments = fragments;\n        this.nodeSet = nodeSet;\n        this.i = 0;\n        this.fragment = null;\n        this.safeFrom = -1;\n        this.safeTo = -1;\n        this.trees = [];\n        this.start = [];\n        this.index = [];\n        this.nextFragment();\n    }\n    nextFragment() {\n        let fr = this.fragment = this.i == this.fragments.length ? null : this.fragments[this.i++];\n        if (fr) {\n            this.safeFrom = fr.openStart ? cutAt(fr.tree, fr.from + fr.offset, 1) - fr.offset : fr.from;\n            this.safeTo = fr.openEnd ? cutAt(fr.tree, fr.to + fr.offset, -1) - fr.offset : fr.to;\n            while (this.trees.length) {\n                this.trees.pop();\n                this.start.pop();\n                this.index.pop();\n            }\n            this.trees.push(fr.tree);\n            this.start.push(-fr.offset);\n            this.index.push(0);\n            this.nextStart = this.safeFrom;\n        }\n        else {\n            this.nextStart = 1e9;\n        }\n    }\n    // `pos` must be >= any previously given `pos` for this cursor\n    nodeAt(pos) {\n        if (pos < this.nextStart)\n            return null;\n        while (this.fragment && this.safeTo <= pos)\n            this.nextFragment();\n        if (!this.fragment)\n            return null;\n        for (;;) {\n            let last = this.trees.length - 1;\n            if (last < 0) { // End of tree\n                this.nextFragment();\n                return null;\n            }\n            let top = this.trees[last], index = this.index[last];\n            if (index == top.children.length) {\n                this.trees.pop();\n                this.start.pop();\n                this.index.pop();\n                continue;\n            }\n            let next = top.children[index];\n            let start = this.start[last] + top.positions[index];\n            if (start > pos) {\n                this.nextStart = start;\n                return null;\n            }\n            if (next instanceof Tree) {\n                if (start == pos) {\n                    if (start < this.safeFrom)\n                        return null;\n                    let end = start + next.length;\n                    if (end <= this.safeTo) {\n                        let lookAhead = next.prop(NodeProp.lookAhead);\n                        if (!lookAhead || end + lookAhead < this.fragment.to)\n                            return next;\n                    }\n                }\n                this.index[last]++;\n                if (start + next.length >= Math.max(this.safeFrom, pos)) { // Enter this node\n                    this.trees.push(next);\n                    this.start.push(start);\n                    this.index.push(0);\n                }\n            }\n            else {\n                this.index[last]++;\n                this.nextStart = start + next.length;\n            }\n        }\n    }\n}\nclass TokenCache {\n    constructor(parser, stream) {\n        this.stream = stream;\n        this.tokens = [];\n        this.mainToken = null;\n        this.actions = [];\n        this.tokens = parser.tokenizers.map(_ => new CachedToken);\n    }\n    getActions(stack) {\n        let actionIndex = 0;\n        let main = null;\n        let { parser } = stack.p, { tokenizers } = parser;\n        let mask = parser.stateSlot(stack.state, 3 /* ParseState.TokenizerMask */);\n        let context = stack.curContext ? stack.curContext.hash : 0;\n        let lookAhead = 0;\n        for (let i = 0; i < tokenizers.length; i++) {\n            if (((1 << i) & mask) == 0)\n                continue;\n            let tokenizer = tokenizers[i], token = this.tokens[i];\n            if (main && !tokenizer.fallback)\n                continue;\n            if (tokenizer.contextual || token.start != stack.pos || token.mask != mask || token.context != context) {\n                this.updateCachedToken(token, tokenizer, stack);\n                token.mask = mask;\n                token.context = context;\n            }\n            if (token.lookAhead > token.end + 25 /* Lookahead.Margin */)\n                lookAhead = Math.max(token.lookAhead, lookAhead);\n            if (token.value != 0 /* Term.Err */) {\n                let startIndex = actionIndex;\n                if (token.extended > -1)\n                    actionIndex = this.addActions(stack, token.extended, token.end, actionIndex);\n                actionIndex = this.addActions(stack, token.value, token.end, actionIndex);\n                if (!tokenizer.extend) {\n                    main = token;\n                    if (actionIndex > startIndex)\n                        break;\n                }\n            }\n        }\n        while (this.actions.length > actionIndex)\n            this.actions.pop();\n        if (lookAhead)\n            stack.setLookAhead(lookAhead);\n        if (!main && stack.pos == this.stream.end) {\n            main = new CachedToken;\n            main.value = stack.p.parser.eofTerm;\n            main.start = main.end = stack.pos;\n            actionIndex = this.addActions(stack, main.value, main.end, actionIndex);\n        }\n        this.mainToken = main;\n        return this.actions;\n    }\n    getMainToken(stack) {\n        if (this.mainToken)\n            return this.mainToken;\n        let main = new CachedToken, { pos, p } = stack;\n        main.start = pos;\n        main.end = Math.min(pos + 1, p.stream.end);\n        main.value = pos == p.stream.end ? p.parser.eofTerm : 0 /* Term.Err */;\n        return main;\n    }\n    updateCachedToken(token, tokenizer, stack) {\n        let start = this.stream.clipPos(stack.pos);\n        tokenizer.token(this.stream.reset(start, token), stack);\n        if (token.value > -1) {\n            let { parser } = stack.p;\n            for (let i = 0; i < parser.specialized.length; i++)\n                if (parser.specialized[i] == token.value) {\n                    let result = parser.specializers[i](this.stream.read(token.start, token.end), stack);\n                    if (result >= 0 && stack.p.parser.dialect.allows(result >> 1)) {\n                        if ((result & 1) == 0 /* Specialize.Specialize */)\n                            token.value = result >> 1;\n                        else\n                            token.extended = result >> 1;\n                        break;\n                    }\n                }\n        }\n        else {\n            token.value = 0 /* Term.Err */;\n            token.end = this.stream.clipPos(start + 1);\n        }\n    }\n    putAction(action, token, end, index) {\n        // Don't add duplicate actions\n        for (let i = 0; i < index; i += 3)\n            if (this.actions[i] == action)\n                return index;\n        this.actions[index++] = action;\n        this.actions[index++] = token;\n        this.actions[index++] = end;\n        return index;\n    }\n    addActions(stack, token, end, index) {\n        let { state } = stack, { parser } = stack.p, { data } = parser;\n        for (let set = 0; set < 2; set++) {\n            for (let i = parser.stateSlot(state, set ? 2 /* ParseState.Skip */ : 1 /* ParseState.Actions */);; i += 3) {\n                if (data[i] == 65535 /* Seq.End */) {\n                    if (data[i + 1] == 1 /* Seq.Next */) {\n                        i = pair(data, i + 2);\n                    }\n                    else {\n                        if (index == 0 && data[i + 1] == 2 /* Seq.Other */)\n                            index = this.putAction(pair(data, i + 2), token, end, index);\n                        break;\n                    }\n                }\n                if (data[i] == token)\n                    index = this.putAction(pair(data, i + 1), token, end, index);\n            }\n        }\n        return index;\n    }\n}\nclass Parse {\n    constructor(parser, input, fragments, ranges) {\n        this.parser = parser;\n        this.input = input;\n        this.ranges = ranges;\n        this.recovering = 0;\n        this.nextStackID = 0x2654; // , , , , , , , , , , , , , \n        this.minStackPos = 0;\n        this.reused = [];\n        this.stoppedAt = null;\n        this.lastBigReductionStart = -1;\n        this.lastBigReductionSize = 0;\n        this.bigReductionCount = 0;\n        this.stream = new InputStream(input, ranges);\n        this.tokens = new TokenCache(parser, this.stream);\n        this.topTerm = parser.top[1];\n        let { from } = ranges[0];\n        this.stacks = [Stack.start(this, parser.top[0], from)];\n        this.fragments = fragments.length && this.stream.end - from > parser.bufferLength * 4\n            ? new FragmentCursor(fragments, parser.nodeSet) : null;\n    }\n    get parsedPos() {\n        return this.minStackPos;\n    }\n    // Move the parser forward. This will process all parse stacks at\n    // `this.pos` and try to advance them to a further position. If no\n    // stack for such a position is found, it'll start error-recovery.\n    //\n    // When the parse is finished, this will return a syntax tree. When\n    // not, it returns `null`.\n    advance() {\n        let stacks = this.stacks, pos = this.minStackPos;\n        // This will hold stacks beyond `pos`.\n        let newStacks = this.stacks = [];\n        let stopped, stoppedTokens;\n        // If a large amount of reductions happened with the same start\n        // position, force the stack out of that production in order to\n        // avoid creating a tree too deep to recurse through.\n        // (This is an ugly kludge, because unfortunately there is no\n        // straightforward, cheap way to check for this happening, due to\n        // the history of reductions only being available in an\n        // expensive-to-access format in the stack buffers.)\n        if (this.bigReductionCount > 300 /* Rec.MaxLeftAssociativeReductionCount */ && stacks.length == 1) {\n            let [s] = stacks;\n            while (s.forceReduce() && s.stack.length && s.stack[s.stack.length - 2] >= this.lastBigReductionStart) { }\n            this.bigReductionCount = this.lastBigReductionSize = 0;\n        }\n        // Keep advancing any stacks at `pos` until they either move\n        // forward or can't be advanced. Gather stacks that can't be\n        // advanced further in `stopped`.\n        for (let i = 0; i < stacks.length; i++) {\n            let stack = stacks[i];\n            for (;;) {\n                this.tokens.mainToken = null;\n                if (stack.pos > pos) {\n                    newStacks.push(stack);\n                }\n                else if (this.advanceStack(stack, newStacks, stacks)) {\n                    continue;\n                }\n                else {\n                    if (!stopped) {\n                        stopped = [];\n                        stoppedTokens = [];\n                    }\n                    stopped.push(stack);\n                    let tok = this.tokens.getMainToken(stack);\n                    stoppedTokens.push(tok.value, tok.end);\n                }\n                break;\n            }\n        }\n        if (!newStacks.length) {\n            let finished = stopped && findFinished(stopped);\n            if (finished) {\n                if (verbose)\n                    console.log(\"Finish with \" + this.stackID(finished));\n                return this.stackToTree(finished);\n            }\n            if (this.parser.strict) {\n                if (verbose && stopped)\n                    console.log(\"Stuck with token \" + (this.tokens.mainToken ? this.parser.getName(this.tokens.mainToken.value) : \"none\"));\n                throw new SyntaxError(\"No parse at \" + pos);\n            }\n            if (!this.recovering)\n                this.recovering = 5 /* Rec.Distance */;\n        }\n        if (this.recovering && stopped) {\n            let finished = this.stoppedAt != null && stopped[0].pos > this.stoppedAt ? stopped[0]\n                : this.runRecovery(stopped, stoppedTokens, newStacks);\n            if (finished) {\n                if (verbose)\n                    console.log(\"Force-finish \" + this.stackID(finished));\n                return this.stackToTree(finished.forceAll());\n            }\n        }\n        if (this.recovering) {\n            let maxRemaining = this.recovering == 1 ? 1 : this.recovering * 3 /* Rec.MaxRemainingPerStep */;\n            if (newStacks.length > maxRemaining) {\n                newStacks.sort((a, b) => b.score - a.score);\n                while (newStacks.length > maxRemaining)\n                    newStacks.pop();\n            }\n            if (newStacks.some(s => s.reducePos > pos))\n                this.recovering--;\n        }\n        else if (newStacks.length > 1) {\n            // Prune stacks that are in the same state, or that have been\n            // running without splitting for a while, to avoid getting stuck\n            // with multiple successful stacks running endlessly on.\n            outer: for (let i = 0; i < newStacks.length - 1; i++) {\n                let stack = newStacks[i];\n                for (let j = i + 1; j < newStacks.length; j++) {\n                    let other = newStacks[j];\n                    if (stack.sameState(other) ||\n                        stack.buffer.length > 500 /* Rec.MinBufferLengthPrune */ && other.buffer.length > 500 /* Rec.MinBufferLengthPrune */) {\n                        if (((stack.score - other.score) || (stack.buffer.length - other.buffer.length)) > 0) {\n                            newStacks.splice(j--, 1);\n                        }\n                        else {\n                            newStacks.splice(i--, 1);\n                            continue outer;\n                        }\n                    }\n                }\n            }\n            if (newStacks.length > 12 /* Rec.MaxStackCount */)\n                newStacks.splice(12 /* Rec.MaxStackCount */, newStacks.length - 12 /* Rec.MaxStackCount */);\n        }\n        this.minStackPos = newStacks[0].pos;\n        for (let i = 1; i < newStacks.length; i++)\n            if (newStacks[i].pos < this.minStackPos)\n                this.minStackPos = newStacks[i].pos;\n        return null;\n    }\n    stopAt(pos) {\n        if (this.stoppedAt != null && this.stoppedAt < pos)\n            throw new RangeError(\"Can't move stoppedAt forward\");\n        this.stoppedAt = pos;\n    }\n    // Returns an updated version of the given stack, or null if the\n    // stack can't advance normally. When `split` and `stacks` are\n    // given, stacks split off by ambiguous operations will be pushed to\n    // `split`, or added to `stacks` if they move `pos` forward.\n    advanceStack(stack, stacks, split) {\n        let start = stack.pos, { parser } = this;\n        let base = verbose ? this.stackID(stack) + \" -> \" : \"\";\n        if (this.stoppedAt != null && start > this.stoppedAt)\n            return stack.forceReduce() ? stack : null;\n        if (this.fragments) {\n            let strictCx = stack.curContext && stack.curContext.tracker.strict, cxHash = strictCx ? stack.curContext.hash : 0;\n            for (let cached = this.fragments.nodeAt(start); cached;) {\n                let match = this.parser.nodeSet.types[cached.type.id] == cached.type ? parser.getGoto(stack.state, cached.type.id) : -1;\n                if (match > -1 && cached.length && (!strictCx || (cached.prop(NodeProp.contextHash) || 0) == cxHash)) {\n                    stack.useNode(cached, match);\n                    if (verbose)\n                        console.log(base + this.stackID(stack) + ` (via reuse of ${parser.getName(cached.type.id)})`);\n                    return true;\n                }\n                if (!(cached instanceof Tree) || cached.children.length == 0 || cached.positions[0] > 0)\n                    break;\n                let inner = cached.children[0];\n                if (inner instanceof Tree && cached.positions[0] == 0)\n                    cached = inner;\n                else\n                    break;\n            }\n        }\n        let defaultReduce = parser.stateSlot(stack.state, 4 /* ParseState.DefaultReduce */);\n        if (defaultReduce > 0) {\n            stack.reduce(defaultReduce);\n            if (verbose)\n                console.log(base + this.stackID(stack) + ` (via always-reduce ${parser.getName(defaultReduce & 65535 /* Action.ValueMask */)})`);\n            return true;\n        }\n        if (stack.stack.length >= 8400 /* Rec.CutDepth */) {\n            while (stack.stack.length > 6000 /* Rec.CutTo */ && stack.forceReduce()) { }\n        }\n        let actions = this.tokens.getActions(stack);\n        for (let i = 0; i < actions.length;) {\n            let action = actions[i++], term = actions[i++], end = actions[i++];\n            let last = i == actions.length || !split;\n            let localStack = last ? stack : stack.split();\n            let main = this.tokens.mainToken;\n            localStack.apply(action, term, main ? main.start : localStack.pos, end);\n            if (verbose)\n                console.log(base + this.stackID(localStack) + ` (via ${(action & 65536 /* Action.ReduceFlag */) == 0 ? \"shift\"\n                    : `reduce of ${parser.getName(action & 65535 /* Action.ValueMask */)}`} for ${parser.getName(term)} @ ${start}${localStack == stack ? \"\" : \", split\"})`);\n            if (last)\n                return true;\n            else if (localStack.pos > start)\n                stacks.push(localStack);\n            else\n                split.push(localStack);\n        }\n        return false;\n    }\n    // Advance a given stack forward as far as it will go. Returns the\n    // (possibly updated) stack if it got stuck, or null if it moved\n    // forward and was given to `pushStackDedup`.\n    advanceFully(stack, newStacks) {\n        let pos = stack.pos;\n        for (;;) {\n            if (!this.advanceStack(stack, null, null))\n                return false;\n            if (stack.pos > pos) {\n                pushStackDedup(stack, newStacks);\n                return true;\n            }\n        }\n    }\n    runRecovery(stacks, tokens, newStacks) {\n        let finished = null, restarted = false;\n        for (let i = 0; i < stacks.length; i++) {\n            let stack = stacks[i], token = tokens[i << 1], tokenEnd = tokens[(i << 1) + 1];\n            let base = verbose ? this.stackID(stack) + \" -> \" : \"\";\n            if (stack.deadEnd) {\n                if (restarted)\n                    continue;\n                restarted = true;\n                stack.restart();\n                if (verbose)\n                    console.log(base + this.stackID(stack) + \" (restarted)\");\n                let done = this.advanceFully(stack, newStacks);\n                if (done)\n                    continue;\n            }\n            let force = stack.split(), forceBase = base;\n            for (let j = 0; force.forceReduce() && j < 10 /* Rec.ForceReduceLimit */; j++) {\n                if (verbose)\n                    console.log(forceBase + this.stackID(force) + \" (via force-reduce)\");\n                let done = this.advanceFully(force, newStacks);\n                if (done)\n                    break;\n                if (verbose)\n                    forceBase = this.stackID(force) + \" -> \";\n            }\n            for (let insert of stack.recoverByInsert(token)) {\n                if (verbose)\n                    console.log(base + this.stackID(insert) + \" (via recover-insert)\");\n                this.advanceFully(insert, newStacks);\n            }\n            if (this.stream.end > stack.pos) {\n                if (tokenEnd == stack.pos) {\n                    tokenEnd++;\n                    token = 0 /* Term.Err */;\n                }\n                stack.recoverByDelete(token, tokenEnd);\n                if (verbose)\n                    console.log(base + this.stackID(stack) + ` (via recover-delete ${this.parser.getName(token)})`);\n                pushStackDedup(stack, newStacks);\n            }\n            else if (!finished || finished.score < stack.score) {\n                finished = stack;\n            }\n        }\n        return finished;\n    }\n    // Convert the stack's buffer to a syntax tree.\n    stackToTree(stack) {\n        stack.close();\n        return Tree.build({ buffer: StackBufferCursor.create(stack),\n            nodeSet: this.parser.nodeSet,\n            topID: this.topTerm,\n            maxBufferLength: this.parser.bufferLength,\n            reused: this.reused,\n            start: this.ranges[0].from,\n            length: stack.pos - this.ranges[0].from,\n            minRepeatType: this.parser.minRepeatTerm });\n    }\n    stackID(stack) {\n        let id = (stackIDs || (stackIDs = new WeakMap)).get(stack);\n        if (!id)\n            stackIDs.set(stack, id = String.fromCodePoint(this.nextStackID++));\n        return id + stack;\n    }\n}\nfunction pushStackDedup(stack, newStacks) {\n    for (let i = 0; i < newStacks.length; i++) {\n        let other = newStacks[i];\n        if (other.pos == stack.pos && other.sameState(stack)) {\n            if (newStacks[i].score < stack.score)\n                newStacks[i] = stack;\n            return;\n        }\n    }\n    newStacks.push(stack);\n}\nclass Dialect {\n    constructor(source, flags, disabled) {\n        this.source = source;\n        this.flags = flags;\n        this.disabled = disabled;\n    }\n    allows(term) { return !this.disabled || this.disabled[term] == 0; }\n}\nconst id = x => x;\n/**\nContext trackers are used to track stateful context (such as\nindentation in the Python grammar, or parent elements in the XML\ngrammar) needed by external tokenizers. You declare them in a\ngrammar file as `@context exportName from \"module\"`.\n\nContext values should be immutable, and can be updated (replaced)\non shift or reduce actions.\n\nThe export used in a `@context` declaration should be of this\ntype.\n*/\nclass ContextTracker {\n    /**\n    Define a context tracker.\n    */\n    constructor(spec) {\n        this.start = spec.start;\n        this.shift = spec.shift || id;\n        this.reduce = spec.reduce || id;\n        this.reuse = spec.reuse || id;\n        this.hash = spec.hash || (() => 0);\n        this.strict = spec.strict !== false;\n    }\n}\n/**\nHolds the parse tables for a given grammar, as generated by\n`lezer-generator`, and provides [methods](#common.Parser) to parse\ncontent with.\n*/\nclass LRParser extends Parser {\n    /**\n    @internal\n    */\n    constructor(spec) {\n        super();\n        /**\n        @internal\n        */\n        this.wrappers = [];\n        if (spec.version != 14 /* File.Version */)\n            throw new RangeError(`Parser version (${spec.version}) doesn't match runtime version (${14 /* File.Version */})`);\n        let nodeNames = spec.nodeNames.split(\" \");\n        this.minRepeatTerm = nodeNames.length;\n        for (let i = 0; i < spec.repeatNodeCount; i++)\n            nodeNames.push(\"\");\n        let topTerms = Object.keys(spec.topRules).map(r => spec.topRules[r][1]);\n        let nodeProps = [];\n        for (let i = 0; i < nodeNames.length; i++)\n            nodeProps.push([]);\n        function setProp(nodeID, prop, value) {\n            nodeProps[nodeID].push([prop, prop.deserialize(String(value))]);\n        }\n        if (spec.nodeProps)\n            for (let propSpec of spec.nodeProps) {\n                let prop = propSpec[0];\n                if (typeof prop == \"string\")\n                    prop = NodeProp[prop];\n                for (let i = 1; i < propSpec.length;) {\n                    let next = propSpec[i++];\n                    if (next >= 0) {\n                        setProp(next, prop, propSpec[i++]);\n                    }\n                    else {\n                        let value = propSpec[i + -next];\n                        for (let j = -next; j > 0; j--)\n                            setProp(propSpec[i++], prop, value);\n                        i++;\n                    }\n                }\n            }\n        this.nodeSet = new NodeSet(nodeNames.map((name, i) => NodeType.define({\n            name: i >= this.minRepeatTerm ? undefined : name,\n            id: i,\n            props: nodeProps[i],\n            top: topTerms.indexOf(i) > -1,\n            error: i == 0,\n            skipped: spec.skippedNodes && spec.skippedNodes.indexOf(i) > -1\n        })));\n        if (spec.propSources)\n            this.nodeSet = this.nodeSet.extend(...spec.propSources);\n        this.strict = false;\n        this.bufferLength = DefaultBufferLength;\n        let tokenArray = decodeArray(spec.tokenData);\n        this.context = spec.context;\n        this.specializerSpecs = spec.specialized || [];\n        this.specialized = new Uint16Array(this.specializerSpecs.length);\n        for (let i = 0; i < this.specializerSpecs.length; i++)\n            this.specialized[i] = this.specializerSpecs[i].term;\n        this.specializers = this.specializerSpecs.map(getSpecializer);\n        this.states = decodeArray(spec.states, Uint32Array);\n        this.data = decodeArray(spec.stateData);\n        this.goto = decodeArray(spec.goto);\n        this.maxTerm = spec.maxTerm;\n        this.tokenizers = spec.tokenizers.map(value => typeof value == \"number\" ? new TokenGroup(tokenArray, value) : value);\n        this.topRules = spec.topRules;\n        this.dialects = spec.dialects || {};\n        this.dynamicPrecedences = spec.dynamicPrecedences || null;\n        this.tokenPrecTable = spec.tokenPrec;\n        this.termNames = spec.termNames || null;\n        this.maxNode = this.nodeSet.types.length - 1;\n        this.dialect = this.parseDialect();\n        this.top = this.topRules[Object.keys(this.topRules)[0]];\n    }\n    createParse(input, fragments, ranges) {\n        let parse = new Parse(this, input, fragments, ranges);\n        for (let w of this.wrappers)\n            parse = w(parse, input, fragments, ranges);\n        return parse;\n    }\n    /**\n    Get a goto table entry @internal\n    */\n    getGoto(state, term, loose = false) {\n        let table = this.goto;\n        if (term >= table[0])\n            return -1;\n        for (let pos = table[term + 1];;) {\n            let groupTag = table[pos++], last = groupTag & 1;\n            let target = table[pos++];\n            if (last && loose)\n                return target;\n            for (let end = pos + (groupTag >> 1); pos < end; pos++)\n                if (table[pos] == state)\n                    return target;\n            if (last)\n                return -1;\n        }\n    }\n    /**\n    Check if this state has an action for a given terminal @internal\n    */\n    hasAction(state, terminal) {\n        let data = this.data;\n        for (let set = 0; set < 2; set++) {\n            for (let i = this.stateSlot(state, set ? 2 /* ParseState.Skip */ : 1 /* ParseState.Actions */), next;; i += 3) {\n                if ((next = data[i]) == 65535 /* Seq.End */) {\n                    if (data[i + 1] == 1 /* Seq.Next */)\n                        next = data[i = pair(data, i + 2)];\n                    else if (data[i + 1] == 2 /* Seq.Other */)\n                        return pair(data, i + 2);\n                    else\n                        break;\n                }\n                if (next == terminal || next == 0 /* Term.Err */)\n                    return pair(data, i + 1);\n            }\n        }\n        return 0;\n    }\n    /**\n    @internal\n    */\n    stateSlot(state, slot) {\n        return this.states[(state * 6 /* ParseState.Size */) + slot];\n    }\n    /**\n    @internal\n    */\n    stateFlag(state, flag) {\n        return (this.stateSlot(state, 0 /* ParseState.Flags */) & flag) > 0;\n    }\n    /**\n    @internal\n    */\n    validAction(state, action) {\n        return !!this.allActions(state, a => a == action ? true : null);\n    }\n    /**\n    @internal\n    */\n    allActions(state, action) {\n        let deflt = this.stateSlot(state, 4 /* ParseState.DefaultReduce */);\n        let result = deflt ? action(deflt) : undefined;\n        for (let i = this.stateSlot(state, 1 /* ParseState.Actions */); result == null; i += 3) {\n            if (this.data[i] == 65535 /* Seq.End */) {\n                if (this.data[i + 1] == 1 /* Seq.Next */)\n                    i = pair(this.data, i + 2);\n                else\n                    break;\n            }\n            result = action(pair(this.data, i + 1));\n        }\n        return result;\n    }\n    /**\n    Get the states that can follow this one through shift actions or\n    goto jumps. @internal\n    */\n    nextStates(state) {\n        let result = [];\n        for (let i = this.stateSlot(state, 1 /* ParseState.Actions */);; i += 3) {\n            if (this.data[i] == 65535 /* Seq.End */) {\n                if (this.data[i + 1] == 1 /* Seq.Next */)\n                    i = pair(this.data, i + 2);\n                else\n                    break;\n            }\n            if ((this.data[i + 2] & (65536 /* Action.ReduceFlag */ >> 16)) == 0) {\n                let value = this.data[i + 1];\n                if (!result.some((v, i) => (i & 1) && v == value))\n                    result.push(this.data[i], value);\n            }\n        }\n        return result;\n    }\n    /**\n    Configure the parser. Returns a new parser instance that has the\n    given settings modified. Settings not provided in `config` are\n    kept from the original parser.\n    */\n    configure(config) {\n        // Hideous reflection-based kludge to make it easy to create a\n        // slightly modified copy of a parser.\n        let copy = Object.assign(Object.create(LRParser.prototype), this);\n        if (config.props)\n            copy.nodeSet = this.nodeSet.extend(...config.props);\n        if (config.top) {\n            let info = this.topRules[config.top];\n            if (!info)\n                throw new RangeError(`Invalid top rule name ${config.top}`);\n            copy.top = info;\n        }\n        if (config.tokenizers)\n            copy.tokenizers = this.tokenizers.map(t => {\n                let found = config.tokenizers.find(r => r.from == t);\n                return found ? found.to : t;\n            });\n        if (config.specializers) {\n            copy.specializers = this.specializers.slice();\n            copy.specializerSpecs = this.specializerSpecs.map((s, i) => {\n                let found = config.specializers.find(r => r.from == s.external);\n                if (!found)\n                    return s;\n                let spec = Object.assign(Object.assign({}, s), { external: found.to });\n                copy.specializers[i] = getSpecializer(spec);\n                return spec;\n            });\n        }\n        if (config.contextTracker)\n            copy.context = config.contextTracker;\n        if (config.dialect)\n            copy.dialect = this.parseDialect(config.dialect);\n        if (config.strict != null)\n            copy.strict = config.strict;\n        if (config.wrap)\n            copy.wrappers = copy.wrappers.concat(config.wrap);\n        if (config.bufferLength != null)\n            copy.bufferLength = config.bufferLength;\n        return copy;\n    }\n    /**\n    Tells you whether any [parse wrappers](#lr.ParserConfig.wrap)\n    are registered for this parser.\n    */\n    hasWrappers() {\n        return this.wrappers.length > 0;\n    }\n    /**\n    Returns the name associated with a given term. This will only\n    work for all terms when the parser was generated with the\n    `--names` option. By default, only the names of tagged terms are\n    stored.\n    */\n    getName(term) {\n        return this.termNames ? this.termNames[term] : String(term <= this.maxNode && this.nodeSet.types[term].name || term);\n    }\n    /**\n    The eof term id is always allocated directly after the node\n    types. @internal\n    */\n    get eofTerm() { return this.maxNode + 1; }\n    /**\n    The type of top node produced by the parser.\n    */\n    get topNode() { return this.nodeSet.types[this.top[1]]; }\n    /**\n    @internal\n    */\n    dynamicPrecedence(term) {\n        let prec = this.dynamicPrecedences;\n        return prec == null ? 0 : prec[term] || 0;\n    }\n    /**\n    @internal\n    */\n    parseDialect(dialect) {\n        let values = Object.keys(this.dialects), flags = values.map(() => false);\n        if (dialect)\n            for (let part of dialect.split(\" \")) {\n                let id = values.indexOf(part);\n                if (id >= 0)\n                    flags[id] = true;\n            }\n        let disabled = null;\n        for (let i = 0; i < values.length; i++)\n            if (!flags[i]) {\n                for (let j = this.dialects[values[i]], id; (id = this.data[j++]) != 65535 /* Seq.End */;)\n                    (disabled || (disabled = new Uint8Array(this.maxTerm + 1)))[id] = 1;\n            }\n        return new Dialect(dialect, flags, disabled);\n    }\n    /**\n    Used by the output of the parser generator. Not available to\n    user code. @hide\n    */\n    static deserialize(spec) {\n        return new LRParser(spec);\n    }\n}\nfunction pair(data, off) { return data[off] | (data[off + 1] << 16); }\nfunction findFinished(stacks) {\n    let best = null;\n    for (let stack of stacks) {\n        let stopped = stack.p.stoppedAt;\n        if ((stack.pos == stack.p.stream.end || stopped != null && stack.pos > stopped) &&\n            stack.p.parser.stateFlag(stack.state, 2 /* StateFlag.Accepting */) &&\n            (!best || best.score < stack.score))\n            best = stack;\n    }\n    return best;\n}\nfunction getSpecializer(spec) {\n    if (spec.external) {\n        let mask = spec.extend ? 1 /* Specialize.Extend */ : 0 /* Specialize.Specialize */;\n        return (value, stack) => (spec.external(value, stack) << 1) | mask;\n    }\n    return spec.get;\n}\n\nexport { ContextTracker, ExternalTokenizer, InputStream, LRParser, LocalTokenGroup, Stack };\n","import { ContextTracker, ExternalTokenizer, LRParser } from '@lezer/lr';\nimport { styleTags, tags } from '@lezer/highlight';\n\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst blockEnd = 63,\n  eof = 64,\n  DirectiveEnd = 1,\n  DocEnd = 2,\n  sequenceStartMark = 3,\n  sequenceContinueMark = 4,\n  explicitMapStartMark = 5,\n  explicitMapContinueMark = 6,\n  flowMapMark = 7,\n  mapStartMark = 65,\n  mapContinueMark = 66,\n  Literal = 8,\n  QuotedLiteral = 9,\n  Anchor = 10,\n  Alias = 11,\n  Tag = 12,\n  BlockLiteralContent = 13,\n  BracketL = 19,\n  FlowSequence = 20,\n  Colon = 29,\n  BraceL = 33,\n  FlowMapping = 34,\n  BlockLiteralHeader = 47;\n\nconst\n  type_Top = 0, // Top document level\n  type_Seq = 1, // Block sequence\n  type_Map = 2, // Block mapping\n  type_Flow = 3, // Inside flow content\n  type_Lit = 4; // Block literal with explicit indentation\n\nclass Context {\n  constructor(parent, depth, type) {\n    this.parent = parent;\n    this.depth = depth;\n    this.type = type;\n    this.hash = (parent ? parent.hash + parent.hash << 8 : 0) + depth + (depth << 4) + type;\n  }\n}\n\nContext.top = new Context(null, -1, type_Top);\n\nfunction findColumn(input, pos) {\n  for (let col = 0, p = pos - input.pos - 1;; p--, col++) {\n    let ch = input.peek(p);\n    if (isBreakSpace(ch) || ch == -1) return col\n  }\n}\n\nfunction isNonBreakSpace(ch) {\n  return ch == 32 || ch == 9\n}\n\nfunction isBreakSpace(ch) {\n  return ch == 10 || ch == 13\n}\n\nfunction isSpace(ch) {\n  return isNonBreakSpace(ch) || isBreakSpace(ch)\n}\n\nfunction isSep(ch) {\n  return ch < 0 || isSpace(ch)\n}\n\nconst indentation = new ContextTracker({\n  start: Context.top,\n  reduce(context, term) {\n    return context.type == type_Flow && (term == FlowSequence || term == FlowMapping) ? context.parent : context\n  },\n  shift(context, term, stack, input) {\n    if (term == sequenceStartMark)\n      return new Context(context, findColumn(input, input.pos), type_Seq)\n    if (term == mapStartMark || term == explicitMapStartMark)\n      return new Context(context, findColumn(input, input.pos), type_Map)\n    if (term == blockEnd)\n      return context.parent\n    if (term == BracketL || term == BraceL)\n      return new Context(context, 0, type_Flow)\n    if (term == BlockLiteralContent && context.type == type_Lit)\n      return context.parent\n    if (term == BlockLiteralHeader) {\n      let indent = /[1-9]/.exec(input.read(input.pos, stack.pos));\n      if (indent) return new Context(context, context.depth + (+indent[0]), type_Lit)\n    }\n    return context\n  },\n  hash(context) { return context.hash }\n});\n\nfunction three(input, ch, off = 0) {\n  return input.peek(off) == ch && input.peek(off + 1) == ch && input.peek(off + 2) == ch && isSep(input.peek(off + 3))\n}\n\nconst newlines = new ExternalTokenizer((input, stack) => {\n  if (input.next == -1 && stack.canShift(eof))\n    return input.acceptToken(eof)\n  let prev = input.peek(-1);\n  if ((isBreakSpace(prev) || prev < 0) && stack.context.type != type_Flow) {\n    if (three(input, 45 /* '-' */)) {\n      if (stack.canShift(blockEnd)) input.acceptToken(blockEnd);\n      else return input.acceptToken(DirectiveEnd, 3)\n    }\n    if (three(input, 46 /* '.' */)) {\n      if (stack.canShift(blockEnd)) input.acceptToken(blockEnd);\n      else return input.acceptToken(DocEnd, 3)\n    }\n    let depth = 0;\n    while (input.next == 32 /* ' ' */) { depth++; input.advance(); }\n    if ((depth < stack.context.depth ||\n         depth == stack.context.depth && stack.context.type == type_Seq &&\n         (input.next != 45 /* '-' */ || !isSep(input.peek(1)))) &&\n        // Not blank\n        input.next != -1 && !isBreakSpace(input.next) && input.next != 35 /* '#' */)\n      input.acceptToken(blockEnd, -depth);\n  }\n}, {contextual: true});\n\nconst blockMark = new ExternalTokenizer((input, stack) => {\n  if (stack.context.type == type_Flow) {\n    if (input.next == 63 /* '?' */) {\n      input.advance();\n      if (isSep(input.next)) input.acceptToken(flowMapMark);\n    }\n    return\n  }\n  if (input.next == 45 /* '-' */) {\n    input.advance();\n    if (isSep(input.next))\n      input.acceptToken(stack.context.type == type_Seq && stack.context.depth == findColumn(input, input.pos - 1)\n                        ? sequenceContinueMark : sequenceStartMark);\n  } else if (input.next == 63 /* '?' */) {\n    input.advance();\n    if (isSep(input.next))\n      input.acceptToken(stack.context.type == type_Map && stack.context.depth == findColumn(input, input.pos - 1)\n                        ? explicitMapContinueMark : explicitMapStartMark);\n  } else {\n    let start = input.pos;\n    // Scan over a potential key to see if it is followed by a colon.\n    for (;;) {\n      if (isNonBreakSpace(input.next)) {\n        if (input.pos == start) return\n        input.advance();\n      } else if (input.next == 33 /* '!' */) {\n        readTag(input);\n      } else if (input.next == 38 /* '&' */) {\n        readAnchor(input);\n      } else if (input.next == 42 /* '*' */) {\n        readAnchor(input);\n        break\n      } else if (input.next == 39 /* \"'\" */ || input.next == 34 /* '\"' */) {\n        if (readQuoted(input, true)) break\n        return\n      } else if (input.next == 91 /* '[' */ || input.next == 123 /* '{' */) {\n        if (!scanBrackets(input)) return\n        break\n      } else {\n        readPlain(input, true, false, 0);\n        break\n      }\n    }\n    while (isNonBreakSpace(input.next)) input.advance();\n    if (input.next == 58 /* ':' */) {\n      if (input.pos == start && stack.canShift(Colon)) return\n      let after = input.peek(1);\n      if (isSep(after))\n        input.acceptTokenTo(stack.context.type == type_Map && stack.context.depth == findColumn(input, start)\n                            ? mapContinueMark : mapStartMark, start);\n    }\n  }\n}, {contextual: true});\n\nfunction uriChar(ch) {\n  return ch > 32 && ch < 127 && ch != 34 && ch != 37 && ch != 44 && ch != 60 &&\n    ch != 62 && ch != 92 && ch != 94 && ch != 96 && ch != 123 && ch != 124 && ch != 125\n}\n\nfunction hexChar(ch) {\n  return ch >= 48 && ch <= 57 || ch >= 97 && ch <= 102 || ch >= 65 && ch <= 70\n}\n\nfunction readUriChar(input, quoted) {\n  if (input.next == 37 /* '%' */) {\n    input.advance();\n    if (hexChar(input.next)) input.advance();\n    if (hexChar(input.next)) input.advance();\n    return true\n  } else if (uriChar(input.next) || quoted && input.next == 44 /* ',' */) {\n    input.advance();\n    return true\n  }\n  return false\n}\n\nfunction readTag(input) {\n  input.advance(); // !\n  if (input.next == 60 /* '<' */) {\n    input.advance();\n    for (;;) {\n      if (!readUriChar(input, true)) {\n        if (input.next == 62 /* '>' */) input.advance();\n        break\n      }\n    }\n  } else {\n    while (readUriChar(input, false)) {}\n  }\n}\n\nfunction readAnchor(input) {\n  input.advance();\n  while (!isSep(input.next) && charTag(input.tag) != \"f\") input.advance();\n}\n  \nfunction readQuoted(input, scan) {\n  let quote = input.next, lineBreak = false, start = input.pos;\n  input.advance();\n  for (;;) {\n    let ch = input.next;\n    if (ch < 0) break\n    input.advance();\n    if (ch == quote) {\n      if (ch == 39 /* \"'\" */) {\n        if (input.next == 39) input.advance();\n        else break\n      } else {\n        break\n      }\n    } else if (ch == 92 /* \"\\\\\" */ && quote == 34 /* '\"' */) {\n      if (input.next >= 0) input.advance();\n    } else if (isBreakSpace(ch)) {\n      if (scan) return false\n      lineBreak = true;\n    } else if (scan && input.pos >= start + 1024) {\n      return false\n    }\n  }\n  return !lineBreak\n}\n\nfunction scanBrackets(input) {\n  for (let stack = [], end = input.pos + 1024;;) {\n    if (input.next == 91 /* '[' */ || input.next == 123 /* '{' */) {\n      stack.push(input.next);\n      input.advance();\n    } else if (input.next == 39 /* \"'\" */ || input.next == 34 /* '\"' */) {\n      if (!readQuoted(input, true)) return false\n    } else if (input.next == 93 /* ']' */ || input.next == 125 /* '}' */) {\n      if (stack[stack.length - 1] != input.next - 2) return false\n      stack.pop();\n      input.advance();\n      if (!stack.length) return true\n    } else if (input.next < 0 || input.pos > end || isBreakSpace(input.next)) {\n      return false\n    } else {\n      input.advance();\n    }\n  }\n}\n\n// \"Safe char\" info for char codes 33 to 125. s: safe, i: indicator, f: flow indicator\nconst charTable = \"iiisiiissisfissssssssssssisssiiissssssssssssssssssssssssssfsfssissssssssssssssssssssssssssfif\";\n\nfunction charTag(ch) {\n  if (ch < 33) return \"u\"\n  if (ch > 125) return \"s\"\n  return charTable[ch - 33]\n}\n\nfunction isSafe(ch, inFlow) {\n  let tag = charTag(ch);\n  return tag != \"u\" && !(inFlow && tag == \"f\")\n}\n\nfunction readPlain(input, scan, inFlow, indent) {\n  if (charTag(input.next) == \"s\" ||\n      (input.next == 63 /* '?' */ || input.next == 58 /* ':' */ || input.next == 45 /* '-' */) &&\n      isSafe(input.peek(1), inFlow)) {\n    input.advance();\n  } else {\n    return false\n  }\n  let start = input.pos;\n  for (;;) {\n    let next = input.next, off = 0, lineIndent = indent + 1;\n    while (isSpace(next)) {\n      if (isBreakSpace(next)) {\n        if (scan) return false\n        lineIndent = 0;\n      } else {\n        lineIndent++;\n      }\n      next = input.peek(++off);\n    }\n    let safe = next >= 0 &&\n        (next == 58 /* ':' */ ? isSafe(input.peek(off + 1), inFlow) :\n         next == 35 /* '#' */ ? input.peek(off - 1) != 32 /* ' ' */ :\n         isSafe(next, inFlow));\n    if (!safe || !inFlow && lineIndent <= indent ||\n        lineIndent == 0 && !inFlow && (three(input, 45, off) || three(input, 46, off)))\n      break\n    if (scan && charTag(next) == \"f\") return false\n    for (let i = off; i >= 0; i--) input.advance();\n    if (scan && input.pos > start + 1024) return false\n  }\n  return true\n}\n\nconst literals = new ExternalTokenizer((input, stack) => {\n  if (input.next == 33 /* '!' */) {\n    readTag(input);\n    input.acceptToken(Tag);\n  } else if (input.next == 38 /* '&' */ || input.next == 42 /* '*' */) {\n    let token = input.next == 38 ? Anchor : Alias;\n    readAnchor(input);\n    input.acceptToken(token);\n  } else if (input.next == 39 /* \"'\" */ || input.next == 34 /* '\"' */) {\n    readQuoted(input, false);\n    input.acceptToken(QuotedLiteral);\n  } else if (readPlain(input, false, stack.context.type == type_Flow, stack.context.depth)) {\n    input.acceptToken(Literal);\n  }\n});\n\nconst blockLiteral = new ExternalTokenizer((input, stack) => {\n  let indent = stack.context.type == type_Lit ? stack.context.depth : -1, upto = input.pos;\n  scan: for (;;) {\n    let depth = 0, next = input.next;\n    while (next == 32 /* ' ' */) next = input.peek(++depth);\n    if (!depth && (three(input, 45, depth) || three(input, 46, depth))) break\n    if (!isBreakSpace(next)) {\n      if (indent < 0) indent = Math.max(stack.context.depth + 1, depth);\n      if (depth < indent) break\n    }\n    for (;;) {\n      if (input.next < 0) break scan\n      let isBreak = isBreakSpace(input.next);\n      input.advance();\n      if (isBreak) continue scan\n      upto = input.pos;\n    }\n  }\n  input.acceptTokenTo(BlockLiteralContent, upto);\n});\n\nconst yamlHighlighting = styleTags({\n  DirectiveName: tags.keyword,\n  DirectiveContent: tags.attributeValue,\n  \"DirectiveEnd DocEnd\": tags.meta,\n  QuotedLiteral: tags.string,\n  BlockLiteralHeader: tags.special(tags.string),\n  BlockLiteralContent: tags.content,\n  Literal: tags.content,\n  \"Key/Literal Key/QuotedLiteral\": tags.definition(tags.propertyName),\n  \"Anchor Alias\": tags.labelName,\n  Tag: tags.typeName,\n  Comment: tags.lineComment,\n  \": , -\": tags.separator,\n  \"?\": tags.punctuation,\n  \"[ ]\": tags.squareBracket,\n  \"{ }\": tags.brace\n});\n\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst parser = LRParser.deserialize({\n  version: 14,\n  states: \"5lQ!ZQgOOO#PQfO'#CpO#uQfO'#DOOOQR'#Dv'#DvO$qQgO'#DRO%gQdO'#DUO%nQgO'#DUO&ROaO'#D[OOQR'#Du'#DuO&{QgO'#D^O'rQgO'#D`OOQR'#Dt'#DtO(iOqO'#DbOOQP'#Dj'#DjO(zQaO'#CmO)YQgO'#CmOOQP'#Cm'#CmQ)jQaOOQ)uQgOOQ]QgOOO*PQdO'#CrO*nQdO'#CtOOQO'#Dw'#DwO+]Q`O'#CxO+hQdO'#CwO+rQ`O'#CwOOQO'#Cv'#CvO+wQdO'#CvOOQO'#Cq'#CqO,UQ`O,59[O,^QfO,59[OOQR,59[,59[OOQO'#Cx'#CxO,eQ`O'#DPO,pQdO'#DPOOQO'#Dx'#DxO,zQdO'#DxO-XQ`O,59jO-aQfO,59jOOQR,59j,59jOOQR'#DS'#DSO-hQcO,59mO-sQgO'#DVO.TQ`O'#DVO.YQcO,59pOOQR'#DX'#DXO#|QfO'#DWO.hQcO'#DWOOQR,59v,59vO.yOWO,59vO/OOaO,59vO/WOaO,59vO/cQgO'#D_OOQR,59x,59xO0VQgO'#DaOOQR,59z,59zOOQP,59|,59|O0yOaO,59|O1ROaO,59|O1aOqO,59|OOQP-E7h-E7hO1oQgO,59XOOQP,59X,59XO2PQaO'#DeO2_QgO'#DeO2oQgO'#DkOOQP'#Dk'#DkQ)jQaOOO3PQdO'#CsOOQO,59^,59^O3kQdO'#CuOOQO,59`,59`OOQO,59c,59cO4VQdO,59cO4aQdO'#CzO4kQ`O'#CzOOQO,59b,59bOOQU,5:Q,5:QOOQR1G.v1G.vO4pQ`O1G.vOOQU-E7d-E7dO4xQdO,59kOOQO,59k,59kO5SQdO'#DQO5^Q`O'#DQOOQO,5:d,5:dOOQU,5:R,5:ROOQR1G/U1G/UO5cQ`O1G/UOOQU-E7e-E7eO5kQgO'#DhO5xQcO1G/XOOQR1G/X1G/XOOQR,59q,59qO6TQgO,59qO6eQdO'#DiO6lQgO'#DiO7PQcO1G/[OOQR1G/[1G/[OOQR,59r,59rO#|QfO,59rOOQR1G/b1G/bO7_OWO1G/bO7dOaO1G/bOOQR,59y,59yOOQR,59{,59{OOQP1G/h1G/hO7lOaO1G/hO7tOaO1G/hO8POaO1G/hOOQP1G.s1G.sO8_QgO,5:POOQP,5:P,5:POOQP,5:V,5:VOOQP-E7i-E7iOOQO,59_,59_OOQO,59a,59aOOQO1G.}1G.}OOQO,59f,59fO8oQdO,59fOOQR7+$b7+$bP,XQ`O'#DfOOQO1G/V1G/VOOQO,59l,59lO8yQdO,59lOOQR7+$p7+$pP9TQ`O'#DgOOQR'#DT'#DTOOQR,5:S,5:SOOQR-E7f-E7fOOQR7+$s7+$sOOQR1G/]1G/]O9YQgO'#DYO9jQ`O'#DYOOQR,5:T,5:TO#|QfO'#DZO9oQcO'#DZOOQR-E7g-E7gOOQR7+$v7+$vOOQR1G/^1G/^OOQR7+$|7+$|O:QOWO7+$|OOQP7+%S7+%SO:VOaO7+%SO:_OaO7+%SOOQP1G/k1G/kOOQO1G/Q1G/QOOQO1G/W1G/WOOQR,59t,59tO:jQgO,59tOOQR,59u,59uO#|QfO,59uOOQR<<Hh<<HhOOQP<<Hn<<HnO:zOaO<<HnOOQR1G/`1G/`OOQR1G/a1G/aOOQPAN>YAN>Y\",\n  stateData: \";S~O!fOS!gOS^OS~OP_OQbORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!V[O!cTO~O`cO~P]OVkOWROXROYeOZfO[dOcPOmhOqQO~OboO~P!bOVtOWROXROYeOZfO[dOcPOmrOqQO~OpwO~P#WORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!cTO~OSvP!avP!bvP~P#|OWROXROYeOZfO[dOcPOqQO~OmzO~P%OOm!OOUzP!azP!bzP!dzP~P#|O^!SO!b!QO!f!TO!g!RO~ORSOTUOWROXROcPOqQO!PVO!cTO~OY!UOP!QXQ!QX!V!QX!`!QXS!QX!a!QX!b!QXU!QXm!QX!d!QX~P&aO[!WOP!SXQ!SX!V!SX!`!SXS!SX!a!SX!b!SXU!SXm!SX!d!SX~P&aO^!ZO!W![O!b!YO!f!]O!g!YO~OP!_O!V[OQaX!`aX~OPaXQaX!VaX!`aX~P#|OP!bOQ!cO!V[O~OP_O!V[O~P#|OWROXROY!fOcPOqQObfXmfXofXpfX~OWROXRO[!hOcPOqQObhXmhXohXphX~ObeXmlXoeX~ObkXokX~P%OOm!kO~Om!lObnPonP~P%OOb!pOo!oO~Ob!pO~P!bOm!sOosXpsX~OosXpsX~P%OOm!uOotPptP~P%OOo!xOp!yO~Op!yO~P#WOS!|O!a#OO!b#OO~OUyX!ayX!byX!dyX~P#|Om#QO~OU#SO!a#UO!b#UO!d#RO~Om#WOUzX!azX!bzX!dzX~O]#XO~O!b#XO!g#YO~O^#ZO!b#XO!g#YO~OP!RXQ!RX!V!RX!`!RXS!RX!a!RX!b!RXU!RXm!RX!d!RX~P&aOP!TXQ!TX!V!TX!`!TXS!TX!a!TX!b!TXU!TXm!TX!d!TX~P&aO!b#^O!g#^O~O^#_O!b#^O!f#`O!g#^O~O^#_O!W#aO!b#^O!g#^O~OPaaQaa!Vaa!`aa~P#|OP#cO!V[OQ!XX!`!XX~OP!XXQ!XX!V!XX!`!XX~P#|OP_O!V[OQ!_X!`!_X~P#|OWROXROcPOqQObgXmgXogXpgX~OWROXROcPOqQObiXmiXoiXpiX~Obkaoka~P%OObnXonX~P%OOm#kO~Ob#lOo!oO~Oosapsa~P%OOotXptX~P%OOm#pO~Oo!xOp#qO~OSwP!awP!bwP~P#|OS!|O!a#vO!b#vO~OUya!aya!bya!dya~P#|Om#xO~P%OOm#{OU}P!a}P!b}P!d}P~P#|OU#SO!a$OO!b$OO!d#RO~O]$QO~O!b$QO!g$RO~O!b$SO!g$SO~O^$TO!b$SO!g$SO~O^$TO!b$SO!f$UO!g$SO~OP!XaQ!Xa!V!Xa!`!Xa~P#|Obnaona~P%OOotapta~P%OOo!xO~OU|X!a|X!b|X!d|X~P#|Om$ZO~Om$]OU}X!a}X!b}X!d}X~O]$^O~O!b$_O!g$_O~O^$`O!b$_O!g$_O~OU|a!a|a!b|a!d|a~P#|O!b$cO!g$cO~O\",\n  goto: \",]!mPPPPPPPPPPPPPPPPP!nPP!v#v#|$`#|$c$f$j$nP%VPPP!v%Y%^%a%{&O%a&R&U&X&_&b%aP&e&{&e'O'RPP']'a'g'm's'y(XPPPPPPPP(_)e*X+c,VUaObcR#e!c!{ROPQSTUXY_bcdehknrtvz!O!U!W!_!b!c!f!h!k!l!s!u!|#Q#R#S#W#c#k#p#x#{$Z$]QmPR!qnqfPQThknrtv!k!l!s!u#R#k#pR!gdR!ieTlPnTjPnSiPnSqQvQ{TQ!mkQ!trQ!vtR#y#RR!nkTsQvR!wt!RWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]RySR#t!|R|TR|UQ!PUR#|#SR#z#RR#z#SyZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]R!VXR!XYa]O^abc!a!c!eT!da!eQnPR!rnQvQR!{vQ!}yR#u!}Q#T|R#}#TW^Obc!cS!^^!aT!aa!eQ!eaR#f!eW`Obc!cQxSS}U#SQ!`_Q#PzQ#V!OQ#b!_Q#d!bQ#s!|Q#w#QQ$P#WQ$V#cQ$Y#xQ$[#{Q$a$ZR$b$]xZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]Q!VXQ!XYQ#[!UR#]!W!QWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]pfPQThknrtv!k!l!s!u#R#k#pQ!gdQ!ieQ#g!fR#h!hSgPn^pQTkrtv#RQ!jhQ#i!kQ#j!lQ#n!sQ#o!uQ$W#kR$X#pQuQR!zv\",\n  nodeNames: \" DirectiveEnd DocEnd - - ? ? ? Literal QuotedLiteral Anchor Alias Tag BlockLiteralContent Comment Stream BOM Document ] [ FlowSequence Item Tagged Anchored Anchored Tagged FlowMapping Pair Key : Pair , } { FlowMapping Pair Pair BlockSequence Item Item BlockMapping Pair Pair Key Pair Pair BlockLiteral BlockLiteralHeader Tagged Anchored Anchored Tagged Directive DirectiveName DirectiveContent Document\",\n  maxTerm: 74,\n  context: indentation,\n  nodeProps: [\n    [\"isolate\", -3,8,9,14,\"\"],\n    [\"openedBy\", 18,\"[\",32,\"{\"],\n    [\"closedBy\", 19,\"]\",33,\"}\"]\n  ],\n  propSources: [yamlHighlighting],\n  skippedNodes: [0],\n  repeatNodeCount: 6,\n  tokenData: \"-Y~RnOX#PXY$QYZ$]Z]#P]^$]^p#Ppq$Qqs#Pst$btu#Puv$yv|#P|}&e}![#P![!]'O!]!`#P!`!a'i!a!}#P!}#O*g#O#P#P#P#Q+Q#Q#o#P#o#p+k#p#q'i#q#r,U#r;'S#P;'S;=`#z<%l?HT#P?HT?HU,o?HUO#PQ#UU!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PQ#kTOY#PZs#Pt;'S#P;'S;=`#z<%lO#PQ#}P;=`<%l#P~$VQ!f~XY$Qpq$Q~$bO!g~~$gS^~OY$bZ;'S$b;'S;=`$s<%lO$b~$vP;=`<%l$bR%OX!WQOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR%rX!WQ!VPOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR&bP;=`<%l%kR&lUoP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'VUmP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'p[!PP!WQOY#PZp#Ppq#hq{#P{|(f|}#P}!O(f!O!R#P!R![)p![;'S#P;'S;=`#z<%lO#PR(mW!PP!WQOY#PZp#Ppq#hq!R#P!R![)V![;'S#P;'S;=`#z<%lO#PR)^U!PP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR)wY!PP!WQOY#PZp#Ppq#hq{#P{|)V|}#P}!O)V!O;'S#P;'S;=`#z<%lO#PR*nUcP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+XUbP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+rUqP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,]UpP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,vU`P!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#P\",\n  tokenizers: [newlines, blockMark, literals, blockLiteral, 0, 1],\n  topRules: {\"Stream\":[0,15]},\n  tokenPrec: 0\n});\n\nexport { parser };\n","import { parser as parser$1 } from '@lezer/yaml';\nimport { LRLanguage, indentNodeProp, delimitedIndent, foldNodeProp, foldInside, LanguageSupport } from '@codemirror/language';\nimport { parseMixed } from '@lezer/common';\nimport { styleTags, tags } from '@lezer/highlight';\nimport { LRParser } from '@lezer/lr';\n\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst parser = /*@__PURE__*/LRParser.deserialize({\n  version: 14,\n  states: \"!vOQOPOOO]OPO'#C_OhOPO'#C^OOOO'#Cc'#CcOpOPO'#CaQOOOOOO{OPOOOOOO'#Cb'#CbO!WOPO'#C`O!`OPO,58xOOOO-E6a-E6aOOOO-E6`-E6`OOOO'#C_'#C_OOOO1G.d1G.d\",\n  stateData: \"!h~OXPOYROWTP~OWVXXRXYRX~OYVOXSP~OXROYROWTX~OXROYROWTP~OYVOXSX~OX[O~OXY~\",\n  goto: \"vWPPX[beioRUOQQOR]XRXQTTOUQWQRZWSSOURYS\",\n  nodeNames: \" Document Frontmatter DashLine FrontmatterContent Body\",\n  maxTerm: 10,\n  skippedNodes: [0],\n  repeatNodeCount: 2,\n  tokenData: \"$z~RXOYnYZ!^Z]n]^!^^}n}!O!i!O;'Sn;'S;=`!c<%lOn~qXOYnYZ!^Z]n]^!^^;'Sn;'S;=`!c<%l~n~On~~!^~!cOY~~!fP;=`<%ln~!lZOYnYZ!^Z]n]^!^^}n}!O#_!O;'Sn;'S;=`!c<%l~n~On~~!^~#bZOYnYZ!^Z]n]^!^^}n}!O$T!O;'Sn;'S;=`!c<%l~n~On~~!^~$WXOYnYZ$sZ]n]^$s^;'Sn;'S;=`!c<%l~n~On~~$s~$zOX~Y~\",\n  tokenizers: [0],\n  topRules: {\"Document\":[0,1]},\n  tokenPrec: 67\n});\n\n/**\nA language provider based on the [Lezer YAML\nparser](https://github.com/lezer-parser/yaml), extended with\nhighlighting and indentation information.\n*/\nconst yamlLanguage = /*@__PURE__*/LRLanguage.define({\n    name: \"yaml\",\n    parser: /*@__PURE__*/parser$1.configure({\n        props: [\n            /*@__PURE__*/indentNodeProp.add({\n                Stream: cx => {\n                    for (let before = cx.node.resolve(cx.pos, -1); before && before.to >= cx.pos; before = before.parent) {\n                        if (before.name == \"BlockLiteralContent\" && before.from < before.to)\n                            return cx.baseIndentFor(before);\n                        if (before.name == \"BlockLiteral\")\n                            return cx.baseIndentFor(before) + cx.unit;\n                        if (before.name == \"BlockSequence\" || before.name == \"BlockMapping\")\n                            return cx.column(before.from, 1);\n                        if (before.name == \"QuotedLiteral\")\n                            return null;\n                        if (before.name == \"Literal\") {\n                            let col = cx.column(before.from, 1);\n                            if (col == cx.lineIndent(before.from, 1))\n                                return col; // Start on own line\n                            if (before.to > cx.pos)\n                                return null;\n                        }\n                    }\n                    return null;\n                },\n                FlowMapping: /*@__PURE__*/delimitedIndent({ closing: \"}\" }),\n                FlowSequence: /*@__PURE__*/delimitedIndent({ closing: \"]\" }),\n            }),\n            /*@__PURE__*/foldNodeProp.add({\n                \"FlowMapping FlowSequence\": foldInside,\n                \"BlockSequence Pair BlockLiteral\": (node, state) => ({ from: state.doc.lineAt(node.from).to, to: node.to })\n            })\n        ]\n    }),\n    languageData: {\n        commentTokens: { line: \"#\" },\n        indentOnInput: /^\\s*[\\]\\}]$/,\n    }\n});\n/**\nLanguage support for YAML.\n*/\nfunction yaml() {\n    return new LanguageSupport(yamlLanguage);\n}\nconst frontmatterLanguage = /*@__PURE__*/LRLanguage.define({\n    name: \"yaml-frontmatter\",\n    parser: /*@__PURE__*/parser.configure({\n        props: [/*@__PURE__*/styleTags({ DashLine: tags.meta })]\n    })\n});\n/**\nReturns language support for a document parsed as `config.content`\nwith an optional YAML \"frontmatter\" delimited by lines that\ncontain three dashes.\n*/\nfunction yamlFrontmatter(config) {\n    let { language, support } = config.content instanceof LanguageSupport ? config.content\n        : { language: config.content, support: [] };\n    return new LanguageSupport(frontmatterLanguage.configure({\n        wrap: parseMixed(node => {\n            return node.name == \"FrontmatterContent\" ? { parser: yamlLanguage.parser }\n                : node.name == \"Body\" ? { parser: language.parser }\n                    : null;\n        })\n    }), support);\n}\n\nexport { yaml, yamlFrontmatter, yamlLanguage };\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nexport var DocumentUri;\n(function (DocumentUri) {\n    function is(value) {\n        return typeof value === 'string';\n    }\n    DocumentUri.is = is;\n})(DocumentUri || (DocumentUri = {}));\nexport var URI;\n(function (URI) {\n    function is(value) {\n        return typeof value === 'string';\n    }\n    URI.is = is;\n})(URI || (URI = {}));\nexport var integer;\n(function (integer) {\n    integer.MIN_VALUE = -2147483648;\n    integer.MAX_VALUE = 2147483647;\n    function is(value) {\n        return typeof value === 'number' && integer.MIN_VALUE <= value && value <= integer.MAX_VALUE;\n    }\n    integer.is = is;\n})(integer || (integer = {}));\nexport var uinteger;\n(function (uinteger) {\n    uinteger.MIN_VALUE = 0;\n    uinteger.MAX_VALUE = 2147483647;\n    function is(value) {\n        return typeof value === 'number' && uinteger.MIN_VALUE <= value && value <= uinteger.MAX_VALUE;\n    }\n    uinteger.is = is;\n})(uinteger || (uinteger = {}));\n/**\n * The Position namespace provides helper functions to work with\n * {@link Position} literals.\n */\nexport var Position;\n(function (Position) {\n    /**\n     * Creates a new Position literal from the given line and character.\n     * @param line The position's line.\n     * @param character The position's character.\n     */\n    function create(line, character) {\n        if (line === Number.MAX_VALUE) {\n            line = uinteger.MAX_VALUE;\n        }\n        if (character === Number.MAX_VALUE) {\n            character = uinteger.MAX_VALUE;\n        }\n        return { line, character };\n    }\n    Position.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Position} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return Is.objectLiteral(candidate) && Is.uinteger(candidate.line) && Is.uinteger(candidate.character);\n    }\n    Position.is = is;\n})(Position || (Position = {}));\n/**\n * The Range namespace provides helper functions to work with\n * {@link Range} literals.\n */\nexport var Range;\n(function (Range) {\n    function create(one, two, three, four) {\n        if (Is.uinteger(one) && Is.uinteger(two) && Is.uinteger(three) && Is.uinteger(four)) {\n            return { start: Position.create(one, two), end: Position.create(three, four) };\n        }\n        else if (Position.is(one) && Position.is(two)) {\n            return { start: one, end: two };\n        }\n        else {\n            throw new Error(`Range#create called with invalid arguments[${one}, ${two}, ${three}, ${four}]`);\n        }\n    }\n    Range.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Range} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\n    }\n    Range.is = is;\n})(Range || (Range = {}));\n/**\n * The Location namespace provides helper functions to work with\n * {@link Location} literals.\n */\nexport var Location;\n(function (Location) {\n    /**\n     * Creates a Location literal.\n     * @param uri The location's uri.\n     * @param range The location's range.\n     */\n    function create(uri, range) {\n        return { uri, range };\n    }\n    Location.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Location} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return Is.objectLiteral(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\n    }\n    Location.is = is;\n})(Location || (Location = {}));\n/**\n * The LocationLink namespace provides helper functions to work with\n * {@link LocationLink} literals.\n */\nexport var LocationLink;\n(function (LocationLink) {\n    /**\n     * Creates a LocationLink literal.\n     * @param targetUri The definition's uri.\n     * @param targetRange The full range of the definition.\n     * @param targetSelectionRange The span of the symbol definition at the target.\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\n     */\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\n        return { targetUri, targetRange, targetSelectionRange, originSelectionRange };\n    }\n    LocationLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link LocationLink} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return Is.objectLiteral(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\n            && Range.is(candidate.targetSelectionRange)\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\n    }\n    LocationLink.is = is;\n})(LocationLink || (LocationLink = {}));\n/**\n * The Color namespace provides helper functions to work with\n * {@link Color} literals.\n */\nexport var Color;\n(function (Color) {\n    /**\n     * Creates a new Color literal.\n     */\n    function create(red, green, blue, alpha) {\n        return {\n            red,\n            green,\n            blue,\n            alpha,\n        };\n    }\n    Color.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Color} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.numberRange(candidate.red, 0, 1)\n            && Is.numberRange(candidate.green, 0, 1)\n            && Is.numberRange(candidate.blue, 0, 1)\n            && Is.numberRange(candidate.alpha, 0, 1);\n    }\n    Color.is = is;\n})(Color || (Color = {}));\n/**\n * The ColorInformation namespace provides helper functions to work with\n * {@link ColorInformation} literals.\n */\nexport var ColorInformation;\n(function (ColorInformation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(range, color) {\n        return {\n            range,\n            color,\n        };\n    }\n    ColorInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link ColorInformation} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Range.is(candidate.range) && Color.is(candidate.color);\n    }\n    ColorInformation.is = is;\n})(ColorInformation || (ColorInformation = {}));\n/**\n * The Color namespace provides helper functions to work with\n * {@link ColorPresentation} literals.\n */\nexport var ColorPresentation;\n(function (ColorPresentation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(label, textEdit, additionalTextEdits) {\n        return {\n            label,\n            textEdit,\n            additionalTextEdits,\n        };\n    }\n    ColorPresentation.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link ColorInformation} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.label)\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\n    }\n    ColorPresentation.is = is;\n})(ColorPresentation || (ColorPresentation = {}));\n/**\n * A set of predefined range kinds.\n */\nexport var FoldingRangeKind;\n(function (FoldingRangeKind) {\n    /**\n     * Folding range for a comment\n     */\n    FoldingRangeKind.Comment = 'comment';\n    /**\n     * Folding range for an import or include\n     */\n    FoldingRangeKind.Imports = 'imports';\n    /**\n     * Folding range for a region (e.g. `#region`)\n     */\n    FoldingRangeKind.Region = 'region';\n})(FoldingRangeKind || (FoldingRangeKind = {}));\n/**\n * The folding range namespace provides helper functions to work with\n * {@link FoldingRange} literals.\n */\nexport var FoldingRange;\n(function (FoldingRange) {\n    /**\n     * Creates a new FoldingRange literal.\n     */\n    function create(startLine, endLine, startCharacter, endCharacter, kind, collapsedText) {\n        const result = {\n            startLine,\n            endLine\n        };\n        if (Is.defined(startCharacter)) {\n            result.startCharacter = startCharacter;\n        }\n        if (Is.defined(endCharacter)) {\n            result.endCharacter = endCharacter;\n        }\n        if (Is.defined(kind)) {\n            result.kind = kind;\n        }\n        if (Is.defined(collapsedText)) {\n            result.collapsedText = collapsedText;\n        }\n        return result;\n    }\n    FoldingRange.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link FoldingRange} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.uinteger(candidate.startLine) && Is.uinteger(candidate.startLine)\n            && (Is.undefined(candidate.startCharacter) || Is.uinteger(candidate.startCharacter))\n            && (Is.undefined(candidate.endCharacter) || Is.uinteger(candidate.endCharacter))\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\n    }\n    FoldingRange.is = is;\n})(FoldingRange || (FoldingRange = {}));\n/**\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\n * {@link DiagnosticRelatedInformation} literals.\n */\nexport var DiagnosticRelatedInformation;\n(function (DiagnosticRelatedInformation) {\n    /**\n     * Creates a new DiagnosticRelatedInformation literal.\n     */\n    function create(location, message) {\n        return {\n            location,\n            message\n        };\n    }\n    DiagnosticRelatedInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link DiagnosticRelatedInformation} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\n    }\n    DiagnosticRelatedInformation.is = is;\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\n/**\n * The diagnostic's severity.\n */\nexport var DiagnosticSeverity;\n(function (DiagnosticSeverity) {\n    /**\n     * Reports an error.\n     */\n    DiagnosticSeverity.Error = 1;\n    /**\n     * Reports a warning.\n     */\n    DiagnosticSeverity.Warning = 2;\n    /**\n     * Reports an information.\n     */\n    DiagnosticSeverity.Information = 3;\n    /**\n     * Reports a hint.\n     */\n    DiagnosticSeverity.Hint = 4;\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\n/**\n * The diagnostic tags.\n *\n * @since 3.15.0\n */\nexport var DiagnosticTag;\n(function (DiagnosticTag) {\n    /**\n     * Unused or unnecessary code.\n     *\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\n     * an error squiggle.\n     */\n    DiagnosticTag.Unnecessary = 1;\n    /**\n     * Deprecated or obsolete code.\n     *\n     * Clients are allowed to rendered diagnostics with this tag strike through.\n     */\n    DiagnosticTag.Deprecated = 2;\n})(DiagnosticTag || (DiagnosticTag = {}));\n/**\n * The CodeDescription namespace provides functions to deal with descriptions for diagnostic codes.\n *\n * @since 3.16.0\n */\nexport var CodeDescription;\n(function (CodeDescription) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.href);\n    }\n    CodeDescription.is = is;\n})(CodeDescription || (CodeDescription = {}));\n/**\n * The Diagnostic namespace provides helper functions to work with\n * {@link Diagnostic} literals.\n */\nexport var Diagnostic;\n(function (Diagnostic) {\n    /**\n     * Creates a new Diagnostic literal.\n     */\n    function create(range, message, severity, code, source, relatedInformation) {\n        let result = { range, message };\n        if (Is.defined(severity)) {\n            result.severity = severity;\n        }\n        if (Is.defined(code)) {\n            result.code = code;\n        }\n        if (Is.defined(source)) {\n            result.source = source;\n        }\n        if (Is.defined(relatedInformation)) {\n            result.relatedInformation = relatedInformation;\n        }\n        return result;\n    }\n    Diagnostic.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Diagnostic} interface.\n     */\n    function is(value) {\n        var _a;\n        let candidate = value;\n        return Is.defined(candidate)\n            && Range.is(candidate.range)\n            && Is.string(candidate.message)\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\n            && (Is.integer(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\n            && (Is.undefined(candidate.codeDescription) || (Is.string((_a = candidate.codeDescription) === null || _a === void 0 ? void 0 : _a.href)))\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\n    }\n    Diagnostic.is = is;\n})(Diagnostic || (Diagnostic = {}));\n/**\n * The Command namespace provides helper functions to work with\n * {@link Command} literals.\n */\nexport var Command;\n(function (Command) {\n    /**\n     * Creates a new Command literal.\n     */\n    function create(title, command, ...args) {\n        let result = { title, command };\n        if (Is.defined(args) && args.length > 0) {\n            result.arguments = args;\n        }\n        return result;\n    }\n    Command.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Command} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\n    }\n    Command.is = is;\n})(Command || (Command = {}));\n/**\n * The TextEdit namespace provides helper function to create replace,\n * insert and delete edits more easily.\n */\nexport var TextEdit;\n(function (TextEdit) {\n    /**\n     * Creates a replace text edit.\n     * @param range The range of text to be replaced.\n     * @param newText The new text.\n     */\n    function replace(range, newText) {\n        return { range, newText };\n    }\n    TextEdit.replace = replace;\n    /**\n     * Creates an insert text edit.\n     * @param position The position to insert the text at.\n     * @param newText The text to be inserted.\n     */\n    function insert(position, newText) {\n        return { range: { start: position, end: position }, newText };\n    }\n    TextEdit.insert = insert;\n    /**\n     * Creates a delete text edit.\n     * @param range The range of text to be deleted.\n     */\n    function del(range) {\n        return { range, newText: '' };\n    }\n    TextEdit.del = del;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && Is.string(candidate.newText)\n            && Range.is(candidate.range);\n    }\n    TextEdit.is = is;\n})(TextEdit || (TextEdit = {}));\nexport var ChangeAnnotation;\n(function (ChangeAnnotation) {\n    function create(label, needsConfirmation, description) {\n        const result = { label };\n        if (needsConfirmation !== undefined) {\n            result.needsConfirmation = needsConfirmation;\n        }\n        if (description !== undefined) {\n            result.description = description;\n        }\n        return result;\n    }\n    ChangeAnnotation.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.label) &&\n            (Is.boolean(candidate.needsConfirmation) || candidate.needsConfirmation === undefined) &&\n            (Is.string(candidate.description) || candidate.description === undefined);\n    }\n    ChangeAnnotation.is = is;\n})(ChangeAnnotation || (ChangeAnnotation = {}));\nexport var ChangeAnnotationIdentifier;\n(function (ChangeAnnotationIdentifier) {\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate);\n    }\n    ChangeAnnotationIdentifier.is = is;\n})(ChangeAnnotationIdentifier || (ChangeAnnotationIdentifier = {}));\nexport var AnnotatedTextEdit;\n(function (AnnotatedTextEdit) {\n    /**\n     * Creates an annotated replace text edit.\n     *\n     * @param range The range of text to be replaced.\n     * @param newText The new text.\n     * @param annotation The annotation.\n     */\n    function replace(range, newText, annotation) {\n        return { range, newText, annotationId: annotation };\n    }\n    AnnotatedTextEdit.replace = replace;\n    /**\n     * Creates an annotated insert text edit.\n     *\n     * @param position The position to insert the text at.\n     * @param newText The text to be inserted.\n     * @param annotation The annotation.\n     */\n    function insert(position, newText, annotation) {\n        return { range: { start: position, end: position }, newText, annotationId: annotation };\n    }\n    AnnotatedTextEdit.insert = insert;\n    /**\n     * Creates an annotated delete text edit.\n     *\n     * @param range The range of text to be deleted.\n     * @param annotation The annotation.\n     */\n    function del(range, annotation) {\n        return { range, newText: '', annotationId: annotation };\n    }\n    AnnotatedTextEdit.del = del;\n    function is(value) {\n        const candidate = value;\n        return TextEdit.is(candidate) && (ChangeAnnotation.is(candidate.annotationId) || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    AnnotatedTextEdit.is = is;\n})(AnnotatedTextEdit || (AnnotatedTextEdit = {}));\n/**\n * The TextDocumentEdit namespace provides helper function to create\n * an edit that manipulates a text document.\n */\nexport var TextDocumentEdit;\n(function (TextDocumentEdit) {\n    /**\n     * Creates a new `TextDocumentEdit`\n     */\n    function create(textDocument, edits) {\n        return { textDocument, edits };\n    }\n    TextDocumentEdit.create = create;\n    function is(value) {\n        let candidate = value;\n        return Is.defined(candidate)\n            && OptionalVersionedTextDocumentIdentifier.is(candidate.textDocument)\n            && Array.isArray(candidate.edits);\n    }\n    TextDocumentEdit.is = is;\n})(TextDocumentEdit || (TextDocumentEdit = {}));\nexport var CreateFile;\n(function (CreateFile) {\n    function create(uri, options, annotation) {\n        let result = {\n            kind: 'create',\n            uri\n        };\n        if (options !== undefined && (options.overwrite !== undefined || options.ignoreIfExists !== undefined)) {\n            result.options = options;\n        }\n        if (annotation !== undefined) {\n            result.annotationId = annotation;\n        }\n        return result;\n    }\n    CreateFile.create = create;\n    function is(value) {\n        let candidate = value;\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) && (candidate.options === undefined ||\n            ((candidate.options.overwrite === undefined || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === undefined || Is.boolean(candidate.options.ignoreIfExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    CreateFile.is = is;\n})(CreateFile || (CreateFile = {}));\nexport var RenameFile;\n(function (RenameFile) {\n    function create(oldUri, newUri, options, annotation) {\n        let result = {\n            kind: 'rename',\n            oldUri,\n            newUri\n        };\n        if (options !== undefined && (options.overwrite !== undefined || options.ignoreIfExists !== undefined)) {\n            result.options = options;\n        }\n        if (annotation !== undefined) {\n            result.annotationId = annotation;\n        }\n        return result;\n    }\n    RenameFile.create = create;\n    function is(value) {\n        let candidate = value;\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) && (candidate.options === undefined ||\n            ((candidate.options.overwrite === undefined || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === undefined || Is.boolean(candidate.options.ignoreIfExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    RenameFile.is = is;\n})(RenameFile || (RenameFile = {}));\nexport var DeleteFile;\n(function (DeleteFile) {\n    function create(uri, options, annotation) {\n        let result = {\n            kind: 'delete',\n            uri\n        };\n        if (options !== undefined && (options.recursive !== undefined || options.ignoreIfNotExists !== undefined)) {\n            result.options = options;\n        }\n        if (annotation !== undefined) {\n            result.annotationId = annotation;\n        }\n        return result;\n    }\n    DeleteFile.create = create;\n    function is(value) {\n        let candidate = value;\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) && (candidate.options === undefined ||\n            ((candidate.options.recursive === undefined || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === undefined || Is.boolean(candidate.options.ignoreIfNotExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    DeleteFile.is = is;\n})(DeleteFile || (DeleteFile = {}));\nexport var WorkspaceEdit;\n(function (WorkspaceEdit) {\n    function is(value) {\n        let candidate = value;\n        return candidate &&\n            (candidate.changes !== undefined || candidate.documentChanges !== undefined) &&\n            (candidate.documentChanges === undefined || candidate.documentChanges.every((change) => {\n                if (Is.string(change.kind)) {\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\n                }\n                else {\n                    return TextDocumentEdit.is(change);\n                }\n            }));\n    }\n    WorkspaceEdit.is = is;\n})(WorkspaceEdit || (WorkspaceEdit = {}));\nclass TextEditChangeImpl {\n    constructor(edits, changeAnnotations) {\n        this.edits = edits;\n        this.changeAnnotations = changeAnnotations;\n    }\n    insert(position, newText, annotation) {\n        let edit;\n        let id;\n        if (annotation === undefined) {\n            edit = TextEdit.insert(position, newText);\n        }\n        else if (ChangeAnnotationIdentifier.is(annotation)) {\n            id = annotation;\n            edit = AnnotatedTextEdit.insert(position, newText, annotation);\n        }\n        else {\n            this.assertChangeAnnotations(this.changeAnnotations);\n            id = this.changeAnnotations.manage(annotation);\n            edit = AnnotatedTextEdit.insert(position, newText, id);\n        }\n        this.edits.push(edit);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n    replace(range, newText, annotation) {\n        let edit;\n        let id;\n        if (annotation === undefined) {\n            edit = TextEdit.replace(range, newText);\n        }\n        else if (ChangeAnnotationIdentifier.is(annotation)) {\n            id = annotation;\n            edit = AnnotatedTextEdit.replace(range, newText, annotation);\n        }\n        else {\n            this.assertChangeAnnotations(this.changeAnnotations);\n            id = this.changeAnnotations.manage(annotation);\n            edit = AnnotatedTextEdit.replace(range, newText, id);\n        }\n        this.edits.push(edit);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n    delete(range, annotation) {\n        let edit;\n        let id;\n        if (annotation === undefined) {\n            edit = TextEdit.del(range);\n        }\n        else if (ChangeAnnotationIdentifier.is(annotation)) {\n            id = annotation;\n            edit = AnnotatedTextEdit.del(range, annotation);\n        }\n        else {\n            this.assertChangeAnnotations(this.changeAnnotations);\n            id = this.changeAnnotations.manage(annotation);\n            edit = AnnotatedTextEdit.del(range, id);\n        }\n        this.edits.push(edit);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n    add(edit) {\n        this.edits.push(edit);\n    }\n    all() {\n        return this.edits;\n    }\n    clear() {\n        this.edits.splice(0, this.edits.length);\n    }\n    assertChangeAnnotations(value) {\n        if (value === undefined) {\n            throw new Error(`Text edit change is not configured to manage change annotations.`);\n        }\n    }\n}\n/**\n * A helper class\n */\nclass ChangeAnnotations {\n    constructor(annotations) {\n        this._annotations = annotations === undefined ? Object.create(null) : annotations;\n        this._counter = 0;\n        this._size = 0;\n    }\n    all() {\n        return this._annotations;\n    }\n    get size() {\n        return this._size;\n    }\n    manage(idOrAnnotation, annotation) {\n        let id;\n        if (ChangeAnnotationIdentifier.is(idOrAnnotation)) {\n            id = idOrAnnotation;\n        }\n        else {\n            id = this.nextId();\n            annotation = idOrAnnotation;\n        }\n        if (this._annotations[id] !== undefined) {\n            throw new Error(`Id ${id} is already in use.`);\n        }\n        if (annotation === undefined) {\n            throw new Error(`No annotation provided for id ${id}`);\n        }\n        this._annotations[id] = annotation;\n        this._size++;\n        return id;\n    }\n    nextId() {\n        this._counter++;\n        return this._counter.toString();\n    }\n}\n/**\n * A workspace change helps constructing changes to a workspace.\n */\nexport class WorkspaceChange {\n    constructor(workspaceEdit) {\n        this._textEditChanges = Object.create(null);\n        if (workspaceEdit !== undefined) {\n            this._workspaceEdit = workspaceEdit;\n            if (workspaceEdit.documentChanges) {\n                this._changeAnnotations = new ChangeAnnotations(workspaceEdit.changeAnnotations);\n                workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n                workspaceEdit.documentChanges.forEach((change) => {\n                    if (TextDocumentEdit.is(change)) {\n                        const textEditChange = new TextEditChangeImpl(change.edits, this._changeAnnotations);\n                        this._textEditChanges[change.textDocument.uri] = textEditChange;\n                    }\n                });\n            }\n            else if (workspaceEdit.changes) {\n                Object.keys(workspaceEdit.changes).forEach((key) => {\n                    const textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\n                    this._textEditChanges[key] = textEditChange;\n                });\n            }\n        }\n        else {\n            this._workspaceEdit = {};\n        }\n    }\n    /**\n     * Returns the underlying {@link WorkspaceEdit} literal\n     * use to be returned from a workspace edit operation like rename.\n     */\n    get edit() {\n        this.initDocumentChanges();\n        if (this._changeAnnotations !== undefined) {\n            if (this._changeAnnotations.size === 0) {\n                this._workspaceEdit.changeAnnotations = undefined;\n            }\n            else {\n                this._workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n            }\n        }\n        return this._workspaceEdit;\n    }\n    getTextEditChange(key) {\n        if (OptionalVersionedTextDocumentIdentifier.is(key)) {\n            this.initDocumentChanges();\n            if (this._workspaceEdit.documentChanges === undefined) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            const textDocument = { uri: key.uri, version: key.version };\n            let result = this._textEditChanges[textDocument.uri];\n            if (!result) {\n                const edits = [];\n                const textDocumentEdit = {\n                    textDocument,\n                    edits\n                };\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\n                result = new TextEditChangeImpl(edits, this._changeAnnotations);\n                this._textEditChanges[textDocument.uri] = result;\n            }\n            return result;\n        }\n        else {\n            this.initChanges();\n            if (this._workspaceEdit.changes === undefined) {\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\n            }\n            let result = this._textEditChanges[key];\n            if (!result) {\n                let edits = [];\n                this._workspaceEdit.changes[key] = edits;\n                result = new TextEditChangeImpl(edits);\n                this._textEditChanges[key] = result;\n            }\n            return result;\n        }\n    }\n    initDocumentChanges() {\n        if (this._workspaceEdit.documentChanges === undefined && this._workspaceEdit.changes === undefined) {\n            this._changeAnnotations = new ChangeAnnotations();\n            this._workspaceEdit.documentChanges = [];\n            this._workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n        }\n    }\n    initChanges() {\n        if (this._workspaceEdit.documentChanges === undefined && this._workspaceEdit.changes === undefined) {\n            this._workspaceEdit.changes = Object.create(null);\n        }\n    }\n    createFile(uri, optionsOrAnnotation, options) {\n        this.initDocumentChanges();\n        if (this._workspaceEdit.documentChanges === undefined) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n        let annotation;\n        if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n            annotation = optionsOrAnnotation;\n        }\n        else {\n            options = optionsOrAnnotation;\n        }\n        let operation;\n        let id;\n        if (annotation === undefined) {\n            operation = CreateFile.create(uri, options);\n        }\n        else {\n            id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n            operation = CreateFile.create(uri, options, id);\n        }\n        this._workspaceEdit.documentChanges.push(operation);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n    renameFile(oldUri, newUri, optionsOrAnnotation, options) {\n        this.initDocumentChanges();\n        if (this._workspaceEdit.documentChanges === undefined) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n        let annotation;\n        if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n            annotation = optionsOrAnnotation;\n        }\n        else {\n            options = optionsOrAnnotation;\n        }\n        let operation;\n        let id;\n        if (annotation === undefined) {\n            operation = RenameFile.create(oldUri, newUri, options);\n        }\n        else {\n            id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n            operation = RenameFile.create(oldUri, newUri, options, id);\n        }\n        this._workspaceEdit.documentChanges.push(operation);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n    deleteFile(uri, optionsOrAnnotation, options) {\n        this.initDocumentChanges();\n        if (this._workspaceEdit.documentChanges === undefined) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n        let annotation;\n        if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n            annotation = optionsOrAnnotation;\n        }\n        else {\n            options = optionsOrAnnotation;\n        }\n        let operation;\n        let id;\n        if (annotation === undefined) {\n            operation = DeleteFile.create(uri, options);\n        }\n        else {\n            id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n            operation = DeleteFile.create(uri, options, id);\n        }\n        this._workspaceEdit.documentChanges.push(operation);\n        if (id !== undefined) {\n            return id;\n        }\n    }\n}\n/**\n * The TextDocumentIdentifier namespace provides helper functions to work with\n * {@link TextDocumentIdentifier} literals.\n */\nexport var TextDocumentIdentifier;\n(function (TextDocumentIdentifier) {\n    /**\n     * Creates a new TextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     */\n    function create(uri) {\n        return { uri };\n    }\n    TextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link TextDocumentIdentifier} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri);\n    }\n    TextDocumentIdentifier.is = is;\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\n/**\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\n * {@link VersionedTextDocumentIdentifier} literals.\n */\nexport var VersionedTextDocumentIdentifier;\n(function (VersionedTextDocumentIdentifier) {\n    /**\n     * Creates a new VersionedTextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     * @param version The document's version.\n     */\n    function create(uri, version) {\n        return { uri, version };\n    }\n    VersionedTextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link VersionedTextDocumentIdentifier} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.integer(candidate.version);\n    }\n    VersionedTextDocumentIdentifier.is = is;\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\n/**\n * The OptionalVersionedTextDocumentIdentifier namespace provides helper functions to work with\n * {@link OptionalVersionedTextDocumentIdentifier} literals.\n */\nexport var OptionalVersionedTextDocumentIdentifier;\n(function (OptionalVersionedTextDocumentIdentifier) {\n    /**\n     * Creates a new OptionalVersionedTextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     * @param version The document's version.\n     */\n    function create(uri, version) {\n        return { uri, version };\n    }\n    OptionalVersionedTextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link OptionalVersionedTextDocumentIdentifier} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.integer(candidate.version));\n    }\n    OptionalVersionedTextDocumentIdentifier.is = is;\n})(OptionalVersionedTextDocumentIdentifier || (OptionalVersionedTextDocumentIdentifier = {}));\n/**\n * The TextDocumentItem namespace provides helper functions to work with\n * {@link TextDocumentItem} literals.\n */\nexport var TextDocumentItem;\n(function (TextDocumentItem) {\n    /**\n     * Creates a new TextDocumentItem literal.\n     * @param uri The document's uri.\n     * @param languageId The document's language identifier.\n     * @param version The document's version number.\n     * @param text The document's text.\n     */\n    function create(uri, languageId, version, text) {\n        return { uri, languageId, version, text };\n    }\n    TextDocumentItem.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link TextDocumentItem} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.integer(candidate.version) && Is.string(candidate.text);\n    }\n    TextDocumentItem.is = is;\n})(TextDocumentItem || (TextDocumentItem = {}));\n/**\n * Describes the content type that a client supports in various\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\n *\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\n * are reserved for internal usage.\n */\nexport var MarkupKind;\n(function (MarkupKind) {\n    /**\n     * Plain text is supported as a content format\n     */\n    MarkupKind.PlainText = 'plaintext';\n    /**\n     * Markdown is supported as a content format\n     */\n    MarkupKind.Markdown = 'markdown';\n    /**\n     * Checks whether the given value is a value of the {@link MarkupKind} type.\n     */\n    function is(value) {\n        const candidate = value;\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\n    }\n    MarkupKind.is = is;\n})(MarkupKind || (MarkupKind = {}));\nexport var MarkupContent;\n(function (MarkupContent) {\n    /**\n     * Checks whether the given value conforms to the {@link MarkupContent} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\n    }\n    MarkupContent.is = is;\n})(MarkupContent || (MarkupContent = {}));\n/**\n * The kind of a completion entry.\n */\nexport var CompletionItemKind;\n(function (CompletionItemKind) {\n    CompletionItemKind.Text = 1;\n    CompletionItemKind.Method = 2;\n    CompletionItemKind.Function = 3;\n    CompletionItemKind.Constructor = 4;\n    CompletionItemKind.Field = 5;\n    CompletionItemKind.Variable = 6;\n    CompletionItemKind.Class = 7;\n    CompletionItemKind.Interface = 8;\n    CompletionItemKind.Module = 9;\n    CompletionItemKind.Property = 10;\n    CompletionItemKind.Unit = 11;\n    CompletionItemKind.Value = 12;\n    CompletionItemKind.Enum = 13;\n    CompletionItemKind.Keyword = 14;\n    CompletionItemKind.Snippet = 15;\n    CompletionItemKind.Color = 16;\n    CompletionItemKind.File = 17;\n    CompletionItemKind.Reference = 18;\n    CompletionItemKind.Folder = 19;\n    CompletionItemKind.EnumMember = 20;\n    CompletionItemKind.Constant = 21;\n    CompletionItemKind.Struct = 22;\n    CompletionItemKind.Event = 23;\n    CompletionItemKind.Operator = 24;\n    CompletionItemKind.TypeParameter = 25;\n})(CompletionItemKind || (CompletionItemKind = {}));\n/**\n * Defines whether the insert text in a completion item should be interpreted as\n * plain text or a snippet.\n */\nexport var InsertTextFormat;\n(function (InsertTextFormat) {\n    /**\n     * The primary text to be inserted is treated as a plain string.\n     */\n    InsertTextFormat.PlainText = 1;\n    /**\n     * The primary text to be inserted is treated as a snippet.\n     *\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\n     * the end of the snippet. Placeholders with equal identifiers are linked,\n     * that is typing in one will update others too.\n     *\n     * See also: https://microsoft.github.io/language-server-protocol/specifications/specification-current/#snippet_syntax\n     */\n    InsertTextFormat.Snippet = 2;\n})(InsertTextFormat || (InsertTextFormat = {}));\n/**\n * Completion item tags are extra annotations that tweak the rendering of a completion\n * item.\n *\n * @since 3.15.0\n */\nexport var CompletionItemTag;\n(function (CompletionItemTag) {\n    /**\n     * Render a completion as obsolete, usually using a strike-out.\n     */\n    CompletionItemTag.Deprecated = 1;\n})(CompletionItemTag || (CompletionItemTag = {}));\n/**\n * The InsertReplaceEdit namespace provides functions to deal with insert / replace edits.\n *\n * @since 3.16.0\n */\nexport var InsertReplaceEdit;\n(function (InsertReplaceEdit) {\n    /**\n     * Creates a new insert / replace edit\n     */\n    function create(newText, insert, replace) {\n        return { newText, insert, replace };\n    }\n    InsertReplaceEdit.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link InsertReplaceEdit} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.newText) && Range.is(candidate.insert) && Range.is(candidate.replace);\n    }\n    InsertReplaceEdit.is = is;\n})(InsertReplaceEdit || (InsertReplaceEdit = {}));\n/**\n * How whitespace and indentation is handled during completion\n * item insertion.\n *\n * @since 3.16.0\n */\nexport var InsertTextMode;\n(function (InsertTextMode) {\n    /**\n     * The insertion or replace strings is taken as it is. If the\n     * value is multi line the lines below the cursor will be\n     * inserted using the indentation defined in the string value.\n     * The client will not apply any kind of adjustments to the\n     * string.\n     */\n    InsertTextMode.asIs = 1;\n    /**\n     * The editor adjusts leading whitespace of new lines so that\n     * they match the indentation up to the cursor of the line for\n     * which the item is accepted.\n     *\n     * Consider a line like this: <2tabs><cursor><3tabs>foo. Accepting a\n     * multi line completion item is indented using 2 tabs and all\n     * following lines inserted will be indented using 2 tabs as well.\n     */\n    InsertTextMode.adjustIndentation = 2;\n})(InsertTextMode || (InsertTextMode = {}));\nexport var CompletionItemLabelDetails;\n(function (CompletionItemLabelDetails) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (Is.string(candidate.detail) || candidate.detail === undefined) &&\n            (Is.string(candidate.description) || candidate.description === undefined);\n    }\n    CompletionItemLabelDetails.is = is;\n})(CompletionItemLabelDetails || (CompletionItemLabelDetails = {}));\n/**\n * The CompletionItem namespace provides functions to deal with\n * completion items.\n */\nexport var CompletionItem;\n(function (CompletionItem) {\n    /**\n     * Create a completion item and seed it with a label.\n     * @param label The completion item's label\n     */\n    function create(label) {\n        return { label };\n    }\n    CompletionItem.create = create;\n})(CompletionItem || (CompletionItem = {}));\n/**\n * The CompletionList namespace provides functions to deal with\n * completion lists.\n */\nexport var CompletionList;\n(function (CompletionList) {\n    /**\n     * Creates a new completion list.\n     *\n     * @param items The completion items.\n     * @param isIncomplete The list is not complete.\n     */\n    function create(items, isIncomplete) {\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\n    }\n    CompletionList.create = create;\n})(CompletionList || (CompletionList = {}));\nexport var MarkedString;\n(function (MarkedString) {\n    /**\n     * Creates a marked string from plain text.\n     *\n     * @param plainText The plain text.\n     */\n    function fromPlainText(plainText) {\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n    }\n    MarkedString.fromPlainText = fromPlainText;\n    /**\n     * Checks whether the given value conforms to the {@link MarkedString} type.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\n    }\n    MarkedString.is = is;\n})(MarkedString || (MarkedString = {}));\nexport var Hover;\n(function (Hover) {\n    /**\n     * Checks whether the given value conforms to the {@link Hover} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\n            MarkedString.is(candidate.contents) ||\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === undefined || Range.is(value.range));\n    }\n    Hover.is = is;\n})(Hover || (Hover = {}));\n/**\n * The ParameterInformation namespace provides helper functions to work with\n * {@link ParameterInformation} literals.\n */\nexport var ParameterInformation;\n(function (ParameterInformation) {\n    /**\n     * Creates a new parameter information literal.\n     *\n     * @param label A label string.\n     * @param documentation A doc string.\n     */\n    function create(label, documentation) {\n        return documentation ? { label, documentation } : { label };\n    }\n    ParameterInformation.create = create;\n})(ParameterInformation || (ParameterInformation = {}));\n/**\n * The SignatureInformation namespace provides helper functions to work with\n * {@link SignatureInformation} literals.\n */\nexport var SignatureInformation;\n(function (SignatureInformation) {\n    function create(label, documentation, ...parameters) {\n        let result = { label };\n        if (Is.defined(documentation)) {\n            result.documentation = documentation;\n        }\n        if (Is.defined(parameters)) {\n            result.parameters = parameters;\n        }\n        else {\n            result.parameters = [];\n        }\n        return result;\n    }\n    SignatureInformation.create = create;\n})(SignatureInformation || (SignatureInformation = {}));\n/**\n * A document highlight kind.\n */\nexport var DocumentHighlightKind;\n(function (DocumentHighlightKind) {\n    /**\n     * A textual occurrence.\n     */\n    DocumentHighlightKind.Text = 1;\n    /**\n     * Read-access of a symbol, like reading a variable.\n     */\n    DocumentHighlightKind.Read = 2;\n    /**\n     * Write-access of a symbol, like writing to a variable.\n     */\n    DocumentHighlightKind.Write = 3;\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\n/**\n * DocumentHighlight namespace to provide helper functions to work with\n * {@link DocumentHighlight} literals.\n */\nexport var DocumentHighlight;\n(function (DocumentHighlight) {\n    /**\n     * Create a DocumentHighlight object.\n     * @param range The range the highlight applies to.\n     * @param kind The highlight kind\n     */\n    function create(range, kind) {\n        let result = { range };\n        if (Is.number(kind)) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    DocumentHighlight.create = create;\n})(DocumentHighlight || (DocumentHighlight = {}));\n/**\n * A symbol kind.\n */\nexport var SymbolKind;\n(function (SymbolKind) {\n    SymbolKind.File = 1;\n    SymbolKind.Module = 2;\n    SymbolKind.Namespace = 3;\n    SymbolKind.Package = 4;\n    SymbolKind.Class = 5;\n    SymbolKind.Method = 6;\n    SymbolKind.Property = 7;\n    SymbolKind.Field = 8;\n    SymbolKind.Constructor = 9;\n    SymbolKind.Enum = 10;\n    SymbolKind.Interface = 11;\n    SymbolKind.Function = 12;\n    SymbolKind.Variable = 13;\n    SymbolKind.Constant = 14;\n    SymbolKind.String = 15;\n    SymbolKind.Number = 16;\n    SymbolKind.Boolean = 17;\n    SymbolKind.Array = 18;\n    SymbolKind.Object = 19;\n    SymbolKind.Key = 20;\n    SymbolKind.Null = 21;\n    SymbolKind.EnumMember = 22;\n    SymbolKind.Struct = 23;\n    SymbolKind.Event = 24;\n    SymbolKind.Operator = 25;\n    SymbolKind.TypeParameter = 26;\n})(SymbolKind || (SymbolKind = {}));\n/**\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\n *\n * @since 3.16\n */\nexport var SymbolTag;\n(function (SymbolTag) {\n    /**\n     * Render a symbol as obsolete, usually using a strike-out.\n     */\n    SymbolTag.Deprecated = 1;\n})(SymbolTag || (SymbolTag = {}));\nexport var SymbolInformation;\n(function (SymbolInformation) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the location of the symbol.\n     * @param uri The resource of the location of symbol.\n     * @param containerName The name of the symbol containing the symbol.\n     */\n    function create(name, kind, range, uri, containerName) {\n        let result = {\n            name,\n            kind,\n            location: { uri, range }\n        };\n        if (containerName) {\n            result.containerName = containerName;\n        }\n        return result;\n    }\n    SymbolInformation.create = create;\n})(SymbolInformation || (SymbolInformation = {}));\nexport var WorkspaceSymbol;\n(function (WorkspaceSymbol) {\n    /**\n     * Create a new workspace symbol.\n     *\n     * @param name The name of the symbol.\n     * @param kind The kind of the symbol.\n     * @param uri The resource of the location of the symbol.\n     * @param range An options range of the location.\n     * @returns A WorkspaceSymbol.\n     */\n    function create(name, kind, uri, range) {\n        return range !== undefined\n            ? { name, kind, location: { uri, range } }\n            : { name, kind, location: { uri } };\n    }\n    WorkspaceSymbol.create = create;\n})(WorkspaceSymbol || (WorkspaceSymbol = {}));\nexport var DocumentSymbol;\n(function (DocumentSymbol) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param detail The detail of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the symbol.\n     * @param selectionRange The selectionRange of the symbol.\n     * @param children Children of the symbol.\n     */\n    function create(name, detail, kind, range, selectionRange, children) {\n        let result = {\n            name,\n            detail,\n            kind,\n            range,\n            selectionRange\n        };\n        if (children !== undefined) {\n            result.children = children;\n        }\n        return result;\n    }\n    DocumentSymbol.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link DocumentSymbol} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return candidate &&\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\n            (candidate.detail === undefined || Is.string(candidate.detail)) &&\n            (candidate.deprecated === undefined || Is.boolean(candidate.deprecated)) &&\n            (candidate.children === undefined || Array.isArray(candidate.children)) &&\n            (candidate.tags === undefined || Array.isArray(candidate.tags));\n    }\n    DocumentSymbol.is = is;\n})(DocumentSymbol || (DocumentSymbol = {}));\n/**\n * A set of predefined code action kinds\n */\nexport var CodeActionKind;\n(function (CodeActionKind) {\n    /**\n     * Empty kind.\n     */\n    CodeActionKind.Empty = '';\n    /**\n     * Base kind for quickfix actions: 'quickfix'\n     */\n    CodeActionKind.QuickFix = 'quickfix';\n    /**\n     * Base kind for refactoring actions: 'refactor'\n     */\n    CodeActionKind.Refactor = 'refactor';\n    /**\n     * Base kind for refactoring extraction actions: 'refactor.extract'\n     *\n     * Example extract actions:\n     *\n     * - Extract method\n     * - Extract function\n     * - Extract variable\n     * - Extract interface from class\n     * - ...\n     */\n    CodeActionKind.RefactorExtract = 'refactor.extract';\n    /**\n     * Base kind for refactoring inline actions: 'refactor.inline'\n     *\n     * Example inline actions:\n     *\n     * - Inline function\n     * - Inline variable\n     * - Inline constant\n     * - ...\n     */\n    CodeActionKind.RefactorInline = 'refactor.inline';\n    /**\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\n     *\n     * Example rewrite actions:\n     *\n     * - Convert JavaScript function to class\n     * - Add or remove parameter\n     * - Encapsulate field\n     * - Make method static\n     * - Move method to base class\n     * - ...\n     */\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\n    /**\n     * Base kind for source actions: `source`\n     *\n     * Source code actions apply to the entire file.\n     */\n    CodeActionKind.Source = 'source';\n    /**\n     * Base kind for an organize imports source action: `source.organizeImports`\n     */\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\n    /**\n     * Base kind for auto-fix source actions: `source.fixAll`.\n     *\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\n     *\n     * @since 3.15.0\n     */\n    CodeActionKind.SourceFixAll = 'source.fixAll';\n})(CodeActionKind || (CodeActionKind = {}));\n/**\n * The reason why code actions were requested.\n *\n * @since 3.17.0\n */\nexport var CodeActionTriggerKind;\n(function (CodeActionTriggerKind) {\n    /**\n     * Code actions were explicitly requested by the user or by an extension.\n     */\n    CodeActionTriggerKind.Invoked = 1;\n    /**\n     * Code actions were requested automatically.\n     *\n     * This typically happens when current selection in a file changes, but can\n     * also be triggered when file content changes.\n     */\n    CodeActionTriggerKind.Automatic = 2;\n})(CodeActionTriggerKind || (CodeActionTriggerKind = {}));\n/**\n * The CodeActionContext namespace provides helper functions to work with\n * {@link CodeActionContext} literals.\n */\nexport var CodeActionContext;\n(function (CodeActionContext) {\n    /**\n     * Creates a new CodeActionContext literal.\n     */\n    function create(diagnostics, only, triggerKind) {\n        let result = { diagnostics };\n        if (only !== undefined && only !== null) {\n            result.only = only;\n        }\n        if (triggerKind !== undefined && triggerKind !== null) {\n            result.triggerKind = triggerKind;\n        }\n        return result;\n    }\n    CodeActionContext.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link CodeActionContext} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is)\n            && (candidate.only === undefined || Is.typedArray(candidate.only, Is.string))\n            && (candidate.triggerKind === undefined || candidate.triggerKind === CodeActionTriggerKind.Invoked || candidate.triggerKind === CodeActionTriggerKind.Automatic);\n    }\n    CodeActionContext.is = is;\n})(CodeActionContext || (CodeActionContext = {}));\nexport var CodeAction;\n(function (CodeAction) {\n    function create(title, kindOrCommandOrEdit, kind) {\n        let result = { title };\n        let checkKind = true;\n        if (typeof kindOrCommandOrEdit === 'string') {\n            checkKind = false;\n            result.kind = kindOrCommandOrEdit;\n        }\n        else if (Command.is(kindOrCommandOrEdit)) {\n            result.command = kindOrCommandOrEdit;\n        }\n        else {\n            result.edit = kindOrCommandOrEdit;\n        }\n        if (checkKind && kind !== undefined) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    CodeAction.create = create;\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.string(candidate.title) &&\n            (candidate.diagnostics === undefined || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\n            (candidate.kind === undefined || Is.string(candidate.kind)) &&\n            (candidate.edit !== undefined || candidate.command !== undefined) &&\n            (candidate.command === undefined || Command.is(candidate.command)) &&\n            (candidate.isPreferred === undefined || Is.boolean(candidate.isPreferred)) &&\n            (candidate.edit === undefined || WorkspaceEdit.is(candidate.edit));\n    }\n    CodeAction.is = is;\n})(CodeAction || (CodeAction = {}));\n/**\n * The CodeLens namespace provides helper functions to work with\n * {@link CodeLens} literals.\n */\nexport var CodeLens;\n(function (CodeLens) {\n    /**\n     * Creates a new CodeLens literal.\n     */\n    function create(range, data) {\n        let result = { range };\n        if (Is.defined(data)) {\n            result.data = data;\n        }\n        return result;\n    }\n    CodeLens.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link CodeLens} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\n    }\n    CodeLens.is = is;\n})(CodeLens || (CodeLens = {}));\n/**\n * The FormattingOptions namespace provides helper functions to work with\n * {@link FormattingOptions} literals.\n */\nexport var FormattingOptions;\n(function (FormattingOptions) {\n    /**\n     * Creates a new FormattingOptions literal.\n     */\n    function create(tabSize, insertSpaces) {\n        return { tabSize, insertSpaces };\n    }\n    FormattingOptions.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link FormattingOptions} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return Is.defined(candidate) && Is.uinteger(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\n    }\n    FormattingOptions.is = is;\n})(FormattingOptions || (FormattingOptions = {}));\n/**\n * The DocumentLink namespace provides helper functions to work with\n * {@link DocumentLink} literals.\n */\nexport var DocumentLink;\n(function (DocumentLink) {\n    /**\n     * Creates a new DocumentLink literal.\n     */\n    function create(range, target, data) {\n        return { range, target, data };\n    }\n    DocumentLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link DocumentLink} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\n    }\n    DocumentLink.is = is;\n})(DocumentLink || (DocumentLink = {}));\n/**\n * The SelectionRange namespace provides helper function to work with\n * SelectionRange literals.\n */\nexport var SelectionRange;\n(function (SelectionRange) {\n    /**\n     * Creates a new SelectionRange\n     * @param range the range.\n     * @param parent an optional parent.\n     */\n    function create(range, parent) {\n        return { range, parent };\n    }\n    SelectionRange.create = create;\n    function is(value) {\n        let candidate = value;\n        return Is.objectLiteral(candidate) && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\n    }\n    SelectionRange.is = is;\n})(SelectionRange || (SelectionRange = {}));\n/**\n * A set of predefined token types. This set is not fixed\n * an clients can specify additional token types via the\n * corresponding client capabilities.\n *\n * @since 3.16.0\n */\nexport var SemanticTokenTypes;\n(function (SemanticTokenTypes) {\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\n    /**\n     * Represents a generic type. Acts as a fallback for types which can't be mapped to\n     * a specific type like class or enum.\n     */\n    SemanticTokenTypes[\"type\"] = \"type\";\n    SemanticTokenTypes[\"class\"] = \"class\";\n    SemanticTokenTypes[\"enum\"] = \"enum\";\n    SemanticTokenTypes[\"interface\"] = \"interface\";\n    SemanticTokenTypes[\"struct\"] = \"struct\";\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\n    SemanticTokenTypes[\"variable\"] = \"variable\";\n    SemanticTokenTypes[\"property\"] = \"property\";\n    SemanticTokenTypes[\"enumMember\"] = \"enumMember\";\n    SemanticTokenTypes[\"event\"] = \"event\";\n    SemanticTokenTypes[\"function\"] = \"function\";\n    SemanticTokenTypes[\"method\"] = \"method\";\n    SemanticTokenTypes[\"macro\"] = \"macro\";\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\n    SemanticTokenTypes[\"modifier\"] = \"modifier\";\n    SemanticTokenTypes[\"comment\"] = \"comment\";\n    SemanticTokenTypes[\"string\"] = \"string\";\n    SemanticTokenTypes[\"number\"] = \"number\";\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\n    SemanticTokenTypes[\"operator\"] = \"operator\";\n    /**\n     * @since 3.17.0\n     */\n    SemanticTokenTypes[\"decorator\"] = \"decorator\";\n})(SemanticTokenTypes || (SemanticTokenTypes = {}));\n/**\n * A set of predefined token modifiers. This set is not fixed\n * an clients can specify additional token types via the\n * corresponding client capabilities.\n *\n * @since 3.16.0\n */\nexport var SemanticTokenModifiers;\n(function (SemanticTokenModifiers) {\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\n    SemanticTokenModifiers[\"static\"] = \"static\";\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\n    SemanticTokenModifiers[\"async\"] = \"async\";\n    SemanticTokenModifiers[\"modification\"] = \"modification\";\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\n    SemanticTokenModifiers[\"defaultLibrary\"] = \"defaultLibrary\";\n})(SemanticTokenModifiers || (SemanticTokenModifiers = {}));\n/**\n * @since 3.16.0\n */\nexport var SemanticTokens;\n(function (SemanticTokens) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\n    }\n    SemanticTokens.is = is;\n})(SemanticTokens || (SemanticTokens = {}));\n/**\n * The InlineValueText namespace provides functions to deal with InlineValueTexts.\n *\n * @since 3.17.0\n */\nexport var InlineValueText;\n(function (InlineValueText) {\n    /**\n     * Creates a new InlineValueText literal.\n     */\n    function create(range, text) {\n        return { range, text };\n    }\n    InlineValueText.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && Range.is(candidate.range) && Is.string(candidate.text);\n    }\n    InlineValueText.is = is;\n})(InlineValueText || (InlineValueText = {}));\n/**\n * The InlineValueVariableLookup namespace provides functions to deal with InlineValueVariableLookups.\n *\n * @since 3.17.0\n */\nexport var InlineValueVariableLookup;\n(function (InlineValueVariableLookup) {\n    /**\n     * Creates a new InlineValueText literal.\n     */\n    function create(range, variableName, caseSensitiveLookup) {\n        return { range, variableName, caseSensitiveLookup };\n    }\n    InlineValueVariableLookup.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && Range.is(candidate.range) && Is.boolean(candidate.caseSensitiveLookup)\n            && (Is.string(candidate.variableName) || candidate.variableName === undefined);\n    }\n    InlineValueVariableLookup.is = is;\n})(InlineValueVariableLookup || (InlineValueVariableLookup = {}));\n/**\n * The InlineValueEvaluatableExpression namespace provides functions to deal with InlineValueEvaluatableExpression.\n *\n * @since 3.17.0\n */\nexport var InlineValueEvaluatableExpression;\n(function (InlineValueEvaluatableExpression) {\n    /**\n     * Creates a new InlineValueEvaluatableExpression literal.\n     */\n    function create(range, expression) {\n        return { range, expression };\n    }\n    InlineValueEvaluatableExpression.create = create;\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && Range.is(candidate.range)\n            && (Is.string(candidate.expression) || candidate.expression === undefined);\n    }\n    InlineValueEvaluatableExpression.is = is;\n})(InlineValueEvaluatableExpression || (InlineValueEvaluatableExpression = {}));\n/**\n * The InlineValueContext namespace provides helper functions to work with\n * {@link InlineValueContext} literals.\n *\n * @since 3.17.0\n */\nexport var InlineValueContext;\n(function (InlineValueContext) {\n    /**\n     * Creates a new InlineValueContext literal.\n     */\n    function create(frameId, stoppedLocation) {\n        return { frameId, stoppedLocation };\n    }\n    InlineValueContext.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link InlineValueContext} interface.\n     */\n    function is(value) {\n        const candidate = value;\n        return Is.defined(candidate) && Range.is(value.stoppedLocation);\n    }\n    InlineValueContext.is = is;\n})(InlineValueContext || (InlineValueContext = {}));\n/**\n * Inlay hint kinds.\n *\n * @since 3.17.0\n */\nexport var InlayHintKind;\n(function (InlayHintKind) {\n    /**\n     * An inlay hint that for a type annotation.\n     */\n    InlayHintKind.Type = 1;\n    /**\n     * An inlay hint that is for a parameter.\n     */\n    InlayHintKind.Parameter = 2;\n    function is(value) {\n        return value === 1 || value === 2;\n    }\n    InlayHintKind.is = is;\n})(InlayHintKind || (InlayHintKind = {}));\nexport var InlayHintLabelPart;\n(function (InlayHintLabelPart) {\n    function create(value) {\n        return { value };\n    }\n    InlayHintLabelPart.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && (candidate.tooltip === undefined || Is.string(candidate.tooltip) || MarkupContent.is(candidate.tooltip))\n            && (candidate.location === undefined || Location.is(candidate.location))\n            && (candidate.command === undefined || Command.is(candidate.command));\n    }\n    InlayHintLabelPart.is = is;\n})(InlayHintLabelPart || (InlayHintLabelPart = {}));\nexport var InlayHint;\n(function (InlayHint) {\n    function create(position, label, kind) {\n        const result = { position, label };\n        if (kind !== undefined) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    InlayHint.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Position.is(candidate.position)\n            && (Is.string(candidate.label) || Is.typedArray(candidate.label, InlayHintLabelPart.is))\n            && (candidate.kind === undefined || InlayHintKind.is(candidate.kind))\n            && (candidate.textEdits === undefined) || Is.typedArray(candidate.textEdits, TextEdit.is)\n            && (candidate.tooltip === undefined || Is.string(candidate.tooltip) || MarkupContent.is(candidate.tooltip))\n            && (candidate.paddingLeft === undefined || Is.boolean(candidate.paddingLeft))\n            && (candidate.paddingRight === undefined || Is.boolean(candidate.paddingRight));\n    }\n    InlayHint.is = is;\n})(InlayHint || (InlayHint = {}));\nexport var StringValue;\n(function (StringValue) {\n    function createSnippet(value) {\n        return { kind: 'snippet', value };\n    }\n    StringValue.createSnippet = createSnippet;\n})(StringValue || (StringValue = {}));\nexport var InlineCompletionItem;\n(function (InlineCompletionItem) {\n    function create(insertText, filterText, range, command) {\n        return { insertText, filterText, range, command };\n    }\n    InlineCompletionItem.create = create;\n})(InlineCompletionItem || (InlineCompletionItem = {}));\nexport var InlineCompletionList;\n(function (InlineCompletionList) {\n    function create(items) {\n        return { items };\n    }\n    InlineCompletionList.create = create;\n})(InlineCompletionList || (InlineCompletionList = {}));\n/**\n * Describes how an {@link InlineCompletionItemProvider inline completion provider} was triggered.\n *\n * @since 3.18.0\n * @proposed\n */\nexport var InlineCompletionTriggerKind;\n(function (InlineCompletionTriggerKind) {\n    /**\n     * Completion was triggered explicitly by a user gesture.\n     */\n    InlineCompletionTriggerKind.Invoked = 0;\n    /**\n     * Completion was triggered automatically while editing.\n     */\n    InlineCompletionTriggerKind.Automatic = 1;\n})(InlineCompletionTriggerKind || (InlineCompletionTriggerKind = {}));\nexport var SelectedCompletionInfo;\n(function (SelectedCompletionInfo) {\n    function create(range, text) {\n        return { range, text };\n    }\n    SelectedCompletionInfo.create = create;\n})(SelectedCompletionInfo || (SelectedCompletionInfo = {}));\nexport var InlineCompletionContext;\n(function (InlineCompletionContext) {\n    function create(triggerKind, selectedCompletionInfo) {\n        return { triggerKind, selectedCompletionInfo };\n    }\n    InlineCompletionContext.create = create;\n})(InlineCompletionContext || (InlineCompletionContext = {}));\nexport var WorkspaceFolder;\n(function (WorkspaceFolder) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && URI.is(candidate.uri) && Is.string(candidate.name);\n    }\n    WorkspaceFolder.is = is;\n})(WorkspaceFolder || (WorkspaceFolder = {}));\nexport const EOL = ['\\n', '\\r\\n', '\\r'];\n/**\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n */\nexport var TextDocument;\n(function (TextDocument) {\n    /**\n     * Creates a new ITextDocument literal from the given uri and content.\n     * @param uri The document's uri.\n     * @param languageId The document's language Id.\n     * @param version The document's version.\n     * @param content The document's content.\n     */\n    function create(uri, languageId, version, content) {\n        return new FullTextDocument(uri, languageId, version, content);\n    }\n    TextDocument.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link ITextDocument} interface.\n     */\n    function is(value) {\n        let candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.uinteger(candidate.lineCount)\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\n    }\n    TextDocument.is = is;\n    function applyEdits(document, edits) {\n        let text = document.getText();\n        let sortedEdits = mergeSort(edits, (a, b) => {\n            let diff = a.range.start.line - b.range.start.line;\n            if (diff === 0) {\n                return a.range.start.character - b.range.start.character;\n            }\n            return diff;\n        });\n        let lastModifiedOffset = text.length;\n        for (let i = sortedEdits.length - 1; i >= 0; i--) {\n            let e = sortedEdits[i];\n            let startOffset = document.offsetAt(e.range.start);\n            let endOffset = document.offsetAt(e.range.end);\n            if (endOffset <= lastModifiedOffset) {\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\n            }\n            else {\n                throw new Error('Overlapping edit');\n            }\n            lastModifiedOffset = startOffset;\n        }\n        return text;\n    }\n    TextDocument.applyEdits = applyEdits;\n    function mergeSort(data, compare) {\n        if (data.length <= 1) {\n            // sorted\n            return data;\n        }\n        const p = (data.length / 2) | 0;\n        const left = data.slice(0, p);\n        const right = data.slice(p);\n        mergeSort(left, compare);\n        mergeSort(right, compare);\n        let leftIdx = 0;\n        let rightIdx = 0;\n        let i = 0;\n        while (leftIdx < left.length && rightIdx < right.length) {\n            let ret = compare(left[leftIdx], right[rightIdx]);\n            if (ret <= 0) {\n                // smaller_equal -> take left to preserve order\n                data[i++] = left[leftIdx++];\n            }\n            else {\n                // greater -> take right\n                data[i++] = right[rightIdx++];\n            }\n        }\n        while (leftIdx < left.length) {\n            data[i++] = left[leftIdx++];\n        }\n        while (rightIdx < right.length) {\n            data[i++] = right[rightIdx++];\n        }\n        return data;\n    }\n})(TextDocument || (TextDocument = {}));\n/**\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n */\nclass FullTextDocument {\n    constructor(uri, languageId, version, content) {\n        this._uri = uri;\n        this._languageId = languageId;\n        this._version = version;\n        this._content = content;\n        this._lineOffsets = undefined;\n    }\n    get uri() {\n        return this._uri;\n    }\n    get languageId() {\n        return this._languageId;\n    }\n    get version() {\n        return this._version;\n    }\n    getText(range) {\n        if (range) {\n            let start = this.offsetAt(range.start);\n            let end = this.offsetAt(range.end);\n            return this._content.substring(start, end);\n        }\n        return this._content;\n    }\n    update(event, version) {\n        this._content = event.text;\n        this._version = version;\n        this._lineOffsets = undefined;\n    }\n    getLineOffsets() {\n        if (this._lineOffsets === undefined) {\n            let lineOffsets = [];\n            let text = this._content;\n            let isLineStart = true;\n            for (let i = 0; i < text.length; i++) {\n                if (isLineStart) {\n                    lineOffsets.push(i);\n                    isLineStart = false;\n                }\n                let ch = text.charAt(i);\n                isLineStart = (ch === '\\r' || ch === '\\n');\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                    i++;\n                }\n            }\n            if (isLineStart && text.length > 0) {\n                lineOffsets.push(text.length);\n            }\n            this._lineOffsets = lineOffsets;\n        }\n        return this._lineOffsets;\n    }\n    positionAt(offset) {\n        offset = Math.max(Math.min(offset, this._content.length), 0);\n        let lineOffsets = this.getLineOffsets();\n        let low = 0, high = lineOffsets.length;\n        if (high === 0) {\n            return Position.create(0, offset);\n        }\n        while (low < high) {\n            let mid = Math.floor((low + high) / 2);\n            if (lineOffsets[mid] > offset) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        // low is the least x for which the line offset is larger than the current offset\n        // or array.length if no line offset is larger than the current offset\n        let line = low - 1;\n        return Position.create(line, offset - lineOffsets[line]);\n    }\n    offsetAt(position) {\n        let lineOffsets = this.getLineOffsets();\n        if (position.line >= lineOffsets.length) {\n            return this._content.length;\n        }\n        else if (position.line < 0) {\n            return 0;\n        }\n        let lineOffset = lineOffsets[position.line];\n        let nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n    }\n    get lineCount() {\n        return this.getLineOffsets().length;\n    }\n}\nvar Is;\n(function (Is) {\n    const toString = Object.prototype.toString;\n    function defined(value) {\n        return typeof value !== 'undefined';\n    }\n    Is.defined = defined;\n    function undefined(value) {\n        return typeof value === 'undefined';\n    }\n    Is.undefined = undefined;\n    function boolean(value) {\n        return value === true || value === false;\n    }\n    Is.boolean = boolean;\n    function string(value) {\n        return toString.call(value) === '[object String]';\n    }\n    Is.string = string;\n    function number(value) {\n        return toString.call(value) === '[object Number]';\n    }\n    Is.number = number;\n    function numberRange(value, min, max) {\n        return toString.call(value) === '[object Number]' && min <= value && value <= max;\n    }\n    Is.numberRange = numberRange;\n    function integer(value) {\n        return toString.call(value) === '[object Number]' && -2147483648 <= value && value <= 2147483647;\n    }\n    Is.integer = integer;\n    function uinteger(value) {\n        return toString.call(value) === '[object Number]' && 0 <= value && value <= 2147483647;\n    }\n    Is.uinteger = uinteger;\n    function func(value) {\n        return toString.call(value) === '[object Function]';\n    }\n    Is.func = func;\n    function objectLiteral(value) {\n        // Strictly speaking class instances pass this check as well. Since the LSP\n        // doesn't use classes we ignore this for now. If we do we need to add something\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n        return value !== null && typeof value === 'object';\n    }\n    Is.objectLiteral = objectLiteral;\n    function typedArray(value, check) {\n        return Array.isArray(value) && value.every(check);\n    }\n    Is.typedArray = typedArray;\n})(Is || (Is = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Message = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType = exports.RequestType0 = exports.AbstractMessageSignature = exports.ParameterStructures = exports.ResponseError = exports.ErrorCodes = void 0;\nconst is = require(\"./is\");\n/**\n * Predefined error codes.\n */\nvar ErrorCodes;\n(function (ErrorCodes) {\n    // Defined by JSON RPC\n    ErrorCodes.ParseError = -32700;\n    ErrorCodes.InvalidRequest = -32600;\n    ErrorCodes.MethodNotFound = -32601;\n    ErrorCodes.InvalidParams = -32602;\n    ErrorCodes.InternalError = -32603;\n    /**\n     * This is the start range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code. No application error codes should\n     * be defined between the start and end range. For backwards\n     * compatibility the `ServerNotInitialized` and the `UnknownErrorCode`\n     * are left in the range.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeStart = -32099;\n    /** @deprecated use  jsonrpcReservedErrorRangeStart */\n    ErrorCodes.serverErrorStart = -32099;\n    /**\n     * An error occurred when write a message to the transport layer.\n     */\n    ErrorCodes.MessageWriteError = -32099;\n    /**\n     * An error occurred when reading a message from the transport layer.\n     */\n    ErrorCodes.MessageReadError = -32098;\n    /**\n     * The connection got disposed or lost and all pending responses got\n     * rejected.\n     */\n    ErrorCodes.PendingResponseRejected = -32097;\n    /**\n     * The connection is inactive and a use of it failed.\n     */\n    ErrorCodes.ConnectionInactive = -32096;\n    /**\n     * Error code indicating that a server received a notification or\n     * request before the server has received the `initialize` request.\n     */\n    ErrorCodes.ServerNotInitialized = -32002;\n    ErrorCodes.UnknownErrorCode = -32001;\n    /**\n     * This is the end range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeEnd = -32000;\n    /** @deprecated use  jsonrpcReservedErrorRangeEnd */\n    ErrorCodes.serverErrorEnd = -32000;\n})(ErrorCodes || (exports.ErrorCodes = ErrorCodes = {}));\n/**\n * An error object return in a response in case a request\n * has failed.\n */\nclass ResponseError extends Error {\n    constructor(code, message, data) {\n        super(message);\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\n        this.data = data;\n        Object.setPrototypeOf(this, ResponseError.prototype);\n    }\n    toJson() {\n        const result = {\n            code: this.code,\n            message: this.message\n        };\n        if (this.data !== undefined) {\n            result.data = this.data;\n        }\n        return result;\n    }\n}\nexports.ResponseError = ResponseError;\nclass ParameterStructures {\n    constructor(kind) {\n        this.kind = kind;\n    }\n    static is(value) {\n        return value === ParameterStructures.auto || value === ParameterStructures.byName || value === ParameterStructures.byPosition;\n    }\n    toString() {\n        return this.kind;\n    }\n}\nexports.ParameterStructures = ParameterStructures;\n/**\n * The parameter structure is automatically inferred on the number of parameters\n * and the parameter type in case of a single param.\n */\nParameterStructures.auto = new ParameterStructures('auto');\n/**\n * Forces `byPosition` parameter structure. This is useful if you have a single\n * parameter which has a literal type.\n */\nParameterStructures.byPosition = new ParameterStructures('byPosition');\n/**\n * Forces `byName` parameter structure. This is only useful when having a single\n * parameter. The library will report errors if used with a different number of\n * parameters.\n */\nParameterStructures.byName = new ParameterStructures('byName');\n/**\n * An abstract implementation of a MessageType.\n */\nclass AbstractMessageSignature {\n    constructor(method, numberOfParams) {\n        this.method = method;\n        this.numberOfParams = numberOfParams;\n    }\n    get parameterStructures() {\n        return ParameterStructures.auto;\n    }\n}\nexports.AbstractMessageSignature = AbstractMessageSignature;\n/**\n * Classes to type request response pairs\n */\nclass RequestType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.RequestType0 = RequestType0;\nclass RequestType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType = RequestType;\nclass RequestType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType1 = RequestType1;\nclass RequestType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.RequestType2 = RequestType2;\nclass RequestType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.RequestType3 = RequestType3;\nclass RequestType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.RequestType4 = RequestType4;\nclass RequestType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.RequestType5 = RequestType5;\nclass RequestType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.RequestType6 = RequestType6;\nclass RequestType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.RequestType7 = RequestType7;\nclass RequestType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.RequestType8 = RequestType8;\nclass RequestType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.RequestType9 = RequestType9;\nclass NotificationType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType = NotificationType;\nclass NotificationType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.NotificationType0 = NotificationType0;\nclass NotificationType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType1 = NotificationType1;\nclass NotificationType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.NotificationType2 = NotificationType2;\nclass NotificationType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.NotificationType3 = NotificationType3;\nclass NotificationType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.NotificationType4 = NotificationType4;\nclass NotificationType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.NotificationType5 = NotificationType5;\nclass NotificationType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.NotificationType6 = NotificationType6;\nclass NotificationType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.NotificationType7 = NotificationType7;\nclass NotificationType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.NotificationType8 = NotificationType8;\nclass NotificationType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.NotificationType9 = NotificationType9;\nvar Message;\n(function (Message) {\n    /**\n     * Tests if the given message is a request message\n     */\n    function isRequest(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\n    }\n    Message.isRequest = isRequest;\n    /**\n     * Tests if the given message is a notification message\n     */\n    function isNotification(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && message.id === void 0;\n    }\n    Message.isNotification = isNotification;\n    /**\n     * Tests if the given message is a response message\n     */\n    function isResponse(message) {\n        const candidate = message;\n        return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\n    }\n    Message.isResponse = isResponse;\n})(Message || (exports.Message = Message = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LRUCache = exports.LinkedMap = exports.Touch = void 0;\nvar Touch;\n(function (Touch) {\n    Touch.None = 0;\n    Touch.First = 1;\n    Touch.AsOld = Touch.First;\n    Touch.Last = 2;\n    Touch.AsNew = Touch.Last;\n})(Touch || (exports.Touch = Touch = {}));\nclass LinkedMap {\n    constructor() {\n        this[_a] = 'LinkedMap';\n        this._map = new Map();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state = 0;\n    }\n    clear() {\n        this._map.clear();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state++;\n    }\n    isEmpty() {\n        return !this._head && !this._tail;\n    }\n    get size() {\n        return this._size;\n    }\n    get first() {\n        return this._head?.value;\n    }\n    get last() {\n        return this._tail?.value;\n    }\n    has(key) {\n        return this._map.has(key);\n    }\n    get(key, touch = Touch.None) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        if (touch !== Touch.None) {\n            this.touch(item, touch);\n        }\n        return item.value;\n    }\n    set(key, value, touch = Touch.None) {\n        let item = this._map.get(key);\n        if (item) {\n            item.value = value;\n            if (touch !== Touch.None) {\n                this.touch(item, touch);\n            }\n        }\n        else {\n            item = { key, value, next: undefined, previous: undefined };\n            switch (touch) {\n                case Touch.None:\n                    this.addItemLast(item);\n                    break;\n                case Touch.First:\n                    this.addItemFirst(item);\n                    break;\n                case Touch.Last:\n                    this.addItemLast(item);\n                    break;\n                default:\n                    this.addItemLast(item);\n                    break;\n            }\n            this._map.set(key, item);\n            this._size++;\n        }\n        return this;\n    }\n    delete(key) {\n        return !!this.remove(key);\n    }\n    remove(key) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        this._map.delete(key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    shift() {\n        if (!this._head && !this._tail) {\n            return undefined;\n        }\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        const item = this._head;\n        this._map.delete(item.key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    forEach(callbackfn, thisArg) {\n        const state = this._state;\n        let current = this._head;\n        while (current) {\n            if (thisArg) {\n                callbackfn.bind(thisArg)(current.value, current.key, this);\n            }\n            else {\n                callbackfn(current.value, current.key, this);\n            }\n            if (this._state !== state) {\n                throw new Error(`LinkedMap got modified during iteration.`);\n            }\n            current = current.next;\n        }\n    }\n    keys() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.key, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    values() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.value, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    entries() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: [current.key, current.value], done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    [(_a = Symbol.toStringTag, Symbol.iterator)]() {\n        return this.entries();\n    }\n    trimOld(newSize) {\n        if (newSize >= this.size) {\n            return;\n        }\n        if (newSize === 0) {\n            this.clear();\n            return;\n        }\n        let current = this._head;\n        let currentSize = this.size;\n        while (current && currentSize > newSize) {\n            this._map.delete(current.key);\n            current = current.next;\n            currentSize--;\n        }\n        this._head = current;\n        this._size = currentSize;\n        if (current) {\n            current.previous = undefined;\n        }\n        this._state++;\n    }\n    addItemFirst(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._tail = item;\n        }\n        else if (!this._head) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.next = this._head;\n            this._head.previous = item;\n        }\n        this._head = item;\n        this._state++;\n    }\n    addItemLast(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._head = item;\n        }\n        else if (!this._tail) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.previous = this._tail;\n            this._tail.next = item;\n        }\n        this._tail = item;\n        this._state++;\n    }\n    removeItem(item) {\n        if (item === this._head && item === this._tail) {\n            this._head = undefined;\n            this._tail = undefined;\n        }\n        else if (item === this._head) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.next) {\n                throw new Error('Invalid list');\n            }\n            item.next.previous = undefined;\n            this._head = item.next;\n        }\n        else if (item === this._tail) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.previous) {\n                throw new Error('Invalid list');\n            }\n            item.previous.next = undefined;\n            this._tail = item.previous;\n        }\n        else {\n            const next = item.next;\n            const previous = item.previous;\n            if (!next || !previous) {\n                throw new Error('Invalid list');\n            }\n            next.previous = previous;\n            previous.next = next;\n        }\n        item.next = undefined;\n        item.previous = undefined;\n        this._state++;\n    }\n    touch(item, touch) {\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\n            return;\n        }\n        if (touch === Touch.First) {\n            if (item === this._head) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item\n            if (item === this._tail) {\n                // previous must be defined since item was not head but is tail\n                // So there are more than on item in the map\n                previous.next = undefined;\n                this._tail = previous;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            // Insert the node at head\n            item.previous = undefined;\n            item.next = this._head;\n            this._head.previous = item;\n            this._head = item;\n            this._state++;\n        }\n        else if (touch === Touch.Last) {\n            if (item === this._tail) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item.\n            if (item === this._head) {\n                // next must be defined since item was not tail but is head\n                // So there are more than on item in the map\n                next.previous = undefined;\n                this._head = next;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            item.next = undefined;\n            item.previous = this._tail;\n            this._tail.next = item;\n            this._tail = item;\n            this._state++;\n        }\n    }\n    toJSON() {\n        const data = [];\n        this.forEach((value, key) => {\n            data.push([key, value]);\n        });\n        return data;\n    }\n    fromJSON(data) {\n        this.clear();\n        for (const [key, value] of data) {\n            this.set(key, value);\n        }\n    }\n}\nexports.LinkedMap = LinkedMap;\nclass LRUCache extends LinkedMap {\n    constructor(limit, ratio = 1) {\n        super();\n        this._limit = limit;\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n    }\n    get limit() {\n        return this._limit;\n    }\n    set limit(limit) {\n        this._limit = limit;\n        this.checkTrim();\n    }\n    get ratio() {\n        return this._ratio;\n    }\n    set ratio(ratio) {\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n        this.checkTrim();\n    }\n    get(key, touch = Touch.AsNew) {\n        return super.get(key, touch);\n    }\n    peek(key) {\n        return super.get(key, Touch.None);\n    }\n    set(key, value) {\n        super.set(key, value, Touch.Last);\n        this.checkTrim();\n        return this;\n    }\n    checkTrim() {\n        if (this.size > this._limit) {\n            this.trimOld(Math.round(this._limit * this._ratio));\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Disposable = void 0;\nvar Disposable;\n(function (Disposable) {\n    function create(func) {\n        return {\n            dispose: func\n        };\n    }\n    Disposable.create = create;\n})(Disposable || (exports.Disposable = Disposable = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet _ral;\nfunction RAL() {\n    if (_ral === undefined) {\n        throw new Error(`No runtime abstraction layer installed`);\n    }\n    return _ral;\n}\n(function (RAL) {\n    function install(ral) {\n        if (ral === undefined) {\n            throw new Error(`No runtime abstraction layer provided`);\n        }\n        _ral = ral;\n    }\n    RAL.install = install;\n})(RAL || (RAL = {}));\nexports.default = RAL;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Emitter = exports.Event = void 0;\nconst ral_1 = require(\"./ral\");\nvar Event;\n(function (Event) {\n    const _disposable = { dispose() { } };\n    Event.None = function () { return _disposable; };\n})(Event || (exports.Event = Event = {}));\nclass CallbackList {\n    add(callback, context = null, bucket) {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts.push(context);\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n    remove(callback, context = null) {\n        if (!this._callbacks) {\n            return;\n        }\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0, len = this._callbacks.length; i < len; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts[i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts.splice(i, 1);\n                    return;\n                }\n                else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n    invoke(...args) {\n        if (!this._callbacks) {\n            return [];\n        }\n        const ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\n        for (let i = 0, len = callbacks.length; i < len; i++) {\n            try {\n                ret.push(callbacks[i].apply(contexts[i], args));\n            }\n            catch (e) {\n                // eslint-disable-next-line no-console\n                (0, ral_1.default)().console.error(e);\n            }\n        }\n        return ret;\n    }\n    isEmpty() {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n    dispose() {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\nclass Emitter {\n    constructor(_options) {\n        this._options = _options;\n    }\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event() {\n        if (!this._event) {\n            this._event = (listener, thisArgs, disposables) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const result = {\n                    dispose: () => {\n                        if (!this._callbacks) {\n                            // disposable is disposed after emitter is disposed.\n                            return;\n                        }\n                        this._callbacks.remove(listener, thisArgs);\n                        result.dispose = Emitter._noop;\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\n                            this._options.onLastListenerRemove(this);\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n                return result;\n            };\n        }\n        return this._event;\n    }\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event) {\n        if (this._callbacks) {\n            this._callbacks.invoke.call(this._callbacks, event);\n        }\n    }\n    dispose() {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n    }\n}\nexports.Emitter = Emitter;\nEmitter._noop = function () { };\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CancellationTokenSource = exports.CancellationToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nvar CancellationToken;\n(function (CancellationToken) {\n    CancellationToken.None = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: events_1.Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: events_1.Event.None\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate === CancellationToken.None\n            || candidate === CancellationToken.Cancelled\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\n    }\n    CancellationToken.is = is;\n})(CancellationToken || (exports.CancellationToken = CancellationToken = {}));\nconst shortcutEvent = Object.freeze(function (callback, context) {\n    const handle = (0, ral_1.default)().timer.setTimeout(callback.bind(context), 0);\n    return { dispose() { handle.dispose(); } };\n});\nclass MutableToken {\n    constructor() {\n        this._isCancelled = false;\n    }\n    cancel() {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this.dispose();\n            }\n        }\n    }\n    get isCancellationRequested() {\n        return this._isCancelled;\n    }\n    get onCancellationRequested() {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new events_1.Emitter();\n        }\n        return this._emitter.event;\n    }\n    dispose() {\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = undefined;\n        }\n    }\n}\nclass CancellationTokenSource {\n    get token() {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n    cancel() {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        }\n        else {\n            this._token.cancel();\n        }\n    }\n    dispose() {\n        if (!this._token) {\n            // ensure to initialize with an empty token if we had none\n            this._token = CancellationToken.None;\n        }\n        else if (this._token instanceof MutableToken) {\n            // actually dispose\n            this._token.dispose();\n        }\n    }\n}\nexports.CancellationTokenSource = CancellationTokenSource;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = void 0;\nconst cancellation_1 = require(\"./cancellation\");\nvar CancellationState;\n(function (CancellationState) {\n    CancellationState.Continue = 0;\n    CancellationState.Cancelled = 1;\n})(CancellationState || (CancellationState = {}));\nclass SharedArraySenderStrategy {\n    constructor() {\n        this.buffers = new Map();\n    }\n    enableCancellation(request) {\n        if (request.id === null) {\n            return;\n        }\n        const buffer = new SharedArrayBuffer(4);\n        const data = new Int32Array(buffer, 0, 1);\n        data[0] = CancellationState.Continue;\n        this.buffers.set(request.id, buffer);\n        request.$cancellationData = buffer;\n    }\n    async sendCancellation(_conn, id) {\n        const buffer = this.buffers.get(id);\n        if (buffer === undefined) {\n            return;\n        }\n        const data = new Int32Array(buffer, 0, 1);\n        Atomics.store(data, 0, CancellationState.Cancelled);\n    }\n    cleanup(id) {\n        this.buffers.delete(id);\n    }\n    dispose() {\n        this.buffers.clear();\n    }\n}\nexports.SharedArraySenderStrategy = SharedArraySenderStrategy;\nclass SharedArrayBufferCancellationToken {\n    constructor(buffer) {\n        this.data = new Int32Array(buffer, 0, 1);\n    }\n    get isCancellationRequested() {\n        return Atomics.load(this.data, 0) === CancellationState.Cancelled;\n    }\n    get onCancellationRequested() {\n        throw new Error(`Cancellation over SharedArrayBuffer doesn't support cancellation events`);\n    }\n}\nclass SharedArrayBufferCancellationTokenSource {\n    constructor(buffer) {\n        this.token = new SharedArrayBufferCancellationToken(buffer);\n    }\n    cancel() {\n    }\n    dispose() {\n    }\n}\nclass SharedArrayReceiverStrategy {\n    constructor() {\n        this.kind = 'request';\n    }\n    createCancellationTokenSource(request) {\n        const buffer = request.$cancellationData;\n        if (buffer === undefined) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n        return new SharedArrayBufferCancellationTokenSource(buffer);\n    }\n}\nexports.SharedArrayReceiverStrategy = SharedArrayReceiverStrategy;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Semaphore = void 0;\nconst ral_1 = require(\"./ral\");\nclass Semaphore {\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        (0, ral_1.default)().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`To many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nconst semaphore_1 = require(\"./semaphore\");\nvar MessageReader;\n(function (MessageReader) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\n    }\n    MessageReader.is = is;\n})(MessageReader || (exports.MessageReader = MessageReader = {}));\nclass AbstractMessageReader {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n        this.partialMessageEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error) {\n        this.errorEmitter.fire(this.asError(error));\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    get onPartialMessage() {\n        return this.partialMessageEmitter.event;\n    }\n    firePartialMessage(info) {\n        this.partialMessageEmitter.fire(info);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageReader = AbstractMessageReader;\nvar ResolvedMessageReaderOptions;\n(function (ResolvedMessageReaderOptions) {\n    function fromOptions(options) {\n        let charset;\n        let result;\n        let contentDecoder;\n        const contentDecoders = new Map();\n        let contentTypeDecoder;\n        const contentTypeDecoders = new Map();\n        if (options === undefined || typeof options === 'string') {\n            charset = options ?? 'utf-8';\n        }\n        else {\n            charset = options.charset ?? 'utf-8';\n            if (options.contentDecoder !== undefined) {\n                contentDecoder = options.contentDecoder;\n                contentDecoders.set(contentDecoder.name, contentDecoder);\n            }\n            if (options.contentDecoders !== undefined) {\n                for (const decoder of options.contentDecoders) {\n                    contentDecoders.set(decoder.name, decoder);\n                }\n            }\n            if (options.contentTypeDecoder !== undefined) {\n                contentTypeDecoder = options.contentTypeDecoder;\n                contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n            }\n            if (options.contentTypeDecoders !== undefined) {\n                for (const decoder of options.contentTypeDecoders) {\n                    contentTypeDecoders.set(decoder.name, decoder);\n                }\n            }\n        }\n        if (contentTypeDecoder === undefined) {\n            contentTypeDecoder = (0, ral_1.default)().applicationJson.decoder;\n            contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n        }\n        return { charset, contentDecoder, contentDecoders, contentTypeDecoder, contentTypeDecoders };\n    }\n    ResolvedMessageReaderOptions.fromOptions = fromOptions;\n})(ResolvedMessageReaderOptions || (ResolvedMessageReaderOptions = {}));\nclass ReadableStreamMessageReader extends AbstractMessageReader {\n    constructor(readable, options) {\n        super();\n        this.readable = readable;\n        this.options = ResolvedMessageReaderOptions.fromOptions(options);\n        this.buffer = (0, ral_1.default)().messageBuffer.create(this.options.charset);\n        this._partialMessageTimeout = 10000;\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.readSemaphore = new semaphore_1.Semaphore(1);\n    }\n    set partialMessageTimeout(timeout) {\n        this._partialMessageTimeout = timeout;\n    }\n    get partialMessageTimeout() {\n        return this._partialMessageTimeout;\n    }\n    listen(callback) {\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.partialMessageTimer = undefined;\n        this.callback = callback;\n        const result = this.readable.onData((data) => {\n            this.onData(data);\n        });\n        this.readable.onError((error) => this.fireError(error));\n        this.readable.onClose(() => this.fireClose());\n        return result;\n    }\n    onData(data) {\n        try {\n            this.buffer.append(data);\n            while (true) {\n                if (this.nextMessageLength === -1) {\n                    const headers = this.buffer.tryReadHeaders(true);\n                    if (!headers) {\n                        return;\n                    }\n                    const contentLength = headers.get('content-length');\n                    if (!contentLength) {\n                        this.fireError(new Error(`Header must provide a Content-Length property.\\n${JSON.stringify(Object.fromEntries(headers))}`));\n                        return;\n                    }\n                    const length = parseInt(contentLength);\n                    if (isNaN(length)) {\n                        this.fireError(new Error(`Content-Length value must be a number. Got ${contentLength}`));\n                        return;\n                    }\n                    this.nextMessageLength = length;\n                }\n                const body = this.buffer.tryReadBody(this.nextMessageLength);\n                if (body === undefined) {\n                    /** We haven't received the full message yet. */\n                    this.setPartialMessageTimer();\n                    return;\n                }\n                this.clearPartialMessageTimer();\n                this.nextMessageLength = -1;\n                // Make sure that we convert one received message after the\n                // other. Otherwise it could happen that a decoding of a second\n                // smaller message finished before the decoding of a first larger\n                // message and then we would deliver the second message first.\n                this.readSemaphore.lock(async () => {\n                    const bytes = this.options.contentDecoder !== undefined\n                        ? await this.options.contentDecoder.decode(body)\n                        : body;\n                    const message = await this.options.contentTypeDecoder.decode(bytes, this.options);\n                    this.callback(message);\n                }).catch((error) => {\n                    this.fireError(error);\n                });\n            }\n        }\n        catch (error) {\n            this.fireError(error);\n        }\n    }\n    clearPartialMessageTimer() {\n        if (this.partialMessageTimer) {\n            this.partialMessageTimer.dispose();\n            this.partialMessageTimer = undefined;\n        }\n    }\n    setPartialMessageTimer() {\n        this.clearPartialMessageTimer();\n        if (this._partialMessageTimeout <= 0) {\n            return;\n        }\n        this.partialMessageTimer = (0, ral_1.default)().timer.setTimeout((token, timeout) => {\n            this.partialMessageTimer = undefined;\n            if (token === this.messageToken) {\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\n                this.setPartialMessageTimer();\n            }\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\n    }\n}\nexports.ReadableStreamMessageReader = ReadableStreamMessageReader;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst semaphore_1 = require(\"./semaphore\");\nconst events_1 = require(\"./events\");\nconst ContentLength = 'Content-Length: ';\nconst CRLF = '\\r\\n';\nvar MessageWriter;\n(function (MessageWriter) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\n            Is.func(candidate.onError) && Is.func(candidate.write);\n    }\n    MessageWriter.is = is;\n})(MessageWriter || (exports.MessageWriter = MessageWriter = {}));\nclass AbstractMessageWriter {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error, message, count) {\n        this.errorEmitter.fire([this.asError(error), message, count]);\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageWriter = AbstractMessageWriter;\nvar ResolvedMessageWriterOptions;\n(function (ResolvedMessageWriterOptions) {\n    function fromOptions(options) {\n        if (options === undefined || typeof options === 'string') {\n            return { charset: options ?? 'utf-8', contentTypeEncoder: (0, ral_1.default)().applicationJson.encoder };\n        }\n        else {\n            return { charset: options.charset ?? 'utf-8', contentEncoder: options.contentEncoder, contentTypeEncoder: options.contentTypeEncoder ?? (0, ral_1.default)().applicationJson.encoder };\n        }\n    }\n    ResolvedMessageWriterOptions.fromOptions = fromOptions;\n})(ResolvedMessageWriterOptions || (ResolvedMessageWriterOptions = {}));\nclass WriteableStreamMessageWriter extends AbstractMessageWriter {\n    constructor(writable, options) {\n        super();\n        this.writable = writable;\n        this.options = ResolvedMessageWriterOptions.fromOptions(options);\n        this.errorCount = 0;\n        this.writeSemaphore = new semaphore_1.Semaphore(1);\n        this.writable.onError((error) => this.fireError(error));\n        this.writable.onClose(() => this.fireClose());\n    }\n    async write(msg) {\n        return this.writeSemaphore.lock(async () => {\n            const payload = this.options.contentTypeEncoder.encode(msg, this.options).then((buffer) => {\n                if (this.options.contentEncoder !== undefined) {\n                    return this.options.contentEncoder.encode(buffer);\n                }\n                else {\n                    return buffer;\n                }\n            });\n            return payload.then((buffer) => {\n                const headers = [];\n                headers.push(ContentLength, buffer.byteLength.toString(), CRLF);\n                headers.push(CRLF);\n                return this.doWrite(msg, headers, buffer);\n            }, (error) => {\n                this.fireError(error);\n                throw error;\n            });\n        });\n    }\n    async doWrite(msg, headers, data) {\n        try {\n            await this.writable.write(headers.join(''), 'ascii');\n            return this.writable.write(data);\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n        this.writable.end();\n    }\n}\nexports.WriteableStreamMessageWriter = WriteableStreamMessageWriter;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractMessageBuffer = void 0;\nconst CR = 13;\nconst LF = 10;\nconst CRLF = '\\r\\n';\nclass AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        this._encoding = encoding;\n        this._chunks = [];\n        this._totalLength = 0;\n    }\n    get encoding() {\n        return this._encoding;\n    }\n    append(chunk) {\n        const toAppend = typeof chunk === 'string' ? this.fromString(chunk, this._encoding) : chunk;\n        this._chunks.push(toAppend);\n        this._totalLength += toAppend.byteLength;\n    }\n    tryReadHeaders(lowerCaseKeys = false) {\n        if (this._chunks.length === 0) {\n            return undefined;\n        }\n        let state = 0;\n        let chunkIndex = 0;\n        let offset = 0;\n        let chunkBytesRead = 0;\n        row: while (chunkIndex < this._chunks.length) {\n            const chunk = this._chunks[chunkIndex];\n            offset = 0;\n            column: while (offset < chunk.length) {\n                const value = chunk[offset];\n                switch (value) {\n                    case CR:\n                        switch (state) {\n                            case 0:\n                                state = 1;\n                                break;\n                            case 2:\n                                state = 3;\n                                break;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    case LF:\n                        switch (state) {\n                            case 1:\n                                state = 2;\n                                break;\n                            case 3:\n                                state = 4;\n                                offset++;\n                                break row;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    default:\n                        state = 0;\n                }\n                offset++;\n            }\n            chunkBytesRead += chunk.byteLength;\n            chunkIndex++;\n        }\n        if (state !== 4) {\n            return undefined;\n        }\n        // The buffer contains the two CRLF at the end. So we will\n        // have two empty lines after the split at the end as well.\n        const buffer = this._read(chunkBytesRead + offset);\n        const result = new Map();\n        const headers = this.toString(buffer, 'ascii').split(CRLF);\n        if (headers.length < 2) {\n            return result;\n        }\n        for (let i = 0; i < headers.length - 2; i++) {\n            const header = headers[i];\n            const index = header.indexOf(':');\n            if (index === -1) {\n                throw new Error(`Message header must separate key and value using ':'\\n${header}`);\n            }\n            const key = header.substr(0, index);\n            const value = header.substr(index + 1).trim();\n            result.set(lowerCaseKeys ? key.toLowerCase() : key, value);\n        }\n        return result;\n    }\n    tryReadBody(length) {\n        if (this._totalLength < length) {\n            return undefined;\n        }\n        return this._read(length);\n    }\n    get numberOfBytes() {\n        return this._totalLength;\n    }\n    _read(byteCount) {\n        if (byteCount === 0) {\n            return this.emptyBuffer();\n        }\n        if (byteCount > this._totalLength) {\n            throw new Error(`Cannot read so many bytes!`);\n        }\n        if (this._chunks[0].byteLength === byteCount) {\n            // super fast path, precisely first chunk must be returned\n            const chunk = this._chunks[0];\n            this._chunks.shift();\n            this._totalLength -= byteCount;\n            return this.asNative(chunk);\n        }\n        if (this._chunks[0].byteLength > byteCount) {\n            // fast path, the reading is entirely within the first chunk\n            const chunk = this._chunks[0];\n            const result = this.asNative(chunk, byteCount);\n            this._chunks[0] = chunk.slice(byteCount);\n            this._totalLength -= byteCount;\n            return result;\n        }\n        const result = this.allocNative(byteCount);\n        let resultOffset = 0;\n        let chunkIndex = 0;\n        while (byteCount > 0) {\n            const chunk = this._chunks[chunkIndex];\n            if (chunk.byteLength > byteCount) {\n                // this chunk will survive\n                const chunkPart = chunk.slice(0, byteCount);\n                result.set(chunkPart, resultOffset);\n                resultOffset += byteCount;\n                this._chunks[chunkIndex] = chunk.slice(byteCount);\n                this._totalLength -= byteCount;\n                byteCount -= byteCount;\n            }\n            else {\n                // this chunk will be entirely read\n                result.set(chunk, resultOffset);\n                resultOffset += chunk.byteLength;\n                this._chunks.shift();\n                this._totalLength -= chunk.byteLength;\n                byteCount -= chunk.byteLength;\n            }\n        }\n        return result;\n    }\n}\nexports.AbstractMessageBuffer = AbstractMessageBuffer;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.ConnectionOptions = exports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.RequestCancellationReceiverStrategy = exports.IdCancellationReceiverStrategy = exports.ConnectionStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.Trace = exports.NullLogger = exports.ProgressType = exports.ProgressToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst messages_1 = require(\"./messages\");\nconst linkedMap_1 = require(\"./linkedMap\");\nconst events_1 = require(\"./events\");\nconst cancellation_1 = require(\"./cancellation\");\nvar CancelNotification;\n(function (CancelNotification) {\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\n})(CancelNotification || (CancelNotification = {}));\nvar ProgressToken;\n(function (ProgressToken) {\n    function is(value) {\n        return typeof value === 'string' || typeof value === 'number';\n    }\n    ProgressToken.is = is;\n})(ProgressToken || (exports.ProgressToken = ProgressToken = {}));\nvar ProgressNotification;\n(function (ProgressNotification) {\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\n})(ProgressNotification || (ProgressNotification = {}));\nclass ProgressType {\n    constructor() {\n    }\n}\nexports.ProgressType = ProgressType;\nvar StarRequestHandler;\n(function (StarRequestHandler) {\n    function is(value) {\n        return Is.func(value);\n    }\n    StarRequestHandler.is = is;\n})(StarRequestHandler || (StarRequestHandler = {}));\nexports.NullLogger = Object.freeze({\n    error: () => { },\n    warn: () => { },\n    info: () => { },\n    log: () => { }\n});\nvar Trace;\n(function (Trace) {\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\n    Trace[Trace[\"Compact\"] = 2] = \"Compact\";\n    Trace[Trace[\"Verbose\"] = 3] = \"Verbose\";\n})(Trace || (exports.Trace = Trace = {}));\nvar TraceValues;\n(function (TraceValues) {\n    /**\n     * Turn tracing off.\n     */\n    TraceValues.Off = 'off';\n    /**\n     * Trace messages only.\n     */\n    TraceValues.Messages = 'messages';\n    /**\n     * Compact message tracing.\n     */\n    TraceValues.Compact = 'compact';\n    /**\n     * Verbose message tracing.\n     */\n    TraceValues.Verbose = 'verbose';\n})(TraceValues || (exports.TraceValues = TraceValues = {}));\n(function (Trace) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return Trace.Off;\n        }\n        value = value.toLowerCase();\n        switch (value) {\n            case 'off':\n                return Trace.Off;\n            case 'messages':\n                return Trace.Messages;\n            case 'compact':\n                return Trace.Compact;\n            case 'verbose':\n                return Trace.Verbose;\n            default:\n                return Trace.Off;\n        }\n    }\n    Trace.fromString = fromString;\n    function toString(value) {\n        switch (value) {\n            case Trace.Off:\n                return 'off';\n            case Trace.Messages:\n                return 'messages';\n            case Trace.Compact:\n                return 'compact';\n            case Trace.Verbose:\n                return 'verbose';\n            default:\n                return 'off';\n        }\n    }\n    Trace.toString = toString;\n})(Trace || (exports.Trace = Trace = {}));\nvar TraceFormat;\n(function (TraceFormat) {\n    TraceFormat[\"Text\"] = \"text\";\n    TraceFormat[\"JSON\"] = \"json\";\n})(TraceFormat || (exports.TraceFormat = TraceFormat = {}));\n(function (TraceFormat) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return TraceFormat.Text;\n        }\n        value = value.toLowerCase();\n        if (value === 'json') {\n            return TraceFormat.JSON;\n        }\n        else {\n            return TraceFormat.Text;\n        }\n    }\n    TraceFormat.fromString = fromString;\n})(TraceFormat || (exports.TraceFormat = TraceFormat = {}));\nvar SetTraceNotification;\n(function (SetTraceNotification) {\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTrace');\n})(SetTraceNotification || (exports.SetTraceNotification = SetTraceNotification = {}));\nvar LogTraceNotification;\n(function (LogTraceNotification) {\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTrace');\n})(LogTraceNotification || (exports.LogTraceNotification = LogTraceNotification = {}));\nvar ConnectionErrors;\n(function (ConnectionErrors) {\n    /**\n     * The connection is closed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\n    /**\n     * The connection got disposed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\n    /**\n     * The connection is already in listening mode.\n     */\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\n})(ConnectionErrors || (exports.ConnectionErrors = ConnectionErrors = {}));\nclass ConnectionError extends Error {\n    constructor(code, message) {\n        super(message);\n        this.code = code;\n        Object.setPrototypeOf(this, ConnectionError.prototype);\n    }\n}\nexports.ConnectionError = ConnectionError;\nvar ConnectionStrategy;\n(function (ConnectionStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.cancelUndispatched);\n    }\n    ConnectionStrategy.is = is;\n})(ConnectionStrategy || (exports.ConnectionStrategy = ConnectionStrategy = {}));\nvar IdCancellationReceiverStrategy;\n(function (IdCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.kind === undefined || candidate.kind === 'id') && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    IdCancellationReceiverStrategy.is = is;\n})(IdCancellationReceiverStrategy || (exports.IdCancellationReceiverStrategy = IdCancellationReceiverStrategy = {}));\nvar RequestCancellationReceiverStrategy;\n(function (RequestCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && candidate.kind === 'request' && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    RequestCancellationReceiverStrategy.is = is;\n})(RequestCancellationReceiverStrategy || (exports.RequestCancellationReceiverStrategy = RequestCancellationReceiverStrategy = {}));\nvar CancellationReceiverStrategy;\n(function (CancellationReceiverStrategy) {\n    CancellationReceiverStrategy.Message = Object.freeze({\n        createCancellationTokenSource(_) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n    });\n    function is(value) {\n        return IdCancellationReceiverStrategy.is(value) || RequestCancellationReceiverStrategy.is(value);\n    }\n    CancellationReceiverStrategy.is = is;\n})(CancellationReceiverStrategy || (exports.CancellationReceiverStrategy = CancellationReceiverStrategy = {}));\nvar CancellationSenderStrategy;\n(function (CancellationSenderStrategy) {\n    CancellationSenderStrategy.Message = Object.freeze({\n        sendCancellation(conn, id) {\n            return conn.sendNotification(CancelNotification.type, { id });\n        },\n        cleanup(_) { }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.sendCancellation) && Is.func(candidate.cleanup);\n    }\n    CancellationSenderStrategy.is = is;\n})(CancellationSenderStrategy || (exports.CancellationSenderStrategy = CancellationSenderStrategy = {}));\nvar CancellationStrategy;\n(function (CancellationStrategy) {\n    CancellationStrategy.Message = Object.freeze({\n        receiver: CancellationReceiverStrategy.Message,\n        sender: CancellationSenderStrategy.Message\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && CancellationReceiverStrategy.is(candidate.receiver) && CancellationSenderStrategy.is(candidate.sender);\n    }\n    CancellationStrategy.is = is;\n})(CancellationStrategy || (exports.CancellationStrategy = CancellationStrategy = {}));\nvar MessageStrategy;\n(function (MessageStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.handleMessage);\n    }\n    MessageStrategy.is = is;\n})(MessageStrategy || (exports.MessageStrategy = MessageStrategy = {}));\nvar ConnectionOptions;\n(function (ConnectionOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (CancellationStrategy.is(candidate.cancellationStrategy) || ConnectionStrategy.is(candidate.connectionStrategy) || MessageStrategy.is(candidate.messageStrategy));\n    }\n    ConnectionOptions.is = is;\n})(ConnectionOptions || (exports.ConnectionOptions = ConnectionOptions = {}));\nvar ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\n})(ConnectionState || (ConnectionState = {}));\nfunction createMessageConnection(messageReader, messageWriter, _logger, options) {\n    const logger = _logger !== undefined ? _logger : exports.NullLogger;\n    let sequenceNumber = 0;\n    let notificationSequenceNumber = 0;\n    let unknownResponseSequenceNumber = 0;\n    const version = '2.0';\n    let starRequestHandler = undefined;\n    const requestHandlers = new Map();\n    let starNotificationHandler = undefined;\n    const notificationHandlers = new Map();\n    const progressHandlers = new Map();\n    let timer;\n    let messageQueue = new linkedMap_1.LinkedMap();\n    let responsePromises = new Map();\n    let knownCanceledRequests = new Set();\n    let requestTokens = new Map();\n    let trace = Trace.Off;\n    let traceFormat = TraceFormat.Text;\n    let tracer;\n    let state = ConnectionState.New;\n    const errorEmitter = new events_1.Emitter();\n    const closeEmitter = new events_1.Emitter();\n    const unhandledNotificationEmitter = new events_1.Emitter();\n    const unhandledProgressEmitter = new events_1.Emitter();\n    const disposeEmitter = new events_1.Emitter();\n    const cancellationStrategy = (options && options.cancellationStrategy) ? options.cancellationStrategy : CancellationStrategy.Message;\n    function createRequestQueueKey(id) {\n        if (id === null) {\n            throw new Error(`Can't send requests with id null since the response can't be correlated.`);\n        }\n        return 'req-' + id.toString();\n    }\n    function createResponseQueueKey(id) {\n        if (id === null) {\n            return 'res-unknown-' + (++unknownResponseSequenceNumber).toString();\n        }\n        else {\n            return 'res-' + id.toString();\n        }\n    }\n    function createNotificationQueueKey() {\n        return 'not-' + (++notificationSequenceNumber).toString();\n    }\n    function addMessageToQueue(queue, message) {\n        if (messages_1.Message.isRequest(message)) {\n            queue.set(createRequestQueueKey(message.id), message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            queue.set(createResponseQueueKey(message.id), message);\n        }\n        else {\n            queue.set(createNotificationQueueKey(), message);\n        }\n    }\n    function cancelUndispatched(_message) {\n        return undefined;\n    }\n    function isListening() {\n        return state === ConnectionState.Listening;\n    }\n    function isClosed() {\n        return state === ConnectionState.Closed;\n    }\n    function isDisposed() {\n        return state === ConnectionState.Disposed;\n    }\n    function closeHandler() {\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\n            state = ConnectionState.Closed;\n            closeEmitter.fire(undefined);\n        }\n        // If the connection is disposed don't sent close events.\n    }\n    function readErrorHandler(error) {\n        errorEmitter.fire([error, undefined, undefined]);\n    }\n    function writeErrorHandler(data) {\n        errorEmitter.fire(data);\n    }\n    messageReader.onClose(closeHandler);\n    messageReader.onError(readErrorHandler);\n    messageWriter.onClose(closeHandler);\n    messageWriter.onError(writeErrorHandler);\n    function triggerMessageQueue() {\n        if (timer || messageQueue.size === 0) {\n            return;\n        }\n        timer = (0, ral_1.default)().timer.setImmediate(() => {\n            timer = undefined;\n            processMessageQueue();\n        });\n    }\n    function handleMessage(message) {\n        if (messages_1.Message.isRequest(message)) {\n            handleRequest(message);\n        }\n        else if (messages_1.Message.isNotification(message)) {\n            handleNotification(message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            handleResponse(message);\n        }\n        else {\n            handleInvalidMessage(message);\n        }\n    }\n    function processMessageQueue() {\n        if (messageQueue.size === 0) {\n            return;\n        }\n        const message = messageQueue.shift();\n        try {\n            const messageStrategy = options?.messageStrategy;\n            if (MessageStrategy.is(messageStrategy)) {\n                messageStrategy.handleMessage(message, handleMessage);\n            }\n            else {\n                handleMessage(message);\n            }\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    }\n    const callback = (message) => {\n        try {\n            // We have received a cancellation message. Check if the message is still in the queue\n            // and cancel it if allowed to do so.\n            if (messages_1.Message.isNotification(message) && message.method === CancelNotification.type.method) {\n                const cancelId = message.params.id;\n                const key = createRequestQueueKey(cancelId);\n                const toCancel = messageQueue.get(key);\n                if (messages_1.Message.isRequest(toCancel)) {\n                    const strategy = options?.connectionStrategy;\n                    const response = (strategy && strategy.cancelUndispatched) ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\n                    if (response && (response.error !== undefined || response.result !== undefined)) {\n                        messageQueue.delete(key);\n                        requestTokens.delete(cancelId);\n                        response.id = toCancel.id;\n                        traceSendingResponse(response, message.method, Date.now());\n                        messageWriter.write(response).catch(() => logger.error(`Sending response for canceled message failed.`));\n                        return;\n                    }\n                }\n                const cancellationToken = requestTokens.get(cancelId);\n                // The request is already running. Cancel the token\n                if (cancellationToken !== undefined) {\n                    cancellationToken.cancel();\n                    traceReceivedNotification(message);\n                    return;\n                }\n                else {\n                    // Remember the cancel but still queue the message to\n                    // clean up state in process message.\n                    knownCanceledRequests.add(cancelId);\n                }\n            }\n            addMessageToQueue(messageQueue, message);\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    };\n    function handleRequest(requestMessage) {\n        if (isDisposed()) {\n            // we return here silently since we fired an event when the\n            // connection got disposed.\n            return;\n        }\n        function reply(resultOrError, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id\n            };\n            if (resultOrError instanceof messages_1.ResponseError) {\n                message.error = resultOrError.toJson();\n            }\n            else {\n                message.result = resultOrError === undefined ? null : resultOrError;\n            }\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replyError(error, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                error: error.toJson()\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replySuccess(result, method, startTime) {\n            // The JSON RPC defines that a response must either have a result or an error\n            // So we can't treat undefined as a valid response result.\n            if (result === undefined) {\n                result = null;\n            }\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                result: result\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        traceReceivedRequest(requestMessage);\n        const element = requestHandlers.get(requestMessage.method);\n        let type;\n        let requestHandler;\n        if (element) {\n            type = element.type;\n            requestHandler = element.handler;\n        }\n        const startTime = Date.now();\n        if (requestHandler || starRequestHandler) {\n            const tokenKey = requestMessage.id ?? String(Date.now()); //\n            const cancellationSource = IdCancellationReceiverStrategy.is(cancellationStrategy.receiver)\n                ? cancellationStrategy.receiver.createCancellationTokenSource(tokenKey)\n                : cancellationStrategy.receiver.createCancellationTokenSource(requestMessage);\n            if (requestMessage.id !== null && knownCanceledRequests.has(requestMessage.id)) {\n                cancellationSource.cancel();\n            }\n            if (requestMessage.id !== null) {\n                requestTokens.set(tokenKey, cancellationSource);\n            }\n            try {\n                let handlerResult;\n                if (requestHandler) {\n                    if (requestMessage.params === undefined) {\n                        if (type !== undefined && type.numberOfParams !== 0) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines ${type.numberOfParams} params but received none.`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(cancellationSource.token);\n                    }\n                    else if (Array.isArray(requestMessage.params)) {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byName) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by name but received parameters by position`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(...requestMessage.params, cancellationSource.token);\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by position but received parameters by name`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(requestMessage.params, cancellationSource.token);\n                    }\n                }\n                else if (starRequestHandler) {\n                    handlerResult = starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\n                }\n                const promise = handlerResult;\n                if (!handlerResult) {\n                    requestTokens.delete(tokenKey);\n                    replySuccess(handlerResult, requestMessage.method, startTime);\n                }\n                else if (promise.then) {\n                    promise.then((resultOrError) => {\n                        requestTokens.delete(tokenKey);\n                        reply(resultOrError, requestMessage.method, startTime);\n                    }, error => {\n                        requestTokens.delete(tokenKey);\n                        if (error instanceof messages_1.ResponseError) {\n                            replyError(error, requestMessage.method, startTime);\n                        }\n                        else if (error && Is.string(error.message)) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                        }\n                        else {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                        }\n                    });\n                }\n                else {\n                    requestTokens.delete(tokenKey);\n                    reply(handlerResult, requestMessage.method, startTime);\n                }\n            }\n            catch (error) {\n                requestTokens.delete(tokenKey);\n                if (error instanceof messages_1.ResponseError) {\n                    reply(error, requestMessage.method, startTime);\n                }\n                else if (error && Is.string(error.message)) {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                }\n                else {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                }\n            }\n        }\n        else {\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\n        }\n    }\n    function handleResponse(responseMessage) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        if (responseMessage.id === null) {\n            if (responseMessage.error) {\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\n            }\n            else {\n                logger.error(`Received response message without id. No further error information provided.`);\n            }\n        }\n        else {\n            const key = responseMessage.id;\n            const responsePromise = responsePromises.get(key);\n            traceReceivedResponse(responseMessage, responsePromise);\n            if (responsePromise !== undefined) {\n                responsePromises.delete(key);\n                try {\n                    if (responseMessage.error) {\n                        const error = responseMessage.error;\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\n                    }\n                    else if (responseMessage.result !== undefined) {\n                        responsePromise.resolve(responseMessage.result);\n                    }\n                    else {\n                        throw new Error('Should never happen.');\n                    }\n                }\n                catch (error) {\n                    if (error.message) {\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\n                    }\n                    else {\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\n                    }\n                }\n            }\n        }\n    }\n    function handleNotification(message) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        let type = undefined;\n        let notificationHandler;\n        if (message.method === CancelNotification.type.method) {\n            const cancelId = message.params.id;\n            knownCanceledRequests.delete(cancelId);\n            traceReceivedNotification(message);\n            return;\n        }\n        else {\n            const element = notificationHandlers.get(message.method);\n            if (element) {\n                notificationHandler = element.handler;\n                type = element.type;\n            }\n        }\n        if (notificationHandler || starNotificationHandler) {\n            try {\n                traceReceivedNotification(message);\n                if (notificationHandler) {\n                    if (message.params === undefined) {\n                        if (type !== undefined) {\n                            if (type.numberOfParams !== 0 && type.parameterStructures !== messages_1.ParameterStructures.byName) {\n                                logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received none.`);\n                            }\n                        }\n                        notificationHandler();\n                    }\n                    else if (Array.isArray(message.params)) {\n                        // There are JSON-RPC libraries that send progress message as positional params although\n                        // specified as named. So convert them if this is the case.\n                        const params = message.params;\n                        if (message.method === ProgressNotification.type.method && params.length === 2 && ProgressToken.is(params[0])) {\n                            notificationHandler({ token: params[0], value: params[1] });\n                        }\n                        else {\n                            if (type !== undefined) {\n                                if (type.parameterStructures === messages_1.ParameterStructures.byName) {\n                                    logger.error(`Notification ${message.method} defines parameters by name but received parameters by position`);\n                                }\n                                if (type.numberOfParams !== message.params.length) {\n                                    logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received ${params.length} arguments`);\n                                }\n                            }\n                            notificationHandler(...params);\n                        }\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            logger.error(`Notification ${message.method} defines parameters by position but received parameters by name`);\n                        }\n                        notificationHandler(message.params);\n                    }\n                }\n                else if (starNotificationHandler) {\n                    starNotificationHandler(message.method, message.params);\n                }\n            }\n            catch (error) {\n                if (error.message) {\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\n                }\n                else {\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\n                }\n            }\n        }\n        else {\n            unhandledNotificationEmitter.fire(message);\n        }\n    }\n    function handleInvalidMessage(message) {\n        if (!message) {\n            logger.error('Received empty message.');\n            return;\n        }\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\n        // Test whether we find an id to reject the promise\n        const responseMessage = message;\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\n            const key = responseMessage.id;\n            const responseHandler = responsePromises.get(key);\n            if (responseHandler) {\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\n            }\n        }\n    }\n    function stringifyTrace(params) {\n        if (params === undefined || params === null) {\n            return undefined;\n        }\n        switch (trace) {\n            case Trace.Verbose:\n                return JSON.stringify(params, null, 4);\n            case Trace.Compact:\n                return JSON.stringify(params);\n            default:\n                return undefined;\n        }\n    }\n    function traceSendingRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n            }\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('send-request', message);\n        }\n    }\n    function traceSendingNotification(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Sending notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('send-notification', message);\n        }\n    }\n    function traceSendingResponse(message, method, startTime) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\n        }\n        else {\n            logLSPMessage('send-response', message);\n        }\n    }\n    function traceReceivedRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n            }\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('receive-request', message);\n        }\n    }\n    function traceReceivedNotification(message) {\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Received notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('receive-notification', message);\n        }\n    }\n    function traceReceivedResponse(message, responsePromise) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            if (responsePromise) {\n                const error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\n            }\n            else {\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\n            }\n        }\n        else {\n            logLSPMessage('receive-response', message);\n        }\n    }\n    function logLSPMessage(type, message) {\n        if (!tracer || trace === Trace.Off) {\n            return;\n        }\n        const lspMessage = {\n            isLSPMessage: true,\n            type,\n            message,\n            timestamp: Date.now()\n        };\n        tracer.log(lspMessage);\n    }\n    function throwIfClosedOrDisposed() {\n        if (isClosed()) {\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\n        }\n        if (isDisposed()) {\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\n        }\n    }\n    function throwIfListening() {\n        if (isListening()) {\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\n        }\n    }\n    function throwIfNotListening() {\n        if (!isListening()) {\n            throw new Error('Call listen() first.');\n        }\n    }\n    function undefinedToNull(param) {\n        if (param === undefined) {\n            return null;\n        }\n        else {\n            return param;\n        }\n    }\n    function nullToUndefined(param) {\n        if (param === null) {\n            return undefined;\n        }\n        else {\n            return param;\n        }\n    }\n    function isNamedParam(param) {\n        return param !== undefined && param !== null && !Array.isArray(param) && typeof param === 'object';\n    }\n    function computeSingleParam(parameterStructures, param) {\n        switch (parameterStructures) {\n            case messages_1.ParameterStructures.auto:\n                if (isNamedParam(param)) {\n                    return nullToUndefined(param);\n                }\n                else {\n                    return [undefinedToNull(param)];\n                }\n            case messages_1.ParameterStructures.byName:\n                if (!isNamedParam(param)) {\n                    throw new Error(`Received parameters by name but param is not an object literal.`);\n                }\n                return nullToUndefined(param);\n            case messages_1.ParameterStructures.byPosition:\n                return [undefinedToNull(param)];\n            default:\n                throw new Error(`Unknown parameter structure ${parameterStructures.toString()}`);\n        }\n    }\n    function computeMessageParams(type, params) {\n        let result;\n        const numberOfParams = type.numberOfParams;\n        switch (numberOfParams) {\n            case 0:\n                result = undefined;\n                break;\n            case 1:\n                result = computeSingleParam(type.parameterStructures, params[0]);\n                break;\n            default:\n                result = [];\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\n                    result.push(undefinedToNull(params[i]));\n                }\n                if (params.length < numberOfParams) {\n                    for (let i = params.length; i < numberOfParams; i++) {\n                        result.push(null);\n                    }\n                }\n                break;\n        }\n        return result;\n    }\n    const connection = {\n        sendNotification: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            let method;\n            let messageParams;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' notification parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n            }\n            const notificationMessage = {\n                jsonrpc: version,\n                method: method,\n                params: messageParams\n            };\n            traceSendingNotification(notificationMessage);\n            return messageWriter.write(notificationMessage).catch((error) => {\n                logger.error(`Sending notification failed.`);\n                throw error;\n            });\n        },\n        onNotification: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method;\n            if (Is.func(type)) {\n                starNotificationHandler = type;\n            }\n            else if (handler) {\n                if (Is.string(type)) {\n                    method = type;\n                    notificationHandlers.set(type, { type: undefined, handler });\n                }\n                else {\n                    method = type.method;\n                    notificationHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method !== undefined) {\n                        notificationHandlers.delete(method);\n                    }\n                    else {\n                        starNotificationHandler = undefined;\n                    }\n                }\n            };\n        },\n        onProgress: (_type, token, handler) => {\n            if (progressHandlers.has(token)) {\n                throw new Error(`Progress handler for token ${token} already registered`);\n            }\n            progressHandlers.set(token, handler);\n            return {\n                dispose: () => {\n                    progressHandlers.delete(token);\n                }\n            };\n        },\n        sendProgress: (_type, token, value) => {\n            // This should not await but simple return to ensure that we don't have another\n            // async scheduling. Otherwise one send could overtake another send.\n            return connection.sendNotification(ProgressNotification.type, { token, value });\n        },\n        onUnhandledProgress: unhandledProgressEmitter.event,\n        sendRequest: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            throwIfNotListening();\n            let method;\n            let messageParams;\n            let token = undefined;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                const last = args[args.length - 1];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                if (cancellation_1.CancellationToken.is(last)) {\n                    paramEnd = paramEnd - 1;\n                    token = last;\n                }\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' request parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n                const numberOfParams = type.numberOfParams;\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\n            }\n            const id = sequenceNumber++;\n            let disposable;\n            if (token) {\n                disposable = token.onCancellationRequested(() => {\n                    const p = cancellationStrategy.sender.sendCancellation(connection, id);\n                    if (p === undefined) {\n                        logger.log(`Received no promise from cancellation strategy when cancelling id ${id}`);\n                        return Promise.resolve();\n                    }\n                    else {\n                        return p.catch(() => {\n                            logger.log(`Sending cancellation messages for id ${id} failed`);\n                        });\n                    }\n                });\n            }\n            const requestMessage = {\n                jsonrpc: version,\n                id: id,\n                method: method,\n                params: messageParams\n            };\n            traceSendingRequest(requestMessage);\n            if (typeof cancellationStrategy.sender.enableCancellation === 'function') {\n                cancellationStrategy.sender.enableCancellation(requestMessage);\n            }\n            return new Promise(async (resolve, reject) => {\n                const resolveWithCleanup = (r) => {\n                    resolve(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const rejectWithCleanup = (r) => {\n                    reject(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const responsePromise = { method: method, timerStart: Date.now(), resolve: resolveWithCleanup, reject: rejectWithCleanup };\n                try {\n                    await messageWriter.write(requestMessage);\n                    responsePromises.set(id, responsePromise);\n                }\n                catch (error) {\n                    logger.error(`Sending request failed.`);\n                    // Writing the message failed. So we need to reject the promise.\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, error.message ? error.message : 'Unknown reason'));\n                    throw error;\n                }\n            });\n        },\n        onRequest: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method = null;\n            if (StarRequestHandler.is(type)) {\n                method = undefined;\n                starRequestHandler = type;\n            }\n            else if (Is.string(type)) {\n                method = null;\n                if (handler !== undefined) {\n                    method = type;\n                    requestHandlers.set(type, { handler: handler, type: undefined });\n                }\n            }\n            else {\n                if (handler !== undefined) {\n                    method = type.method;\n                    requestHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method === null) {\n                        return;\n                    }\n                    if (method !== undefined) {\n                        requestHandlers.delete(method);\n                    }\n                    else {\n                        starRequestHandler = undefined;\n                    }\n                }\n            };\n        },\n        hasPendingResponse: () => {\n            return responsePromises.size > 0;\n        },\n        trace: async (_value, _tracer, sendNotificationOrTraceOptions) => {\n            let _sendNotification = false;\n            let _traceFormat = TraceFormat.Text;\n            if (sendNotificationOrTraceOptions !== undefined) {\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\n                    _sendNotification = sendNotificationOrTraceOptions;\n                }\n                else {\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\n                }\n            }\n            trace = _value;\n            traceFormat = _traceFormat;\n            if (trace === Trace.Off) {\n                tracer = undefined;\n            }\n            else {\n                tracer = _tracer;\n            }\n            if (_sendNotification && !isClosed() && !isDisposed()) {\n                await connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\n            }\n        },\n        onError: errorEmitter.event,\n        onClose: closeEmitter.event,\n        onUnhandledNotification: unhandledNotificationEmitter.event,\n        onDispose: disposeEmitter.event,\n        end: () => {\n            messageWriter.end();\n        },\n        dispose: () => {\n            if (isDisposed()) {\n                return;\n            }\n            state = ConnectionState.Disposed;\n            disposeEmitter.fire(undefined);\n            const error = new messages_1.ResponseError(messages_1.ErrorCodes.PendingResponseRejected, 'Pending response rejected since connection got disposed');\n            for (const promise of responsePromises.values()) {\n                promise.reject(error);\n            }\n            responsePromises = new Map();\n            requestTokens = new Map();\n            knownCanceledRequests = new Set();\n            messageQueue = new linkedMap_1.LinkedMap();\n            // Test for backwards compatibility\n            if (Is.func(messageWriter.dispose)) {\n                messageWriter.dispose();\n            }\n            if (Is.func(messageReader.dispose)) {\n                messageReader.dispose();\n            }\n        },\n        listen: () => {\n            throwIfClosedOrDisposed();\n            throwIfListening();\n            state = ConnectionState.Listening;\n            messageReader.listen(callback);\n        },\n        inspect: () => {\n            // eslint-disable-next-line no-console\n            (0, ral_1.default)().console.log('inspect');\n        }\n    };\n    connection.onNotification(LogTraceNotification.type, (params) => {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        const verbose = trace === Trace.Verbose || trace === Trace.Compact;\n        tracer.log(params.message, verbose ? params.verbose : undefined);\n    });\n    connection.onNotification(ProgressNotification.type, (params) => {\n        const handler = progressHandlers.get(params.token);\n        if (handler) {\n            handler(params.value);\n        }\n        else {\n            unhandledProgressEmitter.fire(params);\n        }\n    });\n    return connection;\n}\nexports.createMessageConnection = createMessageConnection;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressType = exports.ProgressToken = exports.createMessageConnection = exports.NullLogger = exports.ConnectionOptions = exports.ConnectionStrategy = exports.AbstractMessageBuffer = exports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = exports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = exports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = exports.CancellationToken = exports.CancellationTokenSource = exports.Emitter = exports.Event = exports.Disposable = exports.LRUCache = exports.Touch = exports.LinkedMap = exports.ParameterStructures = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.ErrorCodes = exports.ResponseError = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType0 = exports.RequestType = exports.Message = exports.RAL = void 0;\nexports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.Trace = void 0;\nconst messages_1 = require(\"./messages\");\nObject.defineProperty(exports, \"Message\", { enumerable: true, get: function () { return messages_1.Message; } });\nObject.defineProperty(exports, \"RequestType\", { enumerable: true, get: function () { return messages_1.RequestType; } });\nObject.defineProperty(exports, \"RequestType0\", { enumerable: true, get: function () { return messages_1.RequestType0; } });\nObject.defineProperty(exports, \"RequestType1\", { enumerable: true, get: function () { return messages_1.RequestType1; } });\nObject.defineProperty(exports, \"RequestType2\", { enumerable: true, get: function () { return messages_1.RequestType2; } });\nObject.defineProperty(exports, \"RequestType3\", { enumerable: true, get: function () { return messages_1.RequestType3; } });\nObject.defineProperty(exports, \"RequestType4\", { enumerable: true, get: function () { return messages_1.RequestType4; } });\nObject.defineProperty(exports, \"RequestType5\", { enumerable: true, get: function () { return messages_1.RequestType5; } });\nObject.defineProperty(exports, \"RequestType6\", { enumerable: true, get: function () { return messages_1.RequestType6; } });\nObject.defineProperty(exports, \"RequestType7\", { enumerable: true, get: function () { return messages_1.RequestType7; } });\nObject.defineProperty(exports, \"RequestType8\", { enumerable: true, get: function () { return messages_1.RequestType8; } });\nObject.defineProperty(exports, \"RequestType9\", { enumerable: true, get: function () { return messages_1.RequestType9; } });\nObject.defineProperty(exports, \"ResponseError\", { enumerable: true, get: function () { return messages_1.ResponseError; } });\nObject.defineProperty(exports, \"ErrorCodes\", { enumerable: true, get: function () { return messages_1.ErrorCodes; } });\nObject.defineProperty(exports, \"NotificationType\", { enumerable: true, get: function () { return messages_1.NotificationType; } });\nObject.defineProperty(exports, \"NotificationType0\", { enumerable: true, get: function () { return messages_1.NotificationType0; } });\nObject.defineProperty(exports, \"NotificationType1\", { enumerable: true, get: function () { return messages_1.NotificationType1; } });\nObject.defineProperty(exports, \"NotificationType2\", { enumerable: true, get: function () { return messages_1.NotificationType2; } });\nObject.defineProperty(exports, \"NotificationType3\", { enumerable: true, get: function () { return messages_1.NotificationType3; } });\nObject.defineProperty(exports, \"NotificationType4\", { enumerable: true, get: function () { return messages_1.NotificationType4; } });\nObject.defineProperty(exports, \"NotificationType5\", { enumerable: true, get: function () { return messages_1.NotificationType5; } });\nObject.defineProperty(exports, \"NotificationType6\", { enumerable: true, get: function () { return messages_1.NotificationType6; } });\nObject.defineProperty(exports, \"NotificationType7\", { enumerable: true, get: function () { return messages_1.NotificationType7; } });\nObject.defineProperty(exports, \"NotificationType8\", { enumerable: true, get: function () { return messages_1.NotificationType8; } });\nObject.defineProperty(exports, \"NotificationType9\", { enumerable: true, get: function () { return messages_1.NotificationType9; } });\nObject.defineProperty(exports, \"ParameterStructures\", { enumerable: true, get: function () { return messages_1.ParameterStructures; } });\nconst linkedMap_1 = require(\"./linkedMap\");\nObject.defineProperty(exports, \"LinkedMap\", { enumerable: true, get: function () { return linkedMap_1.LinkedMap; } });\nObject.defineProperty(exports, \"LRUCache\", { enumerable: true, get: function () { return linkedMap_1.LRUCache; } });\nObject.defineProperty(exports, \"Touch\", { enumerable: true, get: function () { return linkedMap_1.Touch; } });\nconst disposable_1 = require(\"./disposable\");\nObject.defineProperty(exports, \"Disposable\", { enumerable: true, get: function () { return disposable_1.Disposable; } });\nconst events_1 = require(\"./events\");\nObject.defineProperty(exports, \"Event\", { enumerable: true, get: function () { return events_1.Event; } });\nObject.defineProperty(exports, \"Emitter\", { enumerable: true, get: function () { return events_1.Emitter; } });\nconst cancellation_1 = require(\"./cancellation\");\nObject.defineProperty(exports, \"CancellationTokenSource\", { enumerable: true, get: function () { return cancellation_1.CancellationTokenSource; } });\nObject.defineProperty(exports, \"CancellationToken\", { enumerable: true, get: function () { return cancellation_1.CancellationToken; } });\nconst sharedArrayCancellation_1 = require(\"./sharedArrayCancellation\");\nObject.defineProperty(exports, \"SharedArraySenderStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArraySenderStrategy; } });\nObject.defineProperty(exports, \"SharedArrayReceiverStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArrayReceiverStrategy; } });\nconst messageReader_1 = require(\"./messageReader\");\nObject.defineProperty(exports, \"MessageReader\", { enumerable: true, get: function () { return messageReader_1.MessageReader; } });\nObject.defineProperty(exports, \"AbstractMessageReader\", { enumerable: true, get: function () { return messageReader_1.AbstractMessageReader; } });\nObject.defineProperty(exports, \"ReadableStreamMessageReader\", { enumerable: true, get: function () { return messageReader_1.ReadableStreamMessageReader; } });\nconst messageWriter_1 = require(\"./messageWriter\");\nObject.defineProperty(exports, \"MessageWriter\", { enumerable: true, get: function () { return messageWriter_1.MessageWriter; } });\nObject.defineProperty(exports, \"AbstractMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.AbstractMessageWriter; } });\nObject.defineProperty(exports, \"WriteableStreamMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.WriteableStreamMessageWriter; } });\nconst messageBuffer_1 = require(\"./messageBuffer\");\nObject.defineProperty(exports, \"AbstractMessageBuffer\", { enumerable: true, get: function () { return messageBuffer_1.AbstractMessageBuffer; } });\nconst connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"ConnectionStrategy\", { enumerable: true, get: function () { return connection_1.ConnectionStrategy; } });\nObject.defineProperty(exports, \"ConnectionOptions\", { enumerable: true, get: function () { return connection_1.ConnectionOptions; } });\nObject.defineProperty(exports, \"NullLogger\", { enumerable: true, get: function () { return connection_1.NullLogger; } });\nObject.defineProperty(exports, \"createMessageConnection\", { enumerable: true, get: function () { return connection_1.createMessageConnection; } });\nObject.defineProperty(exports, \"ProgressToken\", { enumerable: true, get: function () { return connection_1.ProgressToken; } });\nObject.defineProperty(exports, \"ProgressType\", { enumerable: true, get: function () { return connection_1.ProgressType; } });\nObject.defineProperty(exports, \"Trace\", { enumerable: true, get: function () { return connection_1.Trace; } });\nObject.defineProperty(exports, \"TraceValues\", { enumerable: true, get: function () { return connection_1.TraceValues; } });\nObject.defineProperty(exports, \"TraceFormat\", { enumerable: true, get: function () { return connection_1.TraceFormat; } });\nObject.defineProperty(exports, \"SetTraceNotification\", { enumerable: true, get: function () { return connection_1.SetTraceNotification; } });\nObject.defineProperty(exports, \"LogTraceNotification\", { enumerable: true, get: function () { return connection_1.LogTraceNotification; } });\nObject.defineProperty(exports, \"ConnectionErrors\", { enumerable: true, get: function () { return connection_1.ConnectionErrors; } });\nObject.defineProperty(exports, \"ConnectionError\", { enumerable: true, get: function () { return connection_1.ConnectionError; } });\nObject.defineProperty(exports, \"CancellationReceiverStrategy\", { enumerable: true, get: function () { return connection_1.CancellationReceiverStrategy; } });\nObject.defineProperty(exports, \"CancellationSenderStrategy\", { enumerable: true, get: function () { return connection_1.CancellationSenderStrategy; } });\nObject.defineProperty(exports, \"CancellationStrategy\", { enumerable: true, get: function () { return connection_1.CancellationStrategy; } });\nObject.defineProperty(exports, \"MessageStrategy\", { enumerable: true, get: function () { return connection_1.MessageStrategy; } });\nconst ral_1 = require(\"./ral\");\nexports.RAL = ral_1.default;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst api_1 = require(\"../common/api\");\nclass MessageBuffer extends api_1.AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        super(encoding);\n        this.asciiDecoder = new TextDecoder('ascii');\n    }\n    emptyBuffer() {\n        return MessageBuffer.emptyBuffer;\n    }\n    fromString(value, _encoding) {\n        return (new TextEncoder()).encode(value);\n    }\n    toString(value, encoding) {\n        if (encoding === 'ascii') {\n            return this.asciiDecoder.decode(value);\n        }\n        else {\n            return (new TextDecoder(encoding)).decode(value);\n        }\n    }\n    asNative(buffer, length) {\n        if (length === undefined) {\n            return buffer;\n        }\n        else {\n            return buffer.slice(0, length);\n        }\n    }\n    allocNative(length) {\n        return new Uint8Array(length);\n    }\n}\nMessageBuffer.emptyBuffer = new Uint8Array(0);\nclass ReadableStreamWrapper {\n    constructor(socket) {\n        this.socket = socket;\n        this._onData = new api_1.Emitter();\n        this._messageListener = (event) => {\n            const blob = event.data;\n            blob.arrayBuffer().then((buffer) => {\n                this._onData.fire(new Uint8Array(buffer));\n            }, () => {\n                (0, api_1.RAL)().console.error(`Converting blob to array buffer failed.`);\n            });\n        };\n        this.socket.addEventListener('message', this._messageListener);\n    }\n    onClose(listener) {\n        this.socket.addEventListener('close', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('close', listener));\n    }\n    onError(listener) {\n        this.socket.addEventListener('error', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('error', listener));\n    }\n    onEnd(listener) {\n        this.socket.addEventListener('end', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('end', listener));\n    }\n    onData(listener) {\n        return this._onData.event(listener);\n    }\n}\nclass WritableStreamWrapper {\n    constructor(socket) {\n        this.socket = socket;\n    }\n    onClose(listener) {\n        this.socket.addEventListener('close', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('close', listener));\n    }\n    onError(listener) {\n        this.socket.addEventListener('error', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('error', listener));\n    }\n    onEnd(listener) {\n        this.socket.addEventListener('end', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('end', listener));\n    }\n    write(data, encoding) {\n        if (typeof data === 'string') {\n            if (encoding !== undefined && encoding !== 'utf-8') {\n                throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${encoding}`);\n            }\n            this.socket.send(data);\n        }\n        else {\n            this.socket.send(data);\n        }\n        return Promise.resolve();\n    }\n    end() {\n        this.socket.close();\n    }\n}\nconst _textEncoder = new TextEncoder();\nconst _ril = Object.freeze({\n    messageBuffer: Object.freeze({\n        create: (encoding) => new MessageBuffer(encoding)\n    }),\n    applicationJson: Object.freeze({\n        encoder: Object.freeze({\n            name: 'application/json',\n            encode: (msg, options) => {\n                if (options.charset !== 'utf-8') {\n                    throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${options.charset}`);\n                }\n                return Promise.resolve(_textEncoder.encode(JSON.stringify(msg, undefined, 0)));\n            }\n        }),\n        decoder: Object.freeze({\n            name: 'application/json',\n            decode: (buffer, options) => {\n                if (!(buffer instanceof Uint8Array)) {\n                    throw new Error(`In a Browser environments only Uint8Arrays are supported.`);\n                }\n                return Promise.resolve(JSON.parse(new TextDecoder(options.charset).decode(buffer)));\n            }\n        })\n    }),\n    stream: Object.freeze({\n        asReadableStream: (socket) => new ReadableStreamWrapper(socket),\n        asWritableStream: (socket) => new WritableStreamWrapper(socket)\n    }),\n    console: console,\n    timer: Object.freeze({\n        setTimeout(callback, ms, ...args) {\n            const handle = setTimeout(callback, ms, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setImmediate(callback, ...args) {\n            const handle = setTimeout(callback, 0, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setInterval(callback, ms, ...args) {\n            const handle = setInterval(callback, ms, ...args);\n            return { dispose: () => clearInterval(handle) };\n        },\n    })\n});\nfunction RIL() {\n    return _ril;\n}\n(function (RIL) {\n    function install() {\n        api_1.RAL.install(_ril);\n    }\n    RIL.install = install;\n})(RIL || (RIL = {}));\nexports.default = RIL;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.BrowserMessageWriter = exports.BrowserMessageReader = void 0;\nconst ril_1 = require(\"./ril\");\n// Install the browser runtime abstract.\nril_1.default.install();\nconst api_1 = require(\"../common/api\");\n__exportStar(require(\"../common/api\"), exports);\nclass BrowserMessageReader extends api_1.AbstractMessageReader {\n    constructor(port) {\n        super();\n        this._onData = new api_1.Emitter();\n        this._messageListener = (event) => {\n            this._onData.fire(event.data);\n        };\n        port.addEventListener('error', (event) => this.fireError(event));\n        port.onmessage = this._messageListener;\n    }\n    listen(callback) {\n        return this._onData.event(callback);\n    }\n}\nexports.BrowserMessageReader = BrowserMessageReader;\nclass BrowserMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(port) {\n        super();\n        this.port = port;\n        this.errorCount = 0;\n        port.addEventListener('error', (event) => this.fireError(event));\n    }\n    write(msg) {\n        try {\n            this.port.postMessage(msg);\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.BrowserMessageWriter = BrowserMessageWriter;\nfunction createMessageConnection(reader, writer, logger, options) {\n    if (logger === undefined) {\n        logger = api_1.NullLogger;\n    }\n    if (api_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, api_1.createMessageConnection)(reader, writer, logger, options);\n}\nexports.createMessageConnection = createMessageConnection;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/browser/main');","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProtocolNotificationType = exports.ProtocolNotificationType0 = exports.ProtocolRequestType = exports.ProtocolRequestType0 = exports.RegistrationType = exports.MessageDirection = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nvar MessageDirection;\n(function (MessageDirection) {\n    MessageDirection[\"clientToServer\"] = \"clientToServer\";\n    MessageDirection[\"serverToClient\"] = \"serverToClient\";\n    MessageDirection[\"both\"] = \"both\";\n})(MessageDirection || (exports.MessageDirection = MessageDirection = {}));\nclass RegistrationType {\n    constructor(method) {\n        this.method = method;\n    }\n}\nexports.RegistrationType = RegistrationType;\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolRequestType0 = ProtocolRequestType0;\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolRequestType = ProtocolRequestType;\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolNotificationType = ProtocolNotificationType;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.objectLiteral = exports.typedArray = exports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction objectLiteral(value) {\n    // Strictly speaking class instances pass this check as well. Since the LSP\n    // doesn't use classes we ignore this for now. If we do we need to add something\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n    return value !== null && typeof value === 'object';\n}\nexports.objectLiteral = objectLiteral;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImplementationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the implementation locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Definition} or a Thenable that resolves to such.\n */\nvar ImplementationRequest;\n(function (ImplementationRequest) {\n    ImplementationRequest.method = 'textDocument/implementation';\n    ImplementationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\n})(ImplementationRequest || (exports.ImplementationRequest = ImplementationRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeDefinitionRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Definition} or a Thenable that resolves to such.\n */\nvar TypeDefinitionRequest;\n(function (TypeDefinitionRequest) {\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\n    TypeDefinitionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\n})(TypeDefinitionRequest || (exports.TypeDefinitionRequest = TypeDefinitionRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidChangeWorkspaceFoldersNotification = exports.WorkspaceFoldersRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\n */\nvar WorkspaceFoldersRequest;\n(function (WorkspaceFoldersRequest) {\n    WorkspaceFoldersRequest.method = 'workspace/workspaceFolders';\n    WorkspaceFoldersRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0(WorkspaceFoldersRequest.method);\n})(WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = WorkspaceFoldersRequest = {}));\n/**\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\n * folder configuration changes.\n */\nvar DidChangeWorkspaceFoldersNotification;\n(function (DidChangeWorkspaceFoldersNotification) {\n    DidChangeWorkspaceFoldersNotification.method = 'workspace/didChangeWorkspaceFolders';\n    DidChangeWorkspaceFoldersNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType(DidChangeWorkspaceFoldersNotification.method);\n})(DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = DidChangeWorkspaceFoldersNotification = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigurationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n//---- Get Configuration request ----\n/**\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\n * configuration setting.\n *\n * This pull model replaces the old push model were the client signaled configuration change via an\n * event. If the server still needs to react to configuration changes (since the server caches the\n * result of `workspace/configuration` requests) the server should register for an empty configuration\n * change event and empty the cache if such an event is received.\n */\nvar ConfigurationRequest;\n(function (ConfigurationRequest) {\n    ConfigurationRequest.method = 'workspace/configuration';\n    ConfigurationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType(ConfigurationRequest.method);\n})(ConfigurationRequest || (exports.ConfigurationRequest = ConfigurationRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorPresentationRequest = exports.DocumentColorRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to list all color symbols found in a given text document. The request's\n * parameter is of type {@link DocumentColorParams} the\n * response is of type {@link ColorInformation ColorInformation[]} or a Thenable\n * that resolves to such.\n */\nvar DocumentColorRequest;\n(function (DocumentColorRequest) {\n    DocumentColorRequest.method = 'textDocument/documentColor';\n    DocumentColorRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\n})(DocumentColorRequest || (exports.DocumentColorRequest = DocumentColorRequest = {}));\n/**\n * A request to list all presentation for a color. The request's\n * parameter is of type {@link ColorPresentationParams} the\n * response is of type {@link ColorInformation ColorInformation[]} or a Thenable\n * that resolves to such.\n */\nvar ColorPresentationRequest;\n(function (ColorPresentationRequest) {\n    ColorPresentationRequest.method = 'textDocument/colorPresentation';\n    ColorPresentationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType(ColorPresentationRequest.method);\n})(ColorPresentationRequest || (exports.ColorPresentationRequest = ColorPresentationRequest = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FoldingRangeRefreshRequest = exports.FoldingRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide folding ranges in a document. The request's\n * parameter is of type {@link FoldingRangeParams}, the\n * response is of type {@link FoldingRangeList} or a Thenable\n * that resolves to such.\n */\nvar FoldingRangeRequest;\n(function (FoldingRangeRequest) {\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\n    FoldingRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\n})(FoldingRangeRequest || (exports.FoldingRangeRequest = FoldingRangeRequest = {}));\n/**\n * @since 3.18.0\n * @proposed\n */\nvar FoldingRangeRefreshRequest;\n(function (FoldingRangeRefreshRequest) {\n    FoldingRangeRefreshRequest.method = `workspace/foldingRange/refresh`;\n    FoldingRangeRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    FoldingRangeRefreshRequest.type = new messages_1.ProtocolRequestType0(FoldingRangeRefreshRequest.method);\n})(FoldingRangeRefreshRequest || (exports.FoldingRangeRefreshRequest = FoldingRangeRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DeclarationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Declaration} or a typed array of {@link DeclarationLink}\n * or a Thenable that resolves to such.\n */\nvar DeclarationRequest;\n(function (DeclarationRequest) {\n    DeclarationRequest.method = 'textDocument/declaration';\n    DeclarationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\n})(DeclarationRequest || (exports.DeclarationRequest = DeclarationRequest = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectionRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide selection ranges in a document. The request's\n * parameter is of type {@link SelectionRangeParams}, the\n * response is of type {@link SelectionRange SelectionRange[]} or a Thenable\n * that resolves to such.\n */\nvar SelectionRangeRequest;\n(function (SelectionRangeRequest) {\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\n    SelectionRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\n})(SelectionRangeRequest || (exports.SelectionRangeRequest = SelectionRangeRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkDoneProgressCancelNotification = exports.WorkDoneProgressCreateRequest = exports.WorkDoneProgress = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\nvar WorkDoneProgress;\n(function (WorkDoneProgress) {\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\n    function is(value) {\n        return value === WorkDoneProgress.type;\n    }\n    WorkDoneProgress.is = is;\n})(WorkDoneProgress || (exports.WorkDoneProgress = WorkDoneProgress = {}));\n/**\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\n * reporting from the server.\n */\nvar WorkDoneProgressCreateRequest;\n(function (WorkDoneProgressCreateRequest) {\n    WorkDoneProgressCreateRequest.method = 'window/workDoneProgress/create';\n    WorkDoneProgressCreateRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType(WorkDoneProgressCreateRequest.method);\n})(WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = WorkDoneProgressCreateRequest = {}));\n/**\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\n * initiated on the server side.\n */\nvar WorkDoneProgressCancelNotification;\n(function (WorkDoneProgressCancelNotification) {\n    WorkDoneProgressCancelNotification.method = 'window/workDoneProgress/cancel';\n    WorkDoneProgressCancelNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType(WorkDoneProgressCancelNotification.method);\n})(WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = WorkDoneProgressCancelNotification = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox, Microsoft and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CallHierarchyOutgoingCallsRequest = exports.CallHierarchyIncomingCallsRequest = exports.CallHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `CallHierarchyItem` in a document at a given position.\n * Can be used as an input to an incoming or outgoing call hierarchy.\n *\n * @since 3.16.0\n */\nvar CallHierarchyPrepareRequest;\n(function (CallHierarchyPrepareRequest) {\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\n    CallHierarchyPrepareRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\n})(CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = CallHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyIncomingCallsRequest;\n(function (CallHierarchyIncomingCallsRequest) {\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\n    CallHierarchyIncomingCallsRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\n})(CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = CallHierarchyIncomingCallsRequest = {}));\n/**\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyOutgoingCallsRequest;\n(function (CallHierarchyOutgoingCallsRequest) {\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\n    CallHierarchyOutgoingCallsRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\n})(CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = CallHierarchyOutgoingCallsRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticTokensRefreshRequest = exports.SemanticTokensRangeRequest = exports.SemanticTokensDeltaRequest = exports.SemanticTokensRequest = exports.SemanticTokensRegistrationType = exports.TokenFormat = void 0;\nconst messages_1 = require(\"./messages\");\n//------- 'textDocument/semanticTokens' -----\nvar TokenFormat;\n(function (TokenFormat) {\n    TokenFormat.Relative = 'relative';\n})(TokenFormat || (exports.TokenFormat = TokenFormat = {}));\nvar SemanticTokensRegistrationType;\n(function (SemanticTokensRegistrationType) {\n    SemanticTokensRegistrationType.method = 'textDocument/semanticTokens';\n    SemanticTokensRegistrationType.type = new messages_1.RegistrationType(SemanticTokensRegistrationType.method);\n})(SemanticTokensRegistrationType || (exports.SemanticTokensRegistrationType = SemanticTokensRegistrationType = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRequest;\n(function (SemanticTokensRequest) {\n    SemanticTokensRequest.method = 'textDocument/semanticTokens/full';\n    SemanticTokensRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\n    SemanticTokensRequest.registrationMethod = SemanticTokensRegistrationType.method;\n})(SemanticTokensRequest || (exports.SemanticTokensRequest = SemanticTokensRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensDeltaRequest;\n(function (SemanticTokensDeltaRequest) {\n    SemanticTokensDeltaRequest.method = 'textDocument/semanticTokens/full/delta';\n    SemanticTokensDeltaRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensDeltaRequest.type = new messages_1.ProtocolRequestType(SemanticTokensDeltaRequest.method);\n    SemanticTokensDeltaRequest.registrationMethod = SemanticTokensRegistrationType.method;\n})(SemanticTokensDeltaRequest || (exports.SemanticTokensDeltaRequest = SemanticTokensDeltaRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRangeRequest;\n(function (SemanticTokensRangeRequest) {\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\n    SemanticTokensRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\n    SemanticTokensRangeRequest.registrationMethod = SemanticTokensRegistrationType.method;\n})(SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = SemanticTokensRangeRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRefreshRequest;\n(function (SemanticTokensRefreshRequest) {\n    SemanticTokensRefreshRequest.method = `workspace/semanticTokens/refresh`;\n    SemanticTokensRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    SemanticTokensRefreshRequest.type = new messages_1.ProtocolRequestType0(SemanticTokensRefreshRequest.method);\n})(SemanticTokensRefreshRequest || (exports.SemanticTokensRefreshRequest = SemanticTokensRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ShowDocumentRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to show a document. This request might open an\n * external program depending on the value of the URI to open.\n * For example a request to open `https://code.visualstudio.com/`\n * will very likely open the URI in a WEB browser.\n *\n * @since 3.16.0\n*/\nvar ShowDocumentRequest;\n(function (ShowDocumentRequest) {\n    ShowDocumentRequest.method = 'window/showDocument';\n    ShowDocumentRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowDocumentRequest.type = new messages_1.ProtocolRequestType(ShowDocumentRequest.method);\n})(ShowDocumentRequest || (exports.ShowDocumentRequest = ShowDocumentRequest = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkedEditingRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide ranges that can be edited together.\n *\n * @since 3.16.0\n */\nvar LinkedEditingRangeRequest;\n(function (LinkedEditingRangeRequest) {\n    LinkedEditingRangeRequest.method = 'textDocument/linkedEditingRange';\n    LinkedEditingRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    LinkedEditingRangeRequest.type = new messages_1.ProtocolRequestType(LinkedEditingRangeRequest.method);\n})(LinkedEditingRangeRequest || (exports.LinkedEditingRangeRequest = LinkedEditingRangeRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WillDeleteFilesRequest = exports.DidDeleteFilesNotification = exports.DidRenameFilesNotification = exports.WillRenameFilesRequest = exports.DidCreateFilesNotification = exports.WillCreateFilesRequest = exports.FileOperationPatternKind = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A pattern kind describing if a glob pattern matches a file a folder or\n * both.\n *\n * @since 3.16.0\n */\nvar FileOperationPatternKind;\n(function (FileOperationPatternKind) {\n    /**\n     * The pattern matches a file only.\n     */\n    FileOperationPatternKind.file = 'file';\n    /**\n     * The pattern matches a folder only.\n     */\n    FileOperationPatternKind.folder = 'folder';\n})(FileOperationPatternKind || (exports.FileOperationPatternKind = FileOperationPatternKind = {}));\n/**\n * The will create files request is sent from the client to the server before files are actually\n * created as long as the creation is triggered from within the client.\n *\n * The request can return a `WorkspaceEdit` which will be applied to workspace before the\n * files are created. Hence the `WorkspaceEdit` can not manipulate the content of the file\n * to be created.\n *\n * @since 3.16.0\n */\nvar WillCreateFilesRequest;\n(function (WillCreateFilesRequest) {\n    WillCreateFilesRequest.method = 'workspace/willCreateFiles';\n    WillCreateFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillCreateFilesRequest.type = new messages_1.ProtocolRequestType(WillCreateFilesRequest.method);\n})(WillCreateFilesRequest || (exports.WillCreateFilesRequest = WillCreateFilesRequest = {}));\n/**\n * The did create files notification is sent from the client to the server when\n * files were created from within the client.\n *\n * @since 3.16.0\n */\nvar DidCreateFilesNotification;\n(function (DidCreateFilesNotification) {\n    DidCreateFilesNotification.method = 'workspace/didCreateFiles';\n    DidCreateFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCreateFilesNotification.type = new messages_1.ProtocolNotificationType(DidCreateFilesNotification.method);\n})(DidCreateFilesNotification || (exports.DidCreateFilesNotification = DidCreateFilesNotification = {}));\n/**\n * The will rename files request is sent from the client to the server before files are actually\n * renamed as long as the rename is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar WillRenameFilesRequest;\n(function (WillRenameFilesRequest) {\n    WillRenameFilesRequest.method = 'workspace/willRenameFiles';\n    WillRenameFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillRenameFilesRequest.type = new messages_1.ProtocolRequestType(WillRenameFilesRequest.method);\n})(WillRenameFilesRequest || (exports.WillRenameFilesRequest = WillRenameFilesRequest = {}));\n/**\n * The did rename files notification is sent from the client to the server when\n * files were renamed from within the client.\n *\n * @since 3.16.0\n */\nvar DidRenameFilesNotification;\n(function (DidRenameFilesNotification) {\n    DidRenameFilesNotification.method = 'workspace/didRenameFiles';\n    DidRenameFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidRenameFilesNotification.type = new messages_1.ProtocolNotificationType(DidRenameFilesNotification.method);\n})(DidRenameFilesNotification || (exports.DidRenameFilesNotification = DidRenameFilesNotification = {}));\n/**\n * The will delete files request is sent from the client to the server before files are actually\n * deleted as long as the deletion is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar DidDeleteFilesNotification;\n(function (DidDeleteFilesNotification) {\n    DidDeleteFilesNotification.method = 'workspace/didDeleteFiles';\n    DidDeleteFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidDeleteFilesNotification.type = new messages_1.ProtocolNotificationType(DidDeleteFilesNotification.method);\n})(DidDeleteFilesNotification || (exports.DidDeleteFilesNotification = DidDeleteFilesNotification = {}));\n/**\n * The did delete files notification is sent from the client to the server when\n * files were deleted from within the client.\n *\n * @since 3.16.0\n */\nvar WillDeleteFilesRequest;\n(function (WillDeleteFilesRequest) {\n    WillDeleteFilesRequest.method = 'workspace/willDeleteFiles';\n    WillDeleteFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillDeleteFilesRequest.type = new messages_1.ProtocolRequestType(WillDeleteFilesRequest.method);\n})(WillDeleteFilesRequest || (exports.WillDeleteFilesRequest = WillDeleteFilesRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MonikerRequest = exports.MonikerKind = exports.UniquenessLevel = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * Moniker uniqueness level to define scope of the moniker.\n *\n * @since 3.16.0\n */\nvar UniquenessLevel;\n(function (UniquenessLevel) {\n    /**\n     * The moniker is only unique inside a document\n     */\n    UniquenessLevel.document = 'document';\n    /**\n     * The moniker is unique inside a project for which a dump got created\n     */\n    UniquenessLevel.project = 'project';\n    /**\n     * The moniker is unique inside the group to which a project belongs\n     */\n    UniquenessLevel.group = 'group';\n    /**\n     * The moniker is unique inside the moniker scheme.\n     */\n    UniquenessLevel.scheme = 'scheme';\n    /**\n     * The moniker is globally unique\n     */\n    UniquenessLevel.global = 'global';\n})(UniquenessLevel || (exports.UniquenessLevel = UniquenessLevel = {}));\n/**\n * The moniker kind.\n *\n * @since 3.16.0\n */\nvar MonikerKind;\n(function (MonikerKind) {\n    /**\n     * The moniker represent a symbol that is imported into a project\n     */\n    MonikerKind.$import = 'import';\n    /**\n     * The moniker represents a symbol that is exported from a project\n     */\n    MonikerKind.$export = 'export';\n    /**\n     * The moniker represents a symbol that is local to a project (e.g. a local\n     * variable of a function, a class not visible outside the project, ...)\n     */\n    MonikerKind.local = 'local';\n})(MonikerKind || (exports.MonikerKind = MonikerKind = {}));\n/**\n * A request to get the moniker of a symbol at a given text document position.\n * The request parameter is of type {@link TextDocumentPositionParams}.\n * The response is of type {@link Moniker Moniker[]} or `null`.\n */\nvar MonikerRequest;\n(function (MonikerRequest) {\n    MonikerRequest.method = 'textDocument/moniker';\n    MonikerRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    MonikerRequest.type = new messages_1.ProtocolRequestType(MonikerRequest.method);\n})(MonikerRequest || (exports.MonikerRequest = MonikerRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox, Microsoft and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHierarchySubtypesRequest = exports.TypeHierarchySupertypesRequest = exports.TypeHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `TypeHierarchyItem` in a document at a given position.\n * Can be used as an input to a subtypes or supertypes type hierarchy.\n *\n * @since 3.17.0\n */\nvar TypeHierarchyPrepareRequest;\n(function (TypeHierarchyPrepareRequest) {\n    TypeHierarchyPrepareRequest.method = 'textDocument/prepareTypeHierarchy';\n    TypeHierarchyPrepareRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(TypeHierarchyPrepareRequest.method);\n})(TypeHierarchyPrepareRequest || (exports.TypeHierarchyPrepareRequest = TypeHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the supertypes for a given `TypeHierarchyItem`.\n *\n * @since 3.17.0\n */\nvar TypeHierarchySupertypesRequest;\n(function (TypeHierarchySupertypesRequest) {\n    TypeHierarchySupertypesRequest.method = 'typeHierarchy/supertypes';\n    TypeHierarchySupertypesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchySupertypesRequest.type = new messages_1.ProtocolRequestType(TypeHierarchySupertypesRequest.method);\n})(TypeHierarchySupertypesRequest || (exports.TypeHierarchySupertypesRequest = TypeHierarchySupertypesRequest = {}));\n/**\n * A request to resolve the subtypes for a given `TypeHierarchyItem`.\n *\n * @since 3.17.0\n */\nvar TypeHierarchySubtypesRequest;\n(function (TypeHierarchySubtypesRequest) {\n    TypeHierarchySubtypesRequest.method = 'typeHierarchy/subtypes';\n    TypeHierarchySubtypesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchySubtypesRequest.type = new messages_1.ProtocolRequestType(TypeHierarchySubtypesRequest.method);\n})(TypeHierarchySubtypesRequest || (exports.TypeHierarchySubtypesRequest = TypeHierarchySubtypesRequest = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineValueRefreshRequest = exports.InlineValueRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inline values in a document. The request's parameter is of\n * type {@link InlineValueParams}, the response is of type\n * {@link InlineValue InlineValue[]} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlineValueRequest;\n(function (InlineValueRequest) {\n    InlineValueRequest.method = 'textDocument/inlineValue';\n    InlineValueRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlineValueRequest.type = new messages_1.ProtocolRequestType(InlineValueRequest.method);\n})(InlineValueRequest || (exports.InlineValueRequest = InlineValueRequest = {}));\n/**\n * @since 3.17.0\n */\nvar InlineValueRefreshRequest;\n(function (InlineValueRefreshRequest) {\n    InlineValueRefreshRequest.method = `workspace/inlineValue/refresh`;\n    InlineValueRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    InlineValueRefreshRequest.type = new messages_1.ProtocolRequestType0(InlineValueRefreshRequest.method);\n})(InlineValueRefreshRequest || (exports.InlineValueRefreshRequest = InlineValueRefreshRequest = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlayHintRefreshRequest = exports.InlayHintResolveRequest = exports.InlayHintRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inlay hints in a document. The request's parameter is of\n * type {@link InlayHintsParams}, the response is of type\n * {@link InlayHint InlayHint[]} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlayHintRequest;\n(function (InlayHintRequest) {\n    InlayHintRequest.method = 'textDocument/inlayHint';\n    InlayHintRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlayHintRequest.type = new messages_1.ProtocolRequestType(InlayHintRequest.method);\n})(InlayHintRequest || (exports.InlayHintRequest = InlayHintRequest = {}));\n/**\n * A request to resolve additional properties for an inlay hint.\n * The request's parameter is of type {@link InlayHint}, the response is\n * of type {@link InlayHint} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlayHintResolveRequest;\n(function (InlayHintResolveRequest) {\n    InlayHintResolveRequest.method = 'inlayHint/resolve';\n    InlayHintResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlayHintResolveRequest.type = new messages_1.ProtocolRequestType(InlayHintResolveRequest.method);\n})(InlayHintResolveRequest || (exports.InlayHintResolveRequest = InlayHintResolveRequest = {}));\n/**\n * @since 3.17.0\n */\nvar InlayHintRefreshRequest;\n(function (InlayHintRefreshRequest) {\n    InlayHintRefreshRequest.method = `workspace/inlayHint/refresh`;\n    InlayHintRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    InlayHintRefreshRequest.type = new messages_1.ProtocolRequestType0(InlayHintRefreshRequest.method);\n})(InlayHintRefreshRequest || (exports.InlayHintRefreshRequest = InlayHintRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticRefreshRequest = exports.WorkspaceDiagnosticRequest = exports.DocumentDiagnosticRequest = exports.DocumentDiagnosticReportKind = exports.DiagnosticServerCancellationData = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst Is = require(\"./utils/is\");\nconst messages_1 = require(\"./messages\");\n/**\n * @since 3.17.0\n */\nvar DiagnosticServerCancellationData;\n(function (DiagnosticServerCancellationData) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.retriggerRequest);\n    }\n    DiagnosticServerCancellationData.is = is;\n})(DiagnosticServerCancellationData || (exports.DiagnosticServerCancellationData = DiagnosticServerCancellationData = {}));\n/**\n * The document diagnostic report kinds.\n *\n * @since 3.17.0\n */\nvar DocumentDiagnosticReportKind;\n(function (DocumentDiagnosticReportKind) {\n    /**\n     * A diagnostic report with a full\n     * set of problems.\n     */\n    DocumentDiagnosticReportKind.Full = 'full';\n    /**\n     * A report indicating that the last\n     * returned report is still accurate.\n     */\n    DocumentDiagnosticReportKind.Unchanged = 'unchanged';\n})(DocumentDiagnosticReportKind || (exports.DocumentDiagnosticReportKind = DocumentDiagnosticReportKind = {}));\n/**\n * The document diagnostic request definition.\n *\n * @since 3.17.0\n */\nvar DocumentDiagnosticRequest;\n(function (DocumentDiagnosticRequest) {\n    DocumentDiagnosticRequest.method = 'textDocument/diagnostic';\n    DocumentDiagnosticRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentDiagnosticRequest.type = new messages_1.ProtocolRequestType(DocumentDiagnosticRequest.method);\n    DocumentDiagnosticRequest.partialResult = new vscode_jsonrpc_1.ProgressType();\n})(DocumentDiagnosticRequest || (exports.DocumentDiagnosticRequest = DocumentDiagnosticRequest = {}));\n/**\n * The workspace diagnostic request definition.\n *\n * @since 3.17.0\n */\nvar WorkspaceDiagnosticRequest;\n(function (WorkspaceDiagnosticRequest) {\n    WorkspaceDiagnosticRequest.method = 'workspace/diagnostic';\n    WorkspaceDiagnosticRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceDiagnosticRequest.type = new messages_1.ProtocolRequestType(WorkspaceDiagnosticRequest.method);\n    WorkspaceDiagnosticRequest.partialResult = new vscode_jsonrpc_1.ProgressType();\n})(WorkspaceDiagnosticRequest || (exports.WorkspaceDiagnosticRequest = WorkspaceDiagnosticRequest = {}));\n/**\n * The diagnostic refresh request definition.\n *\n * @since 3.17.0\n */\nvar DiagnosticRefreshRequest;\n(function (DiagnosticRefreshRequest) {\n    DiagnosticRefreshRequest.method = `workspace/diagnostic/refresh`;\n    DiagnosticRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    DiagnosticRefreshRequest.type = new messages_1.ProtocolRequestType0(DiagnosticRefreshRequest.method);\n})(DiagnosticRefreshRequest || (exports.DiagnosticRefreshRequest = DiagnosticRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidCloseNotebookDocumentNotification = exports.DidSaveNotebookDocumentNotification = exports.DidChangeNotebookDocumentNotification = exports.NotebookCellArrayChange = exports.DidOpenNotebookDocumentNotification = exports.NotebookDocumentSyncRegistrationType = exports.NotebookDocument = exports.NotebookCell = exports.ExecutionSummary = exports.NotebookCellKind = void 0;\nconst vscode_languageserver_types_1 = require(\"vscode-languageserver-types\");\nconst Is = require(\"./utils/is\");\nconst messages_1 = require(\"./messages\");\n/**\n * A notebook cell kind.\n *\n * @since 3.17.0\n */\nvar NotebookCellKind;\n(function (NotebookCellKind) {\n    /**\n     * A markup-cell is formatted source that is used for display.\n     */\n    NotebookCellKind.Markup = 1;\n    /**\n     * A code-cell is source code.\n     */\n    NotebookCellKind.Code = 2;\n    function is(value) {\n        return value === 1 || value === 2;\n    }\n    NotebookCellKind.is = is;\n})(NotebookCellKind || (exports.NotebookCellKind = NotebookCellKind = {}));\nvar ExecutionSummary;\n(function (ExecutionSummary) {\n    function create(executionOrder, success) {\n        const result = { executionOrder };\n        if (success === true || success === false) {\n            result.success = success;\n        }\n        return result;\n    }\n    ExecutionSummary.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && vscode_languageserver_types_1.uinteger.is(candidate.executionOrder) && (candidate.success === undefined || Is.boolean(candidate.success));\n    }\n    ExecutionSummary.is = is;\n    function equals(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        return one.executionOrder === other.executionOrder && one.success === other.success;\n    }\n    ExecutionSummary.equals = equals;\n})(ExecutionSummary || (exports.ExecutionSummary = ExecutionSummary = {}));\nvar NotebookCell;\n(function (NotebookCell) {\n    function create(kind, document) {\n        return { kind, document };\n    }\n    NotebookCell.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && NotebookCellKind.is(candidate.kind) && vscode_languageserver_types_1.DocumentUri.is(candidate.document) &&\n            (candidate.metadata === undefined || Is.objectLiteral(candidate.metadata));\n    }\n    NotebookCell.is = is;\n    function diff(one, two) {\n        const result = new Set();\n        if (one.document !== two.document) {\n            result.add('document');\n        }\n        if (one.kind !== two.kind) {\n            result.add('kind');\n        }\n        if (one.executionSummary !== two.executionSummary) {\n            result.add('executionSummary');\n        }\n        if ((one.metadata !== undefined || two.metadata !== undefined) && !equalsMetadata(one.metadata, two.metadata)) {\n            result.add('metadata');\n        }\n        if ((one.executionSummary !== undefined || two.executionSummary !== undefined) && !ExecutionSummary.equals(one.executionSummary, two.executionSummary)) {\n            result.add('executionSummary');\n        }\n        return result;\n    }\n    NotebookCell.diff = diff;\n    function equalsMetadata(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        if (typeof one !== typeof other) {\n            return false;\n        }\n        if (typeof one !== 'object') {\n            return false;\n        }\n        const oneArray = Array.isArray(one);\n        const otherArray = Array.isArray(other);\n        if (oneArray !== otherArray) {\n            return false;\n        }\n        if (oneArray && otherArray) {\n            if (one.length !== other.length) {\n                return false;\n            }\n            for (let i = 0; i < one.length; i++) {\n                if (!equalsMetadata(one[i], other[i])) {\n                    return false;\n                }\n            }\n        }\n        if (Is.objectLiteral(one) && Is.objectLiteral(other)) {\n            const oneKeys = Object.keys(one);\n            const otherKeys = Object.keys(other);\n            if (oneKeys.length !== otherKeys.length) {\n                return false;\n            }\n            oneKeys.sort();\n            otherKeys.sort();\n            if (!equalsMetadata(oneKeys, otherKeys)) {\n                return false;\n            }\n            for (let i = 0; i < oneKeys.length; i++) {\n                const prop = oneKeys[i];\n                if (!equalsMetadata(one[prop], other[prop])) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n})(NotebookCell || (exports.NotebookCell = NotebookCell = {}));\nvar NotebookDocument;\n(function (NotebookDocument) {\n    function create(uri, notebookType, version, cells) {\n        return { uri, notebookType, version, cells };\n    }\n    NotebookDocument.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.uri) && vscode_languageserver_types_1.integer.is(candidate.version) && Is.typedArray(candidate.cells, NotebookCell.is);\n    }\n    NotebookDocument.is = is;\n})(NotebookDocument || (exports.NotebookDocument = NotebookDocument = {}));\nvar NotebookDocumentSyncRegistrationType;\n(function (NotebookDocumentSyncRegistrationType) {\n    NotebookDocumentSyncRegistrationType.method = 'notebookDocument/sync';\n    NotebookDocumentSyncRegistrationType.messageDirection = messages_1.MessageDirection.clientToServer;\n    NotebookDocumentSyncRegistrationType.type = new messages_1.RegistrationType(NotebookDocumentSyncRegistrationType.method);\n})(NotebookDocumentSyncRegistrationType || (exports.NotebookDocumentSyncRegistrationType = NotebookDocumentSyncRegistrationType = {}));\n/**\n * A notification sent when a notebook opens.\n *\n * @since 3.17.0\n */\nvar DidOpenNotebookDocumentNotification;\n(function (DidOpenNotebookDocumentNotification) {\n    DidOpenNotebookDocumentNotification.method = 'notebookDocument/didOpen';\n    DidOpenNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidOpenNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenNotebookDocumentNotification.method);\n    DidOpenNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidOpenNotebookDocumentNotification || (exports.DidOpenNotebookDocumentNotification = DidOpenNotebookDocumentNotification = {}));\nvar NotebookCellArrayChange;\n(function (NotebookCellArrayChange) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && vscode_languageserver_types_1.uinteger.is(candidate.start) && vscode_languageserver_types_1.uinteger.is(candidate.deleteCount) && (candidate.cells === undefined || Is.typedArray(candidate.cells, NotebookCell.is));\n    }\n    NotebookCellArrayChange.is = is;\n    function create(start, deleteCount, cells) {\n        const result = { start, deleteCount };\n        if (cells !== undefined) {\n            result.cells = cells;\n        }\n        return result;\n    }\n    NotebookCellArrayChange.create = create;\n})(NotebookCellArrayChange || (exports.NotebookCellArrayChange = NotebookCellArrayChange = {}));\nvar DidChangeNotebookDocumentNotification;\n(function (DidChangeNotebookDocumentNotification) {\n    DidChangeNotebookDocumentNotification.method = 'notebookDocument/didChange';\n    DidChangeNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeNotebookDocumentNotification.method);\n    DidChangeNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidChangeNotebookDocumentNotification || (exports.DidChangeNotebookDocumentNotification = DidChangeNotebookDocumentNotification = {}));\n/**\n * A notification sent when a notebook document is saved.\n *\n * @since 3.17.0\n */\nvar DidSaveNotebookDocumentNotification;\n(function (DidSaveNotebookDocumentNotification) {\n    DidSaveNotebookDocumentNotification.method = 'notebookDocument/didSave';\n    DidSaveNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidSaveNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveNotebookDocumentNotification.method);\n    DidSaveNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidSaveNotebookDocumentNotification || (exports.DidSaveNotebookDocumentNotification = DidSaveNotebookDocumentNotification = {}));\n/**\n * A notification sent when a notebook closes.\n *\n * @since 3.17.0\n */\nvar DidCloseNotebookDocumentNotification;\n(function (DidCloseNotebookDocumentNotification) {\n    DidCloseNotebookDocumentNotification.method = 'notebookDocument/didClose';\n    DidCloseNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCloseNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseNotebookDocumentNotification.method);\n    DidCloseNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidCloseNotebookDocumentNotification || (exports.DidCloseNotebookDocumentNotification = DidCloseNotebookDocumentNotification = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineCompletionRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inline completions in a document. The request's parameter is of\n * type {@link InlineCompletionParams}, the response is of type\n * {@link InlineCompletion InlineCompletion[]} or a Thenable that resolves to such.\n *\n * @since 3.18.0\n * @proposed\n */\nvar InlineCompletionRequest;\n(function (InlineCompletionRequest) {\n    InlineCompletionRequest.method = 'textDocument/inlineCompletion';\n    InlineCompletionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlineCompletionRequest.type = new messages_1.ProtocolRequestType(InlineCompletionRequest.method);\n})(InlineCompletionRequest || (exports.InlineCompletionRequest = InlineCompletionRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceSymbolRequest = exports.CodeActionResolveRequest = exports.CodeActionRequest = exports.DocumentSymbolRequest = exports.DocumentHighlightRequest = exports.ReferencesRequest = exports.DefinitionRequest = exports.SignatureHelpRequest = exports.SignatureHelpTriggerKind = exports.HoverRequest = exports.CompletionResolveRequest = exports.CompletionRequest = exports.CompletionTriggerKind = exports.PublishDiagnosticsNotification = exports.WatchKind = exports.RelativePattern = exports.FileChangeType = exports.DidChangeWatchedFilesNotification = exports.WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentNotification = exports.TextDocumentSaveReason = exports.DidSaveTextDocumentNotification = exports.DidCloseTextDocumentNotification = exports.DidChangeTextDocumentNotification = exports.TextDocumentContentChangeEvent = exports.DidOpenTextDocumentNotification = exports.TextDocumentSyncKind = exports.TelemetryEventNotification = exports.LogMessageNotification = exports.ShowMessageRequest = exports.ShowMessageNotification = exports.MessageType = exports.DidChangeConfigurationNotification = exports.ExitNotification = exports.ShutdownRequest = exports.InitializedNotification = exports.InitializeErrorCodes = exports.InitializeRequest = exports.WorkDoneProgressOptions = exports.TextDocumentRegistrationOptions = exports.StaticRegistrationOptions = exports.PositionEncodingKind = exports.FailureHandlingKind = exports.ResourceOperationKind = exports.UnregistrationRequest = exports.RegistrationRequest = exports.DocumentSelector = exports.NotebookCellTextDocumentFilter = exports.NotebookDocumentFilter = exports.TextDocumentFilter = void 0;\nexports.MonikerRequest = exports.MonikerKind = exports.UniquenessLevel = exports.WillDeleteFilesRequest = exports.DidDeleteFilesNotification = exports.WillRenameFilesRequest = exports.DidRenameFilesNotification = exports.WillCreateFilesRequest = exports.DidCreateFilesNotification = exports.FileOperationPatternKind = exports.LinkedEditingRangeRequest = exports.ShowDocumentRequest = exports.SemanticTokensRegistrationType = exports.SemanticTokensRefreshRequest = exports.SemanticTokensRangeRequest = exports.SemanticTokensDeltaRequest = exports.SemanticTokensRequest = exports.TokenFormat = exports.CallHierarchyPrepareRequest = exports.CallHierarchyOutgoingCallsRequest = exports.CallHierarchyIncomingCallsRequest = exports.WorkDoneProgressCancelNotification = exports.WorkDoneProgressCreateRequest = exports.WorkDoneProgress = exports.SelectionRangeRequest = exports.DeclarationRequest = exports.FoldingRangeRefreshRequest = exports.FoldingRangeRequest = exports.ColorPresentationRequest = exports.DocumentColorRequest = exports.ConfigurationRequest = exports.DidChangeWorkspaceFoldersNotification = exports.WorkspaceFoldersRequest = exports.TypeDefinitionRequest = exports.ImplementationRequest = exports.ApplyWorkspaceEditRequest = exports.ExecuteCommandRequest = exports.PrepareRenameRequest = exports.RenameRequest = exports.PrepareSupportDefaultBehavior = exports.DocumentOnTypeFormattingRequest = exports.DocumentRangesFormattingRequest = exports.DocumentRangeFormattingRequest = exports.DocumentFormattingRequest = exports.DocumentLinkResolveRequest = exports.DocumentLinkRequest = exports.CodeLensRefreshRequest = exports.CodeLensResolveRequest = exports.CodeLensRequest = exports.WorkspaceSymbolResolveRequest = void 0;\nexports.InlineCompletionRequest = exports.DidCloseNotebookDocumentNotification = exports.DidSaveNotebookDocumentNotification = exports.DidChangeNotebookDocumentNotification = exports.NotebookCellArrayChange = exports.DidOpenNotebookDocumentNotification = exports.NotebookDocumentSyncRegistrationType = exports.NotebookDocument = exports.NotebookCell = exports.ExecutionSummary = exports.NotebookCellKind = exports.DiagnosticRefreshRequest = exports.WorkspaceDiagnosticRequest = exports.DocumentDiagnosticRequest = exports.DocumentDiagnosticReportKind = exports.DiagnosticServerCancellationData = exports.InlayHintRefreshRequest = exports.InlayHintResolveRequest = exports.InlayHintRequest = exports.InlineValueRefreshRequest = exports.InlineValueRequest = exports.TypeHierarchySupertypesRequest = exports.TypeHierarchySubtypesRequest = exports.TypeHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\nconst vscode_languageserver_types_1 = require(\"vscode-languageserver-types\");\nconst Is = require(\"./utils/is\");\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\nObject.defineProperty(exports, \"ImplementationRequest\", { enumerable: true, get: function () { return protocol_implementation_1.ImplementationRequest; } });\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\nObject.defineProperty(exports, \"TypeDefinitionRequest\", { enumerable: true, get: function () { return protocol_typeDefinition_1.TypeDefinitionRequest; } });\nconst protocol_workspaceFolder_1 = require(\"./protocol.workspaceFolder\");\nObject.defineProperty(exports, \"WorkspaceFoldersRequest\", { enumerable: true, get: function () { return protocol_workspaceFolder_1.WorkspaceFoldersRequest; } });\nObject.defineProperty(exports, \"DidChangeWorkspaceFoldersNotification\", { enumerable: true, get: function () { return protocol_workspaceFolder_1.DidChangeWorkspaceFoldersNotification; } });\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\nObject.defineProperty(exports, \"ConfigurationRequest\", { enumerable: true, get: function () { return protocol_configuration_1.ConfigurationRequest; } });\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\nObject.defineProperty(exports, \"DocumentColorRequest\", { enumerable: true, get: function () { return protocol_colorProvider_1.DocumentColorRequest; } });\nObject.defineProperty(exports, \"ColorPresentationRequest\", { enumerable: true, get: function () { return protocol_colorProvider_1.ColorPresentationRequest; } });\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\nObject.defineProperty(exports, \"FoldingRangeRequest\", { enumerable: true, get: function () { return protocol_foldingRange_1.FoldingRangeRequest; } });\nObject.defineProperty(exports, \"FoldingRangeRefreshRequest\", { enumerable: true, get: function () { return protocol_foldingRange_1.FoldingRangeRefreshRequest; } });\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\nObject.defineProperty(exports, \"DeclarationRequest\", { enumerable: true, get: function () { return protocol_declaration_1.DeclarationRequest; } });\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\nObject.defineProperty(exports, \"SelectionRangeRequest\", { enumerable: true, get: function () { return protocol_selectionRange_1.SelectionRangeRequest; } });\nconst protocol_progress_1 = require(\"./protocol.progress\");\nObject.defineProperty(exports, \"WorkDoneProgress\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgress; } });\nObject.defineProperty(exports, \"WorkDoneProgressCreateRequest\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgressCreateRequest; } });\nObject.defineProperty(exports, \"WorkDoneProgressCancelNotification\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgressCancelNotification; } });\nconst protocol_callHierarchy_1 = require(\"./protocol.callHierarchy\");\nObject.defineProperty(exports, \"CallHierarchyIncomingCallsRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyIncomingCallsRequest; } });\nObject.defineProperty(exports, \"CallHierarchyOutgoingCallsRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyOutgoingCallsRequest; } });\nObject.defineProperty(exports, \"CallHierarchyPrepareRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyPrepareRequest; } });\nconst protocol_semanticTokens_1 = require(\"./protocol.semanticTokens\");\nObject.defineProperty(exports, \"TokenFormat\", { enumerable: true, get: function () { return protocol_semanticTokens_1.TokenFormat; } });\nObject.defineProperty(exports, \"SemanticTokensRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRequest; } });\nObject.defineProperty(exports, \"SemanticTokensDeltaRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensDeltaRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRangeRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRangeRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRefreshRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRefreshRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRegistrationType\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRegistrationType; } });\nconst protocol_showDocument_1 = require(\"./protocol.showDocument\");\nObject.defineProperty(exports, \"ShowDocumentRequest\", { enumerable: true, get: function () { return protocol_showDocument_1.ShowDocumentRequest; } });\nconst protocol_linkedEditingRange_1 = require(\"./protocol.linkedEditingRange\");\nObject.defineProperty(exports, \"LinkedEditingRangeRequest\", { enumerable: true, get: function () { return protocol_linkedEditingRange_1.LinkedEditingRangeRequest; } });\nconst protocol_fileOperations_1 = require(\"./protocol.fileOperations\");\nObject.defineProperty(exports, \"FileOperationPatternKind\", { enumerable: true, get: function () { return protocol_fileOperations_1.FileOperationPatternKind; } });\nObject.defineProperty(exports, \"DidCreateFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidCreateFilesNotification; } });\nObject.defineProperty(exports, \"WillCreateFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillCreateFilesRequest; } });\nObject.defineProperty(exports, \"DidRenameFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidRenameFilesNotification; } });\nObject.defineProperty(exports, \"WillRenameFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillRenameFilesRequest; } });\nObject.defineProperty(exports, \"DidDeleteFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidDeleteFilesNotification; } });\nObject.defineProperty(exports, \"WillDeleteFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillDeleteFilesRequest; } });\nconst protocol_moniker_1 = require(\"./protocol.moniker\");\nObject.defineProperty(exports, \"UniquenessLevel\", { enumerable: true, get: function () { return protocol_moniker_1.UniquenessLevel; } });\nObject.defineProperty(exports, \"MonikerKind\", { enumerable: true, get: function () { return protocol_moniker_1.MonikerKind; } });\nObject.defineProperty(exports, \"MonikerRequest\", { enumerable: true, get: function () { return protocol_moniker_1.MonikerRequest; } });\nconst protocol_typeHierarchy_1 = require(\"./protocol.typeHierarchy\");\nObject.defineProperty(exports, \"TypeHierarchyPrepareRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchyPrepareRequest; } });\nObject.defineProperty(exports, \"TypeHierarchySubtypesRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchySubtypesRequest; } });\nObject.defineProperty(exports, \"TypeHierarchySupertypesRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchySupertypesRequest; } });\nconst protocol_inlineValue_1 = require(\"./protocol.inlineValue\");\nObject.defineProperty(exports, \"InlineValueRequest\", { enumerable: true, get: function () { return protocol_inlineValue_1.InlineValueRequest; } });\nObject.defineProperty(exports, \"InlineValueRefreshRequest\", { enumerable: true, get: function () { return protocol_inlineValue_1.InlineValueRefreshRequest; } });\nconst protocol_inlayHint_1 = require(\"./protocol.inlayHint\");\nObject.defineProperty(exports, \"InlayHintRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintRequest; } });\nObject.defineProperty(exports, \"InlayHintResolveRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintResolveRequest; } });\nObject.defineProperty(exports, \"InlayHintRefreshRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintRefreshRequest; } });\nconst protocol_diagnostic_1 = require(\"./protocol.diagnostic\");\nObject.defineProperty(exports, \"DiagnosticServerCancellationData\", { enumerable: true, get: function () { return protocol_diagnostic_1.DiagnosticServerCancellationData; } });\nObject.defineProperty(exports, \"DocumentDiagnosticReportKind\", { enumerable: true, get: function () { return protocol_diagnostic_1.DocumentDiagnosticReportKind; } });\nObject.defineProperty(exports, \"DocumentDiagnosticRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.DocumentDiagnosticRequest; } });\nObject.defineProperty(exports, \"WorkspaceDiagnosticRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.WorkspaceDiagnosticRequest; } });\nObject.defineProperty(exports, \"DiagnosticRefreshRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.DiagnosticRefreshRequest; } });\nconst protocol_notebook_1 = require(\"./protocol.notebook\");\nObject.defineProperty(exports, \"NotebookCellKind\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCellKind; } });\nObject.defineProperty(exports, \"ExecutionSummary\", { enumerable: true, get: function () { return protocol_notebook_1.ExecutionSummary; } });\nObject.defineProperty(exports, \"NotebookCell\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCell; } });\nObject.defineProperty(exports, \"NotebookDocument\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookDocument; } });\nObject.defineProperty(exports, \"NotebookDocumentSyncRegistrationType\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookDocumentSyncRegistrationType; } });\nObject.defineProperty(exports, \"DidOpenNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidOpenNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"NotebookCellArrayChange\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCellArrayChange; } });\nObject.defineProperty(exports, \"DidChangeNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidChangeNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"DidSaveNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidSaveNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"DidCloseNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidCloseNotebookDocumentNotification; } });\nconst protocol_inlineCompletion_1 = require(\"./protocol.inlineCompletion\");\nObject.defineProperty(exports, \"InlineCompletionRequest\", { enumerable: true, get: function () { return protocol_inlineCompletion_1.InlineCompletionRequest; } });\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * The TextDocumentFilter namespace provides helper functions to work with\n * {@link TextDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar TextDocumentFilter;\n(function (TextDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate) || (Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern));\n    }\n    TextDocumentFilter.is = is;\n})(TextDocumentFilter || (exports.TextDocumentFilter = TextDocumentFilter = {}));\n/**\n * The NotebookDocumentFilter namespace provides helper functions to work with\n * {@link NotebookDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar NotebookDocumentFilter;\n(function (NotebookDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (Is.string(candidate.notebookType) || Is.string(candidate.scheme) || Is.string(candidate.pattern));\n    }\n    NotebookDocumentFilter.is = is;\n})(NotebookDocumentFilter || (exports.NotebookDocumentFilter = NotebookDocumentFilter = {}));\n/**\n * The NotebookCellTextDocumentFilter namespace provides helper functions to work with\n * {@link NotebookCellTextDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar NotebookCellTextDocumentFilter;\n(function (NotebookCellTextDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && (Is.string(candidate.notebook) || NotebookDocumentFilter.is(candidate.notebook))\n            && (candidate.language === undefined || Is.string(candidate.language));\n    }\n    NotebookCellTextDocumentFilter.is = is;\n})(NotebookCellTextDocumentFilter || (exports.NotebookCellTextDocumentFilter = NotebookCellTextDocumentFilter = {}));\n/**\n * The DocumentSelector namespace provides helper functions to work with\n * {@link DocumentSelector}s.\n */\nvar DocumentSelector;\n(function (DocumentSelector) {\n    function is(value) {\n        if (!Array.isArray(value)) {\n            return false;\n        }\n        for (let elem of value) {\n            if (!Is.string(elem) && !TextDocumentFilter.is(elem) && !NotebookCellTextDocumentFilter.is(elem)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    DocumentSelector.is = is;\n})(DocumentSelector || (exports.DocumentSelector = DocumentSelector = {}));\n/**\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\n * handler on the client side.\n */\nvar RegistrationRequest;\n(function (RegistrationRequest) {\n    RegistrationRequest.method = 'client/registerCapability';\n    RegistrationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    RegistrationRequest.type = new messages_1.ProtocolRequestType(RegistrationRequest.method);\n})(RegistrationRequest || (exports.RegistrationRequest = RegistrationRequest = {}));\n/**\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\n * handler on the client side.\n */\nvar UnregistrationRequest;\n(function (UnregistrationRequest) {\n    UnregistrationRequest.method = 'client/unregisterCapability';\n    UnregistrationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType(UnregistrationRequest.method);\n})(UnregistrationRequest || (exports.UnregistrationRequest = UnregistrationRequest = {}));\nvar ResourceOperationKind;\n(function (ResourceOperationKind) {\n    /**\n     * Supports creating new files and folders.\n     */\n    ResourceOperationKind.Create = 'create';\n    /**\n     * Supports renaming existing files and folders.\n     */\n    ResourceOperationKind.Rename = 'rename';\n    /**\n     * Supports deleting existing files and folders.\n     */\n    ResourceOperationKind.Delete = 'delete';\n})(ResourceOperationKind || (exports.ResourceOperationKind = ResourceOperationKind = {}));\nvar FailureHandlingKind;\n(function (FailureHandlingKind) {\n    /**\n     * Applying the workspace change is simply aborted if one of the changes provided\n     * fails. All operations executed before the failing operation stay executed.\n     */\n    FailureHandlingKind.Abort = 'abort';\n    /**\n     * All operations are executed transactional. That means they either all\n     * succeed or no changes at all are applied to the workspace.\n     */\n    FailureHandlingKind.Transactional = 'transactional';\n    /**\n     * If the workspace edit contains only textual file changes they are executed transactional.\n     * If resource changes (create, rename or delete file) are part of the change the failure\n     * handling strategy is abort.\n     */\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\n    /**\n     * The client tries to undo the operations already executed. But there is no\n     * guarantee that this is succeeding.\n     */\n    FailureHandlingKind.Undo = 'undo';\n})(FailureHandlingKind || (exports.FailureHandlingKind = FailureHandlingKind = {}));\n/**\n * A set of predefined position encoding kinds.\n *\n * @since 3.17.0\n */\nvar PositionEncodingKind;\n(function (PositionEncodingKind) {\n    /**\n     * Character offsets count UTF-8 code units (e.g. bytes).\n     */\n    PositionEncodingKind.UTF8 = 'utf-8';\n    /**\n     * Character offsets count UTF-16 code units.\n     *\n     * This is the default and must always be supported\n     * by servers\n     */\n    PositionEncodingKind.UTF16 = 'utf-16';\n    /**\n     * Character offsets count UTF-32 code units.\n     *\n     * Implementation note: these are the same as Unicode codepoints,\n     * so this `PositionEncodingKind` may also be used for an\n     * encoding-agnostic representation of character offsets.\n     */\n    PositionEncodingKind.UTF32 = 'utf-32';\n})(PositionEncodingKind || (exports.PositionEncodingKind = PositionEncodingKind = {}));\n/**\n * The StaticRegistrationOptions namespace provides helper functions to work with\n * {@link StaticRegistrationOptions} literals.\n */\nvar StaticRegistrationOptions;\n(function (StaticRegistrationOptions) {\n    function hasId(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\n    }\n    StaticRegistrationOptions.hasId = hasId;\n})(StaticRegistrationOptions || (exports.StaticRegistrationOptions = StaticRegistrationOptions = {}));\n/**\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\n * {@link TextDocumentRegistrationOptions} literals.\n */\nvar TextDocumentRegistrationOptions;\n(function (TextDocumentRegistrationOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\n    }\n    TextDocumentRegistrationOptions.is = is;\n})(TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = TextDocumentRegistrationOptions = {}));\n/**\n * The WorkDoneProgressOptions namespace provides helper functions to work with\n * {@link WorkDoneProgressOptions} literals.\n */\nvar WorkDoneProgressOptions;\n(function (WorkDoneProgressOptions) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\n    }\n    WorkDoneProgressOptions.is = is;\n    function hasWorkDoneProgress(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.workDoneProgress);\n    }\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\n})(WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = WorkDoneProgressOptions = {}));\n/**\n * The initialize request is sent from the client to the server.\n * It is sent once as the request after starting up the server.\n * The requests parameter is of type {@link InitializeParams}\n * the response if of type {@link InitializeResult} of a Thenable that\n * resolves to such.\n */\nvar InitializeRequest;\n(function (InitializeRequest) {\n    InitializeRequest.method = 'initialize';\n    InitializeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InitializeRequest.type = new messages_1.ProtocolRequestType(InitializeRequest.method);\n})(InitializeRequest || (exports.InitializeRequest = InitializeRequest = {}));\n/**\n * Known error codes for an `InitializeErrorCodes`;\n */\nvar InitializeErrorCodes;\n(function (InitializeErrorCodes) {\n    /**\n     * If the protocol version provided by the client can't be handled by the server.\n     *\n     * @deprecated This initialize error got replaced by client capabilities. There is\n     * no version handshake in version 3.0x\n     */\n    InitializeErrorCodes.unknownProtocolVersion = 1;\n})(InitializeErrorCodes || (exports.InitializeErrorCodes = InitializeErrorCodes = {}));\n/**\n * The initialized notification is sent from the client to the\n * server after the client is fully initialized and the server\n * is allowed to send requests from the server to the client.\n */\nvar InitializedNotification;\n(function (InitializedNotification) {\n    InitializedNotification.method = 'initialized';\n    InitializedNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    InitializedNotification.type = new messages_1.ProtocolNotificationType(InitializedNotification.method);\n})(InitializedNotification || (exports.InitializedNotification = InitializedNotification = {}));\n//---- Shutdown Method ----\n/**\n * A shutdown request is sent from the client to the server.\n * It is sent once when the client decides to shutdown the\n * server. The only notification that is sent after a shutdown request\n * is the exit event.\n */\nvar ShutdownRequest;\n(function (ShutdownRequest) {\n    ShutdownRequest.method = 'shutdown';\n    ShutdownRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0(ShutdownRequest.method);\n})(ShutdownRequest || (exports.ShutdownRequest = ShutdownRequest = {}));\n//---- Exit Notification ----\n/**\n * The exit event is sent from the client to the server to\n * ask the server to exit its process.\n */\nvar ExitNotification;\n(function (ExitNotification) {\n    ExitNotification.method = 'exit';\n    ExitNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    ExitNotification.type = new messages_1.ProtocolNotificationType0(ExitNotification.method);\n})(ExitNotification || (exports.ExitNotification = ExitNotification = {}));\n/**\n * The configuration change notification is sent from the client to the server\n * when the client's configuration has changed. The notification contains\n * the changed configuration as defined by the language client.\n */\nvar DidChangeConfigurationNotification;\n(function (DidChangeConfigurationNotification) {\n    DidChangeConfigurationNotification.method = 'workspace/didChangeConfiguration';\n    DidChangeConfigurationNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType(DidChangeConfigurationNotification.method);\n})(DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = DidChangeConfigurationNotification = {}));\n//---- Message show and log notifications ----\n/**\n * The message type\n */\nvar MessageType;\n(function (MessageType) {\n    /**\n     * An error message.\n     */\n    MessageType.Error = 1;\n    /**\n     * A warning message.\n     */\n    MessageType.Warning = 2;\n    /**\n     * An information message.\n     */\n    MessageType.Info = 3;\n    /**\n     * A log message.\n     */\n    MessageType.Log = 4;\n    /**\n     * A debug message.\n     *\n     * @since 3.18.0\n     */\n    MessageType.Debug = 5;\n})(MessageType || (exports.MessageType = MessageType = {}));\n/**\n * The show message notification is sent from a server to a client to ask\n * the client to display a particular message in the user interface.\n */\nvar ShowMessageNotification;\n(function (ShowMessageNotification) {\n    ShowMessageNotification.method = 'window/showMessage';\n    ShowMessageNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType(ShowMessageNotification.method);\n})(ShowMessageNotification || (exports.ShowMessageNotification = ShowMessageNotification = {}));\n/**\n * The show message request is sent from the server to the client to show a message\n * and a set of options actions to the user.\n */\nvar ShowMessageRequest;\n(function (ShowMessageRequest) {\n    ShowMessageRequest.method = 'window/showMessageRequest';\n    ShowMessageRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType(ShowMessageRequest.method);\n})(ShowMessageRequest || (exports.ShowMessageRequest = ShowMessageRequest = {}));\n/**\n * The log message notification is sent from the server to the client to ask\n * the client to log a particular message.\n */\nvar LogMessageNotification;\n(function (LogMessageNotification) {\n    LogMessageNotification.method = 'window/logMessage';\n    LogMessageNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType(LogMessageNotification.method);\n})(LogMessageNotification || (exports.LogMessageNotification = LogMessageNotification = {}));\n//---- Telemetry notification\n/**\n * The telemetry event notification is sent from the server to the client to ask\n * the client to log telemetry data.\n */\nvar TelemetryEventNotification;\n(function (TelemetryEventNotification) {\n    TelemetryEventNotification.method = 'telemetry/event';\n    TelemetryEventNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType(TelemetryEventNotification.method);\n})(TelemetryEventNotification || (exports.TelemetryEventNotification = TelemetryEventNotification = {}));\n/**\n * Defines how the host (editor) should sync\n * document changes to the language server.\n */\nvar TextDocumentSyncKind;\n(function (TextDocumentSyncKind) {\n    /**\n     * Documents should not be synced at all.\n     */\n    TextDocumentSyncKind.None = 0;\n    /**\n     * Documents are synced by always sending the full content\n     * of the document.\n     */\n    TextDocumentSyncKind.Full = 1;\n    /**\n     * Documents are synced by sending the full content on open.\n     * After that only incremental updates to the document are\n     * send.\n     */\n    TextDocumentSyncKind.Incremental = 2;\n})(TextDocumentSyncKind || (exports.TextDocumentSyncKind = TextDocumentSyncKind = {}));\n/**\n * The document open notification is sent from the client to the server to signal\n * newly opened text documents. The document's truth is now managed by the client\n * and the server must not try to read the document's truth using the document's\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\n * mean that its content is presented in an editor. An open notification must not\n * be sent more than once without a corresponding close notification send before.\n * This means open and close notification must be balanced and the max open count\n * is one.\n */\nvar DidOpenTextDocumentNotification;\n(function (DidOpenTextDocumentNotification) {\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\n    DidOpenTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\n})(DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = DidOpenTextDocumentNotification = {}));\nvar TextDocumentContentChangeEvent;\n(function (TextDocumentContentChangeEvent) {\n    /**\n     * Checks whether the information describes a delta event.\n     */\n    function isIncremental(event) {\n        let candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range !== undefined &&\n            (candidate.rangeLength === undefined || typeof candidate.rangeLength === 'number');\n    }\n    TextDocumentContentChangeEvent.isIncremental = isIncremental;\n    /**\n     * Checks whether the information describes a full replacement event.\n     */\n    function isFull(event) {\n        let candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range === undefined && candidate.rangeLength === undefined;\n    }\n    TextDocumentContentChangeEvent.isFull = isFull;\n})(TextDocumentContentChangeEvent || (exports.TextDocumentContentChangeEvent = TextDocumentContentChangeEvent = {}));\n/**\n * The document change notification is sent from the client to the server to signal\n * changes to a text document.\n */\nvar DidChangeTextDocumentNotification;\n(function (DidChangeTextDocumentNotification) {\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\n    DidChangeTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\n})(DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = DidChangeTextDocumentNotification = {}));\n/**\n * The document close notification is sent from the client to the server when\n * the document got closed in the client. The document's truth now exists where\n * the document's uri points to (e.g. if the document's uri is a file uri the\n * truth now exists on disk). As with the open notification the close notification\n * is about managing the document's content. Receiving a close notification\n * doesn't mean that the document was open in an editor before. A close\n * notification requires a previous open notification to be sent.\n */\nvar DidCloseTextDocumentNotification;\n(function (DidCloseTextDocumentNotification) {\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\n    DidCloseTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\n})(DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = DidCloseTextDocumentNotification = {}));\n/**\n * The document save notification is sent from the client to the server when\n * the document got saved in the client.\n */\nvar DidSaveTextDocumentNotification;\n(function (DidSaveTextDocumentNotification) {\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\n    DidSaveTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\n})(DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = DidSaveTextDocumentNotification = {}));\n/**\n * Represents reasons why a text document is saved.\n */\nvar TextDocumentSaveReason;\n(function (TextDocumentSaveReason) {\n    /**\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\n     * or by an API call.\n     */\n    TextDocumentSaveReason.Manual = 1;\n    /**\n     * Automatic after a delay.\n     */\n    TextDocumentSaveReason.AfterDelay = 2;\n    /**\n     * When the editor lost focus.\n     */\n    TextDocumentSaveReason.FocusOut = 3;\n})(TextDocumentSaveReason || (exports.TextDocumentSaveReason = TextDocumentSaveReason = {}));\n/**\n * A document will save notification is sent from the client to the server before\n * the document is actually saved.\n */\nvar WillSaveTextDocumentNotification;\n(function (WillSaveTextDocumentNotification) {\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\n    WillSaveTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\n})(WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = WillSaveTextDocumentNotification = {}));\n/**\n * A document will save request is sent from the client to the server before\n * the document is actually saved. The request can return an array of TextEdits\n * which will be applied to the text document before it is saved. Please note that\n * clients might drop results if computing the text edits took too long or if a\n * server constantly fails on this request. This is done to keep the save fast and\n * reliable.\n */\nvar WillSaveTextDocumentWaitUntilRequest;\n(function (WillSaveTextDocumentWaitUntilRequest) {\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\n    WillSaveTextDocumentWaitUntilRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\n})(WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = WillSaveTextDocumentWaitUntilRequest = {}));\n/**\n * The watched files notification is sent from the client to the server when\n * the client detects changes to file watched by the language client.\n */\nvar DidChangeWatchedFilesNotification;\n(function (DidChangeWatchedFilesNotification) {\n    DidChangeWatchedFilesNotification.method = 'workspace/didChangeWatchedFiles';\n    DidChangeWatchedFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType(DidChangeWatchedFilesNotification.method);\n})(DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = DidChangeWatchedFilesNotification = {}));\n/**\n * The file event type\n */\nvar FileChangeType;\n(function (FileChangeType) {\n    /**\n     * The file got created.\n     */\n    FileChangeType.Created = 1;\n    /**\n     * The file got changed.\n     */\n    FileChangeType.Changed = 2;\n    /**\n     * The file got deleted.\n     */\n    FileChangeType.Deleted = 3;\n})(FileChangeType || (exports.FileChangeType = FileChangeType = {}));\nvar RelativePattern;\n(function (RelativePattern) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (vscode_languageserver_types_1.URI.is(candidate.baseUri) || vscode_languageserver_types_1.WorkspaceFolder.is(candidate.baseUri)) && Is.string(candidate.pattern);\n    }\n    RelativePattern.is = is;\n})(RelativePattern || (exports.RelativePattern = RelativePattern = {}));\nvar WatchKind;\n(function (WatchKind) {\n    /**\n     * Interested in create events.\n     */\n    WatchKind.Create = 1;\n    /**\n     * Interested in change events\n     */\n    WatchKind.Change = 2;\n    /**\n     * Interested in delete events\n     */\n    WatchKind.Delete = 4;\n})(WatchKind || (exports.WatchKind = WatchKind = {}));\n/**\n * Diagnostics notification are sent from the server to the client to signal\n * results of validation runs.\n */\nvar PublishDiagnosticsNotification;\n(function (PublishDiagnosticsNotification) {\n    PublishDiagnosticsNotification.method = 'textDocument/publishDiagnostics';\n    PublishDiagnosticsNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType(PublishDiagnosticsNotification.method);\n})(PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = PublishDiagnosticsNotification = {}));\n/**\n * How a completion was triggered\n */\nvar CompletionTriggerKind;\n(function (CompletionTriggerKind) {\n    /**\n     * Completion was triggered by typing an identifier (24x7 code\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\n     */\n    CompletionTriggerKind.Invoked = 1;\n    /**\n     * Completion was triggered by a trigger character specified by\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\n     */\n    CompletionTriggerKind.TriggerCharacter = 2;\n    /**\n     * Completion was re-triggered as current completion list is incomplete\n     */\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\n})(CompletionTriggerKind || (exports.CompletionTriggerKind = CompletionTriggerKind = {}));\n/**\n * Request to request completion at a given text document position. The request's\n * parameter is of type {@link TextDocumentPosition} the response\n * is of type {@link CompletionItem CompletionItem[]} or {@link CompletionList}\n * or a Thenable that resolves to such.\n *\n * The request can delay the computation of the {@link CompletionItem.detail `detail`}\n * and {@link CompletionItem.documentation `documentation`} properties to the `completionItem/resolve`\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\n */\nvar CompletionRequest;\n(function (CompletionRequest) {\n    CompletionRequest.method = 'textDocument/completion';\n    CompletionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\n})(CompletionRequest || (exports.CompletionRequest = CompletionRequest = {}));\n/**\n * Request to resolve additional information for a given completion item.The request's\n * parameter is of type {@link CompletionItem} the response\n * is of type {@link CompletionItem} or a Thenable that resolves to such.\n */\nvar CompletionResolveRequest;\n(function (CompletionResolveRequest) {\n    CompletionResolveRequest.method = 'completionItem/resolve';\n    CompletionResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\n})(CompletionResolveRequest || (exports.CompletionResolveRequest = CompletionResolveRequest = {}));\n/**\n * Request to request hover information at a given text document position. The request's\n * parameter is of type {@link TextDocumentPosition} the response is of\n * type {@link Hover} or a Thenable that resolves to such.\n */\nvar HoverRequest;\n(function (HoverRequest) {\n    HoverRequest.method = 'textDocument/hover';\n    HoverRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\n})(HoverRequest || (exports.HoverRequest = HoverRequest = {}));\n/**\n * How a signature help was triggered.\n *\n * @since 3.15.0\n */\nvar SignatureHelpTriggerKind;\n(function (SignatureHelpTriggerKind) {\n    /**\n     * Signature help was invoked manually by the user or by a command.\n     */\n    SignatureHelpTriggerKind.Invoked = 1;\n    /**\n     * Signature help was triggered by a trigger character.\n     */\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\n    /**\n     * Signature help was triggered by the cursor moving or by the document content changing.\n     */\n    SignatureHelpTriggerKind.ContentChange = 3;\n})(SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = SignatureHelpTriggerKind = {}));\nvar SignatureHelpRequest;\n(function (SignatureHelpRequest) {\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\n    SignatureHelpRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\n})(SignatureHelpRequest || (exports.SignatureHelpRequest = SignatureHelpRequest = {}));\n/**\n * A request to resolve the definition location of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPosition}\n * the response is of either type {@link Definition} or a typed array of\n * {@link DefinitionLink} or a Thenable that resolves to such.\n */\nvar DefinitionRequest;\n(function (DefinitionRequest) {\n    DefinitionRequest.method = 'textDocument/definition';\n    DefinitionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\n})(DefinitionRequest || (exports.DefinitionRequest = DefinitionRequest = {}));\n/**\n * A request to resolve project-wide references for the symbol denoted\n * by the given text document position. The request's parameter is of\n * type {@link ReferenceParams} the response is of type\n * {@link Location Location[]} or a Thenable that resolves to such.\n */\nvar ReferencesRequest;\n(function (ReferencesRequest) {\n    ReferencesRequest.method = 'textDocument/references';\n    ReferencesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\n})(ReferencesRequest || (exports.ReferencesRequest = ReferencesRequest = {}));\n/**\n * Request to resolve a {@link DocumentHighlight} for a given\n * text document position. The request's parameter is of type {@link TextDocumentPosition}\n * the request response is an array of type {@link DocumentHighlight}\n * or a Thenable that resolves to such.\n */\nvar DocumentHighlightRequest;\n(function (DocumentHighlightRequest) {\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\n    DocumentHighlightRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\n})(DocumentHighlightRequest || (exports.DocumentHighlightRequest = DocumentHighlightRequest = {}));\n/**\n * A request to list all symbols found in a given text document. The request's\n * parameter is of type {@link TextDocumentIdentifier} the\n * response is of type {@link SymbolInformation SymbolInformation[]} or a Thenable\n * that resolves to such.\n */\nvar DocumentSymbolRequest;\n(function (DocumentSymbolRequest) {\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\n    DocumentSymbolRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\n})(DocumentSymbolRequest || (exports.DocumentSymbolRequest = DocumentSymbolRequest = {}));\n/**\n * A request to provide commands for the given text document and range.\n */\nvar CodeActionRequest;\n(function (CodeActionRequest) {\n    CodeActionRequest.method = 'textDocument/codeAction';\n    CodeActionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\n})(CodeActionRequest || (exports.CodeActionRequest = CodeActionRequest = {}));\n/**\n * Request to resolve additional information for a given code action.The request's\n * parameter is of type {@link CodeAction} the response\n * is of type {@link CodeAction} or a Thenable that resolves to such.\n */\nvar CodeActionResolveRequest;\n(function (CodeActionResolveRequest) {\n    CodeActionResolveRequest.method = 'codeAction/resolve';\n    CodeActionResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeActionResolveRequest.type = new messages_1.ProtocolRequestType(CodeActionResolveRequest.method);\n})(CodeActionResolveRequest || (exports.CodeActionResolveRequest = CodeActionResolveRequest = {}));\n/**\n * A request to list project-wide symbols matching the query string given\n * by the {@link WorkspaceSymbolParams}. The response is\n * of type {@link SymbolInformation SymbolInformation[]} or a Thenable that\n * resolves to such.\n *\n * @since 3.17.0 - support for WorkspaceSymbol in the returned data. Clients\n *  need to advertise support for WorkspaceSymbols via the client capability\n *  `workspace.symbol.resolveSupport`.\n *\n */\nvar WorkspaceSymbolRequest;\n(function (WorkspaceSymbolRequest) {\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\n    WorkspaceSymbolRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\n})(WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = WorkspaceSymbolRequest = {}));\n/**\n * A request to resolve the range inside the workspace\n * symbol's location.\n *\n * @since 3.17.0\n */\nvar WorkspaceSymbolResolveRequest;\n(function (WorkspaceSymbolResolveRequest) {\n    WorkspaceSymbolResolveRequest.method = 'workspaceSymbol/resolve';\n    WorkspaceSymbolResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceSymbolResolveRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolResolveRequest.method);\n})(WorkspaceSymbolResolveRequest || (exports.WorkspaceSymbolResolveRequest = WorkspaceSymbolResolveRequest = {}));\n/**\n * A request to provide code lens for the given text document.\n */\nvar CodeLensRequest;\n(function (CodeLensRequest) {\n    CodeLensRequest.method = 'textDocument/codeLens';\n    CodeLensRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeLensRequest.type = new messages_1.ProtocolRequestType(CodeLensRequest.method);\n})(CodeLensRequest || (exports.CodeLensRequest = CodeLensRequest = {}));\n/**\n * A request to resolve a command for a given code lens.\n */\nvar CodeLensResolveRequest;\n(function (CodeLensResolveRequest) {\n    CodeLensResolveRequest.method = 'codeLens/resolve';\n    CodeLensResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType(CodeLensResolveRequest.method);\n})(CodeLensResolveRequest || (exports.CodeLensResolveRequest = CodeLensResolveRequest = {}));\n/**\n * A request to refresh all code actions\n *\n * @since 3.16.0\n */\nvar CodeLensRefreshRequest;\n(function (CodeLensRefreshRequest) {\n    CodeLensRefreshRequest.method = `workspace/codeLens/refresh`;\n    CodeLensRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    CodeLensRefreshRequest.type = new messages_1.ProtocolRequestType0(CodeLensRefreshRequest.method);\n})(CodeLensRefreshRequest || (exports.CodeLensRefreshRequest = CodeLensRefreshRequest = {}));\n/**\n * A request to provide document links\n */\nvar DocumentLinkRequest;\n(function (DocumentLinkRequest) {\n    DocumentLinkRequest.method = 'textDocument/documentLink';\n    DocumentLinkRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\n})(DocumentLinkRequest || (exports.DocumentLinkRequest = DocumentLinkRequest = {}));\n/**\n * Request to resolve additional information for a given document link. The request's\n * parameter is of type {@link DocumentLink} the response\n * is of type {@link DocumentLink} or a Thenable that resolves to such.\n */\nvar DocumentLinkResolveRequest;\n(function (DocumentLinkResolveRequest) {\n    DocumentLinkResolveRequest.method = 'documentLink/resolve';\n    DocumentLinkResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType(DocumentLinkResolveRequest.method);\n})(DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = DocumentLinkResolveRequest = {}));\n/**\n * A request to format a whole document.\n */\nvar DocumentFormattingRequest;\n(function (DocumentFormattingRequest) {\n    DocumentFormattingRequest.method = 'textDocument/formatting';\n    DocumentFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\n})(DocumentFormattingRequest || (exports.DocumentFormattingRequest = DocumentFormattingRequest = {}));\n/**\n * A request to format a range in a document.\n */\nvar DocumentRangeFormattingRequest;\n(function (DocumentRangeFormattingRequest) {\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\n    DocumentRangeFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\n})(DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = DocumentRangeFormattingRequest = {}));\n/**\n * A request to format ranges in a document.\n *\n * @since 3.18.0\n * @proposed\n */\nvar DocumentRangesFormattingRequest;\n(function (DocumentRangesFormattingRequest) {\n    DocumentRangesFormattingRequest.method = 'textDocument/rangesFormatting';\n    DocumentRangesFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentRangesFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangesFormattingRequest.method);\n})(DocumentRangesFormattingRequest || (exports.DocumentRangesFormattingRequest = DocumentRangesFormattingRequest = {}));\n/**\n * A request to format a document on type.\n */\nvar DocumentOnTypeFormattingRequest;\n(function (DocumentOnTypeFormattingRequest) {\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\n    DocumentOnTypeFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\n})(DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = DocumentOnTypeFormattingRequest = {}));\n//---- Rename ----------------------------------------------\nvar PrepareSupportDefaultBehavior;\n(function (PrepareSupportDefaultBehavior) {\n    /**\n     * The client's default behavior is to select the identifier\n     * according the to language's syntax rule.\n     */\n    PrepareSupportDefaultBehavior.Identifier = 1;\n})(PrepareSupportDefaultBehavior || (exports.PrepareSupportDefaultBehavior = PrepareSupportDefaultBehavior = {}));\n/**\n * A request to rename a symbol.\n */\nvar RenameRequest;\n(function (RenameRequest) {\n    RenameRequest.method = 'textDocument/rename';\n    RenameRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\n})(RenameRequest || (exports.RenameRequest = RenameRequest = {}));\n/**\n * A request to test and perform the setup necessary for a rename.\n *\n * @since 3.16 - support for default behavior\n */\nvar PrepareRenameRequest;\n(function (PrepareRenameRequest) {\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\n    PrepareRenameRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\n})(PrepareRenameRequest || (exports.PrepareRenameRequest = PrepareRenameRequest = {}));\n/**\n * A request send from the client to the server to execute a command. The request might return\n * a workspace edit which the client will apply to the workspace.\n */\nvar ExecuteCommandRequest;\n(function (ExecuteCommandRequest) {\n    ExecuteCommandRequest.method = 'workspace/executeCommand';\n    ExecuteCommandRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType(ExecuteCommandRequest.method);\n})(ExecuteCommandRequest || (exports.ExecuteCommandRequest = ExecuteCommandRequest = {}));\n/**\n * A request sent from the server to the client to modified certain resources.\n */\nvar ApplyWorkspaceEditRequest;\n(function (ApplyWorkspaceEditRequest) {\n    ApplyWorkspaceEditRequest.method = 'workspace/applyEdit';\n    ApplyWorkspaceEditRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\n})(ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = ApplyWorkspaceEditRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProtocolConnection = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nfunction createProtocolConnection(input, output, logger, options) {\n    if (vscode_jsonrpc_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, vscode_jsonrpc_1.createMessageConnection)(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LSPErrorCodes = exports.createProtocolConnection = void 0;\n__exportStar(require(\"vscode-jsonrpc\"), exports);\n__exportStar(require(\"vscode-languageserver-types\"), exports);\n__exportStar(require(\"./messages\"), exports);\n__exportStar(require(\"./protocol\"), exports);\nvar connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"createProtocolConnection\", { enumerable: true, get: function () { return connection_1.createProtocolConnection; } });\nvar LSPErrorCodes;\n(function (LSPErrorCodes) {\n    /**\n    * This is the start range of LSP reserved error codes.\n    * It doesn't denote a real error code.\n    *\n    * @since 3.16.0\n    */\n    LSPErrorCodes.lspReservedErrorRangeStart = -32899;\n    /**\n     * A request failed but it was syntactically correct, e.g the\n     * method name was known and the parameters were valid. The error\n     * message should contain human readable information about why\n     * the request failed.\n     *\n     * @since 3.17.0\n     */\n    LSPErrorCodes.RequestFailed = -32803;\n    /**\n     * The server cancelled the request. This error code should\n     * only be used for requests that explicitly support being\n     * server cancellable.\n     *\n     * @since 3.17.0\n     */\n    LSPErrorCodes.ServerCancelled = -32802;\n    /**\n     * The server detected that the content of a document got\n     * modified outside normal conditions. A server should\n     * NOT send this error code if it detects a content change\n     * in it unprocessed messages. The result even computed\n     * on an older state might still be useful for the client.\n     *\n     * If a client decides that a result is not of any use anymore\n     * the client should cancel the request.\n     */\n    LSPErrorCodes.ContentModified = -32801;\n    /**\n     * The client has canceled a request and a server as detected\n     * the cancel.\n     */\n    LSPErrorCodes.RequestCancelled = -32800;\n    /**\n    * This is the end range of LSP reserved error codes.\n    * It doesn't denote a real error code.\n    *\n    * @since 3.16.0\n    */\n    LSPErrorCodes.lspReservedErrorRangeEnd = -32800;\n})(LSPErrorCodes || (exports.LSPErrorCodes = LSPErrorCodes = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProtocolConnection = void 0;\nconst browser_1 = require(\"vscode-jsonrpc/browser\");\n__exportStar(require(\"vscode-jsonrpc/browser\"), exports);\n__exportStar(require(\"../common/api\"), exports);\nfunction createProtocolConnection(reader, writer, logger, options) {\n    return (0, browser_1.createMessageConnection)(reader, writer, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n","/* this file is auto-generated, do not modify */\nlet imports = {};\nlet wasm;\n\nconst heap = new Array(128).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nfunction getObject(idx) {\n    return heap[idx];\n}\n\nlet heap_next = heap.length;\n\nfunction dropObject(idx) {\n    if (idx < 132) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nlet cachedUint8Memory0 = null;\n\nfunction getUint8Memory0() {\n    if (cachedUint8Memory0 === null || cachedUint8Memory0.byteLength === 0) {\n        cachedUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachedUint8Memory0;\n}\n\nconst cachedTextEncoder =\n    typeof TextEncoder !== \"undefined\"\n        ? new TextEncoder(\"utf-8\")\n        : {\n              encode: () => {\n                  throw Error(\"TextEncoder not available\");\n              },\n          };\n\nconst encodeString =\n    typeof cachedTextEncoder.encodeInto === \"function\"\n        ? function (arg, view) {\n              return cachedTextEncoder.encodeInto(arg, view);\n          }\n        : function (arg, view) {\n              const buf = cachedTextEncoder.encode(arg);\n              view.set(buf);\n              return {\n                  read: arg.length,\n                  written: buf.length,\n              };\n          };\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length, 1) >>> 0;\n        getUint8Memory0()\n            .subarray(ptr, ptr + buf.length)\n            .set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len, 1) >>> 0;\n\n    const mem = getUint8Memory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7f) break;\n        mem[ptr + offset] = code;\n    }\n\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, (len = offset + arg.length * 3), 1) >>> 0;\n        const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n\n        offset += ret.written;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n\nfunction isLikeNone(x) {\n    return x === undefined || x === null;\n}\n\nlet cachedInt32Memory0 = null;\n\nfunction getInt32Memory0() {\n    if (cachedInt32Memory0 === null || cachedInt32Memory0.byteLength === 0) {\n        cachedInt32Memory0 = new Int32Array(wasm.memory.buffer);\n    }\n    return cachedInt32Memory0;\n}\n\nconst cachedTextDecoder =\n    typeof TextDecoder !== \"undefined\"\n        ? new TextDecoder(\"utf-8\", { ignoreBOM: true, fatal: true })\n        : {\n              decode: () => {\n                  throw Error(\"TextDecoder not available\");\n              },\n          };\n\nif (typeof TextDecoder !== \"undefined\") {\n    cachedTextDecoder.decode();\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nlet cachedFloat64Memory0 = null;\n\nfunction getFloat64Memory0() {\n    if (cachedFloat64Memory0 === null || cachedFloat64Memory0.byteLength === 0) {\n        cachedFloat64Memory0 = new Float64Array(wasm.memory.buffer);\n    }\n    return cachedFloat64Memory0;\n}\n\nlet cachedBigInt64Memory0 = null;\n\nfunction getBigInt64Memory0() {\n    if (cachedBigInt64Memory0 === null || cachedBigInt64Memory0.byteLength === 0) {\n        cachedBigInt64Memory0 = new BigInt64Array(wasm.memory.buffer);\n    }\n    return cachedBigInt64Memory0;\n}\n\nfunction debugString(val) {\n    // primitive types\n    const type = typeof val;\n    if (type == \"number\" || type == \"boolean\" || val == null) {\n        return `${val}`;\n    }\n    if (type == \"string\") {\n        return `\"${val}\"`;\n    }\n    if (type == \"symbol\") {\n        const description = val.description;\n        if (description == null) {\n            return \"Symbol\";\n        } else {\n            return `Symbol(${description})`;\n        }\n    }\n    if (type == \"function\") {\n        const name = val.name;\n        if (typeof name == \"string\" && name.length > 0) {\n            return `Function(${name})`;\n        } else {\n            return \"Function\";\n        }\n    }\n    // objects\n    if (Array.isArray(val)) {\n        const length = val.length;\n        let debug = \"[\";\n        if (length > 0) {\n            debug += debugString(val[0]);\n        }\n        for (let i = 1; i < length; i++) {\n            debug += \", \" + debugString(val[i]);\n        }\n        debug += \"]\";\n        return debug;\n    }\n    // Test for built-in\n    const builtInMatches = /\\[object ([^\\]]+)\\]/.exec(toString.call(val));\n    let className;\n    if (builtInMatches.length > 1) {\n        className = builtInMatches[1];\n    } else {\n        // Failed to match the standard '[object ClassName]'\n        return toString.call(val);\n    }\n    if (className == \"Object\") {\n        // we're a user defined class or Object\n        // JSON.stringify avoids problems with cycles, and is generally much\n        // easier than looping through ownProperties of `val`.\n        try {\n            return \"Object(\" + JSON.stringify(val) + \")\";\n        } catch (_) {\n            return \"Object\";\n        }\n    }\n    // errors\n    if (val instanceof Error) {\n        return `${val.name}: ${val.message}\\n${val.stack}`;\n    }\n    // TODO we could test for more things here, like `Set`s and `Map`s.\n    return className;\n}\n\nfunction makeMutClosure(arg0, arg1, dtor, f) {\n    const state = { a: arg0, b: arg1, cnt: 1, dtor };\n    const real = (...args) => {\n        // First up with a closure we increment the internal reference\n        // count. This ensures that the Rust closure environment won't\n        // be deallocated while we're invoking it.\n        state.cnt++;\n        const a = state.a;\n        state.a = 0;\n        try {\n            return f(a, state.b, ...args);\n        } finally {\n            if (--state.cnt === 0) {\n                wasm.__wbindgen_export_2.get(state.dtor)(a, state.b);\n            } else {\n                state.a = a;\n            }\n        }\n    };\n    real.original = state;\n\n    return real;\n}\nfunction __wbg_adapter_50(arg0, arg1, arg2) {\n    wasm._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h502a691ce059cac5(\n        arg0,\n        arg1,\n        addHeapObject(arg2),\n    );\n}\n\nfunction _assertClass(instance, klass) {\n    if (!(instance instanceof klass)) {\n        throw new Error(`expected instance of ${klass.name}`);\n    }\n    return instance.ptr;\n}\n\nlet cachedUint32Memory0 = null;\n\nfunction getUint32Memory0() {\n    if (cachedUint32Memory0 === null || cachedUint32Memory0.byteLength === 0) {\n        cachedUint32Memory0 = new Uint32Array(wasm.memory.buffer);\n    }\n    return cachedUint32Memory0;\n}\n\nfunction passArrayJsValueToWasm0(array, malloc) {\n    const ptr = malloc(array.length * 4, 4) >>> 0;\n    const mem = getUint32Memory0();\n    for (let i = 0; i < array.length; i++) {\n        mem[ptr / 4 + i] = addHeapObject(array[i]);\n    }\n    WASM_VECTOR_LEN = array.length;\n    return ptr;\n}\n\nfunction getArrayJsValueFromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    const mem = getUint32Memory0();\n    const slice = mem.subarray(ptr / 4, ptr / 4 + len);\n    const result = [];\n    for (let i = 0; i < slice.length; i++) {\n        result.push(takeObject(slice[i]));\n    }\n    return result;\n}\n\nlet stack_pointer = 128;\n\nfunction addBorrowedObject(obj) {\n    if (stack_pointer == 1) throw new Error(\"out of js stack\");\n    heap[--stack_pointer] = obj;\n    return stack_pointer;\n}\n\nfunction passArray8ToWasm0(arg, malloc) {\n    const ptr = malloc(arg.length * 1, 1) >>> 0;\n    getUint8Memory0().set(arg, ptr / 1);\n    WASM_VECTOR_LEN = arg.length;\n    return ptr;\n}\n/**\n * seraches for a meta for a given hash in the given subgraphs\n * @param {string} hash\n * @param {(string)[]} subgraphs\n * @returns {Promise<Uint8Array>}\n */\nexport function searchMeta(hash, subgraphs) {\n    const ptr0 = passStringToWasm0(hash, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    const len0 = WASM_VECTOR_LEN;\n    const ptr1 = passArrayJsValueToWasm0(subgraphs, wasm.__wbindgen_malloc);\n    const len1 = WASM_VECTOR_LEN;\n    const ret = wasm.searchMeta(ptr0, len0, ptr1, len1);\n    return takeObject(ret);\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return getUint8Memory0().subarray(ptr / 1, ptr / 1 + len);\n}\n/**\n * Calculates solidity keccak256 hash from the given data\n * @param {Uint8Array} data\n * @returns {Uint8Array}\n */\nexport function keccak256(data) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        const ptr0 = passArray8ToWasm0(data, wasm.__wbindgen_malloc);\n        const len0 = WASM_VECTOR_LEN;\n        wasm.keccak256(retptr, ptr0, len0);\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var v2 = getArrayU8FromWasm0(r0, r1).slice();\n        wasm.__wbindgen_free(r0, r1 * 1, 1);\n        return v2;\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\n/**\n * Checks equality of 2 Uint8Arrays\n * @param {Uint8Array} data1\n * @param {Uint8Array} data2\n * @returns {boolean}\n */\nexport function eqBytes(data1, data2) {\n    const ptr0 = passArray8ToWasm0(data1, wasm.__wbindgen_malloc);\n    const len0 = WASM_VECTOR_LEN;\n    const ptr1 = passArray8ToWasm0(data2, wasm.__wbindgen_malloc);\n    const len1 = WASM_VECTOR_LEN;\n    const ret = wasm.eqBytes(ptr0, len0, ptr1, len1);\n    return ret !== 0;\n}\n\n/**\n * Converts a hex string to Uint8Array\n * @param {string} hex\n * @returns {Uint8Array}\n */\nexport function arrayify(hex) {\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        const ptr0 = passStringToWasm0(hex, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        wasm.arrayify(retptr, ptr0, len0);\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        var v2 = getArrayU8FromWasm0(r0, r1).slice();\n        wasm.__wbindgen_free(r0, r1 * 1, 1);\n        return v2;\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n    }\n}\n\n/**\n * Converts an Uint8Array into a hex string\n * @param {Uint8Array} data\n * @returns {string}\n */\nexport function hexlify(data) {\n    let deferred2_0;\n    let deferred2_1;\n    try {\n        const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n        const ptr0 = passArray8ToWasm0(data, wasm.__wbindgen_malloc);\n        const len0 = WASM_VECTOR_LEN;\n        wasm.hexlify(retptr, ptr0, len0);\n        var r0 = getInt32Memory0()[retptr / 4 + 0];\n        var r1 = getInt32Memory0()[retptr / 4 + 1];\n        deferred2_0 = r0;\n        deferred2_1 = r1;\n        return getStringFromWasm0(r0, r1);\n    } finally {\n        wasm.__wbindgen_add_to_stack_pointer(16);\n        wasm.__wbindgen_free(deferred2_0, deferred2_1, 1);\n    }\n}\n\nfunction handleError(f, args) {\n    try {\n        return f.apply(this, args);\n    } catch (e) {\n        wasm.__wbindgen_exn_store(addHeapObject(e));\n    }\n}\nfunction __wbg_adapter_190(arg0, arg1, arg2, arg3) {\n    wasm.wasm_bindgen__convert__closures__invoke2_mut__h07215057813bfc25(\n        arg0,\n        arg1,\n        addHeapObject(arg2),\n        addHeapObject(arg3),\n    );\n}\n\n/**\n * All Error codes of RainlangDocument/RainDocument problem and LSP Diagnostics\n */\nexport const ErrorCode = Object.freeze({\n    IllegalChar: 0,\n    0: \"IllegalChar\",\n    RuntimeError: 1,\n    1: \"RuntimeError\",\n    CircularDependency: 2,\n    2: \"CircularDependency\",\n    NoFrontMatterSplitter: 3,\n    3: \"NoFrontMatterSplitter\",\n    DeepImport: 4,\n    4: \"DeepImport\",\n    DeepNamespace: 5,\n    5: \"DeepNamespace\",\n    DeepQuote: 6,\n    6: \"DeepQuote\",\n    ElidedBinding: 7,\n    7: \"ElidedBinding\",\n    NoneTopLevelImport: 8,\n    8: \"NoneTopLevelImport\",\n    NativeParserError: 9,\n    9: \"NativeParserError\",\n    InconsumableMeta: 10,\n    10: \"InconsumableMeta\",\n    OccupiedNamespace: 11,\n    11: \"OccupiedNamespace\",\n    OddLenHex: 12,\n    12: \"OddLenHex\",\n    CollidingNamespaceNodes: 13,\n    13: \"CollidingNamespaceNodes\",\n    DepsResolvingFailed: 14,\n    14: \"DepsResolvingFailed\",\n    CorruptMeta: 15,\n    15: \"CorruptMeta\",\n    UndefinedWord: 257,\n    257: \"UndefinedWord\",\n    UndefinedImport: 259,\n    259: \"UndefinedImport\",\n    UndefinedQuote: 260,\n    260: \"UndefinedQuote\",\n    UndefinedNamespaceMember: 261,\n    261: \"UndefinedNamespaceMember\",\n    UndefinedIdentifier: 262,\n    262: \"UndefinedIdentifier\",\n    InvalidWordPattern: 513,\n    513: \"InvalidWordPattern\",\n    InvalidExpression: 514,\n    514: \"InvalidExpression\",\n    InvalidNamespaceReference: 515,\n    515: \"InvalidNamespaceReference\",\n    InvalidEmptyLine: 516,\n    516: \"InvalidEmptyLine\",\n    InvalidHash: 517,\n    517: \"InvalidHash\",\n    InvalidReferenceLiteral: 518,\n    518: \"InvalidReferenceLiteral\",\n    InvalidRainDocument: 519,\n    519: \"InvalidRainDocument\",\n    InvalidImport: 520,\n    520: \"InvalidImport\",\n    InvalidEmptyBinding: 521,\n    521: \"InvalidEmptyBinding\",\n    InvalidLiteralQuote: 528,\n    528: \"InvalidLiteralQuote\",\n    InvalidOperandArg: 529,\n    529: \"InvalidOperandArg\",\n    InvalidSuppliedRebindings: 530,\n    530: \"InvalidSuppliedRebindings\",\n    InvalidReferenceAll: 531,\n    531: \"InvalidReferenceAll\",\n    UnexpectedToken: 769,\n    769: \"UnexpectedToken\",\n    UnexpectedClosingParen: 770,\n    770: \"UnexpectedClosingParen\",\n    UnexpectedNamespacePath: 771,\n    771: \"UnexpectedNamespacePath\",\n    UnexpectedRebinding: 772,\n    772: \"UnexpectedRebinding\",\n    UnexpectedClosingAngleParen: 773,\n    773: \"UnexpectedClosingAngleParen\",\n    UnexpectedEndOfComment: 774,\n    774: \"UnexpectedEndOfComment\",\n    UnexpectedComment: 775,\n    775: \"UnexpectedComment\",\n    UnexpectedPragma: 776,\n    776: \"UnexpectedPragma\",\n    UnexpectedRename: 777,\n    777: \"UnexpectedRename\",\n    UnexpectedStringLiteralEnd: 784,\n    784: \"UnexpectedStringLiteralEnd\",\n    UnexpectedSubParserEnd: 785,\n    785: \"UnexpectedSubParserEnd\",\n    ExpectedOpcode: 1025,\n    1025: \"ExpectedOpcode\",\n    ExpectedRename: 1026,\n    1026: \"ExpectedRename\",\n    ExpectedElisionOrRebinding: 1027,\n    1027: \"ExpectedElisionOrRebinding\",\n    ExpectedClosingParen: 1028,\n    1028: \"ExpectedClosingParen\",\n    ExpectedOpeningParen: 1029,\n    1029: \"ExpectedOpeningParen\",\n    ExpectedClosingAngleBracket: 1030,\n    1030: \"ExpectedClosingAngleBracket\",\n    ExpectedHexLiteral: 1031,\n    1031: \"ExpectedHexLiteral\",\n    ExpectedSemi: 1032,\n    1032: \"ExpectedSemi\",\n    ExpectedLiteral: 1033,\n    1033: \"ExpectedLiteral\",\n    MismatchRHS: 1281,\n    1281: \"MismatchRHS\",\n    MismatchLHS: 1282,\n    1282: \"MismatchLHS\",\n    MismatchOperandArgs: 1283,\n    1283: \"MismatchOperandArgs\",\n    OutOfRangeInputs: 1537,\n    1537: \"OutOfRangeInputs\",\n    OutOfRangeOperandArgs: 1538,\n    1538: \"OutOfRangeOperandArgs\",\n    OutOfRangeValue: 1539,\n    1539: \"OutOfRangeValue\",\n    DuplicateAlias: 1793,\n    1793: \"DuplicateAlias\",\n    DuplicateIdentifier: 1794,\n    1794: \"DuplicateIdentifier\",\n    DuplicateImportStatement: 1795,\n    1795: \"DuplicateImportStatement\",\n    DuplicateImport: 1796,\n    1796: \"DuplicateImport\",\n});\n/**\n * In-memory CAS (content addressed storage) for all metadata required for parsing\n * a RainDocument which basically stores k/v pairs of meta hash, meta bytes and\n * ExpressionDeployer reproducible data as well as providing functionalities to easliy\n * read them from the CAS.\n *\n * Hashes are stored as bytes of the underlying value and meta bytes are valid cbor\n * encoded as Uint8Array. ExpressionDeployers data are in form of js object mapped to\n * deployedBytecode meta hash and deploy transaction hash.\n *\n * @example\n * ```javascript\n * // to instantiate with including default subgraphs\n * // pass 'false' to not include default rain subgraph endpoints\n * const store = new MetaStore();\n *\n * // or to instantiate with initial arguments\n * const store = MetaStore.create(options);\n *\n * // add a new subgraph endpoint URLs\n * store.addSubgraphs([\"sg-url-1\", \"sg-url-2\", ...])\n *\n * // merge another MetaStore instance to this instance\n * store.merge(anotherMetaStore)\n *\n * // updates the meta store with a new meta by searching through subgraphs\n * await store.update(hash)\n *\n * // to get a meta bytes of a corresponding hash from store\n * const meta = store.getMeta(hash);\n * ```\n */\nexport class MetaStore {\n    static __wrap(ptr) {\n        ptr = ptr >>> 0;\n        const obj = Object.create(MetaStore.prototype);\n        obj.__wbg_ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.__wbg_ptr;\n        this.__wbg_ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_metastore_free(ptr);\n    }\n    /**\n     * Constructs a new instance\n     * @param {boolean | undefined} [include_rain_subgraphs]\n     */\n    constructor(include_rain_subgraphs) {\n        const ret = wasm.metastore_new(\n            isLikeNone(include_rain_subgraphs) ? 0xffffff : include_rain_subgraphs ? 1 : 0,\n        );\n        this.__wbg_ptr = ret >>> 0;\n        return this;\n    }\n    /**\n     * Creates new instance of Store with given initial values\n     * it checks the validity of each item of the provided values and only stores those that are valid\n     * @param {MetaStoreOptions} options\n     * @returns {MetaStore}\n     */\n    static create(options) {\n        const ret = wasm.metastore_create(addHeapObject(options));\n        return MetaStore.__wrap(ret);\n    }\n    /**\n     * All subgraph endpoint URLs of this instance\n     * @returns {(string)[]}\n     */\n    get subgraphs() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.metastore_subgraphs(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var v1 = getArrayJsValueFromWasm0(r0, r1).slice();\n            wasm.__wbindgen_free(r0, r1 * 4, 4);\n            return v1;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * All the cached meta hash/bytes pairs\n     * @returns {any}\n     */\n    get cache() {\n        const ret = wasm.metastore_cache(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n     * All the cached dotrain uri/meta hash pairs\n     * @returns {any}\n     */\n    get dotrainCache() {\n        const ret = wasm.metastore_dotrainCache(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n     * Adds new subgraph endpoints\n     * @param {any} subgraphs\n     */\n    addSubgraphs(subgraphs) {\n        wasm.metastore_addSubgraphs(this.__wbg_ptr, addHeapObject(subgraphs));\n    }\n    /**\n     * Get the corresponding meta bytes of the given hash if it is cached\n     * @param {Uint8Array} hash\n     * @returns {any}\n     */\n    getMeta(hash) {\n        const ptr0 = passArray8ToWasm0(hash, wasm.__wbindgen_malloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.metastore_getMeta(this.__wbg_ptr, ptr0, len0);\n        return takeObject(ret);\n    }\n    /**\n     * Get the corresponding dotrain hash of the given dotrain uri if it is cached\n     * @param {string} uri\n     * @returns {any}\n     */\n    getDotrainHash(uri) {\n        const ptr0 = passStringToWasm0(uri, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.metastore_getDotrainHash(this.__wbg_ptr, ptr0, len0);\n        return takeObject(ret);\n    }\n    /**\n     * Get the corresponding uri of the given dotrain hash if it is cached\n     * @param {Uint8Array} hash\n     * @returns {any}\n     */\n    getDotrainUri(hash) {\n        const ptr0 = passArray8ToWasm0(hash, wasm.__wbindgen_malloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.metastore_getDotrainUri(this.__wbg_ptr, ptr0, len0);\n        return takeObject(ret);\n    }\n    /**\n     * Get the corresponding meta bytes of the given dotrain uri if it is cached\n     * @param {string} uri\n     * @returns {any}\n     */\n    getDotrainMeta(uri) {\n        const ptr0 = passStringToWasm0(uri, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.metastore_getDotrainMeta(this.__wbg_ptr, ptr0, len0);\n        return takeObject(ret);\n    }\n    /**\n     * Updates the meta cache by searching through all subgraphs for the given hash\n     * @param {Uint8Array} hash\n     * @returns {Promise<any>}\n     */\n    update(hash) {\n        const ptr0 = passArray8ToWasm0(hash, wasm.__wbindgen_malloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.metastore_update(this.__wbg_ptr, ptr0, len0);\n        return takeObject(ret);\n    }\n    /**\n     * First checks if the meta is stored and returns it if so, else will perform update()\n     * @param {Uint8Array} hash\n     * @returns {Promise<any>}\n     */\n    updateCheck(hash) {\n        const ptr0 = passArray8ToWasm0(hash, wasm.__wbindgen_malloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.metastore_updateCheck(this.__wbg_ptr, ptr0, len0);\n        return takeObject(ret);\n    }\n    /**\n     * Updates the meta cache by the given hash and meta bytes, checks the hash to bytes\n     * validity\n     * @param {Uint8Array} hash\n     * @param {Uint8Array} bytes\n     */\n    updateWith(hash, bytes) {\n        const ptr0 = passArray8ToWasm0(hash, wasm.__wbindgen_malloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ptr1 = passArray8ToWasm0(bytes, wasm.__wbindgen_malloc);\n        const len1 = WASM_VECTOR_LEN;\n        wasm.metastore_updateWith(this.__wbg_ptr, ptr0, len0, ptr1, len1);\n    }\n    /**\n     * Deletes a dotrain record given its uri\n     * @param {string} uri\n     * @param {boolean} keep_meta\n     */\n    deleteDotrain(uri, keep_meta) {\n        const ptr0 = passStringToWasm0(uri, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        wasm.metastore_deleteDotrain(this.__wbg_ptr, ptr0, len0, keep_meta);\n    }\n    /**\n     * Stores (or updates in case the URI already exists) the given dotrain text as meta into the store cache\n     * and maps it to the given uri (path), it should be noted that reading the content of the dotrain is not in\n     * the scope of Store and handling and passing on a correct URI (path) for the given text must be handled\n     * externally by the implementer\n     * @param {string} text\n     * @param {string} uri\n     * @param {boolean} keep_old\n     * @returns {any}\n     */\n    setDotrain(text, uri, keep_old) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            const ptr0 = passStringToWasm0(text, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n            const len0 = WASM_VECTOR_LEN;\n            const ptr1 = passStringToWasm0(uri, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n            const len1 = WASM_VECTOR_LEN;\n            wasm.metastore_setDotrain(retptr, this.__wbg_ptr, ptr0, len0, ptr1, len1, keep_old);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var r2 = getInt32Memory0()[retptr / 4 + 2];\n            if (r2) {\n                throw takeObject(r1);\n            }\n            return takeObject(r0);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * Merges another instance of MetaStore to this instance lazily, avoids duplicates\n     * @param {MetaStore} other\n     */\n    merge(other) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            _assertClass(other, MetaStore);\n            wasm.metastore_merge(retptr, this.__wbg_ptr, other.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            if (r1) {\n                throw takeObject(r0);\n            }\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n}\n/**\n * Data structure of a parsed .rain text\n *\n * RainDocument is the main implementation block that enables parsing of a .rain file contents\n * to its building blocks and parse tree by handling and resolving imports, namespaces, etc which\n * later are used by LSP services and composer as well as providing all the functionalities in between.\n *\n * It is a portable, extensible and composable format for describing Rainlang fragments, .rain serve as\n * a wrapper/container/medium for Rainlang to be shared and audited simply in a permissionless and\n * adversarial environment such as a public blockchain.\n *\n * @example\n * ```javascript\n * // create a new instane\n * const rainDocument = RainDocument.create(text, meta_store);\n *\n * // alternatively instantiate with remote meta search enabled\n * const rainDocument = await RainDocument.createAsync(text, meta_store);\n *\n * // get all problems\n * const problems = rainDocument.allProblems;\n *\n * // compose this instance to get rainlang string\n * const expConfig = rainDocument.compose([\"entrypoint1\", \"entrypoint2\"]);\n * ```\n */\nexport class RainDocument {\n    static __wrap(ptr) {\n        ptr = ptr >>> 0;\n        const obj = Object.create(RainDocument.prototype);\n        obj.__wbg_ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.__wbg_ptr;\n        this.__wbg_ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_raindocument_free(ptr);\n    }\n    /**\n     * Creates an instance with the given MetaStore and parses with remote meta search enabled\n     * @param {string} text\n     * @param {MetaStore} meta_store\n     * @param {(Rebind)[] | undefined} [rebinds]\n     * @returns {Promise<RainDocument>}\n     */\n    static createAsync(text, meta_store, rebinds) {\n        const ptr0 = passStringToWasm0(text, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        _assertClass(meta_store, MetaStore);\n        var ptr1 = isLikeNone(rebinds)\n            ? 0\n            : passArrayJsValueToWasm0(rebinds, wasm.__wbindgen_malloc);\n        var len1 = WASM_VECTOR_LEN;\n        const ret = wasm.raindocument_createAsync(ptr0, len0, meta_store.__wbg_ptr, ptr1, len1);\n        return takeObject(ret);\n    }\n    /**\n     * Creates an instance with the given MetaStore and parses with remote meta search disabled (cached metas only)\n     * @param {string} text\n     * @param {MetaStore} meta_store\n     * @param {(Rebind)[] | undefined} [rebinds]\n     * @returns {RainDocument}\n     */\n    static create(text, meta_store, rebinds) {\n        const ptr0 = passStringToWasm0(text, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        _assertClass(meta_store, MetaStore);\n        var ptr1 = isLikeNone(rebinds)\n            ? 0\n            : passArrayJsValueToWasm0(rebinds, wasm.__wbindgen_malloc);\n        var len1 = WASM_VECTOR_LEN;\n        const ret = wasm.raindocument_create(ptr0, len0, meta_store.__wbg_ptr, ptr1, len1);\n        return RainDocument.__wrap(ret);\n    }\n    /**\n     * @param {string} text\n     * @returns {string | undefined}\n     */\n    static getFrontMatter(text) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            const ptr0 = passStringToWasm0(text, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n            const len0 = WASM_VECTOR_LEN;\n            wasm.raindocument_getFrontMatter(retptr, ptr0, len0);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            let v2;\n            if (r0 !== 0) {\n                v2 = getStringFromWasm0(r0, r1).slice();\n                wasm.__wbindgen_free(r0, r1 * 1, 1);\n            }\n            return v2;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * @param {IRainDocument} value\n     * @param {MetaStore} meta_store\n     * @returns {RainDocument}\n     */\n    static fromInterface(value, meta_store) {\n        try {\n            _assertClass(meta_store, MetaStore);\n            const ret = wasm.raindocument_fromInterface(\n                addBorrowedObject(value),\n                meta_store.__wbg_ptr,\n            );\n            return RainDocument.__wrap(ret);\n        } finally {\n            heap[stack_pointer++] = undefined;\n        }\n    }\n    /**\n     * @returns {IRainDocument}\n     */\n    toInterface() {\n        const ret = wasm.raindocument_toInterface(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n     * Updates the text and parses right away with remote meta search disabled (cached metas only)\n     * @param {string} new_text\n     * @param {(Rebind)[] | undefined} [rebinds]\n     */\n    update(new_text, rebinds) {\n        const ptr0 = passStringToWasm0(new_text, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        var ptr1 = isLikeNone(rebinds)\n            ? 0\n            : passArrayJsValueToWasm0(rebinds, wasm.__wbindgen_malloc);\n        var len1 = WASM_VECTOR_LEN;\n        wasm.raindocument_update(this.__wbg_ptr, ptr0, len0, ptr1, len1);\n    }\n    /**\n     * Updates the text and parses right away with remote meta search enabled\n     * @param {string} new_text\n     * @param {(Rebind)[] | undefined} [rebinds]\n     * @returns {Promise<void>}\n     */\n    updateAsync(new_text, rebinds) {\n        const ptr0 = passStringToWasm0(new_text, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        var ptr1 = isLikeNone(rebinds)\n            ? 0\n            : passArrayJsValueToWasm0(rebinds, wasm.__wbindgen_malloc);\n        var len1 = WASM_VECTOR_LEN;\n        const ret = wasm.raindocument_updateAsync(this.__wbg_ptr, ptr0, len0, ptr1, len1);\n        return takeObject(ret);\n    }\n    /**\n     * This instance's current text\n     * @returns {string}\n     */\n    get text() {\n        let deferred1_0;\n        let deferred1_1;\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.raindocument_text(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            deferred1_0 = r0;\n            deferred1_1 = r1;\n            return getStringFromWasm0(r0, r1);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n            wasm.__wbindgen_free(deferred1_0, deferred1_1, 1);\n        }\n    }\n    /**\n     * This instance's current text\n     * @returns {string}\n     */\n    get frontMatter() {\n        let deferred1_0;\n        let deferred1_1;\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.raindocument_frontMatter(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            deferred1_0 = r0;\n            deferred1_1 = r1;\n            return getStringFromWasm0(r0, r1);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n            wasm.__wbindgen_free(deferred1_0, deferred1_1, 1);\n        }\n    }\n    /**\n     * This instance's current text\n     * @returns {string}\n     */\n    get body() {\n        let deferred1_0;\n        let deferred1_1;\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.raindocument_body(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            deferred1_0 = r0;\n            deferred1_1 = r1;\n            return getStringFromWasm0(r0, r1);\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n            wasm.__wbindgen_free(deferred1_0, deferred1_1, 1);\n        }\n    }\n    /**\n     * This instance's top problems\n     * @returns {(Problem)[]}\n     */\n    get problems() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.raindocument_problems(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var v1 = getArrayJsValueFromWasm0(r0, r1).slice();\n            wasm.__wbindgen_free(r0, r1 * 4, 4);\n            return v1;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * This instance's comments\n     * @returns {(Comment)[]}\n     */\n    get comments() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.raindocument_comments(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var v1 = getArrayJsValueFromWasm0(r0, r1).slice();\n            wasm.__wbindgen_free(r0, r1 * 4, 4);\n            return v1;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * This instance's imports\n     * @returns {(Import)[]}\n     */\n    get imports() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.raindocument_imports(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var v1 = getArrayJsValueFromWasm0(r0, r1).slice();\n            wasm.__wbindgen_free(r0, r1 * 4, 4);\n            return v1;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * This instance's bindings\n     * @returns {(Binding)[]}\n     */\n    get bindings() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.raindocument_bindings(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var v1 = getArrayJsValueFromWasm0(r0, r1).slice();\n            wasm.__wbindgen_free(r0, r1 * 4, 4);\n            return v1;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * This instance's namespace\n     * @returns {Namespace}\n     */\n    get namespace() {\n        const ret = wasm.raindocument_namespace(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n     * This instance's MetaStore\n     * @returns {MetaStore}\n     */\n    get metaStore() {\n        const ret = wasm.raindocument_metaStore(this.__wbg_ptr);\n        return MetaStore.__wrap(ret);\n    }\n    /**\n     * This instance's AuthoringMeta\n     * @returns {IAuthoringMeta | undefined}\n     */\n    get knownWords() {\n        const ret = wasm.raindocument_knownWords(this.__wbg_ptr);\n        return takeObject(ret);\n    }\n    /**\n     * The error msg if parsing had resulted in an error\n     * @returns {string | undefined}\n     */\n    get error() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.raindocument_error(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            let v1;\n            if (r0 !== 0) {\n                v1 = getStringFromWasm0(r0, r1).slice();\n                wasm.__wbindgen_free(r0, r1 * 1, 1);\n            }\n            return v1;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * This instance's all problems (bindings + top)\n     * @returns {(Problem)[]}\n     */\n    get allProblems() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.raindocument_allProblems(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var v1 = getArrayJsValueFromWasm0(r0, r1).slice();\n            wasm.__wbindgen_free(r0, r1 * 4, 4);\n            return v1;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * This instance's bindings problems\n     * @returns {(Problem)[]}\n     */\n    get bindingProblems() {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            wasm.raindocument_bindingProblems(retptr, this.__wbg_ptr);\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var v1 = getArrayJsValueFromWasm0(r0, r1).slice();\n            wasm.__wbindgen_free(r0, r1 * 4, 4);\n            return v1;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * Parses this instance's text with remote meta search enabled\n     * @param {(Rebind)[] | undefined} [rebinds]\n     * @returns {Promise<void>}\n     */\n    parseAsync(rebinds) {\n        var ptr0 = isLikeNone(rebinds)\n            ? 0\n            : passArrayJsValueToWasm0(rebinds, wasm.__wbindgen_malloc);\n        var len0 = WASM_VECTOR_LEN;\n        const ret = wasm.raindocument_parseAsync(this.__wbg_ptr, ptr0, len0);\n        return takeObject(ret);\n    }\n    /**\n     * Parses this instance's text with remote meta search disabled (cached metas only)\n     * @param {(Rebind)[] | undefined} [rebinds]\n     */\n    parse(rebinds) {\n        var ptr0 = isLikeNone(rebinds)\n            ? 0\n            : passArrayJsValueToWasm0(rebinds, wasm.__wbindgen_malloc);\n        var len0 = WASM_VECTOR_LEN;\n        wasm.raindocument_parse(this.__wbg_ptr, ptr0, len0);\n    }\n    /**\n     * Composes this instance\n     * @param {(string)[]} entrypoints\n     * @returns {Promise<string>}\n     */\n    compose(entrypoints) {\n        const ptr0 = passArrayJsValueToWasm0(entrypoints, wasm.__wbindgen_malloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.raindocument_compose(this.__wbg_ptr, ptr0, len0);\n        return takeObject(ret);\n    }\n    /**\n     * Composes a text as RainDocument with remote meta search enabled for parsing\n     * @param {string} text\n     * @param {(string)[]} entrypoints\n     * @param {MetaStore} meta_store\n     * @param {(Rebind)[] | undefined} [rebinds]\n     * @returns {Promise<string>}\n     */\n    static composeTextAsync(text, entrypoints, meta_store, rebinds) {\n        const ptr0 = passStringToWasm0(text, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ptr1 = passArrayJsValueToWasm0(entrypoints, wasm.__wbindgen_malloc);\n        const len1 = WASM_VECTOR_LEN;\n        _assertClass(meta_store, MetaStore);\n        var ptr2 = isLikeNone(rebinds)\n            ? 0\n            : passArrayJsValueToWasm0(rebinds, wasm.__wbindgen_malloc);\n        var len2 = WASM_VECTOR_LEN;\n        const ret = wasm.raindocument_composeTextAsync(\n            ptr0,\n            len0,\n            ptr1,\n            len1,\n            meta_store.__wbg_ptr,\n            ptr2,\n            len2,\n        );\n        return takeObject(ret);\n    }\n    /**\n     * Composes a text as RainDocument with remote meta search disabled for parsing\n     * @param {string} text\n     * @param {(string)[]} entrypoints\n     * @param {MetaStore} meta_store\n     * @param {(Rebind)[] | undefined} [rebinds]\n     * @returns {Promise<string>}\n     */\n    static composeText(text, entrypoints, meta_store, rebinds) {\n        const ptr0 = passStringToWasm0(text, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ptr1 = passArrayJsValueToWasm0(entrypoints, wasm.__wbindgen_malloc);\n        const len1 = WASM_VECTOR_LEN;\n        _assertClass(meta_store, MetaStore);\n        var ptr2 = isLikeNone(rebinds)\n            ? 0\n            : passArrayJsValueToWasm0(rebinds, wasm.__wbindgen_malloc);\n        var len2 = WASM_VECTOR_LEN;\n        const ret = wasm.raindocument_composeText(\n            ptr0,\n            len0,\n            ptr1,\n            len1,\n            meta_store.__wbg_ptr,\n            ptr2,\n            len2,\n        );\n        return takeObject(ret);\n    }\n}\n/**\n * Provides methods for getting language services (such as diagnostics, completion, etc)\n * for a given TextDocumentItem or a RainDocument. Each instance is linked to a shared locked\n * MetaStore instance that holds all the required metadata/functionalities that are required during\n * parsing a text.\n *\n * Position encodings provided by the client are irrevelant as RainDocument/Rainlang supports\n * only ASCII characters (parsing will stop at very first encountered non-ASCII character), so any\n * position encodings will result in the same LSP provided Position value which is 1 for each char.\n *\n * @example\n * ```javascript\n * // create new MetaStore instance\n * let metaStore = new MetaStore();\n *\n * // crate new instance\n * let langServices = new RainLanguageServices(metaStore);\n *\n * let textDocument = {\n *    text: \"some .rain text\",\n *    uri:  \"file:///name.rain\",\n *    version: 0,\n *    languageId: \"rainlang\"\n * };\n *\n * // creat new RainDocument\n * let rainDocument = langServices.newRainDocument(textdocument);\n *\n * // get LSP Diagnostics\n * let diagnosticsRelatedInformation = true;\n * let diagnostics = langServices.doValidate(textDocument, diagnosticsRelatedInformation);\n * ```\n */\nexport class RainLanguageServices {\n    __destroy_into_raw() {\n        const ptr = this.__wbg_ptr;\n        this.__wbg_ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_rainlanguageservices_free(ptr);\n    }\n    /**\n     * The meta Store associated with this RainLanguageServices instance\n     * @returns {MetaStore}\n     */\n    get metaStore() {\n        const ret = wasm.rainlanguageservices_metaStore(this.__wbg_ptr);\n        return MetaStore.__wrap(ret);\n    }\n    /**\n     * Instantiates with the given MetaStore\n     * @param {MetaStore} meta_store\n     */\n    constructor(meta_store) {\n        _assertClass(meta_store, MetaStore);\n        const ret = wasm.rainlanguageservices_js_new(meta_store.__wbg_ptr);\n        this.__wbg_ptr = ret >>> 0;\n        return this;\n    }\n    /**\n     * Instantiates a RainDocument with remote meta search disabled when parsing from the given TextDocumentItem\n     * @param {TextDocumentItem} text_document\n     * @param {(Rebind)[] | undefined} [rebinds]\n     * @returns {RainDocument}\n     */\n    newRainDocument(text_document, rebinds) {\n        var ptr0 = isLikeNone(rebinds)\n            ? 0\n            : passArrayJsValueToWasm0(rebinds, wasm.__wbindgen_malloc);\n        var len0 = WASM_VECTOR_LEN;\n        const ret = wasm.rainlanguageservices_newRainDocument(\n            this.__wbg_ptr,\n            addHeapObject(text_document),\n            ptr0,\n            len0,\n        );\n        return RainDocument.__wrap(ret);\n    }\n    /**\n     * Instantiates a RainDocument with remote meta search enabled when parsing from the given TextDocumentItem\n     * @param {TextDocumentItem} text_document\n     * @param {(Rebind)[] | undefined} [rebinds]\n     * @returns {Promise<RainDocument>}\n     */\n    newRainDocumentAsync(text_document, rebinds) {\n        var ptr0 = isLikeNone(rebinds)\n            ? 0\n            : passArrayJsValueToWasm0(rebinds, wasm.__wbindgen_malloc);\n        var len0 = WASM_VECTOR_LEN;\n        const ret = wasm.rainlanguageservices_newRainDocumentAsync(\n            this.__wbg_ptr,\n            addHeapObject(text_document),\n            ptr0,\n            len0,\n        );\n        return takeObject(ret);\n    }\n    /**\n     * Validates the document with remote meta search disabled when parsing and reports LSP diagnostics\n     * @param {TextDocumentItem} text_document\n     * @param {boolean} related_information\n     * @param {(Rebind)[] | undefined} [rebinds]\n     * @returns {(Diagnostic)[]}\n     */\n    doValidate(text_document, related_information, rebinds) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            var ptr0 = isLikeNone(rebinds)\n                ? 0\n                : passArrayJsValueToWasm0(rebinds, wasm.__wbindgen_malloc);\n            var len0 = WASM_VECTOR_LEN;\n            wasm.rainlanguageservices_doValidate(\n                retptr,\n                this.__wbg_ptr,\n                addHeapObject(text_document),\n                related_information,\n                ptr0,\n                len0,\n            );\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var v2 = getArrayJsValueFromWasm0(r0, r1).slice();\n            wasm.__wbindgen_free(r0, r1 * 4, 4);\n            return v2;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * Reports LSP diagnostics from RainDocument's all problems\n     * @param {RainDocument} rain_document\n     * @param {string} uri\n     * @param {boolean} related_information\n     * @returns {(Diagnostic)[]}\n     */\n    doValidateRainDocument(rain_document, uri, related_information) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            _assertClass(rain_document, RainDocument);\n            const ptr0 = passStringToWasm0(uri, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n            const len0 = WASM_VECTOR_LEN;\n            wasm.rainlanguageservices_doValidateRainDocument(\n                retptr,\n                this.__wbg_ptr,\n                rain_document.__wbg_ptr,\n                ptr0,\n                len0,\n                related_information,\n            );\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            var v2 = getArrayJsValueFromWasm0(r0, r1).slice();\n            wasm.__wbindgen_free(r0, r1 * 4, 4);\n            return v2;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * Validates the document with remote meta search enabled when parsing and reports LSP diagnostics\n     * @param {TextDocumentItem} text_document\n     * @param {boolean} related_information\n     * @param {(Rebind)[] | undefined} [rebinds]\n     * @returns {Promise<any>}\n     */\n    doValidateAsync(text_document, related_information, rebinds) {\n        var ptr0 = isLikeNone(rebinds)\n            ? 0\n            : passArrayJsValueToWasm0(rebinds, wasm.__wbindgen_malloc);\n        var len0 = WASM_VECTOR_LEN;\n        const ret = wasm.rainlanguageservices_doValidateAsync(\n            this.__wbg_ptr,\n            addHeapObject(text_document),\n            related_information,\n            ptr0,\n            len0,\n        );\n        return takeObject(ret);\n    }\n    /**\n     * Provides completion items at the given position\n     * @param {TextDocumentItem} text_document\n     * @param {Position} position\n     * @param {MarkupKind | undefined} [documentation_format]\n     * @param {(Rebind)[] | undefined} [rebinds]\n     * @returns {(CompletionItem)[] | undefined}\n     */\n    doComplete(text_document, position, documentation_format, rebinds) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            var ptr0 = isLikeNone(rebinds)\n                ? 0\n                : passArrayJsValueToWasm0(rebinds, wasm.__wbindgen_malloc);\n            var len0 = WASM_VECTOR_LEN;\n            wasm.rainlanguageservices_doComplete(\n                retptr,\n                this.__wbg_ptr,\n                addHeapObject(text_document),\n                addHeapObject(position),\n                isLikeNone(documentation_format) ? 0 : addHeapObject(documentation_format),\n                ptr0,\n                len0,\n            );\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            let v2;\n            if (r0 !== 0) {\n                v2 = getArrayJsValueFromWasm0(r0, r1).slice();\n                wasm.__wbindgen_free(r0, r1 * 4, 4);\n            }\n            return v2;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * Provides completion items at the given position\n     * @param {RainDocument} rain_document\n     * @param {string} uri\n     * @param {Position} position\n     * @param {MarkupKind | undefined} [documentation_format]\n     * @returns {(CompletionItem)[] | undefined}\n     */\n    doCompleteRainDocument(rain_document, uri, position, documentation_format) {\n        try {\n            const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\n            _assertClass(rain_document, RainDocument);\n            const ptr0 = passStringToWasm0(uri, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n            const len0 = WASM_VECTOR_LEN;\n            wasm.rainlanguageservices_doCompleteRainDocument(\n                retptr,\n                this.__wbg_ptr,\n                rain_document.__wbg_ptr,\n                ptr0,\n                len0,\n                addHeapObject(position),\n                isLikeNone(documentation_format) ? 0 : addHeapObject(documentation_format),\n            );\n            var r0 = getInt32Memory0()[retptr / 4 + 0];\n            var r1 = getInt32Memory0()[retptr / 4 + 1];\n            let v2;\n            if (r0 !== 0) {\n                v2 = getArrayJsValueFromWasm0(r0, r1).slice();\n                wasm.__wbindgen_free(r0, r1 * 4, 4);\n            }\n            return v2;\n        } finally {\n            wasm.__wbindgen_add_to_stack_pointer(16);\n        }\n    }\n    /**\n     * Provides hover for a fragment at the given position\n     * @param {TextDocumentItem} text_document\n     * @param {Position} position\n     * @param {MarkupKind | undefined} [content_format]\n     * @param {(Rebind)[] | undefined} [rebinds]\n     * @returns {Hover | undefined}\n     */\n    doHover(text_document, position, content_format, rebinds) {\n        var ptr0 = isLikeNone(rebinds)\n            ? 0\n            : passArrayJsValueToWasm0(rebinds, wasm.__wbindgen_malloc);\n        var len0 = WASM_VECTOR_LEN;\n        const ret = wasm.rainlanguageservices_doHover(\n            this.__wbg_ptr,\n            addHeapObject(text_document),\n            addHeapObject(position),\n            isLikeNone(content_format) ? 0 : addHeapObject(content_format),\n            ptr0,\n            len0,\n        );\n        return takeObject(ret);\n    }\n    /**\n     * Provides hover for a RainDocument fragment at the given position\n     * @param {RainDocument} rain_document\n     * @param {Position} position\n     * @param {MarkupKind | undefined} [content_format]\n     * @returns {Hover | undefined}\n     */\n    doHoverRainDocument(rain_document, position, content_format) {\n        _assertClass(rain_document, RainDocument);\n        const ret = wasm.rainlanguageservices_doHoverRainDocument(\n            this.__wbg_ptr,\n            rain_document.__wbg_ptr,\n            addHeapObject(position),\n            isLikeNone(content_format) ? 0 : addHeapObject(content_format),\n        );\n        return takeObject(ret);\n    }\n    /**\n     * Provides semantic tokens for elided fragments\n     * @param {TextDocumentItem} text_document\n     * @param {number} semantic_token_types_index\n     * @param {number} semantic_token_modifiers_len\n     * @param {(Rebind)[] | undefined} [rebinds]\n     * @returns {SemanticTokensPartialResult}\n     */\n    semanticTokens(\n        text_document,\n        semantic_token_types_index,\n        semantic_token_modifiers_len,\n        rebinds,\n    ) {\n        var ptr0 = isLikeNone(rebinds)\n            ? 0\n            : passArrayJsValueToWasm0(rebinds, wasm.__wbindgen_malloc);\n        var len0 = WASM_VECTOR_LEN;\n        const ret = wasm.rainlanguageservices_semanticTokens(\n            this.__wbg_ptr,\n            addHeapObject(text_document),\n            semantic_token_types_index,\n            semantic_token_modifiers_len,\n            ptr0,\n            len0,\n        );\n        return takeObject(ret);\n    }\n    /**\n     * Provides semantic tokens for RainDocument's elided fragments\n     * @param {RainDocument} rain_document\n     * @param {number} semantic_token_types_index\n     * @param {number} semantic_token_modifiers_len\n     * @returns {SemanticTokensPartialResult}\n     */\n    rainDocumentSemanticTokens(\n        rain_document,\n        semantic_token_types_index,\n        semantic_token_modifiers_len,\n    ) {\n        _assertClass(rain_document, RainDocument);\n        const ret = wasm.rainlanguageservices_rainDocumentSemanticTokens(\n            this.__wbg_ptr,\n            rain_document.__wbg_ptr,\n            semantic_token_types_index,\n            semantic_token_modifiers_len,\n        );\n        return takeObject(ret);\n    }\n}\n\nasync function __wbg_load(module, imports) {\n    if (typeof Response === \"function\" && module instanceof Response) {\n        if (typeof WebAssembly.instantiateStreaming === \"function\") {\n            try {\n                return await WebAssembly.instantiateStreaming(module, imports);\n            } catch (e) {\n                if (module.headers.get(\"Content-Type\") != \"application/wasm\") {\n                    console.warn(\n                        \"`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\",\n                        e,\n                    );\n                } else {\n                    throw e;\n                }\n            }\n        }\n\n        const bytes = await module.arrayBuffer();\n        return await WebAssembly.instantiate(bytes, imports);\n    } else {\n        const instance = await WebAssembly.instantiate(module, imports);\n\n        if (instance instanceof WebAssembly.Instance) {\n            return { instance, module };\n        } else {\n            return instance;\n        }\n    }\n}\n\nfunction __wbg_get_imports() {\n    const imports = {};\n    imports.__wbindgen_placeholder__ = {};\n    imports.__wbindgen_placeholder__.__wbindgen_object_drop_ref = function (arg0) {\n        takeObject(arg0);\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_is_string = function (arg0) {\n        const ret = typeof getObject(arg0) === \"string\";\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_string_get = function (arg0, arg1) {\n        const obj = getObject(arg1);\n        const ret = typeof obj === \"string\" ? obj : undefined;\n        var ptr1 = isLikeNone(ret)\n            ? 0\n            : passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        var len1 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len1;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_is_object = function (arg0) {\n        const val = getObject(arg0);\n        const ret = typeof val === \"object\" && val !== null;\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_is_undefined = function (arg0) {\n        const ret = getObject(arg0) === undefined;\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_in = function (arg0, arg1) {\n        const ret = getObject(arg0) in getObject(arg1);\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_error_new = function (arg0, arg1) {\n        const ret = new Error(getStringFromWasm0(arg0, arg1));\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_raindocument_new = function (arg0) {\n        const ret = RainDocument.__wrap(arg0);\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_object_clone_ref = function (arg0) {\n        const ret = getObject(arg0);\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_number_new = function (arg0) {\n        const ret = arg0;\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_boolean_get = function (arg0) {\n        const v = getObject(arg0);\n        const ret = typeof v === \"boolean\" ? (v ? 1 : 0) : 2;\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_is_bigint = function (arg0) {\n        const ret = typeof getObject(arg0) === \"bigint\";\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_bigint_from_i64 = function (arg0) {\n        const ret = arg0;\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_jsval_eq = function (arg0, arg1) {\n        const ret = getObject(arg0) === getObject(arg1);\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_bigint_from_u64 = function (arg0) {\n        const ret = BigInt.asUintN(64, arg0);\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_number_get = function (arg0, arg1) {\n        const obj = getObject(arg1);\n        const ret = typeof obj === \"number\" ? obj : undefined;\n        getFloat64Memory0()[arg0 / 8 + 1] = isLikeNone(ret) ? 0 : ret;\n        getInt32Memory0()[arg0 / 4 + 0] = !isLikeNone(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_cb_drop = function (arg0) {\n        const obj = takeObject(arg0).original;\n        if (obj.cnt-- == 1) {\n            obj.a = 0;\n            return true;\n        }\n        const ret = false;\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_string_new = function (arg0, arg1) {\n        const ret = getStringFromWasm0(arg0, arg1);\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_as_number = function (arg0) {\n        const ret = +getObject(arg0);\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbg_fetch_6a2624d7f767e331 = function (arg0) {\n        const ret = fetch(getObject(arg0));\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_queueMicrotask_118eeb525d584d9a = function (arg0) {\n        queueMicrotask(getObject(arg0));\n    };\n    imports.__wbindgen_placeholder__.__wbg_queueMicrotask_26a89c14c53809c0 = function (arg0) {\n        const ret = getObject(arg0).queueMicrotask;\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_is_function = function (arg0) {\n        const ret = typeof getObject(arg0) === \"function\";\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbg_fetch_06d656a1b748ac0d = function (arg0, arg1) {\n        const ret = getObject(arg0).fetch(getObject(arg1));\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_newwithstrandinit_9fd2fc855c6327eb = function () {\n        return handleError(function (arg0, arg1, arg2) {\n            const ret = new Request(getStringFromWasm0(arg0, arg1), getObject(arg2));\n            return addHeapObject(ret);\n        }, arguments);\n    };\n    imports.__wbindgen_placeholder__.__wbg_signal_7876560d9d0f914c = function (arg0) {\n        const ret = getObject(arg0).signal;\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_new_fa36281638875de8 = function () {\n        return handleError(function () {\n            const ret = new AbortController();\n            return addHeapObject(ret);\n        }, arguments);\n    };\n    imports.__wbindgen_placeholder__.__wbg_abort_7792bf3f664d7bb3 = function (arg0) {\n        getObject(arg0).abort();\n    };\n    imports.__wbindgen_placeholder__.__wbg_instanceof_Response_0d25bb8436a9cefe = function (arg0) {\n        let result;\n        try {\n            result = getObject(arg0) instanceof Response;\n        } catch (_) {\n            result = false;\n        }\n        const ret = result;\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbg_url_47f8307501523859 = function (arg0, arg1) {\n        const ret = getObject(arg1).url;\n        const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len1 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len1;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n    };\n    imports.__wbindgen_placeholder__.__wbg_status_351700a30c61ba61 = function (arg0) {\n        const ret = getObject(arg0).status;\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbg_headers_e38c00d713e8888c = function (arg0) {\n        const ret = getObject(arg0).headers;\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_arrayBuffer_ec4617b29bb0f61c = function () {\n        return handleError(function (arg0) {\n            const ret = getObject(arg0).arrayBuffer();\n            return addHeapObject(ret);\n        }, arguments);\n    };\n    imports.__wbindgen_placeholder__.__wbg_new_a979e9eedc5e81a3 = function () {\n        return handleError(function () {\n            const ret = new Headers();\n            return addHeapObject(ret);\n        }, arguments);\n    };\n    imports.__wbindgen_placeholder__.__wbg_append_047382169b61373d = function () {\n        return handleError(function (arg0, arg1, arg2, arg3, arg4) {\n            getObject(arg0).append(getStringFromWasm0(arg1, arg2), getStringFromWasm0(arg3, arg4));\n        }, arguments);\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_jsval_loose_eq = function (arg0, arg1) {\n        const ret = getObject(arg0) == getObject(arg1);\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbg_getwithrefkey_4a92a5eca60879b9 = function (arg0, arg1) {\n        const ret = getObject(arg0)[getObject(arg1)];\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_set_9182712abebf82ef = function (arg0, arg1, arg2) {\n        getObject(arg0)[takeObject(arg1)] = takeObject(arg2);\n    };\n    imports.__wbindgen_placeholder__.__wbg_String_88810dfeb4021902 = function (arg0, arg1) {\n        const ret = String(getObject(arg1));\n        const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len1 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len1;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n    };\n    imports.__wbindgen_placeholder__.__wbg_getwithrefkey_5e6d9547403deab8 = function (arg0, arg1) {\n        const ret = getObject(arg0)[getObject(arg1)];\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_get_c43534c00f382c8a = function (arg0, arg1) {\n        const ret = getObject(arg0)[arg1 >>> 0];\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_length_d99b680fd68bf71b = function (arg0) {\n        const ret = getObject(arg0).length;\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbg_new_34c624469fb1d4fd = function () {\n        const ret = [];\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_newnoargs_5859b6d41c6fe9f7 = function (arg0, arg1) {\n        const ret = new Function(getStringFromWasm0(arg0, arg1));\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_new_ad4df4628315a892 = function () {\n        const ret = new Map();\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_next_1938cf110c9491d4 = function (arg0) {\n        const ret = getObject(arg0).next;\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_next_267398d0e0761bf9 = function () {\n        return handleError(function (arg0) {\n            const ret = getObject(arg0).next();\n            return addHeapObject(ret);\n        }, arguments);\n    };\n    imports.__wbindgen_placeholder__.__wbg_done_506b44765ba84b9c = function (arg0) {\n        const ret = getObject(arg0).done;\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbg_value_31485d8770eb06ab = function (arg0) {\n        const ret = getObject(arg0).value;\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_iterator_364187e1ee96b750 = function () {\n        const ret = Symbol.iterator;\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_get_5027b32da70f39b1 = function () {\n        return handleError(function (arg0, arg1) {\n            const ret = Reflect.get(getObject(arg0), getObject(arg1));\n            return addHeapObject(ret);\n        }, arguments);\n    };\n    imports.__wbindgen_placeholder__.__wbg_call_a79f1973a4f07d5e = function () {\n        return handleError(function (arg0, arg1) {\n            const ret = getObject(arg0).call(getObject(arg1));\n            return addHeapObject(ret);\n        }, arguments);\n    };\n    imports.__wbindgen_placeholder__.__wbg_new_87d841e70661f6e9 = function () {\n        const ret = new Object();\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_self_086b5302bcafb962 = function () {\n        return handleError(function () {\n            const ret = self.self;\n            return addHeapObject(ret);\n        }, arguments);\n    };\n    imports.__wbindgen_placeholder__.__wbg_window_132fa5d7546f1de5 = function () {\n        return handleError(function () {\n            const ret = window.window;\n            return addHeapObject(ret);\n        }, arguments);\n    };\n    imports.__wbindgen_placeholder__.__wbg_globalThis_e5f801a37ad7d07b = function () {\n        return handleError(function () {\n            const ret = globalThis.globalThis;\n            return addHeapObject(ret);\n        }, arguments);\n    };\n    imports.__wbindgen_placeholder__.__wbg_global_f9a61fce4af6b7c1 = function () {\n        return handleError(function () {\n            const ret = global.global;\n            return addHeapObject(ret);\n        }, arguments);\n    };\n    imports.__wbindgen_placeholder__.__wbg_set_379b27f1d5f1bf9c = function (arg0, arg1, arg2) {\n        getObject(arg0)[arg1 >>> 0] = takeObject(arg2);\n    };\n    imports.__wbindgen_placeholder__.__wbg_from_a663e01d8dab8e44 = function (arg0) {\n        const ret = Array.from(getObject(arg0));\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_isArray_fbd24d447869b527 = function (arg0) {\n        const ret = Array.isArray(getObject(arg0));\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbg_instanceof_ArrayBuffer_f4521cec1b99ee35 = function (\n        arg0,\n    ) {\n        let result;\n        try {\n            result = getObject(arg0) instanceof ArrayBuffer;\n        } catch (_) {\n            result = false;\n        }\n        const ret = result;\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbg_call_f6a2bc58c19c53c6 = function () {\n        return handleError(function (arg0, arg1, arg2) {\n            const ret = getObject(arg0).call(getObject(arg1), getObject(arg2));\n            return addHeapObject(ret);\n        }, arguments);\n    };\n    imports.__wbindgen_placeholder__.__wbg_set_83e83bc2428e50ab = function (arg0, arg1, arg2) {\n        const ret = getObject(arg0).set(getObject(arg1), getObject(arg2));\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_isSafeInteger_d8c89788832a17bf = function (arg0) {\n        const ret = Number.isSafeInteger(getObject(arg0));\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbg_entries_7a47f5716366056b = function (arg0) {\n        const ret = Object.entries(getObject(arg0));\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_new_1d93771b84541aa5 = function (arg0, arg1) {\n        try {\n            var state0 = { a: arg0, b: arg1 };\n            var cb0 = (arg0, arg1) => {\n                const a = state0.a;\n                state0.a = 0;\n                try {\n                    return __wbg_adapter_190(a, state0.b, arg0, arg1);\n                } finally {\n                    state0.a = a;\n                }\n            };\n            const ret = new Promise(cb0);\n            return addHeapObject(ret);\n        } finally {\n            state0.a = state0.b = 0;\n        }\n    };\n    imports.__wbindgen_placeholder__.__wbg_resolve_97ecd55ee839391b = function (arg0) {\n        const ret = Promise.resolve(getObject(arg0));\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_then_7aeb7c5f1536640f = function (arg0, arg1) {\n        const ret = getObject(arg0).then(getObject(arg1));\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_then_5842e4e97f7beace = function (arg0, arg1, arg2) {\n        const ret = getObject(arg0).then(getObject(arg1), getObject(arg2));\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_buffer_5d1b598a01b41a42 = function (arg0) {\n        const ret = getObject(arg0).buffer;\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_newwithbyteoffsetandlength_d695c7957788f922 = function (\n        arg0,\n        arg1,\n        arg2,\n    ) {\n        const ret = new Uint8Array(getObject(arg0), arg1 >>> 0, arg2 >>> 0);\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_new_ace717933ad7117f = function (arg0) {\n        const ret = new Uint8Array(getObject(arg0));\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbg_set_74906aa30864df5a = function (arg0, arg1, arg2) {\n        getObject(arg0).set(getObject(arg1), arg2 >>> 0);\n    };\n    imports.__wbindgen_placeholder__.__wbg_length_f0764416ba5bb237 = function (arg0) {\n        const ret = getObject(arg0).length;\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbg_instanceof_Uint8Array_4f5cffed7df34b2f = function (\n        arg0,\n    ) {\n        let result;\n        try {\n            result = getObject(arg0) instanceof Uint8Array;\n        } catch (_) {\n            result = false;\n        }\n        const ret = result;\n        return ret;\n    };\n    imports.__wbindgen_placeholder__.__wbg_stringify_daa6661e90c04140 = function () {\n        return handleError(function (arg0) {\n            const ret = JSON.stringify(getObject(arg0));\n            return addHeapObject(ret);\n        }, arguments);\n    };\n    imports.__wbindgen_placeholder__.__wbg_has_a2919659b7b645b3 = function () {\n        return handleError(function (arg0, arg1) {\n            const ret = Reflect.has(getObject(arg0), getObject(arg1));\n            return ret;\n        }, arguments);\n    };\n    imports.__wbindgen_placeholder__.__wbg_set_37a50e901587b477 = function () {\n        return handleError(function (arg0, arg1, arg2) {\n            const ret = Reflect.set(getObject(arg0), getObject(arg1), getObject(arg2));\n            return ret;\n        }, arguments);\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_bigint_get_as_i64 = function (arg0, arg1) {\n        const v = getObject(arg1);\n        const ret = typeof v === \"bigint\" ? v : undefined;\n        getBigInt64Memory0()[arg0 / 8 + 1] = isLikeNone(ret) ? BigInt(0) : ret;\n        getInt32Memory0()[arg0 / 4 + 0] = !isLikeNone(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_debug_string = function (arg0, arg1) {\n        const ret = debugString(getObject(arg1));\n        const ptr1 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len1 = WASM_VECTOR_LEN;\n        getInt32Memory0()[arg0 / 4 + 1] = len1;\n        getInt32Memory0()[arg0 / 4 + 0] = ptr1;\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_throw = function (arg0, arg1) {\n        throw new Error(getStringFromWasm0(arg0, arg1));\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_memory = function () {\n        const ret = wasm.memory;\n        return addHeapObject(ret);\n    };\n    imports.__wbindgen_placeholder__.__wbindgen_closure_wrapper1794 = function (arg0, arg1, arg2) {\n        const ret = makeMutClosure(arg0, arg1, 425, __wbg_adapter_50);\n        return addHeapObject(ret);\n    };\n\n    return imports;\n}\n\n/**\n * Method to be used as Tagged Templates to activate embedded rainlang in\n * javascript/typescript in vscode that highlights the rainlang syntax.\n * Requires rainlang vscode extension to be installed.\n */\nexport function rainlang(stringChunks, ...vars) {\n    let result = \"\";\n    for (let i = 0; i < stringChunks.length; i++) {\n        result = result + stringChunks[i] + (vars[i] ?? \"\");\n    }\n    return result;\n}\n\nimports = __wbg_get_imports();\n\nexport * from \"vscode-languageserver-types\";\nexport * from \"vscode-languageserver-protocol\";\n\nimport { Buffer } from \"buffer\";\nimport wasmB64 from \"../wasm.json\";\nconst bytes = Buffer.from(wasmB64.wasm, \"base64\");\n\nconst wasmModule = new WebAssembly.Module(bytes);\nconst wasmInstance = new WebAssembly.Instance(wasmModule, imports);\nwasm = wasmInstance.exports;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nclass FullTextDocument {\n    constructor(uri, languageId, version, content) {\n        this._uri = uri;\n        this._languageId = languageId;\n        this._version = version;\n        this._content = content;\n        this._lineOffsets = undefined;\n    }\n    get uri() {\n        return this._uri;\n    }\n    get languageId() {\n        return this._languageId;\n    }\n    get version() {\n        return this._version;\n    }\n    getText(range) {\n        if (range) {\n            const start = this.offsetAt(range.start);\n            const end = this.offsetAt(range.end);\n            return this._content.substring(start, end);\n        }\n        return this._content;\n    }\n    update(changes, version) {\n        for (const change of changes) {\n            if (FullTextDocument.isIncremental(change)) {\n                // makes sure start is before end\n                const range = getWellformedRange(change.range);\n                // update content\n                const startOffset = this.offsetAt(range.start);\n                const endOffset = this.offsetAt(range.end);\n                this._content = this._content.substring(0, startOffset) + change.text + this._content.substring(endOffset, this._content.length);\n                // update the offsets\n                const startLine = Math.max(range.start.line, 0);\n                const endLine = Math.max(range.end.line, 0);\n                let lineOffsets = this._lineOffsets;\n                const addedLineOffsets = computeLineOffsets(change.text, false, startOffset);\n                if (endLine - startLine === addedLineOffsets.length) {\n                    for (let i = 0, len = addedLineOffsets.length; i < len; i++) {\n                        lineOffsets[i + startLine + 1] = addedLineOffsets[i];\n                    }\n                }\n                else {\n                    if (addedLineOffsets.length < 10000) {\n                        lineOffsets.splice(startLine + 1, endLine - startLine, ...addedLineOffsets);\n                    }\n                    else { // avoid too many arguments for splice\n                        this._lineOffsets = lineOffsets = lineOffsets.slice(0, startLine + 1).concat(addedLineOffsets, lineOffsets.slice(endLine + 1));\n                    }\n                }\n                const diff = change.text.length - (endOffset - startOffset);\n                if (diff !== 0) {\n                    for (let i = startLine + 1 + addedLineOffsets.length, len = lineOffsets.length; i < len; i++) {\n                        lineOffsets[i] = lineOffsets[i] + diff;\n                    }\n                }\n            }\n            else if (FullTextDocument.isFull(change)) {\n                this._content = change.text;\n                this._lineOffsets = undefined;\n            }\n            else {\n                throw new Error('Unknown change event received');\n            }\n        }\n        this._version = version;\n    }\n    getLineOffsets() {\n        if (this._lineOffsets === undefined) {\n            this._lineOffsets = computeLineOffsets(this._content, true);\n        }\n        return this._lineOffsets;\n    }\n    positionAt(offset) {\n        offset = Math.max(Math.min(offset, this._content.length), 0);\n        const lineOffsets = this.getLineOffsets();\n        let low = 0, high = lineOffsets.length;\n        if (high === 0) {\n            return { line: 0, character: offset };\n        }\n        while (low < high) {\n            const mid = Math.floor((low + high) / 2);\n            if (lineOffsets[mid] > offset) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        // low is the least x for which the line offset is larger than the current offset\n        // or array.length if no line offset is larger than the current offset\n        const line = low - 1;\n        offset = this.ensureBeforeEOL(offset, lineOffsets[line]);\n        return { line, character: offset - lineOffsets[line] };\n    }\n    offsetAt(position) {\n        const lineOffsets = this.getLineOffsets();\n        if (position.line >= lineOffsets.length) {\n            return this._content.length;\n        }\n        else if (position.line < 0) {\n            return 0;\n        }\n        const lineOffset = lineOffsets[position.line];\n        if (position.character <= 0) {\n            return lineOffset;\n        }\n        const nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n        const offset = Math.min(lineOffset + position.character, nextLineOffset);\n        return this.ensureBeforeEOL(offset, lineOffset);\n    }\n    ensureBeforeEOL(offset, lineOffset) {\n        while (offset > lineOffset && isEOL(this._content.charCodeAt(offset - 1))) {\n            offset--;\n        }\n        return offset;\n    }\n    get lineCount() {\n        return this.getLineOffsets().length;\n    }\n    static isIncremental(event) {\n        const candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range !== undefined &&\n            (candidate.rangeLength === undefined || typeof candidate.rangeLength === 'number');\n    }\n    static isFull(event) {\n        const candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range === undefined && candidate.rangeLength === undefined;\n    }\n}\nexport var TextDocument;\n(function (TextDocument) {\n    /**\n     * Creates a new text document.\n     *\n     * @param uri The document's uri.\n     * @param languageId  The document's language Id.\n     * @param version The document's initial version number.\n     * @param content The document's content.\n     */\n    function create(uri, languageId, version, content) {\n        return new FullTextDocument(uri, languageId, version, content);\n    }\n    TextDocument.create = create;\n    /**\n     * Updates a TextDocument by modifying its content.\n     *\n     * @param document the document to update. Only documents created by TextDocument.create are valid inputs.\n     * @param changes the changes to apply to the document.\n     * @param version the changes version for the document.\n     * @returns The updated TextDocument. Note: That's the same document instance passed in as first parameter.\n     *\n     */\n    function update(document, changes, version) {\n        if (document instanceof FullTextDocument) {\n            document.update(changes, version);\n            return document;\n        }\n        else {\n            throw new Error('TextDocument.update: document must be created by TextDocument.create');\n        }\n    }\n    TextDocument.update = update;\n    function applyEdits(document, edits) {\n        const text = document.getText();\n        const sortedEdits = mergeSort(edits.map(getWellformedEdit), (a, b) => {\n            const diff = a.range.start.line - b.range.start.line;\n            if (diff === 0) {\n                return a.range.start.character - b.range.start.character;\n            }\n            return diff;\n        });\n        let lastModifiedOffset = 0;\n        const spans = [];\n        for (const e of sortedEdits) {\n            const startOffset = document.offsetAt(e.range.start);\n            if (startOffset < lastModifiedOffset) {\n                throw new Error('Overlapping edit');\n            }\n            else if (startOffset > lastModifiedOffset) {\n                spans.push(text.substring(lastModifiedOffset, startOffset));\n            }\n            if (e.newText.length) {\n                spans.push(e.newText);\n            }\n            lastModifiedOffset = document.offsetAt(e.range.end);\n        }\n        spans.push(text.substr(lastModifiedOffset));\n        return spans.join('');\n    }\n    TextDocument.applyEdits = applyEdits;\n})(TextDocument || (TextDocument = {}));\nfunction mergeSort(data, compare) {\n    if (data.length <= 1) {\n        // sorted\n        return data;\n    }\n    const p = (data.length / 2) | 0;\n    const left = data.slice(0, p);\n    const right = data.slice(p);\n    mergeSort(left, compare);\n    mergeSort(right, compare);\n    let leftIdx = 0;\n    let rightIdx = 0;\n    let i = 0;\n    while (leftIdx < left.length && rightIdx < right.length) {\n        const ret = compare(left[leftIdx], right[rightIdx]);\n        if (ret <= 0) {\n            // smaller_equal -> take left to preserve order\n            data[i++] = left[leftIdx++];\n        }\n        else {\n            // greater -> take right\n            data[i++] = right[rightIdx++];\n        }\n    }\n    while (leftIdx < left.length) {\n        data[i++] = left[leftIdx++];\n    }\n    while (rightIdx < right.length) {\n        data[i++] = right[rightIdx++];\n    }\n    return data;\n}\nfunction computeLineOffsets(text, isAtLineStart, textOffset = 0) {\n    const result = isAtLineStart ? [textOffset] : [];\n    for (let i = 0; i < text.length; i++) {\n        const ch = text.charCodeAt(i);\n        if (isEOL(ch)) {\n            if (ch === 13 /* CharCode.CarriageReturn */ && i + 1 < text.length && text.charCodeAt(i + 1) === 10 /* CharCode.LineFeed */) {\n                i++;\n            }\n            result.push(textOffset + i + 1);\n        }\n    }\n    return result;\n}\nfunction isEOL(char) {\n    return char === 13 /* CharCode.CarriageReturn */ || char === 10 /* CharCode.LineFeed */;\n}\nfunction getWellformedRange(range) {\n    const start = range.start;\n    const end = range.end;\n    if (start.line > end.line || (start.line === end.line && start.character > end.character)) {\n        return { start: end, end: start };\n    }\n    return range;\n}\nfunction getWellformedEdit(textEdit) {\n    const range = getWellformedRange(textEdit.range);\n    if (range !== textEdit.range) {\n        return { newText: textEdit.newText, range };\n    }\n    return textEdit;\n}\n","import { yamlLanguage, yaml } from '@codemirror/lang-yaml';\nimport { ExternalTokenizer, LRParser, LocalTokenGroup } from '@lezer/lr';\nimport { styleTags, tags } from '@lezer/highlight';\nimport { indentNodeProp, delimitedIndent, foldNodeProp, foldInside, LRLanguage, LanguageDescription, LanguageSupport } from '@codemirror/language';\nimport { parseMixed } from '@lezer/common';\nimport { MetaStore, RainLanguageServices, TextDocumentItem, CompletionItemKind } from '@rainlanguage/dotrain';\nexport * from '@rainlanguage/dotrain';\nexport { MetaStore } from '@rainlanguage/dotrain';\nimport { Facet } from '@codemirror/state';\nimport { autocompletion } from '@codemirror/autocomplete';\nimport { hoverTooltip, ViewPlugin } from '@codemirror/view';\nimport { setDiagnostics } from '@codemirror/lint';\nimport { TextDocument } from 'vscode-languageserver-textdocument';\nexport { TextDocument } from 'vscode-languageserver-textdocument';\n\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst FrontMatter = 1, ElisionMsg = 2;\n\nconst frontMatter = new ExternalTokenizer((input, _stack) => {\n    // 45 = -\n    // 47 = /\n    // 42 = *\n    while (input.next >= 0) {\n        if (input.next == 45 && input.peek(1) == 45 && input.peek(2) == 45) {\n            input.acceptToken(FrontMatter);\n            break;\n        }\n        else if (input.next == 42 && input.peek(1) == 47) {\n            break;\n        }\n        input.advance();\n    }\n});\nconst elisionMsg = new ExternalTokenizer((input, _stack) => {\n    while (check(input)) {\n        if (input.next == 33) {\n            while (check(input)) {\n                input.advance();\n            }\n            input.acceptToken(ElisionMsg);\n            break;\n        }\n        input.advance();\n    }\n});\nfunction check(input) {\n    // 33 = !\n    // 47 = /\n    // 42 = *\n    // 35 = #\n    // 64 = @\n    return input.next >= 0\n        && input.next != 35\n        && input.next != 64\n        && !(input.next == 47 && input.peek(1) == 42);\n}\n\nconst highlight = styleTags({\n    FrontMatterSplitter: tags.comment,\n    Number: tags.number,\n    Placeholder: tags.unit,\n    VariableName: tags.variableName,\n    Opcode: tags.keyword,\n    OpcodeWithOperand: tags.keyword,\n    BlockComment: tags.comment,\n    AngleBracketOpen: tags.keyword,\n    AngleBracketClose: tags.keyword,\n    ParenOpen: tags.keyword,\n    ParenClose: tags.keyword,\n    Assignment: tags.separator,\n    Comma: tags.punctuation,\n    Semi: tags.punctuation,\n    Import: tags.meta,\n    Binding: tags.className,\n    Quote: tags.string,\n    StringLiteral: tags.string,\n    SubParser: tags.string,\n    Pragma: tags.unit,\n    ElisionMsg: tags.deleted,\n});\nconst indent = indentNodeProp.add({\n    Expression: delimitedIndent({ closing: \")\", align: false }),\n});\nconst fold = foldNodeProp.add({\n    Expression: foldInside,\n    BlockComment(tree) { return { from: tree.from + 2, to: tree.to - 2 }; }\n});\n\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst parser = LRParser.deserialize({\n  version: 14,\n  states: \"$zQ!^QTOOP!eOSOOO#eQSO'#CrOOQO'#Co'#CoO#lQSO'#CnOOQO'#DR'#DROOQO'#Cx'#CxO#sQUO'#CxQ$zQSOOQ$zQSOOQYQSOOP%UOWO'#C_POOO)C>q)C>qOOQO'#Cy'#CyO%aQSO,59^O%hQSO,59^O%mQSO,59YOOQO,59Y,59YOOQO,59d,59dOOQO-E6v-E6vPOOO'#Cw'#CwP%tOWO,58yPOOO,58y,58yOOQO-E6w-E6wO&PQSO1G.xOOQO1G.x1G.xOOQO1G.t1G.tPOOO-E6u-E6uPOOO1G.e1G.eOOQO7+$d7+$d\",\n  stateData: \"&[~OpOSqPQ~OTXOUTOVTOWTOXTOYTOZTO[TO]TO^TO_TO`TOdROgQOiUOjVO~OPYO~PYOqZO~OUTOVTOWTOXTOYTOZTO[TO]TO^TO_TO`TOdROgQO~Oh_O~P!jOaaO~P!jOQbOUlXVlXWlXXlXYlXZlX[lX]lX^lX_lX`lXdlXglXilXjlXnlX~OiUOjVO~P!jOrdOsdOtfO~OhhO~P!jOeiO~OajO~P!jOrdOsdOtlO~OemO~Odg`g^~\",\n  goto: \"#`vPPPwPPPPPPPPPPPPPPz!UPP!`PPPP!j!p!xPPPPPPP#SR[PaTOQSWXY^`aSOQSWXY^`aROQSWXY^`QeZRkeUWOXYRcWQ^QQ`STg^`WUOWXYX]QS^`\",\n  nodeNames: \" FrontMatter ElisionMsg BlockComment Program FrontMatterSplitter Semi Comma Assignment AngleBracketOpen Number StringLiteral SubParser Placeholder VariableName Quote Pragma ParenClose Expression OpcodeOpening Opcode ParenOpen OpcodeWithOperandOpening OpcodeWithOperand AngleBracketClose Import Binding\",\n  maxTerm: 37,\n  propSources: [highlight,indent,fold],\n  skippedNodes: [0,3,27],\n  repeatNodeCount: 3,\n  tokenData: \"6O~RiXY!pYZ!p]^!ppq!prs#Rst#pwx$nxy%lyz%q|}%v}!O%{!P!Q&^!Q!R&i!R![']![!](P!]!^(U!^!_(Z!`!a(`!b!c(e!c!}*r!}#O+e#R#S,V#T#i*r#i#j,[#j#o*r~!uSp~XY!pYZ!p]^!ppq!p~#UTOr#Rrs#es;'S#R;'S;=`#j<%lO#R~#jOZ~~#mP;=`<%l#R~#uZj~OX#pZ]#p^p#pqx#pz|#p}![#p!_!`#p!a#Q#p#R;'S#p;'S;=`$h<%lO#p~$kP;=`<%l#p~$sZ_~OX$nZ]$n^p$nqx$nz|$n}![$n!_!`$n!a#Q$n#R;'S$n;'S;=`%f<%lO$n~%iP;=`<%l$n~%qOe~~%vOa~~%{OV~~&OP}!O&R~&UP}!O&X~&^OT~~&aPz{&d~&iOq~~&nPY~#l#m&q~&tR!Q![&}!c!i&}#T#Z&}~'SRY~!Q![&}!c!i&}#T#Z&}~'bQY~!Q!['h#X#Y'q~'kQ!Q!['h#X#Y'q~'tP!Q!['w~'|PY~!Q!['w~(UOW~~(ZOU~~(`OX~~(eOh~~(jVi~XY(eYZ(e]^(epq(e!Q!R)P!c!})q#T#o)q~)SP#l#m)V~)YR!Q![)c!c!i)c#T#Z)c~)hRi~!Q![)c!c!i)c#T#Z)c~)tWXY*^YZ*^]^*^pq*^}!O)q!Q![)q!c!})q#T#o)q~*cTi~XY*^YZ*^]^*^pq*^!Q!R)P~*wU^~xy+Z}!O*r!Q![*r!^!_+`!c!}*r#T#o*r~+`Od~~+eOg~~+hUO!}+e#O#P+e#P#Q+z#Q;'S+e;'S;=`,P<%lO+e~,PO[~~,SP;=`<%l+e~,[O]~~,aW^~xy+Z}!O*r!Q![*r!^!_+`!c!}*r#T#g*r#g#h,y#h#o*r~-OW^~xy+Z}!O*r!Q![*r!^!_+`!c!}*r#T#]*r#]#^-h#^#o*r~-mW^~xy+Z}!O*r!Q![*r!^!_+`!c!}*r#T#b*r#b#c.V#c#o*r~.[W^~xy+Z}!O*r!Q![*r!^!_+`!c!}*r#T#Z*r#Z#[.t#[#o*r~.yU^~xy+Z}!O/]!Q![*r!^!_+`!c!}*r#T#o*r~/bW^~xy+Z}!O*r!Q![*r!^!_+`!c!}*r#T#k*r#k#l/z#l#o*r~0PW^~xy+Z}!O*r!Q![*r!^!_+`!c!}*r#T#c*r#c#d0i#d#o*r~0nW^~xy+Z}!O*r!Q![*r!^!_+`!c!}*r#T#f*r#f#g1W#g#o*r~1]W^~xy+Z}!O*r!Q![*r!^!_+`!c!}*r#T#W*r#W#X1u#X#o*r~1zW^~xy+Z}!O*r!Q![*r!^!_+`!c!}*r#T#g*r#g#h2d#h#o*r~2iU^~xy+Z}!O2{!Q![*r!^!_+`!c!}*r#T#o*r~3QW^~xy+Z}!O*r!Q![*r!^!_+`!c!}*r#T#Y*r#Y#Z3j#Z#o*r~3oW^~xy+Z}!O*r!Q![*r!^!_+`!c!}*r#T#f*r#f#g4X#g#o*r~4^W^~xy+Z}!O*r!Q![*r!^!_+`!c!}*r#T#c*r#c#d4v#d#o*r~4{W^~xy+Z}!O*r!Q![*r!^!_+`!c!}*r#T#a*r#a#b5e#b#o*r~5lU`~^~xy+Z}!O*r!Q![*r!^!_+`!c!}*r#T#o*r\",\n  tokenizers: [frontMatter, elisionMsg, 1, new LocalTokenGroup(\"u~RRYZ[]^az{i~aOs~~fPs~YZ[~lP!P!Qo~tOt~~\", 36, 34)],\n  topRules: {\"Program\":[0,4]},\n  tokenPrec: 236\n});\n\n/**\n * @public Rainlang syntax highlighter\n */\nconst RainlangLR = LRLanguage.define({\n    name: \"rainlang\",\n    parser: parser.configure({\n        wrap: parseMixed((node, _input) => node.type.id == FrontMatter\n            ? { parser: yamlLanguage.parser, overlay: [{ from: node.from, to: node.to }] }\n            : null)\n    }),\n    languageData: {\n        closeBrackets: { brackets: [\"(\", \"<\", \"[\", \"\\\"\", \"{\", \"`\"] },\n        commentTokens: { block: { open: \"/*\", close: \"*/\" } },\n        wordChars: \"-\"\n    }\n});\n\n/**\n * @public Converts TextDocument to TextDocumentItem\n */\nfunction toTextDocumentItem(textDocument) {\n    return {\n        text: textDocument.getText(),\n        uri: textDocument.uri,\n        version: textDocument.version,\n        languageId: textDocument.languageId\n    };\n}\n// const useLast = (values: readonly any[]) => values.reduce((_, v) => v, '');\n// const documentUri = Facet.define<string, string>({ combine: useLast });\n// const languageId = Facet.define<string, string>({ combine: useLast });\n/**\n * @public A plugin that manages languages services processes.\n * Original code from [codemirror-languageserver](https://github.com/FurqanSoftware/codemirror-languageserver),\n * BSD-3-Clause License, Copyright (c) 2021, Mahmud Ridwan, All rights reserved.\n *\n * @see [LICENSE](./LICENSE) for license details.\n */\nclass RainLanguageServicesPlugin {\n    view;\n    callback;\n    uri = \"file:///untitled.rain\";\n    languageId = \"rainlang\";\n    metaStore;\n    version = 0;\n    langServices;\n    textDocument;\n    /**\n     * @public constructor of the class\n     * @param view - The editor view instance\n     * @param metaStore - (optional) The meta store object to use\n     * @param callback - (optional) The callback to run fork calls on native parser,\n     * this will be called everytime there are no active diagnostics, so as a result,\n     * errors from calling onchain parser will be shown as diagnostics\n     */\n    constructor(view, metaStore, callback) {\n        this.view = view;\n        this.callback = callback;\n        this.metaStore = metaStore ? metaStore : new MetaStore(true);\n        this.textDocument = TextDocument.create(this.uri, this.languageId, this.version, this.view.state.doc.toString());\n        this.langServices = new RainLanguageServices(this.metaStore);\n        this.processDiagnostics(this.view.state.doc.toString(), this.version).then(v => this.view.dispatch(v[0]));\n    }\n    // update the instance of TexTdocument and RainDocument\n    update(update) {\n        if (!update.docChanged)\n            return;\n        else {\n            TextDocument.update(this.textDocument, [{ text: this.view.state.doc.toString() }], ++this.version);\n            this.processDiagnostics(this.view.state.doc.toString(), this.version).then(v => v[1] === this.version ? this.view.dispatch(v[0]) : {});\n        }\n    }\n    destroy() { }\n    /**\n     * @public Handles calls for hover tooltip\n     */\n    async handleHoverTooltip(offset) {\n        try {\n            const hover = this.langServices.doHover(toTextDocumentItem(this.textDocument), this.textDocument.positionAt(offset));\n            if (!hover)\n                return null;\n            else {\n                let end;\n                if (hover.range) {\n                    offset = this.textDocument.offsetAt(hover.range.start);\n                    end = this.textDocument.offsetAt(hover.range.end);\n                }\n                return getHoverTooltip(hover, offset, end);\n            }\n        }\n        catch (err) {\n            console.log(err);\n            return null;\n        }\n    }\n    /**\n     * @public Handles calls for code completion\n     */\n    async handleCompletion(context) {\n        try {\n            const completions = this.langServices.doComplete(toTextDocumentItem(this.textDocument), this.textDocument.positionAt(context.pos));\n            if (!completions)\n                return null;\n            else\n                return getCompletion(context, completions);\n        }\n        catch (err) {\n            console.log(err);\n            return null;\n        }\n    }\n    /**\n     * @public Handles calls for docuement diagnostics\n     */\n    async processDiagnostics(text, version) {\n        try {\n            const textDocument = TextDocumentItem.create(\"file:///temp.rain\", \"rainlang\", 0, text);\n            const rainDocument = this.langServices.newRainDocument(textDocument);\n            const diagnostics = getDiagnostics(rainDocument.allProblems);\n            if (diagnostics.length === 0 && this.callback) {\n                const npErrors = await this.callback(rainDocument);\n                return [setDiagnostics(this.view.state, getDiagnostics(npErrors)), version];\n            }\n            else {\n                return [setDiagnostics(this.view.state, diagnostics), version];\n            }\n        }\n        catch (err) {\n            console.log(err);\n            return [setDiagnostics(this.view.state, []), version];\n        }\n    }\n}\n/**\n * @public A plugin that gets all lang services through provided callbacks.\n * So all the logic behind suppliying the lang services results can be out-sources\n * on the callbacks implementations.\n * Each callback is triggered when the services is on demand in the text editor\n * through use input/actions\n */\nclass RawRainLanguageServicesPlugin {\n    view;\n    callbacks;\n    uri = \"file:///untitled.rain\";\n    languageId = \"rainlang\";\n    version = 0;\n    textDocument;\n    constructor(view, callbacks) {\n        this.view = view;\n        this.callbacks = callbacks;\n        this.textDocument = TextDocument.create(this.uri, this.languageId, this.version, this.view.state.doc.toString());\n        this.processDiagnostics(this.view.state.doc.toString(), this.version).then(v => this.view.dispatch(v[0]));\n    }\n    // update the instance of TexTdocument and RainDocument\n    update(update) {\n        if (!update.docChanged)\n            return;\n        else {\n            TextDocument.update(this.textDocument, [{ text: this.view.state.doc.toString() }], ++this.version);\n            this.processDiagnostics(this.view.state.doc.toString(), this.version).then(v => v[1] === this.version ? this.view.dispatch(v[0]) : {});\n        }\n    }\n    destroy() { }\n    /**\n     * @public Handles calls for hover tooltip\n     */\n    async handleHoverTooltip(offset) {\n        if (this.callbacks.hover) {\n            try {\n                const hover = await this.callbacks.hover(toTextDocumentItem(this.textDocument), this.textDocument.positionAt(offset));\n                if (!hover)\n                    return null;\n                else {\n                    let end;\n                    if (hover.range) {\n                        offset = this.textDocument.offsetAt(hover.range.start);\n                        end = this.textDocument.offsetAt(hover.range.end);\n                    }\n                    return getHoverTooltip(hover, offset, end);\n                }\n            }\n            catch (err) {\n                console.log(err);\n                return null;\n            }\n        }\n        else\n            return null;\n    }\n    /**\n     * @public Handles calls for code completion\n     */\n    async handleCompletion(context) {\n        if (this.callbacks.completion) {\n            try {\n                const completions = await this.callbacks.completion(toTextDocumentItem(this.textDocument), this.textDocument.positionAt(context.pos));\n                if (!completions)\n                    return null;\n                else\n                    return getCompletion(context, completions);\n            }\n            catch (err) {\n                console.log(err);\n                return null;\n            }\n        }\n        else\n            return null;\n    }\n    /**\n     * @public Handles calls for docuement diagnostics\n     */\n    async processDiagnostics(text, version) {\n        try {\n            const textDocument = TextDocumentItem.create(\"file:///temp.rain\", \"rainlang\", 0, text);\n            const diagnostics = await this.callbacks.diagnostics(textDocument);\n            return [setDiagnostics(this.view.state, getDiagnostics(diagnostics)), version];\n        }\n        catch (err) {\n            console.log(err);\n            return [setDiagnostics(this.view.state, []), version];\n        }\n    }\n}\n/**\n * @public Converts LSP hover to codemirror hover tooltips.\n * Original code from [codemirror-languageserver](https://github.com/FurqanSoftware/codemirror-languageserver),\n * BSD-3-Clause License, Copyright (c) 2021, Mahmud Ridwan, All rights reserved.\n *\n * @see [LICENSE](./LICENSE) for license details.\n *\n * @param hover - The LSP hover item\n * @param pos - Offset of the textDocument to get the completion items for\n * @param end - The end offset of the requested hiver item\n * @returns Codemirror tooltip or null\n */\nfunction getHoverTooltip(hover, pos, end) {\n    const { contents } = hover;\n    if (pos === null)\n        return null;\n    const dom = document.createElement(\"div\");\n    dom.classList.add(\"documentation\");\n    //if (this.allowHTMLContent) dom.innerHTML = formatContents(contents);\n    //else \n    dom.textContent = contents.value;\n    return { pos, end, create: (_view) => ({ dom }), above: true };\n}\n/**\n * @public Converts LSP CompletionItem to codemirror code completions.\n * Original code from [codemirror-languageserver](https://github.com/FurqanSoftware/codemirror-languageserver),\n * BSD-3-Clause License, Copyright (c) 2021, Mahmud Ridwan, All rights reserved.\n *\n * @see [LICENSE](./LICENSE) for license details.\n *\n * @param context - Completion context\n * @param completionItems - The LSP completion items\n * @returns Codemirror completion result or null\n */\nfunction getCompletion(context, completionItems) {\n    const CompletionItemKindMap = Object.fromEntries(Object.entries(CompletionItemKind).map(([key, value]) => [value, key]));\n    let { pos } = context;\n    if (!context.matchBefore(/['\\w-]+$/))\n        return null;\n    let completions = completionItems.map(({ detail, label, kind, insertText, documentation, sortText, filterText, }) => {\n        const completion = {\n            label,\n            detail,\n            apply: insertText ? insertText : label,\n            type: kind && CompletionItemKindMap[kind].toLowerCase(),\n            sortText: sortText ?? label,\n            filterText: filterText ?? label,\n        };\n        if (documentation) {\n            completion.info = documentation.value;\n        }\n        return completion;\n    });\n    const [_span, _match] = prefixMatch(completions);\n    const token = context.matchBefore(_match);\n    if (token) {\n        pos = token.from;\n        const word = token.text.toLowerCase();\n        if (/^['\\w-]+$/.test(word)) {\n            completions = completions\n                .filter(({ filterText }) => filterText.toLowerCase().startsWith(word))\n                .sort(({ label: a }, { label: b }) => {\n                switch (true) {\n                    case a.startsWith(token.text) && !b.startsWith(token.text):\n                        return -1;\n                    case !a.startsWith(token.text) && b.startsWith(token.text):\n                        return 1;\n                }\n                return 0;\n            });\n        }\n    }\n    return {\n        from: pos,\n        options: completions,\n    };\n}\n/**\n * @public Converts RainDocument Problems to codemirror diagnostics\n * @param problems - RainDocument problems\n */\nfunction getDiagnostics(problems) {\n    return problems.map(({ msg, position }) => ({\n        message: msg,\n        from: position[0],\n        to: position[1],\n        severity: \"error\"\n        // ({\n        //     [DiagnosticSeverity.Error]: \"error\",\n        //     [DiagnosticSeverity.Warning]: \"warning\",\n        //     [DiagnosticSeverity.Information]: \"info\",\n        //     [DiagnosticSeverity.Hint]: \"info\",\n        // } as const)[severity!]\n    }));\n}\n/**\n * @public Converts a position to offset of a character in a codemirror text.\n * Original code from [codemirror-languageserver](https://github.com/FurqanSoftware/codemirror-languageserver),\n * BSD-3-Clause License, Copyright (c) 2021, Mahmud Ridwan, All rights reserved.\n *\n * @see [LICENSE](./LICENSE) for license details.\n *\n * @param doc - Codemirror text\n * @param pos - The position to convert\n * @returns - The offset of the provided position\n */\nfunction posToOffset(doc, pos) {\n    if (pos.line >= doc.lines)\n        return doc.length;\n    const offset = doc.line(pos.line + 1).from + pos.character;\n    if (offset > doc.length)\n        return doc.length;\n    return offset;\n}\n/**\n * @public Converts offset of a character in a codemirror text to a position.\n * Original code from [codemirror-languageserver](https://github.com/FurqanSoftware/codemirror-languageserver),\n * BSD-3-Clause License, Copyright (c) 2021, Mahmud Ridwan, All rights reserved.\n *\n * @see [LICENSE](./LICENSE) for license details.\n *\n * @param doc - Codemirror text\n * @param offset - The offset to convert\n * @returns - The position of the provided character offset\n */\nfunction offsetToPos(doc, offset) {\n    const line = doc.lineAt(offset);\n    return {\n        line: line.number - 1,\n        character: offset - line.from,\n    };\n}\n/**\n * @public Constructs regexp out of completion items.\n * Original code from [codemirror-languageserver](https://github.com/FurqanSoftware/codemirror-languageserver),\n * BSD-3-Clause License, Copyright (c) 2021, Mahmud Ridwan, All rights reserved.\n *\n * @see [LICENSE](./LICENSE) for license details.\n *\n * @param completions - Codemirror completion items\n * @returns Regexp of completion items\n */\nfunction prefixMatch(completions) {\n    function toSet(chars) {\n        let preamble = \"\";\n        let flat = Array.from(chars).join(\"\");\n        const words = /\\w/.test(flat);\n        if (words) {\n            preamble += \"\\\\w\";\n            flat = flat.replace(/\\w/g, \"\");\n        }\n        return `[${preamble}${flat.replace(/[^\\w\\s]/g, \"\\\\$&\")}]`;\n    }\n    const first = new Set();\n    const rest = new Set();\n    for (const { label } of completions) {\n        const [initial, ...restStr] = label;\n        first.add(initial);\n        for (const char of restStr) {\n            rest.add(char);\n        }\n    }\n    const source = toSet(first) + toSet(rest) + \"*$\";\n    return [new RegExp(\"^\" + source), new RegExp(source)];\n}\n/**\n * @public Reduces an array to its last element\n * @param values - Values to reduce\n */\nconst useLast = (values) => values.reduce((_, v) => v, \"\");\n\n/**\n * @public The facet used to store and retrive RainLanguageServicesPlugin instance from a EditorView.plugin().\n * By getting the facet value from the state associated with that EditoreView instance, you then can intract\n * with the plugin directly to get the Meta.Store instance and update its subgraph and metas manually, however,\n * this is not recommended as the meta storage and management is handled automatically by every meta hash that\n * is specified in an Rain document, so using this will not be needed in most of the cases unless some custom\n * behavior is intended.\n * This combination is provided for `rainlang` LanguageSupport class object and not for `RainlangExtention` class.\n *\n * @example\n * ```typescript\n * // get value of the facet\n * const rainViewPlugin = editorView.state.facet(RainLanguageServicesFacet);\n *\n * // get the plugin instance\n * const rainPlugin = editorView.plugin(rainViewPlugin);\n *\n * // update op meta from plugin\n * rainPlugin.getMetaStore();\n * ```\n */\nconst RainLanguageServicesFacet = Facet.define({ combine: useLast });\n/**\n * @public Rainlang as a codemirror extension\n * @example\n * ```typescript\n * // instantiate the extension that can be directly used as codemirror extension\n * const rainlangExtension = new RainlangExtention(options);\n *\n * // instantiate the extension with initial meta data\n * const rainlangExtension = new RainlangExtension();\n *\n * // to get the MetaStore instance of this extension instance\n * const metaStore = rainlangExtension.plugin.metaStore;\n * ```\n */\nclass RainlangExtension extends LanguageSupport {\n    plugin;\n    hover = hoverTooltip((_view, pos) => this.plugin?.handleHoverTooltip(pos) ?? null);\n    completion = autocompletion({\n        override: [\n            async (context) => {\n                if (this.plugin == null)\n                    return null;\n                return await this.plugin?.handleCompletion(context);\n            },\n        ],\n    });\n    /**\n     * @public Constructor of the RainlangCodemirror class\n     * @param config - Options for language services to include\n     */\n    constructor(config) {\n        const rainViewPlugin = ViewPlugin.define(view => this.plugin = new RainLanguageServicesPlugin(view, config?.metaStore, config?.callback));\n        const ext = [\n            yaml().support,\n            RainLanguageServicesFacet.of(rainViewPlugin),\n            rainViewPlugin\n        ];\n        super(RainlangLR, ext);\n        if (!config)\n            ext.push(this.hover, this.completion);\n        else {\n            if (config?.hover)\n                ext.push(this.hover);\n            if (config?.completion)\n                ext.push(this.completion);\n        }\n    }\n}\n/**\n * @public Raw Rainlang codemirror extension, that does everything through supplied callbacks\n */\nclass RawRainlangExtension extends LanguageSupport {\n    plugin;\n    hover = hoverTooltip((_view, pos) => this.plugin?.handleHoverTooltip(pos) ?? null);\n    completion = autocompletion({\n        override: [\n            async (context) => {\n                if (this.plugin == null)\n                    return null;\n                return await this.plugin?.handleCompletion(context);\n            },\n        ],\n    });\n    /**\n     * @public Constructor of the RainlangCodemirror class\n     * @param callbacks - Raw language services callbacks\n     */\n    constructor(callbacks) {\n        const rainViewPlugin = ViewPlugin.define(view => this.plugin = new RawRainLanguageServicesPlugin(view, callbacks));\n        const ext = [\n            yaml().support,\n            RainLanguageServicesFacet.of(rainViewPlugin),\n            rainViewPlugin\n        ];\n        super(RainlangLR, ext);\n        if (callbacks.hover)\n            ext.push(this.hover);\n        if (callbacks.completion)\n            ext.push(this.completion);\n    }\n}\n/**\n * @public\n * Provides Rainlang implementation for codemirror as LanguageSupport\n * This is the standard implementation of rainlang for codemirror.\n *\n * @example\n * ```typescript\n * const rainLanguageSupport = RainLanguageSupport(config);\n * ```\n * in order to get the Meta.Store instance, it should be done through getting the plugin instance\n * from the EditorView with providing it the result of getting the `RainLanguageServicesFacet`\n * facet and then calling `getMetaStore()` for it, however this is not recommended as meta management\n * is done automatically from specified meta hashes in a Rain document:\n * ```typescript\n * // get the `RainLanguageServicesFacet` value from editor view\n * const rainViewPlugin = view.state.facet(RainLanguageServicesFacet);\n *\n * // retrive the `RainLanguageServicesPlugin` instance\n * const rainPlugin = view.plugin(rainViewPlugin);\n *\n * // get the Meta.Store instance\n * rainPlugin.metaStore();\n * ```\n *\n * @param config - Options for language services to include\n * @param metaStore - (optional) The meta store object to use\n * @returns rainlang LanguageSupport\n */\nfunction RainLanguageSupport(config) {\n    let plugin;\n    const rainViewPlugin = ViewPlugin.define(view => plugin = new RainLanguageServicesPlugin(view, config?.metaStore, config?.callback));\n    const services = [];\n    const hover = hoverTooltip((_view, pos) => plugin?.handleHoverTooltip(pos) ?? null);\n    const completion = autocompletion({\n        override: [\n            async (context) => {\n                if (plugin == null)\n                    return null;\n                return await plugin?.handleCompletion(context);\n            },\n        ],\n    });\n    if (!config)\n        services.push(hover, completion);\n    else {\n        if (config?.hover)\n            services.push(hover);\n        if (config?.completion)\n            services.push(completion);\n    }\n    return new LanguageSupport(RainlangLR, [\n        RainLanguageServicesFacet.of(rainViewPlugin),\n        rainViewPlugin,\n        yaml().support,\n        ...services\n    ]);\n}\n/**\n * @public Provides LanguageDescription class object for rainlang.\n * Use `load` to instantiate rain LanguageSupport with initial meta data\n */\nconst RainlangDescription = LanguageDescription.of({\n    name: \"rainlang\",\n    alias: [\"Rain Language\", \"Rainlang\", \"RainLang\", \"rain\"],\n    extensions: [\".rain\"],\n    load: (config) => {\n        return Promise.resolve(new RainlangExtension(config));\n    },\n    support: new RainlangExtension()\n});\n\nexport { RainLanguageServicesFacet, RainLanguageServicesPlugin, RainLanguageSupport, RainlangDescription, RainlangExtension, RainlangLR, RawRainLanguageServicesPlugin, RawRainlangExtension, getCompletion, getDiagnostics, getHoverTooltip, offsetToPos, posToOffset, prefixMatch, toTextDocumentItem, useLast };\n"],"names":["toggleComment","target","state","line","config","getConfig","toggleLineComment","toggleBlockCommentByLine","command","f","option","dispatch","tr","changeLineComment","toggleBlockComment","changeBlockComment","o","s","selectedLineRanges","pos","data","SearchMargin","findBlockComment","open","close","from","to","textBefore","textAfter","spaceBefore","spaceAfter","beforeOff","startText","endText","startSpace","endSpace","endOff","ranges","r","fromLine","toLine","last","tokens","c","comments","i","range","changes","comment","token","lines","prevLine","startI","minIndent","indent","empty","l","single","changeSet","fromHistory","Annotation","isolateHistory","invertedEffects","Facet","historyConfig","configs","combineConfig","_t","isAdjacent","a","b","adj","historyField_","StateField","HistoryState","fromHist","item","HistEvent","other","updateBranch","addSelection","isolate","Transaction","event","time","userEvent","value","e","json","history","EditorView","view","undo","redo","cmd","side","selection","historyState","undoSelection","redoSelection","effects","mapped","startSelection","selectionsAfter","after","_a","_b","_c","ChangeSet","ChangeDesc","EditorSelection","none","invert","result","selections","branch","maxLen","newEvent","start","newBranch","t","_f","eqSelectionShape","conc","MaxSelectionsPerEvent","lastEvent","sels","popSelection","addMappingToBranch","mapping","length","mapEvent","extraSelections","mappedChanges","before","fullMapping","StateEffect","joinableUserEvent","done","undone","prevTime","prevUserEvent","newGroupDelay","onlySelection","rest","historyKeymap","updateSel","sel","by","setSel","moveSel","how","rangeEnd","forward","cursorByChar","ltrAtCursor","Direction","cursorCharLeft","cursorCharRight","cursorByGroup","cursorGroupLeft","cursorGroupRight","interestingNode","node","bracketProp","len","moveBySyntax","syntaxTree","NodeProp","at","next","bracket","match","newPos","matchBrackets","cursorSyntaxLeft","cursorSyntaxRight","cursorByLine","moved","cursorLineUp","cursorLineDown","pageInfo","selfScroll","marginTop","marginBottom","height","source","margins","cursorByPage","page","effect","startPos","scrollRect","scrollTop","scrollBottom","cursorPageUp","cursorPageDown","moveByLineBoundary","space","cursorLineBoundaryForward","cursorLineBoundaryBackward","cursorLineBoundaryLeft","cursorLineBoundaryRight","cursorLineStart","cursorLineEnd","toMatchingBracket","extend","found","matching","head","cursorMatchingBracket","extendSel","selectByChar","selectCharLeft","selectCharRight","selectByGroup","selectGroupLeft","selectGroupRight","selectSyntaxLeft","selectSyntaxRight","selectByLine","selectLineUp","selectLineDown","selectByPage","selectPageUp","selectPageDown","selectLineBoundaryForward","selectLineBoundaryBackward","selectLineBoundaryLeft","selectLineBoundaryRight","selectLineStart","selectLineEnd","cursorDocStart","cursorDocEnd","selectDocStart","selectDocEnd","selectAll","selectLine","selectedLineBlocks","selectParentSyntax","tree","stack","stackBefore","cur","simplifySelection","deleteBy","towards","skipAtomic","deleteByChar","byIndentUnit","targetPos","col","countColumn","drop","getIndentUnit","findClusterBreak","deleteCharBackward","deleteCharForward","deleteByGroup","categorize","cat","nextChar","nextCat","deleteGroupBackward","deleteGroupForward","deleteToLineEnd","lineEnd","deleteLineBoundaryBackward","lineStart","deleteLineBoundaryForward","splitLine","Text","transposeChars","blocks","upto","startLine","endLine","prev","moveLine","block","nextLine","size","moveLineUp","moveLineDown","copyLine","copyLineUp","copyLineDown","deleteLine","dist","isBetweenBrackets","context","closedBy","insertNewlineAndIndent","newlineAndIndent","insertBlankLine","atEof","explode","cx","IndentContext","getIndentation","insert","indentString","changeBySelectedLine","atLine","indentSelection","updated","norm","indentMore","indentUnit","indentLess","keep","toggleTabFocusMode","emacsStyleKeymap","standardKeymap","defaultKeymap","indentWithTab","crelt","elt","name","add","child","basicNormalize","x","SearchCursor","text","query","normalize","test","codePointAt","str","fromCodePoint","codePointSize","code","end","index","baseFlags","RegExpCursor","options","MultilineRegExpCursor","toCharEnd","skip","off","flattened","FlattenedDoc","doc","cached","flat","cachedFrom","validRegExp","createLineDialog","input","dom","dialogEffect","go","sign","ln","cl","percent","pc","docLine","dialogField","showPanel","val","gotoLine","panel","getPanel","baseTheme$1","defaultHighlightOptions","highlightConfig","highlightSelectionMatches","defaultTheme","matchHighlighter","matchDeco","Decoration","mainMatchDeco","insideWordBoundaries","check","CharCategory","insideWord","ViewPlugin","update","conf","word","deco","part","cursor","v","selectWord","newSel","findNextOccurrence","main","fullWord","cycled","selectNextOccurrence","searchedText","searchConfigFacet","SearchPanel","SearchQuery","_","ch","RegExpQuery","StringQuery","st","EditorState","regexpCursor","stringCursor","QueryType","spec","stringWordTest","categorizer","buf","bufPos","charBefore","charAfter","curFrom","curTo","_result","limit","regexpWordTest","_from","_to","m","setSearchQuery","togglePanel","searchState","SearchState","defaultQuery","createSearchPanel","matchMark","selectedMatchMark","searchHighlighter","builder","RangeSetBuilder","selected","searchCommand","openSearchPanel","findNext","announceMatch","selectSearchInput","findPrevious","selectMatches","selectSelectionMatches","replaceNext","replacement","replaceAll","announceText","fallback","_d","_e","selText","getSearchInput","searchInput","searchExtensions","closeSearchPanel","searchKeymap","phrase","button","onclick","content","runScopeHandlers","AnnounceMargin","Break","baseTheme","Prec","CompletionContext","explicit","types","expr","ensureAnchor","type","listener","toSet","chars","words","prefixMatch","first","label","completeFromList","list","validFor","Option","completion","score","addStart","addEnd","pickedCompletion","insertCompletionText","fromOff","toOff","SourceCache","asSource","known","startCompletionEffect","closeCompletionEffect","FuzzyMatcher","pattern","p","char","upper","matched","folded","any","precise","byWord","firstSize","direct","anyTo","preciseTo","byWordTo","byWordFolded","adjacentTo","adjacentStart","adjacentEnd","hasLower","wordAdjacent","prevType","positions","StrictMatcher","completionConfig","defaultPositionInfo","joinClass","info","tooltip","rtl","left","narrow","offset","maxWidth","spaceLeft","spaceRight","infoWidth","infoHeight","spaceBelow","scaleY","scaleX","optionContent","icon","cls","_s","_v","labelElt","j","span","detailElt","rangeAroundSelected","total","max","CompletionTooltip","stateField","applyCompletion","cState","id","prevState","disabled","infoResult","obj","logException","wrap","destroy","set","opt","scrollIntoView","listRect","infoRect","selRect","win","ul","curSection","section","header","li","completionTooltip","container","element","parent","self","sortOptions","active","sections","addOption","getMatch","matcher","sectionOrder","cmp","compare","CompletionDialog","attrs","timestamp","makeAttrs","didSetActive","selectedValue","createTooltip","CompletionState","ActiveSource","didSet","setActiveEffect","sameResults","setSelectedEffect","baseAttrs","noAttrs","iA","iB","endA","endB","getUpdateType","typing","ActiveResult","checkValid","sources","completionState","showTooltip","apply","moveCompletionSelection","step","getTooltip","acceptCompletion","startCompletion","closeCompletion","RunningQuery","MaxUpdateCount","MinAbortTime","completionPlugin","doesReset","handler","delay","q","pending","err","current","dialog","windows","commitCharacters","field","commitChars","defaults","closeBracketEffect","MapMode","closedBracket","RangeValue","bracketState","RangeSet","closeBrackets","inputHandler","definedClosing","closing","android","insertBracket","deleteBracketPair","dont","prevChar","closeBracketsKeymap","tok","closed","handleSame","handleOpen","closedBracketAt","handleClose","closeBefore","_open","allowTriple","stringPrefixes","nodeStart","canStartStringAt","probablyInString","quoteToken","prefixes","maxPrefix","quotePos","charCat","prefix","autocompletion","completionKeymapExt","completionKeymap","keymap","SelectedDiagnostic","diagnostic","LintState","diagnostics","markedDiagnostics","diagnosticFilter","lintConfig","d","DiagnosticWidget","findDiagnostic","hideTooltip","setDiagnosticsEffect","maybeEnableLint","lintState","lintExtensions","setDiagnostics","movePanelSelection","selPos","LintPanel","activeMark","lintTooltip","stackStart","stackEnd","diagnosticsTooltip","renderDiagnostic","openLintPanel","closeLintPanel","nextDiagnostic","lintKeymap","u","assignKeys","actions","assigned","inPanel","keys","action","fired","click","keyIndex","nameElt","WidgetType","PanelItem","onkeydown","needsSync","newSelectedItem","_start","_end","domPos","rm","selectedIndex","svg","underline","color","hoverTooltip","basicSetup","lineNumbers","highlightActiveLineGutter","highlightSpecialChars","foldGutter","drawSelection","dropCursor","indentOnInput","syntaxHighlighting","defaultHighlightStyle","bracketMatching","rectangularSelection","crosshairCursor","highlightActiveLine","foldKeymap","debounce","func","threshold","execAsap","timeout","args","delayed","ctx","insert_hydration","div2","anchor","append_hydration","div1","pre","div","create_if_block","classes","$$props","basic","lang","theme","extensions","useTab","tabSize","styles","lineWrapping","editable","readonly","placeholder","nodebounce","is_browser","createEventDispatcher","update_from_prop","update_from_state","first_config","first_update","onMount","$$invalidate","create_editor_view","onDestroy","create_editor_state","transaction","on_change","reconfigure","state_extensions","value2","handle_change","new_value","get_base_extensions","basic2","useTab2","tabSize2","lineWrapping2","placeholder2","editable2","readonly2","lang2","extensions2","placeholderExt","get_theme","theme2","styles2","$$value","Stack","reducePos","buffer","bufferBase","curContext","lookAhead","StackContext","depth","parser","lookaheadRecord","dPrec","base","count","baseStateID","term","mustSink","top","mustMove","scan","nextState","nextStart","nextEnd","isNode","sim","SimulatedStack","nextStates","best","reduce","backup","seen","explore","rDepth","dialectID","newCx","tracker","goto","StackBufferCursor","decodeArray","Type","array","out","stop","digit","CachedToken","nullToken","InputStream","assoc","idx","resolved","endOffset","endPos","chunk","chunkPos","nextChunk","n","TokenGroup","readToken","LocalTokenGroup","precTable","elseToken","skipped","nextPos","ExternalTokenizer","group","precOffset","groupMask","dialect","accEnd","overrides","low","high","mid","findOffset","tableData","tableOffset","iPrev","verbose","define_process_env_default","stackIDs","cutAt","IterMode","FragmentCursor","fragments","nodeSet","fr","Tree","TokenCache","stream","actionIndex","tokenizers","mask","tokenizer","startIndex","pair","Parse","stacks","newStacks","stopped","stoppedTokens","finished","findFinished","maxRemaining","outer","split","strictCx","cxHash","inner","defaultReduce","localStack","pushStackDedup","restarted","tokenEnd","force","forceBase","Dialect","flags","ContextTracker","LRParser","Parser","nodeNames","topTerms","nodeProps","setProp","nodeID","prop","propSpec","NodeSet","NodeType","DefaultBufferLength","tokenArray","getSpecializer","parse","w","loose","table","groupTag","terminal","slot","flag","deflt","copy","prec","values","blockEnd","eof","DirectiveEnd","DocEnd","sequenceStartMark","sequenceContinueMark","explicitMapStartMark","explicitMapContinueMark","flowMapMark","mapStartMark","mapContinueMark","Literal","QuotedLiteral","Anchor","Alias","Tag","BlockLiteralContent","BracketL","FlowSequence","Colon","BraceL","FlowMapping","BlockLiteralHeader","type_Top","type_Seq","type_Map","type_Flow","type_Lit","Context","findColumn","isBreakSpace","isNonBreakSpace","isSpace","isSep","indentation","three","newlines","blockMark","readTag","readAnchor","readQuoted","scanBrackets","readPlain","uriChar","hexChar","readUriChar","quoted","charTag","quote","lineBreak","charTable","isSafe","inFlow","tag","lineIndent","literals","blockLiteral","isBreak","yamlHighlighting","styleTags","tags","yamlLanguage","LRLanguage","parser$1","indentNodeProp","delimitedIndent","foldNodeProp","foldInside","yaml","LanguageSupport","DocumentUri","is","URI","integer","uinteger","Position","create","character","candidate","Is","Range","one","two","four","Location","uri","LocationLink","targetUri","targetRange","targetSelectionRange","originSelectionRange","Color","red","green","blue","alpha","ColorInformation","ColorPresentation","textEdit","additionalTextEdits","TextEdit","FoldingRangeKind","FoldingRange","startCharacter","endCharacter","kind","collapsedText","DiagnosticRelatedInformation","location","message","DiagnosticSeverity","DiagnosticTag","CodeDescription","Diagnostic","severity","relatedInformation","Command","title","replace","newText","position","del","ChangeAnnotation","needsConfirmation","description","ChangeAnnotationIdentifier","AnnotatedTextEdit","annotation","TextDocumentEdit","textDocument","edits","OptionalVersionedTextDocumentIdentifier","CreateFile","RenameFile","oldUri","newUri","DeleteFile","WorkspaceEdit","change","TextEditChangeImpl","changeAnnotations","edit","ChangeAnnotations","annotations","idOrAnnotation","WorkspaceChange","workspaceEdit","textEditChange","key","textDocumentEdit","optionsOrAnnotation","operation","TextDocumentIdentifier","VersionedTextDocumentIdentifier","version","TextDocumentItem","languageId","MarkupKind","MarkupContent","CompletionItemKind","InsertTextFormat","CompletionItemTag","InsertReplaceEdit","InsertTextMode","CompletionItemLabelDetails","CompletionItem","CompletionList","items","isIncomplete","MarkedString","fromPlainText","plainText","Hover","ParameterInformation","documentation","SignatureInformation","parameters","DocumentHighlightKind","DocumentHighlight","SymbolKind","SymbolTag","SymbolInformation","containerName","WorkspaceSymbol","DocumentSymbol","detail","selectionRange","children","CodeActionKind","CodeActionTriggerKind","CodeActionContext","only","triggerKind","CodeAction","kindOrCommandOrEdit","checkKind","CodeLens","FormattingOptions","insertSpaces","DocumentLink","SelectionRange","SemanticTokenTypes","SemanticTokenModifiers","SemanticTokens","InlineValueText","InlineValueVariableLookup","variableName","caseSensitiveLookup","InlineValueEvaluatableExpression","expression","InlineValueContext","frameId","stoppedLocation","InlayHintKind","InlayHintLabelPart","InlayHint","StringValue","createSnippet","InlineCompletionItem","insertText","filterText","InlineCompletionList","InlineCompletionTriggerKind","SelectedCompletionInfo","InlineCompletionContext","selectedCompletionInfo","WorkspaceFolder","EOL","TextDocument","FullTextDocument","applyEdits","document","sortedEdits","mergeSort","diff","lastModifiedOffset","startOffset","right","leftIdx","rightIdx","FullTextDocument$1","lineOffsets","isLineStart","lineOffset","nextLineOffset","toString","defined","undefined","boolean","string","number","numberRange","min","objectLiteral","typedArray","error","stringArray","elem","messages","require$$0","ErrorCodes","ResponseError","ParameterStructures","AbstractMessageSignature","method","numberOfParams","RequestType0","RequestType","_parameterStructures","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","NotificationType","NotificationType0","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","Message","isRequest","isNotification","isResponse","linkedMap","Touch","LinkedMap","touch","callbackfn","thisArg","iterator","newSize","currentSize","previous","LRUCache","ratio","disposable","Disposable","ral","_ral","RAL","install","events","ral_1","Event","_disposable","CallbackList","callback","bucket","foundCallbackWithDifferentContext","ret","callbacks","contexts","Emitter","_options","thisArgs","disposables","cancellation","require$$1","events_1","require$$2","CancellationToken","shortcutEvent","handle","MutableToken","CancellationTokenSource","sharedArrayCancellation","cancellation_1","CancellationState","SharedArraySenderStrategy","request","_conn","SharedArrayBufferCancellationToken","SharedArrayBufferCancellationTokenSource","SharedArrayReceiverStrategy","semaphore","Semaphore","capacity","thunk","resolve","reject","messageReader","semaphore_1","require$$3","MessageReader","AbstractMessageReader","ResolvedMessageReaderOptions","fromOptions","charset","contentDecoder","contentDecoders","contentTypeDecoder","contentTypeDecoders","decoder","ReadableStreamMessageReader","readable","headers","contentLength","body","bytes","messageWriter","ContentLength","CRLF","MessageWriter","AbstractMessageWriter","ResolvedMessageWriterOptions","WriteableStreamMessageWriter","writable","msg","messageBuffer","CR","LF","AbstractMessageBuffer","encoding","toAppend","lowerCaseKeys","chunkIndex","chunkBytesRead","row","byteCount","resultOffset","chunkPart","exports","messages_1","linkedMap_1","require$$4","require$$5","CancelNotification","ProgressToken","ProgressNotification","ProgressType","StarRequestHandler","Trace","TraceValues","fromString","TraceFormat","SetTraceNotification","LogTraceNotification","ConnectionErrors","ConnectionError","ConnectionStrategy","IdCancellationReceiverStrategy","RequestCancellationReceiverStrategy","CancellationReceiverStrategy","CancellationSenderStrategy","conn","CancellationStrategy","MessageStrategy","ConnectionOptions","ConnectionState","createMessageConnection","_logger","logger","sequenceNumber","notificationSequenceNumber","unknownResponseSequenceNumber","starRequestHandler","requestHandlers","starNotificationHandler","notificationHandlers","progressHandlers","timer","messageQueue","responsePromises","knownCanceledRequests","requestTokens","trace","traceFormat","tracer","errorEmitter","closeEmitter","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","cancellationStrategy","createRequestQueueKey","createResponseQueueKey","createNotificationQueueKey","addMessageToQueue","queue","cancelUndispatched","_message","isListening","isClosed","isDisposed","closeHandler","readErrorHandler","writeErrorHandler","triggerMessageQueue","processMessageQueue","handleMessage","handleRequest","handleNotification","handleResponse","handleInvalidMessage","messageStrategy","cancelId","toCancel","strategy","response","traceSendingResponse","cancellationToken","traceReceivedNotification","requestMessage","reply","resultOrError","startTime","replyError","replySuccess","traceReceivedRequest","requestHandler","tokenKey","cancellationSource","handlerResult","promise","responseMessage","responsePromise","traceReceivedResponse","notificationHandler","params","responseHandler","stringifyTrace","traceSendingRequest","logLSPMessage","traceSendingNotification","lspMessage","throwIfClosedOrDisposed","throwIfListening","throwIfNotListening","undefinedToNull","param","nullToUndefined","isNamedParam","computeSingleParam","parameterStructures","computeMessageParams","connection","messageParams","paramStart","paramEnd","notificationMessage","_type","resolveWithCleanup","rejectWithCleanup","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","disposable_1","sharedArrayCancellation_1","messageReader_1","require$$6","messageWriter_1","require$$7","messageBuffer_1","require$$8","connection_1","require$$9","require$$10","ril","api_1","MessageBuffer","_encoding","ReadableStreamWrapper","socket","WritableStreamWrapper","_textEncoder","_ril","ms","RIL","__createBinding","this","k","k2","desc","__exportStar","BrowserMessageReader","port","BrowserMessageWriter","reader","writer","browser","vscode_jsonrpc_1","MessageDirection","RegistrationType","ProtocolRequestType0","ProtocolRequestType","ProtocolNotificationType0","ProtocolNotificationType","protocol_implementation","ImplementationRequest","protocol_typeDefinition","TypeDefinitionRequest","protocol_workspaceFolder","WorkspaceFoldersRequest","DidChangeWorkspaceFoldersNotification","protocol_configuration","ConfigurationRequest","protocol_colorProvider","DocumentColorRequest","ColorPresentationRequest","protocol_foldingRange","FoldingRangeRequest","FoldingRangeRefreshRequest","protocol_declaration","DeclarationRequest","protocol_selectionRange","SelectionRangeRequest","protocol_progress","WorkDoneProgress","WorkDoneProgressCreateRequest","WorkDoneProgressCancelNotification","protocol_callHierarchy","CallHierarchyPrepareRequest","CallHierarchyIncomingCallsRequest","CallHierarchyOutgoingCallsRequest","protocol_semanticTokens","TokenFormat","SemanticTokensRegistrationType","SemanticTokensRequest","SemanticTokensDeltaRequest","SemanticTokensRangeRequest","SemanticTokensRefreshRequest","protocol_showDocument","ShowDocumentRequest","protocol_linkedEditingRange","LinkedEditingRangeRequest","protocol_fileOperations","FileOperationPatternKind","WillCreateFilesRequest","DidCreateFilesNotification","WillRenameFilesRequest","DidRenameFilesNotification","DidDeleteFilesNotification","WillDeleteFilesRequest","protocol_moniker","UniquenessLevel","MonikerKind","MonikerRequest","protocol_typeHierarchy","TypeHierarchyPrepareRequest","TypeHierarchySupertypesRequest","TypeHierarchySubtypesRequest","protocol_inlineValue","InlineValueRequest","InlineValueRefreshRequest","protocol_inlayHint","InlayHintRequest","InlayHintResolveRequest","InlayHintRefreshRequest","protocol_diagnostic","DiagnosticServerCancellationData","DocumentDiagnosticReportKind","DocumentDiagnosticRequest","WorkspaceDiagnosticRequest","DiagnosticRefreshRequest","protocol_notebook","vscode_languageserver_types_1","NotebookCellKind","ExecutionSummary","executionOrder","success","equals","NotebookCell","equalsMetadata","oneArray","otherArray","oneKeys","otherKeys","NotebookDocument","notebookType","cells","NotebookDocumentSyncRegistrationType","DidOpenNotebookDocumentNotification","NotebookCellArrayChange","deleteCount","DidChangeNotebookDocumentNotification","DidSaveNotebookDocumentNotification","DidCloseNotebookDocumentNotification","protocol_inlineCompletion","InlineCompletionRequest","protocol_implementation_1","protocol_typeDefinition_1","protocol_workspaceFolder_1","protocol_configuration_1","protocol_colorProvider_1","protocol_foldingRange_1","protocol_declaration_1","protocol_selectionRange_1","protocol_progress_1","require$$11","protocol_callHierarchy_1","require$$12","protocol_semanticTokens_1","require$$13","protocol_showDocument_1","require$$14","protocol_linkedEditingRange_1","require$$15","protocol_fileOperations_1","require$$16","protocol_moniker_1","require$$17","protocol_typeHierarchy_1","require$$18","protocol_inlineValue_1","require$$19","protocol_inlayHint_1","require$$20","protocol_diagnostic_1","require$$21","protocol_notebook_1","require$$22","protocol_inlineCompletion_1","require$$23","TextDocumentFilter","NotebookDocumentFilter","NotebookCellTextDocumentFilter","DocumentSelector","RegistrationRequest","UnregistrationRequest","ResourceOperationKind","FailureHandlingKind","PositionEncodingKind","StaticRegistrationOptions","hasId","TextDocumentRegistrationOptions","WorkDoneProgressOptions","hasWorkDoneProgress","InitializeRequest","InitializeErrorCodes","InitializedNotification","ShutdownRequest","ExitNotification","DidChangeConfigurationNotification","MessageType","ShowMessageNotification","ShowMessageRequest","LogMessageNotification","TelemetryEventNotification","TextDocumentSyncKind","DidOpenTextDocumentNotification","TextDocumentContentChangeEvent","isIncremental","isFull","DidChangeTextDocumentNotification","DidCloseTextDocumentNotification","DidSaveTextDocumentNotification","TextDocumentSaveReason","WillSaveTextDocumentNotification","WillSaveTextDocumentWaitUntilRequest","DidChangeWatchedFilesNotification","FileChangeType","RelativePattern","WatchKind","PublishDiagnosticsNotification","CompletionTriggerKind","CompletionRequest","CompletionResolveRequest","HoverRequest","SignatureHelpTriggerKind","SignatureHelpRequest","DefinitionRequest","ReferencesRequest","DocumentHighlightRequest","DocumentSymbolRequest","CodeActionRequest","CodeActionResolveRequest","WorkspaceSymbolRequest","WorkspaceSymbolResolveRequest","CodeLensRequest","CodeLensResolveRequest","CodeLensRefreshRequest","DocumentLinkRequest","DocumentLinkResolveRequest","DocumentFormattingRequest","DocumentRangeFormattingRequest","DocumentRangesFormattingRequest","DocumentOnTypeFormattingRequest","PrepareSupportDefaultBehavior","RenameRequest","PrepareRenameRequest","ExecuteCommandRequest","ApplyWorkspaceEditRequest","createProtocolConnection","output","LSPErrorCodes","browser_1","imports","wasm","heap","getObject","heap_next","dropObject","takeObject","WASM_VECTOR_LEN","cachedUint8Memory0","getUint8Memory0","cachedTextEncoder","encodeString","arg","passStringToWasm0","malloc","realloc","ptr","mem","isLikeNone","cachedInt32Memory0","getInt32Memory0","cachedTextDecoder","getStringFromWasm0","addHeapObject","cachedFloat64Memory0","getFloat64Memory0","cachedBigInt64Memory0","getBigInt64Memory0","debugString","debug","builtInMatches","className","makeMutClosure","arg0","arg1","dtor","real","__wbg_adapter_50","arg2","_assertClass","instance","klass","cachedUint32Memory0","getUint32Memory0","passArrayJsValueToWasm0","getArrayJsValueFromWasm0","slice","stack_pointer","addBorrowedObject","passArray8ToWasm0","handleError","__wbg_adapter_190","arg3","ErrorCode","MetaStore","include_rain_subgraphs","retptr","r0","r1","v1","subgraphs","hash","ptr0","len0","ptr1","len1","keep_meta","keep_old","r2","RainDocument","meta_store","rebinds","v2","new_text","deferred1_0","deferred1_1","entrypoints","ptr2","len2","RainLanguageServices","text_document","related_information","rain_document","documentation_format","content_format","semantic_token_types_index","semantic_token_modifiers_len","__wbg_get_imports","arg4","state0","cb0","Buffer","wasmB64","wasmModule","wasmInstance","getWellformedRange","addedLineOffsets","computeLineOffsets","isEOL","getWellformedEdit","spans","isAtLineStart","textOffset","FrontMatter","ElisionMsg","frontMatter","_stack","elisionMsg","highlight","fold","RainlangLR","parseMixed","_input","toTextDocumentItem","RainLanguageServicesPlugin","metaStore","hover","getHoverTooltip","completions","getCompletion","rainDocument","getDiagnostics","npErrors","RawRainLanguageServicesPlugin","contents","_view","completionItems","CompletionItemKindMap","sortText","_span","_match","problems","preamble","initial","restStr","useLast","RainLanguageServicesFacet","RainlangExtension","rainViewPlugin","ext","RawRainlangExtension","LanguageDescription"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58]}