{"version":3,"file":"7.8rHqVKrF.js","sources":["../../../../../../../node_modules/flowbite-svelte-icons/dist/CheckOutline.svelte","../../../../../../../node_modules/flowbite-svelte-icons/dist/CloseOutline.svelte","../../../../../../src/lib/components/CodeMirrorConfigSource.svelte","../../../../../../src/routes/settings/+page.svelte"],"sourcesContent":["<script>import { getContext } from \"svelte\";\nimport { twMerge } from \"tailwind-merge\";\nconst ctx = getContext(\"iconCtx\") ?? {};\nconst sizes = {\n    xs: \"w-3 h-3\",\n    sm: \"w-4 h-4\",\n    md: \"w-5 h-5\",\n    lg: \"w-6 h-6\",\n    xl: \"w-8 h-8\"\n};\nexport let size = ctx.size || \"md\";\nexport let role = ctx.role || \"img\";\nexport let strokeLinecap = ctx.strokeLinecap || \"round\";\nexport let strokeLinejoin = ctx.strokeLinejoin || \"round\";\nexport let strokeWidth = ctx.strokeWidth || \"2\";\nexport let ariaLabel = \"check outline\";\n</script>\n\n<svg\n  xmlns=\"http://www.w3.org/2000/svg\"\n  fill=\"none\"\n  {...$$restProps}\n  class={twMerge('shrink-0', sizes[size], $$props.class)}\n  {role}\n  aria-label={ariaLabel}\n  viewBox=\"0 0 16 12\"\n  on:click\n  on:keydown\n  on:keyup\n  on:focus\n  on:blur\n  on:mouseenter\n  on:mouseleave\n  on:mouseover\n  on:mouseout\n>\n  <path\n    stroke=\"currentColor\"\n    stroke-linecap={strokeLinecap}\n    stroke-linejoin={strokeLinejoin}\n    stroke-width={strokeWidth}\n    d=\"M1 5.917 5.724 10.5 15 1.5\"\n  />\n</svg>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte-icons.vercel.app/)\n## Props\n@prop export let size: 'xs' | 'sm' | 'md' | 'lg' | 'xl' = ctx.size || 'md';\n@prop export let role = ctx.role || 'img';\n@prop export let strokeLinecap: 'round' | 'inherit' | 'butt' | 'square' | null | undefined =\n    ctx.strokeLinecap || 'round';\n@prop export let strokeLinejoin: 'round' | 'inherit' | 'miter' | 'bevel' | null | undefined =\n    ctx.strokeLinejoin || 'round';\n@prop export let strokeWidth = ctx.strokeWidth || '2';\n@prop export let ariaLabel = 'check outline';\n-->\n","<script>import { getContext } from \"svelte\";\nimport { twMerge } from \"tailwind-merge\";\nconst ctx = getContext(\"iconCtx\") ?? {};\nconst sizes = {\n    xs: \"w-3 h-3\",\n    sm: \"w-4 h-4\",\n    md: \"w-5 h-5\",\n    lg: \"w-6 h-6\",\n    xl: \"w-8 h-8\"\n};\nexport let size = ctx.size || \"md\";\nexport let role = ctx.role || \"img\";\nexport let strokeLinecap = ctx.strokeLinecap || \"round\";\nexport let strokeLinejoin = ctx.strokeLinejoin || \"round\";\nexport let strokeWidth = ctx.strokeWidth || \"2\";\nexport let ariaLabel = \"close outline\";\n</script>\n\n<svg\n  xmlns=\"http://www.w3.org/2000/svg\"\n  fill=\"none\"\n  {...$$restProps}\n  class={twMerge('shrink-0', sizes[size], $$props.class)}\n  {role}\n  aria-label={ariaLabel}\n  viewBox=\"0 0 14 14\"\n  on:click\n  on:keydown\n  on:keyup\n  on:focus\n  on:blur\n  on:mouseenter\n  on:mouseleave\n  on:mouseover\n  on:mouseout\n>\n  <path\n    stroke=\"currentColor\"\n    stroke-linecap={strokeLinecap}\n    stroke-linejoin={strokeLinejoin}\n    stroke-width={strokeWidth}\n    d=\"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6\"\n  />\n</svg>\n\n<!--\n@component\n[Go to docs](https://flowbite-svelte-icons.vercel.app/)\n## Props\n@prop export let size: 'xs' | 'sm' | 'md' | 'lg' | 'xl' = ctx.size || 'md';\n@prop export let role = ctx.role || 'img';\n@prop export let strokeLinecap: 'round' | 'inherit' | 'butt' | 'square' | null | undefined =\n    ctx.strokeLinecap || 'round';\n@prop export let strokeLinejoin: 'round' | 'inherit' | 'miter' | 'bevel' | null | undefined =\n    ctx.strokeLinejoin || 'round';\n@prop export let strokeWidth = ctx.strokeWidth || '2';\n@prop export let ariaLabel = 'close outline';\n-->\n","<script lang=\"ts\">\n  import CodeMirror from 'svelte-codemirror-editor';\n  import { codeMirrorTheme } from '$lib/stores/darkMode';\n  import { yaml } from '@codemirror/lang-yaml';\n  import { checkConfigErrors } from '$lib/services/configCodemirrorProblems';\n  import { RawRainlangExtension } from 'codemirror-rainlang';\n  import { openLintPanel } from '@codemirror/lint';\n\n  export let value: string;\n  export let disabled = false;\n  export let styles = {};\n\n  const configStringExtension = new RawRainlangExtension({\n    hover: async () => null,\n    completion: async () => null,\n    diagnostics: async (textDocument) => checkConfigErrors([textDocument.text]),\n  });\n</script>\n\n<CodeMirror\n  bind:value\n  extensions={[configStringExtension]}\n  lang={yaml()}\n  theme={$codeMirrorTheme}\n  readonly={disabled}\n  useTab={true}\n  tabSize={2}\n  styles={{\n    '&': {\n      width: '100%',\n    },\n    ...styles,\n  }}\n  on:ready={(e) => {\n    openLintPanel(e.detail);\n  }}\n/>\n\n<style global>\n  :global(.Í¼1 .cm-panel.cm-panel-lint ul [aria-selected]) {\n    background-color: inherit;\n  }\n</style>\n","<script lang=\"ts\">\n  import { Alert, Spinner } from 'flowbite-svelte';\n  import { settingsText, settingsFile } from '$lib/stores/settings';\n  import { PageHeader } from '@rainlanguage/ui-components';\n  import CodeMirrorConfigSource from '$lib/components/CodeMirrorConfigSource.svelte';\n  import FileTextarea from '$lib/components/FileTextarea.svelte';\n  import { useDebouncedFn } from '$lib/utils/asyncDebounce';\n  import { onMount } from 'svelte';\n  import { CheckOutline, CloseOutline } from 'flowbite-svelte-icons';\n  import { page } from '$app/stores';\n  import { applySettings, type ApplySettingsResult } from '$lib/services/applySettings';\n  import { get } from 'svelte/store';\n\n  let settingsStatus: ApplySettingsResult['settingsStatus'] = 'checking';\n  let errorMessage: string | undefined = undefined;\n  let height = 500;\n\n  function updateHeight() {\n    height = window.innerHeight - 320;\n  }\n\n  onMount(() => {\n    updateHeight();\n    window.addEventListener('resize', updateHeight);\n    const fileText = get(settingsFile).text;\n    if (fileText && fileText.trim() !== '') {\n      handleApply(fileText);\n    } else {\n      settingsStatus = 'success';\n      errorMessage = undefined;\n    }\n    return () => window.removeEventListener('resize', updateHeight);\n  });\n\n  async function handleApply(settingsContent: string): Promise<void> {\n    settingsStatus = 'checking';\n    errorMessage = undefined;\n\n    const result = await applySettings(settingsContent, settingsText);\n\n    settingsStatus = result.settingsStatus;\n    if (result.errorMessage) {\n      errorMessage = result.errorMessage;\n    }\n  }\n\n  const { debouncedFn: debouncedHandleApply } = useDebouncedFn(handleApply, 1000);\n\n  $: if (\n    $settingsFile.text !== undefined &&\n    typeof $settingsFile.text === 'string' &&\n    $settingsFile.text.trim() !== ''\n  ) {\n    debouncedHandleApply($settingsFile.text);\n  }\n</script>\n\n<div class=\"mb-4\">\n  <PageHeader title=\"Settings\" pathname={$page.url.pathname} />\n\n  <Alert color=\"blue\" class=\"mb-4 mt-8 text-lg\">\n    Looking for some settings to get started? Check out the <a\n      class=\"underline\"\n      target=\"_blank\"\n      href=\"https://docs.rainlang.xyz/raindex/getting-started\">getting started guide</a\n    >\n  </Alert>\n</div>\n\n<FileTextarea textFile={settingsFile}>\n  <svelte:fragment slot=\"alert\">\n    {#if settingsStatus === 'checking'}\n      <Alert color=\"blue\" class=\"flex h-10 items-center text-blue-600 dark:text-blue-400\">\n        <Spinner class=\"mr-2\" size=\"4\" />\n        <span>Checking settings...</span>\n      </Alert>\n    {:else if settingsStatus === 'success'}\n      <Alert color=\"green\" class=\"flex h-10 items-center text-green-600 dark:text-green-400\">\n        <CheckOutline class=\"mr-2\" size=\"xs\" />\n        <span>Settings applied successfully</span>\n      </Alert>\n    {:else if settingsStatus === 'error'}\n      <Alert color=\"red\" class=\"flex flex-col text-red-600 dark:text-red-400\">\n        <div class=\"mb-2 flex items-center\">\n          <CloseOutline class=\"mr-2\" size=\"xs\" />\n          <span>Error applying settings</span>\n        </div>\n        <span>{errorMessage}</span>\n      </Alert>\n    {/if}\n  </svelte:fragment>\n\n  <svelte:fragment slot=\"textarea\">\n    <CodeMirrorConfigSource\n      bind:value={$settingsFile.text}\n      styles={{ '&': { maxHeight: `${height - (errorMessage ? 35 : 0)}px`, height: '100%' } }}\n    />\n  </svelte:fragment>\n</FileTextarea>\n"],"names":["ctx","twMerge","insert_hydration","target","svg","anchor","append_hydration","path","svg_class_value","getContext","sizes","size","$$props","role","strokeLinecap","strokeLinejoin","strokeWidth","ariaLabel","yaml","value","disabled","styles","configStringExtension","RawRainlangExtension","textDocument","checkConfigErrors","e","openLintPanel","a","div","span0","span1","span","codemirrorconfigsource_props","codemirrorconfigsource_changes","settingsFile","settingsStatus","errorMessage","height","updateHeight","$$invalidate","onMount","fileText","get","handleApply","settingsContent","result","applySettings","settingsText","debouncedHandleApply","useDebouncedFn","$$self","$settingsFile"],"mappings":"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","x_google_ignoreList":[0,1]}